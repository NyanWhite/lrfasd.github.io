<!DOCTYPE html><html><head><meta http-equiv="Content-Type"content="text/html;charset=UTF-8"/><meta name="viewport"content="width=device-width,initial-scale=1,user-scalable=yes"/><style type="text/css">#divRoot{text-align:center}#divTitle{clear:both;margin:16px}#divFile{margin:3px}#inputRes{display:none}#divOperate{margin:3px}#divOperatePkg{display:none}#divOperateSer{display:none}#divOperateTex{display:none}#divSave{margin:3px;display:none}#aOpen{display:none}#divResult{font-family:Consolas}#divCopyright{clear:both;margin:16px}</style></head><body><div id="divRoot"><div id="divTitle"></div><div id="divFile"><input id="inputFile"type="file"multiple="multiple"/><a id="inputRes"href="javascript:void(0)">+</a></div><div id="divOperate"><div id="divOperatePkg"><label title="AllFile"><input type="checkbox"id="inputPkgAllfile">全部文件</input></label><div id="divListPkg"><select id="selectPkgList"title="List"></select></div></div><div id="divOperateSer"><div id="divSelectSer"><select id="selectSerMode"title="Type"><option value="json">json</option><option value="csv"selected="selected">csv</option></select></div><div id="divListSer"><select id="selectSerList"title="List"></select></div></div><div id="divOperateTex"><div id="divSelectTex"><select id="selectTexMode"title="Type"><option value="bmp"selected="selected">bmp</option><option value="png">png</option></select></div></div><div id="divSave"><a id="aOpen"href="javascript:void(0)"title="Open">↑</a><a id="aSave"title="Save">保存</a></div></div><div id="divResult"></div><div id="divCopyright"></div></div><script type="text/javascript">
var Version="20200917";window.isType=function(type,t){return Object.prototype.toString.call(t).match(/\[object (.*?)\]/)[1]===type;};window.isNull=function(t){return isType("Null",t);};window.isUndefined=function(t){return typeof t==="undefined";};window.isObject=function(t){return typeof t==="object";};window.isArray=function(t){return Array.isArray(t);};window.isString=function(t){return typeof t==="string";};window.isNumber=function(t){return typeof t==="number";};window.isUint8Array=function(t){return(typeof t==="object")&&!isNull(t)&&!isUndefined(t["BYTES_PER_ELEMENT"])&&(t["BYTES_PER_ELEMENT"]===1);};window.isInteger=function(t){return Math.round(t)===t;};window.isPositiveDecimal=function(t){var v=t.match(/^\d+$/);return(v!==null)&&(v>0);};window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContex;navigator.requestMIDIAccess=navigator.requestMIDIAccess||navigator.webkitRequestMIDIAccess||navigator.mozRequestMIDIAccess||navigator.msRequestMIDIAccess;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;navigator.getGamepads=navigator.getGamepads||navigator.webkitGetGamepads||navigator.mozGetGamepads||navigator.msGetGamepads;Number.prototype.toAbbreviated=function(l){return Math.round(this*Math.pow(10,l))/Math.pow(10,l);};Number.prototype.toByteLength=function(){var l=(arguments.length>0?arguments[0]:0);var v=this;var m=["B","KB","MB","GB","TB","PB","EB","ZB","YB","DB","NB"];var n=0;while(n<m.length-1){if(v>1024){n+=1;v/=1024;}
else{break;}}
return v.toFixed(l)+m[n];};Number.prototype.getFlag=function(s){var l=(arguments.length>1?arguments[1]:1);var e=s+l;var m=0;for(var i=s;i<e;i++){m+=1<<i;}
return(this&m)>>s;};Number.prototype.mergeLong=function(t){return(this-(this.getFlag(0x3F)?0x100000000:0))*0x100000000+t;};String.prototype.toLowerCase=function(){var n=(arguments.length>0?arguments[0]:this.length);n=(n<0?0:n);var v=this.split("");for(var i=0;i<n;i++){var c=v[i].charCodeAt();if((c>0x40)&&(c<0x5B)){v[i]=String.fromCharCode(c+0x20);}}
return v.join("");};String.prototype.toUpperCase=function(){var n=(arguments.length>0?arguments[0]:this.length);n=(n<0?0:n);var v=this.split("");for(var i=0;i<n;i++){var c=v[i].charCodeAt();if((c>0x60)&&(c<0x7B)){v[i]=String.fromCharCode(c-0x20);}}
return v.join("");};String.prototype.splice=function(s,n){var c=(arguments.length>2?arguments[2]:"");var r=[];r.push(this.slice(0,s));r.push(c);r.push(this.slice(s+n));return r.join("");};String.prototype.extract=function(f1,f2){var s=(arguments.length>2?arguments[2]:0);var l1=this.indexOf(f1,s);if(l1==-1){return"";}
var l2=this.indexOf(f2,l1+f1.length);if(l2==-1){return"";}
return this.slice(l1+f1.length,l2);};String.prototype.trimLeft=function(){var c=(arguments.length>0?arguments[0]:" ");var n=0;while(this.slice(n,n+c.length)==c){n+=c.length;}
return this.slice(n,this.length+1);};String.prototype.trimRight=function(){var c=(arguments.length>0?arguments[0]:" ");var n=this.length;while(this.slice(n-c.length,n)==c){n-=c.length;}
return this.slice(0,n);};String.prototype.reverse=function(){return this.split("").reverse().join("");};String.prototype.splitEvery=function(n){var r=[];for(var i=0;i<this.length;i++){r.push(this.slice(i,i+n));i+=n-1;}
return r;};String.prototype.insertEvery=function(n,c){return this.splitEvery(n).join(c);};String.prototype.toHtml=function(){return this.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/"/g,"&quot;");};String.prototype.isHex=function(){var h=this.toUpperCase();var s="0123456789ABCDEF";for(var i=0;i<this.length;i++){if(s.indexOf(h[i])==-1){return false;}}
return true;};String.prototype.isBase64=function(){return(this.replace(/[A-Za-z0-9+/=]/g,"")?false:true);};String.prototype.isDataUrl=function(){if(this==""){return false;}
var d=this.split(",");if(d.length!=2){return false;}
var h=d[0].split(":");if(h.length!=2){return false;}
if(h[0].toLowerCase()!="data"){return false;}
var t=h[1].split(";");if(t.length!=2){return false;}
if(t[1].toLowerCase()!="base64"){return false;}
var l=t[0].indexOf("/");if(l==-1){return false;}
if(!d[1].isBase64()){return false;}
return true;};Array.prototype.writes=function(t){var s=(arguments.length>1?arguments[1]:this.length);if(isUndefined(t.length)||!isObject(t)){t=[t];}
if(t.length==0){return this;}
if(s<0){s=0;}
for(var i=0;i<t.length;i++){this[s+i]=t[i];}
return this;};Array.prototype.write=function(t){var s=(arguments.length>1?arguments[1]:this.length);this.writes([t],s);return this;};Uint8Array.prototype.find=function(t){var s=(arguments.length>1?arguments[1]:0);var buffer=this;if(buffer.length<t.length){return-1;}
for(var i=s;i<buffer.length;i++){var isMatch=(function(){for(var j=0;j<t.length;j++){if(buffer[i+j]!=t[j]){return false;}}
return true;})();if(isMatch){return i;}}
return-1;};Uint8Array.prototype.startsWith=function(t){return this.find(t,0)==0;};Uint8Array.prototype.endsWith=function(t){return(this.length-t.length>=0)&&(this.find(t,this.length-t.length)==this.length-t.length);};Uint8Array.prototype.pad=function(l){var c=(arguments.length>1?arguments[1]:0);var b=(arguments.length>2?arguments[2]:true);if(l<=this.length){return this;}
if(isNaN(parseInt(c))){c=0;}
var a=new Uint8Array(l-this.length);for(var i=0;i<a.length;i++){a[i]=c;}
var r=new Uint8Array(this.length+a.length);if(b){r.set(a,0);r.set(this,a.length);}
else{r.set(this,0);r.set(a,this.length);}
return r;};Uint8Array.prototype.slice=function(s){var e=(arguments.length>1?arguments[1]:this.length);s=(s<0?0:s);e=(e>this.length?this.length:e);return new Uint8Array(this.buffer.slice(s,e));};Uint8Array.prototype.padding=function(n){var c=(arguments.length>1?arguments[1]:0);if(this.length%n!=0){return this.pad(Math.ceil(this.length/n)*n,c,false);}
else{return this;}};Uint8Array.prototype.paddingPKCS5=function(){var l=Math.ceil(this.length/8)*8;return this.pad(l,(l-this.length),false);};Uint8Array.prototype.unpaddingPKCS5=function(){return this.slice(0,this.length-this[this.length-1]);};Uint8Array.prototype.trimRight=function(){var c=(arguments.length>0?arguments[0]:0);var n=this.length;for(var i=0;i<this.length;i++){if(this[this.length-i-1]==c){n-=1;}
else{break;}}
return(n==this.length?this:this.slice(0,n));};Uint8Array.prototype.fromInt8=function(t){var r=new ArrayBuffer(1);new DataView(r,0,1).setInt8(0,t);return new Uint8Array(r);};Uint8Array.prototype.fromInt16=function(t){var e=(arguments.length>1?arguments[1]:LittleEndian);var r=new ArrayBuffer(2);new DataView(r,0,2).setInt16(0,t,e);return new Uint8Array(r);};Uint8Array.prototype.fromInt32=function(t){var e=(arguments.length>1?arguments[1]:LittleEndian);var r=new ArrayBuffer(4);new DataView(r,0,4).setInt32(0,t,e);return new Uint8Array(r);};Uint8Array.prototype.fromInt=function(l,t){var e=(arguments.length>2?arguments[2]:LittleEndian);switch(l){case 1:return this.fromInt8(t);break;case 2:return this.fromInt16(t,e);break;case 4:return this.fromInt32(t,e);break;}};Uint8Array.prototype.fromUint8=function(t){var r=new ArrayBuffer(1);new DataView(r,0,1).setUint8(0,t);return new Uint8Array(r);};Uint8Array.prototype.fromUint16=function(t){var e=(arguments.length>1?arguments[1]:LittleEndian);var r=new ArrayBuffer(2);new DataView(r,0,2).setUint16(0,t,e);return new Uint8Array(r);};Uint8Array.prototype.fromUint32=function(t){var e=(arguments.length>1?arguments[1]:LittleEndian);var r=new ArrayBuffer(4);new DataView(r,0,4).setUint32(0,t,e);return new Uint8Array(r);};Uint8Array.prototype.fromUint=function(l,t){var e=(arguments.length>2?arguments[2]:LittleEndian);switch(l){case 1:return this.fromUint8(t);break;case 2:return this.fromUint16(t,e);break;case 4:return this.fromUint32(t,e);break;}};Uint8Array.prototype.fromFloat32=function(t){var e=(arguments.length>1?arguments[1]:LittleEndian);var r=new ArrayBuffer(4);new DataView(r,0,4).setFloat32(0,t,e);return new Uint8Array(r);};Uint8Array.prototype.fromFloat64=function(t){var e=(arguments.length>1?arguments[1]:LittleEndian);var r=new ArrayBuffer(8);new DataView(r,0,8).setFloat64(0,t,e);return new Uint8Array(r);};Uint8Array.prototype.fromFloat=function(l,t){var e=(arguments.length>2?arguments[2]:LittleEndian);switch(l){case 4:return this.fromFloat32(t,e);break;case 8:return this.fromFloat64(t,e);break;}};Uint8Array.prototype.fromBits=function(t){var e=(arguments.length>1?arguments[1]:LittleEndian);var isAllArray=(function(){for(var i=0;i<t.length;i++){if(isUndefined(t[i].length)||!isObject(t[i])){return false;}}
return true;})();if(!isAllArray){t=[t];}
var l=0;for(var i=0;i<t.length;i++){l+=t[i].length;}
var r=new Uint8Array(Math.ceil(l/8));var w=0;for(var i=0;i<t.length;i++){for(var j=0;j<t[i].length;j++){r[w>>3]+=(t[i][j]||0)<<(e?w%8:7-w%8);w+=1;}}
return r;};Uint8Array.prototype.fromBase64=function(t){var format=(function(){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");var e=0
var n=t.length;while(true){n=t.lastIndexOf("=",n-1);if(n!=-1){e+=1;}
else{break;}}
if(e>2){t=t.slice(0,t.length-(e-2));}})();var z=0;if(t[t.length-1]=="="){z+=1;if(t[t.length-2]=="="){z+=1;}}
var r=new Uint8Array(t.length/4*3-z);var c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];var c1;var c2;var c3;var c4;var i=0;var j=0;while(i<t.length){do{c1=c[t.charCodeAt(i++)&0xFF];}while((i<t.length)&&(c1==-1));if(c1==-1){break;}
do{c2=c[t.charCodeAt(i++)&0xFF];}while((i<t.length)&&(c2==-1));if(c2==-1){break;}
r[j++]=((c1<<2)|((c2&0x30)>>4));do{c3=t.charCodeAt(i++)&0xFF;if(c3==0x3D){return r;}
c3=c[c3];}while((i<t.length)&&(c3==-1));if(c3==-1){break;}
r[j++]=(((c2&0x0F)<<4)|((c3&0x3C)>>2));do{c4=t.charCodeAt(i++)&0xFF;if(c4==0x3D){return r;}
c4=c[c4];}while((i<t.length)&&(c4==-1));if(c4==-1){break;}
r[j++]=(((c3&0x03)<<6)|c4);}
return r;};Uint8Array.prototype.fromHex=function(t){var format=(function(){t=t.replace(/[^A-Fa-f0-9]/g,"").replace(/(\s|\r|\n)/g,"").toUpperCase();if(t==""){return new Uint8Array(0);}
if(t.length%2!=0){t+="0";}})();var r=new Uint8Array(t.length/2);for(var i=0;i<r.length;i++){r[i]=parseInt(t.slice(i*2,i*2+2),16);}
return r;};Uint8Array.prototype.fromText=function(t){return new Uint8Array(unescape(encodeURIComponent(t)).split("").map(function(c){return c.charCodeAt();}));};Uint8Array.prototype.setInt8=function(t){var s=(arguments.length>1?arguments[1]:0);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,1).setInt8(0,t);return this;};Uint8Array.prototype.setInt16=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,2).setInt16(0,t,e);return this;};Uint8Array.prototype.setInt32=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,4).setInt32(0,t,e);return this;};Uint8Array.prototype.setInt=function(l,t){var s=(arguments.length>2?arguments[2]:0);var e=(arguments.length>3?arguments[3]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
switch(l){case 1:this.setInt8(t,s);break;case 2:this.setInt16(t,s,e);break;case 4:this.setInt32(t,s,e);break;}
return this;};Uint8Array.prototype.setUint8=function(t){var s=(arguments.length>1?arguments[1]:0);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,1).setUint8(0,t);return this;};Uint8Array.prototype.setUint16=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,2).setUint16(0,t,e);return this;};Uint8Array.prototype.setUint32=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,4).setUint32(0,t,e);return this;};Uint8Array.prototype.setUint=function(l,t){var s=(arguments.length>2?arguments[2]:0);var e=(arguments.length>3?arguments[3]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
switch(l){case 1:this.setUint8(t,s);break;case 2:this.setUint16(t,s,e);break;case 4:this.setUint32(t,s,e);break;}
return this;};Uint8Array.prototype.setFloat16=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
var float32=new Float32Array(1);var int32=new Int32Array(float32.buffer);float32[0]=t;var x=int32[0];var b=(function(){var v=(x>>16)&0x8000;var m=(x>>12)&0x07FF;var e=(x>>23)&0xFF;if(e<103){return v;}
if(e>142){v|=0x7c00;v|=((e==0xFF)?0:1)&&(x&0x007fffff);return v;}
if(e<113){m|=0x0800;v|=(m>>(114-e))+((m>>(113-e))&1);return v;}
v|=((e-112)<<10)|(m>>1);v+=m&1;return v;})();new DataView(this.buffer,s,2).setInt16(0,b,e);};Uint8Array.prototype.setFloat32=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,4).setFloat32(0,t,e);return this;};Uint8Array.prototype.setFloat64=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,8).setFloat64(0,t,e);return this;};Uint8Array.prototype.setFloat=function(l,t){var s=(arguments.length>2?arguments[2]:0);var e=(arguments.length>3?arguments[3]:LittleEndian);switch(l){case 2:return this.setFloat16(t,s,e);break;case 4:return this.setFloat32(t,s,e);break;case 8:return this.setFloat64(t,s,e);break;}};Uint8Array.prototype.setBit=function(n,t){var e=(arguments.length>2?arguments[2]:LittleEndian);if((n>=0)&&(n<this.length*8)){var v=1<<(e?n%8:7-n%8);if(t){this[n>>3]|=v;}
else{this[n>>3]&=~v;}}
return this;};Uint8Array.prototype.setBits=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s>=0)&&(s<this.length*8)){var l=Math.min(s+t.length,this.length*8)-s;for(var i=0;i<l;i++){this.setBit(s+i,t[i],e);}}
return this;};Uint8Array.prototype.setBase64=function(t){var s=(arguments.length>1?arguments[1]:0);if((s<0)||(s>this.length-1)){return this;}
this.set(new Uint8Array().fromBase64(t),s);return this;};Uint8Array.prototype.setHex=function(t){var s=(arguments.length>1?arguments[1]:0);if((s<0)||(s>this.length-1)){return this;}
this.set(new Uint8Array().fromHex(t),s);return this;};Uint8Array.prototype.setText=function(t){var s=(arguments.length>1?arguments[1]:0);var c=(arguments.length>2?arguments[2]:"");if((s<0)||(s>this.length-1)){return this;}
this.set(new Uint8Array().fromText(t,c),s);return this;};Uint8Array.prototype.getInt8=function(){var s=(arguments.length>0?arguments[0]:0);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,1).getInt8(0);};Uint8Array.prototype.getInt16=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,2).getInt16(0,e);};Uint8Array.prototype.getInt32=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,4).getInt32(0,e);};Uint8Array.prototype.getInt=function(l){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
switch(l){case 1:return this.getInt8(s);break;case 2:return this.getInt16(s,e);break;case 3:if(e){return this.getInt16(s,e)+this.getInt8(s+2)*0x10000;}
else{return this.getInt8(s)*0x10000+this.getInt16(s+1,e);}
break;case 4:return this.getInt32(s,e);break;case 8:if(e){return this.getInt32(s,e)+this.getInt32(s+4,e)*0x100000000;}
else{return this.getInt32(s,e)*0x100000000+this.getInt32(s+4,e);}
break;}};Uint8Array.prototype.getUint8=function(){var s=(arguments.length>0?arguments[0]:0);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,1).getUint8(0);};Uint8Array.prototype.getUint16=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,2).getUint16(0,e);};Uint8Array.prototype.getUint32=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,4).getUint32(0,e);};Uint8Array.prototype.getUint=function(l){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
switch(l){case 1:return this.getUint8(s);break;case 2:return this.getUint16(s,e);break;case 3:if(e){return this.getUint16(s,e)+this.getUint8(s+2)*0x10000;}
else{return this.getUint8(s)*0x10000+this.getUint16(s+1,e);}
break;case 4:return this.getUint32(s,e);break;case 8:if(e){return this.getUint32(s,e)+this.getUint32(s+4,e)*0x100000000;}
else{return this.getUint32(s,e)*0x100000000+this.getUint32(s+4,e);}}};Uint8Array.prototype.getFloat16=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
var mantissa=function(n){var v=0;switch(true){case(n>=1)&&(n<1024):var m=n<<13;var e=0;while((m&0x00800000)==0){e-=0x00800000;m<<=1;}
m&=~0x00800000;e+=0x38800000;v=m|e;break;case(n>=1024)&&(n<2048):v=0x38000000+((n-1024)<<13);break;}
return v;};var exponent=function(n){var v=0;switch(true){case(n>=1)&&(n<31):v=n<<23;break;case(n==31):v=0x47800000;break;case(n==32):v=0x80000000;break;case(n>=33)&&(n<63):v=0x80000000+((n-32)<<23);break;case(n==63):v=0xC7800000;break;}
return v;};var offset=function(n){var v=0;switch(true){case(n>=1)&&(n<64):v=(n==32?0:1024);break;}
return v;};var float32=new Float32Array(1);var int32=new Int32Array(float32.buffer);var b=new DataView(this.buffer,s,2).getInt16(0,e)
var m=b>>10;int32[0]=mantissa((b&0x3FF)+offset(m))+exponent(m);return float32[0];};Uint8Array.prototype.getFloat32=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,4).getFloat32(0,e);};Uint8Array.prototype.getFloat64=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,8).getFloat64(0,e);};Uint8Array.prototype.getFloat=function(l){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
switch(l){case 2:return this.getFloat16(s,e);break;case 4:return this.getFloat32(s,e);break;case 8:return this.getFloat64(s,e);break;}};Uint8Array.prototype.getBit=function(s){var e=(arguments.length>1?arguments[1]:LittleEndian);return(this[s>>3]||0)>>(e?s%8:7-s%8)&1;};Uint8Array.prototype.getBits=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length*8-s);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length*8-1)){return new Uint8Array();}
l=Math.min(l,this.length*8-s);var r=new Uint8Array(l);for(var i=0;i<r.length;i++){r[i]=this.getBit(s+i,e);}
return r;};Uint8Array.prototype.getBase64=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length-s);if((s<0)||(s>this.length-1)){return"";}
l=Math.min(l,this.length-s);var r=[];var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var i=s;var e=s+l;while(i<e){var c1=this[i++]&0xFF;if(i==e){r.push(c.charAt(c1>>2));r.push(c.charAt((c1&0x03)<<4));r.push("==");break;}
var c2=this[i++];if(i==e){r.push(c.charAt(c1>>2));r.push(c.charAt(((c1&0x03)<<4)|((c2&0xF0)>>4)));r.push(c.charAt((c2&0x0F)<<2));r.push("=");break;}
var c3=this[i++];r.push(c.charAt(c1>>2));r.push(c.charAt(((c1&0x3)<<4)|((c2&0xF0)>>4)));r.push(c.charAt(((c2&0xF)<<2)|((c3&0xC0)>>6)));r.push(c.charAt(c3&0x3F));}
return r.join("");};Uint8Array.prototype.getHex=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length-s);var c=(arguments.length>2?arguments[2]:"");var b=(arguments.length>3?arguments[3]:true);if((s<0)||(s>this.length-1)){return"";}
l=Math.min(l,this.length-s);var r=[];var e=s+l;for(var i=s;i<e;i++){r.push((this.buffer[i]||this[i]).toString(16).padStart(2,"0"));}
r=r.join(c);if(b){r=r.toUpperCase();}
return r;};Uint8Array.prototype.getText=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length-s);if((s<0)||(s>this.length-1)){return"";}
l=Math.min(l,this.length-s);if(l==0){return"";}
return decodeURIComponent("%"+this.getHex(s,l).insertEvery(2,"%"));};Uint8Array.prototype.getMD5=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length-s);if((s<0)||(s>this.length-1)){return"";}
l=Math.min(l,this.length-s);var Add=function(X,Y){var r=(X&0x3FFFFFFF)+(Y&0x3FFFFFFF);var X4=(X&0x40000000);var Y4=(Y&0x40000000);var X8=(X&0x80000000);var Y8=(Y&0x80000000);if(X4&Y4){return(r^0x80000000^X8^Y8);}
if(X4|Y4){if(r&0x40000000){return(r^0xC0000000^X8^Y8);}
else{return(r^0x40000000^X8^Y8);}}
else{return(r^X8^Y8);}};var Rotate=function(t,b){return(t<<b)|(t>>>(32-b));};var F=function(X,Y,Z){return(X&Y)|((~X)&Z);};var G=function(X,Y,Z){return(X&Z)|(Y&(~Z));};var H=function(X,Y,Z){return(X^Y^Z);};var I=function(X,Y,Z){return(Y^(X|(~Z)));};var FF=function(a,b,c,d,m,s,t){a=Add(a,Add(Add(F(b,c,d),m),t));return Add(Rotate(a,s),b);};var GG=function(a,b,c,d,m,s,t){a=Add(a,Add(Add(G(b,c,d),m),t));return Add(Rotate(a,s),b);};var HH=function(a,b,c,d,m,s,t){a=Add(a,Add(Add(H(b,c,d),m),t));return Add(Rotate(a,s),b);};var II=function(a,b,c,d,m,s,t){a=Add(a,Add(Add(I(b,c,d),m),t));return Add(Rotate(a,s),b);};var m=(function(t){var c;var p;var n=(((l+8)-((l+8)%64))/64+1)*16;var r=new Int32Array(n-1);var i=0;while(i<l){c=(i-(i%4))/4;p=(i%4)*8;r[c]=r[c]|(t[s+i]<<p);i++;}
c=(i-(i%4))/4;p=(i%4)*8;r[c]=r[c]|(0x80<<p);r[n-2]=l<<3;r[n-1]=l>>>29;return r;})(this);var A;var B;var C;var D;var a=0x67452301;var b=0xEFCDAB89;var c=0x98BADCFE;var d=0x10325476;for(var i=0;i<m.length;i+=16){A=a;B=b;C=c;D=d;a=FF(a,b,c,d,m[i+0],7,0xD76AA478);d=FF(d,a,b,c,m[i+1],12,0xE8C7B756);c=FF(c,d,a,b,m[i+2],17,0x242070DB);b=FF(b,c,d,a,m[i+3],22,0xC1BDCEEE);a=FF(a,b,c,d,m[i+4],7,0xF57C0FAF);d=FF(d,a,b,c,m[i+5],12,0x4787C62A);c=FF(c,d,a,b,m[i+6],17,0xA8304613);b=FF(b,c,d,a,m[i+7],22,0xFD469501);a=FF(a,b,c,d,m[i+8],7,0x698098D8);d=FF(d,a,b,c,m[i+9],12,0x8B44F7AF);c=FF(c,d,a,b,m[i+10],17,0xFFFF5BB1);b=FF(b,c,d,a,m[i+11],22,0x895CD7BE);a=FF(a,b,c,d,m[i+12],7,0x6B901122);d=FF(d,a,b,c,m[i+13],12,0xFD987193);c=FF(c,d,a,b,m[i+14],17,0xA679438E);b=FF(b,c,d,a,m[i+15],22,0x49B40821);a=GG(a,b,c,d,m[i+1],5,0xF61E2562);d=GG(d,a,b,c,m[i+6],9,0xC040B340);c=GG(c,d,a,b,m[i+11],14,0x265E5A51);b=GG(b,c,d,a,m[i+0],20,0xE9B6C7AA);a=GG(a,b,c,d,m[i+5],5,0xD62F105D);d=GG(d,a,b,c,m[i+10],9,0x2441453);c=GG(c,d,a,b,m[i+15],14,0xD8A1E681);b=GG(b,c,d,a,m[i+4],20,0xE7D3FBC8);a=GG(a,b,c,d,m[i+9],5,0x21E1CDE6);d=GG(d,a,b,c,m[i+14],9,0xC33707D6);c=GG(c,d,a,b,m[i+3],14,0xF4D50D87);b=GG(b,c,d,a,m[i+8],20,0x455A14ED);a=GG(a,b,c,d,m[i+13],5,0xA9E3E905);d=GG(d,a,b,c,m[i+2],9,0xFCEFA3F8);c=GG(c,d,a,b,m[i+7],14,0x676F02D9);b=GG(b,c,d,a,m[i+12],20,0x8D2A4C8A);a=HH(a,b,c,d,m[i+5],4,0xFFFA3942);d=HH(d,a,b,c,m[i+8],11,0x8771F681);c=HH(c,d,a,b,m[i+11],16,0x6D9D6122);b=HH(b,c,d,a,m[i+14],23,0xFDE5380C);a=HH(a,b,c,d,m[i+1],4,0xA4BEEA44);d=HH(d,a,b,c,m[i+4],11,0x4BDECFA9);c=HH(c,d,a,b,m[i+7],16,0xF6BB4B60);b=HH(b,c,d,a,m[i+10],23,0xBEBFBC70);a=HH(a,b,c,d,m[i+13],4,0x289B7EC6);d=HH(d,a,b,c,m[i+0],11,0xEAA127FA);c=HH(c,d,a,b,m[i+3],16,0xD4EF3085);b=HH(b,c,d,a,m[i+6],23,0x4881D05);a=HH(a,b,c,d,m[i+9],4,0xD9D4D039);d=HH(d,a,b,c,m[i+12],11,0xE6DB99E5);c=HH(c,d,a,b,m[i+15],16,0x1FA27CF8);b=HH(b,c,d,a,m[i+2],23,0xC4AC5665);a=II(a,b,c,d,m[i+0],6,0xF4292244);d=II(d,a,b,c,m[i+7],10,0x432AFF97);c=II(c,d,a,b,m[i+14],15,0xAB9423A7);b=II(b,c,d,a,m[i+5],21,0xFC93A039);a=II(a,b,c,d,m[i+12],6,0x655B59C3);d=II(d,a,b,c,m[i+3],10,0x8F0CCC92);c=II(c,d,a,b,m[i+10],15,0xFFEFF47D);b=II(b,c,d,a,m[i+1],21,0x85845DD1);a=II(a,b,c,d,m[i+8],6,0x6FA87E4F);d=II(d,a,b,c,m[i+15],10,0xFE2CE6E0);c=II(c,d,a,b,m[i+6],15,0xA3014314);b=II(b,c,d,a,m[i+13],21,0x4E0811A1);a=II(a,b,c,d,m[i+4],6,0xF7537E82);d=II(d,a,b,c,m[i+11],10,0xBD3AF235);c=II(c,d,a,b,m[i+2],15,0x2AD7D2BB);b=II(b,c,d,a,m[i+9],21,0xEB86D391);a=Add(a,A);b=Add(b,B);c=Add(c,C);d=Add(d,D);}
return new Uint8Array().fromInt32(a,true).getHex()+new Uint8Array().fromInt32(b,true).getHex()+new Uint8Array().fromInt32(c,true).getHex()+new Uint8Array().fromInt32(d,true).getHex();};Uint8Array.prototype.getSHA1=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length-s);if((s<0)||(s>this.length-1)){return"";}
l=Math.min(l,this.length-s);var Add=function(x,y){return((x&0x7FFFFFFF)+(y&0x7FFFFFFF))^(x&0x80000000)^(y&0x80000000);};var S=function(n,c){return(n<<c)|(n>>>(32-c));};var Ft=function(t,B,C,D){return(t<20?(B&C)|((~B)&D):(t<40?B^C^D:(t<60?(B&C)|(B&D)|(C&D):B^C^D)));};var Kt=function(t){return(t<20?0x5A827999:(t<40?0x6ED9EBA1:(t<60?0x8F1BBCDC:0xCA62C1D6)));};var SHA1=function(t){var W=new Array(80);var H0=0x67452301;var tL=0xEFCDAB89;var tD=0x98BADCFE;var tB=0x10325476;var H4=0xC3D2E1F0;for(var i=0;i<t.length;i+=16){var A=H0;var B=tL;var C=tD;var D=tB;var E=H4;for(var j=0;j<W.length;j++){if(j<16){W[j]=t[i+j]}
else{W[j]=S(W[j-3]^W[j-8]^W[j-14]^W[j-16],1)}
var v=Add(Add(S(A,5),Ft(j,B,C,D)),Add(Add(E,W[j]),Kt(j)));E=D;D=C;C=S(B,30);B=A;A=v;}
H0=Add(A,H0);tL=Add(B,tL);tD=Add(C,tD);tB=Add(D,tB);H4=Add(E,H4);}
return[H0,tL,tD,tB,H4];};var m=(function(t){var n=((l+8)>>6)+1;var r=new Uint32Array(n*16);for(var i=0;i<n*16;i++){r[i]=0;}
var j;for(var j=0;j<l;j++){r[j>>2]|=t[s+j]<<(24-(j&3)*8);}
r[j>>2]|=0x80<<(24-(j&3)*8);r[n*16-1]=l*8;return r;})(this);var r=SHA1(m);for(var i=0;i<r.length;i++){r[i]=new Uint8Array().fromInt32(r[i],false).getHex();}
return r.join("");};Uint8Array.prototype.getCRC32=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length-s);if((s<0)||(s>this.length-1)){return"00000000";}
l=Math.min(l,this.length-s);var t=(function(){var r=new Int32Array(256);var c;for(var i=0;i<256;i++){c=i;for(var j=0;j<8;j++){if(c&1){c=(c>>>1)^0xEDB88320;}
else{c=c>>>1;}}
r[i]=c;}
return r;})();var c=~0;for(var i=0;i<l;i++){c=(c>>>8)^t[c&0xFF^this[i+s]];}
return new Uint8Array().fromInt32(~c>>>0,false).getHex();};Uint8Array.prototype.cryptDES=function(c,k){var iv=(arguments.length>2?arguments[2]:new Uint8Array(8));k=(function(){var n=Math.ceil(k.length/8);var l=(n>3?3:n)*8;return k.padding(l);})();iv=iv.padding(8).slice(0,8);var PC1=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4];var PC2=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32];var L=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];var I=[58,50,42,34,26,18,10,2,60,52,44,36,28,20,12,4,62,54,46,38,30,22,14,6,64,56,48,40,32,24,16,8,57,49,41,33,25,17,9,1,59,51,43,35,27,19,11,3,61,53,45,37,29,21,13,5,63,55,47,39,31,23,15,7];var F=[40,8,48,16,56,24,64,32,39,7,47,15,55,23,63,31,38,6,46,14,54,22,62,30,37,5,45,13,53,21,61,29,36,4,44,12,52,20,60,28,35,3,43,11,51,19,59,27,34,2,42,10,50,18,58,26,33,1,41,9,49,17,57,25];var E=[32,1,2,3,4,5,4,5,6,7,8,9,8,9,10,11,12,13,12,13,14,15,16,17,16,17,18,19,20,21,20,21,22,23,24,25,24,25,26,27,28,29,28,29,30,31,32,1];var P=[16,7,20,21,29,12,28,17,1,15,23,26,5,18,31,10,2,8,24,14,32,27,3,9,19,13,30,6,22,11,4,25];var S=[[14,4,13,1,2,15,11,8,3,10,6,12,5,9,0,7,0,15,7,4,14,2,13,1,10,6,12,11,9,5,3,8,4,1,14,8,13,6,2,11,15,12,9,7,3,10,5,0,15,12,8,2,4,9,1,7,5,11,3,14,10,0,6,13],[15,1,8,14,6,11,3,4,9,7,2,13,12,0,5,10,3,13,4,7,15,2,8,14,12,0,1,10,6,9,11,5,0,14,7,11,10,4,13,1,5,8,12,6,9,3,2,15,13,8,10,1,3,15,4,2,11,6,7,12,0,5,14,9],[10,0,9,14,6,3,15,5,1,13,12,7,11,4,2,8,13,7,0,9,3,4,6,10,2,8,5,14,12,11,15,1,13,6,4,9,8,15,3,0,11,1,2,12,5,10,14,7,1,10,13,0,6,9,8,7,4,15,14,3,11,5,2,12],[7,13,14,3,0,6,9,10,1,2,8,5,11,12,4,15,13,8,11,5,6,15,0,3,4,7,2,12,1,10,14,9,10,6,9,0,12,11,7,13,15,1,3,14,5,2,8,4,3,15,0,6,10,1,13,8,9,4,5,11,12,7,2,14],[2,12,4,1,7,10,11,6,8,5,3,15,13,0,14,9,14,11,2,12,4,7,13,1,5,0,15,10,3,9,8,6,4,2,1,11,10,13,7,8,15,9,12,5,6,3,0,14,11,8,12,7,1,14,2,13,6,15,0,9,10,4,5,3],[12,1,10,15,9,2,6,8,0,13,3,4,14,7,5,11,10,15,4,2,7,12,9,5,6,1,13,14,0,11,3,8,9,14,15,5,2,8,12,3,7,0,4,10,1,13,11,6,4,3,2,12,9,5,15,10,11,14,1,7,6,0,8,13],[4,11,2,14,15,0,8,13,3,12,9,7,5,10,6,1,13,0,11,7,4,9,1,10,14,3,5,12,2,15,8,6,1,4,11,13,12,3,7,14,10,15,6,8,0,5,9,2,6,11,13,8,1,4,10,7,9,5,0,15,14,2,3,12],[13,2,8,4,6,15,11,1,10,9,3,14,5,0,12,7,1,15,13,8,10,3,7,4,12,5,6,11,0,14,9,2,7,11,4,1,9,12,14,2,0,6,10,13,15,3,5,8,2,1,14,7,4,10,8,13,15,12,9,0,3,5,6,11]];var Permute=function(t,s,p){for(var i=0;i<p.length;i++){t[i]=s[p[i]-1];}
return t;};var Xor=function(a,b){for(var i=0;i<a.length;i++){a[i]^=b[i];}
return a;}
var Sc=function(t){var Sn=function(t,n){n*=6;return t[n]*32+t[n+5]*16+t[n+1]*8+t[n+2]*4+t[n+3]*2+t[n+4];};var r=new Uint8Array(4);for(var i=0;i<4;i++){r[i]=S[i*2][Sn(t,i*2)]*16+S[i*2+1][Sn(t,(i*2+1))];}
return r;};var Fc=function(L,R,K){var t=new Uint8Array(32);for(var i=0;i<32;i++){t[i]=L[i];L[i]=R[i];}
var s=Sc(Xor(Permute(new Uint8Array(48),R,E),K));R=Xor(Permute(R,s.getBits(0,s.length*8,false),P),t);}
var SubKey=function(t){var CD=Permute(new Uint8Array(56),t,PC1);var r=[];for(var i=0;i<16;i++){for(var j=0;j<L[i];j++){var t=CD[0];for(var k=0;k<55;k++){CD[k]=CD[k+1];}
CD[55]=CD[27];CD[27]=t;}
r[i]=Permute(new Uint8Array(48),CD,PC2);}
return r;};var Crypt=function(c,d,k,iv){k=k.getBits(0,k.length*8,false);iv=iv.getBits(0,iv.length*8,false);var K=SubKey(k);var U=function(t){var t=Permute(new Uint8Array(64),t,I);var L=new Uint8Array(32);var R=new Uint8Array(32);for(var i=0;i<32;i++){L[i]=t[i];R[i]=t[i+32];}
if(c){for(var i=0;i<16;i++){Fc(L,R,K[i]);}}
else{for(var i=16;i>0;i--){Fc(L,R,K[i-1]);}}
for(var i=0;i<32;i++){t[i]=R[i];t[i+32]=L[i];}
return Permute(new Uint8Array(64),t,F);};var m=(function(){for(var i=0;i<iv.length;i++){if(iv[i]!=0){return true;}}
return false;})();for(var i=0;i<d.length/8;i++){var f=d.getBits(i*64,64,false);var v=f;var t;if(c){if(m){v=Xor(v,iv);}
v=U(v);t=v;if(m){iv=t;}}
else{v=U(v);if(m){v=Xor(v,iv);}
t=v;if(m){iv=f;}}
d.set(new Uint8Array().fromBits(t,false),i*8);}
return d;};var Des3=function(c,d,k,iv){if(k.length==8){d=Crypt(c,d,k,iv);}
else{var k1=(k.length>=8?k.slice(0,8):new Uint8Array(8));var k2=(k.length>=16?k.slice(8,16):k1);var k3=(k.length>=24?k.slice(16,24):k1);if(c){d=Crypt(true,d,k1,iv);d=Crypt(false,d,k2,iv);d=Crypt(true,d,k3,iv);}
else{d=Crypt(false,d,k3,iv);d=Crypt(true,d,k2,iv);d=Crypt(false,d,k1,iv);}}
return d;};return(c?Des3(c,this.paddingPKCS5(),k,iv):Des3(c,this,k,iv).unpaddingPKCS5());};Uint8Array.prototype.deflate=function(){var mode=(arguments.length>0?arguments[0]:-1);if(!this.length){return new Uint8Array();}
var buffer=this;var mO=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var mL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];var mD=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];var lzL=258;var lzD=32768;var lzs=4*1024;var ss=0xFFFF;var ws=32*1024;var r=[];var s=0;var e=0;var lz=[];var w=0;var tB;var tL;var tD;var huffman=function(a,l){var r=new Uint8Array(a.length);var reverse=function(freqs,limit){var r=new Uint8Array(freqs.length);var minCost=new Uint16Array(limit);var value=new Array(limit);var excess=(1<<limit)-freqs.length;var half=(1<<(limit-1));var flag=new Uint8Array(limit);var type=new Array(limit);var position=new Array(limit);var take=function(j){var x=type[j][position[j]];if(x==freqs.length){take(j+1);take(j+1);}
else{r[x]-=1;}
position[j]+=1;};minCost[limit-1]=freqs.length;for(var j=0;j<limit;j++){if(excess<half){flag[j]=0;}
else{flag[j]=1;excess-=half;}
excess<<=1;minCost[limit-2-j]=(minCost[limit-1-j]/2|0)+freqs.length;}
minCost[0]=flag[0];value[0]=new Array(minCost[0]);type[0]=new Array(minCost[0]);for(var j=1;j<limit;j++){if(minCost[j]>2*minCost[j-1]+flag[j]){minCost[j]=2*minCost[j-1]+flag[j];}
value[j]=new Array(minCost[j]);type[j]=new Array(minCost[j]);}
for(var i=0;i<freqs.length;i++){r[i]=limit;}
for(var k=0;k<minCost[limit-1];k++){value[limit-1][k]=freqs[k];type[limit-1][k]=k;}
for(var i=0;i<limit;i++){position[i]=0;}
if(flag[limit-1]==1){r[0]-=1;position[limit-1]+=1;}
for(var j=limit-2;j>-1;j--){var i=0;var weight=0;var next=position[j+1];for(var k=0;k<minCost[j];k++){weight=value[j+1][next]+value[j+1][next+1];if(weight>freqs[i]){value[j][k]=weight;type[j][k]=freqs.length;next+=2;}
else{value[j][k]=freqs[i];type[j][k]=i;i+=1;}}
position[j]=0;if(flag[j]==1){take(j);}}
return r;};var Heap=function(length){var buffer=new Uint16Array(length*2);var getParent=function(index){return((index-2)/4|0)*2;};var getChild=function(index){return index*2+2;};this.length=0;this.push=function(index,value){var current=this.length;buffer[this.length++]=value;buffer[this.length++]=index;while(current){var parent=getParent(current);var swap;if(buffer[current]>buffer[parent]){swap=buffer[current];buffer[current]=buffer[parent];buffer[parent]=swap;swap=buffer[current+1];buffer[current+1]=buffer[parent+1];buffer[parent+1]=swap;current=parent;}
else{break;}}
return this.length;};this.pop=function(){var value=buffer[0];var index=buffer[1];this.length-=2;buffer[0]=buffer[this.length];buffer[1]=buffer[this.length+1];var parent=0;while(true){var current=getChild(parent);var swap;if(current>=this.length){break;}
if((current+2<this.length)&&(buffer[current+2]>buffer[current])){current+=2;}
if(buffer[current]>buffer[parent]){swap=buffer[parent];buffer[parent]=buffer[current];buffer[current]=swap;swap=buffer[parent+1];buffer[parent+1]=buffer[current+1];buffer[current+1]=swap;}
else{break;}
parent=current;}
return{"index":index,"value":value,"length":this.length};};};var heap=new Heap(286*2);for(i=0;i<a.length;i++){if(a[i]){heap.push(i,a[i]);}}
var nodes=new Array(heap.length/2);var values=new Uint32Array(heap.length/2);if(nodes.length==1){r[heap.pop().index]=1;return r;}
for(var i=0;i<nodes.length;i++){nodes[i]=heap.pop();values[i]=nodes[i].value;}
var codeLength=reverse(values,l);for(var i=0;i<nodes.length;i++){r[nodes[i].index]=codeLength[i];}
return r;};var getTree=function(t){var v=[];var d=[];for(var i=0;i<t.length;i++){d[t[i]]=d[t[i]]||[];d[t[i]].push(i);}
var c=0;for(var i=1;i<d.length;i++){c<<=1;if(d[i]){for(var j=0;j<d[i].length;j++){v.push([i,c,d[i][j]]);c+=1;}}}
return v;};var getL=function(v){for(var i=1;i<mL.length;i++){if(v<mL[i]){return i-1;}}
return mL.length-1;};var getD=function(v){for(var i=1;i<mD.length;i++){if(v<mD[i]){return i-1;}}
return mD.length-1;};var writeInt=function(n,v){var e=(arguments.length>2?arguments[2]:LittleEndian);for(var i=0;i<n;i++){var j=w>>3;r[j]=r[j]||0;r[j]+=((v>>(e?i:n-1-i))%2)<<(w%8);w++;}};var writeCode=function(t,v){for(var i=0;i<t.length;i++){if(t[i][2]==v){writeInt(t[i][0],t[i][1],false);}}};var writeL=function(v){var n=getL(v);var c=(n/4|0)-1;c=(c<0?0:c);c=(c>5?0:c);writeCode(tL,n+256+1);writeInt(c,v-mL[n],true);};var writeD=function(v){var n=getD(v);var c=(n/2|0)-1;c=(c<0?0:c);writeCode(tD,n);writeInt(c,v-mD[n],true);};var writeData=function(d){for(var i=0;i<d.length;i++){if(d[i][1]){writeL(d[i][0]);writeD(d[i][1]);}
else{writeCode(tL,d[i][0]);}}};var writeChunk=function(h,m){switch(m){case 0:var s0=s;while(s0<e){var e0=Math.min(s0+0xFFFF,e);writeInt(1,(e0==e?h:0),true);writeInt(2,m,true);writeInt(8-(w%8||8),0,true);writeInt(16,e0-s0,true);writeInt(16,~(e0-s0)&0xFFFF,true);for(var i=s0;i<e0;i++){r.push(buffer[i]);}
w+=(e0-s0)*8;s0=e0;}
break;case 1:tL=(function(){var v=[];for(var i=0;i<286;i++){switch(true){case(i<144):v.push([8,i+48,i]);break;case(i<256):v.push([9,i+256,i]);break;case(i<280):v.push([7,i-256,i]);break;case(i<286):v.push([8,i-88,i]);break;}}
return v;})();tD=(function(){var v=[];for(var i=0;i<30;i++){v.push([5,i,i]);}
return v;})();writeInt(1,h,true);writeInt(2,m,true);writeData(lz);break;case 2:var cL=(function(){var v=[];for(var i=0;i<lz.length;i++){var n=(lz[i][1]?getL(lz[i][0])+256+1:lz[i][0]);v[n]=(v[n]||0)+1;}
var h=huffman(v,15);tL=getTree(h);return h;})();var cD=(function(){var v=[];for(var i=0;i<lz.length;i++){var n=(lz[i][1]?getD(lz[i][1]):lz[i][1]);v[n]=(v[n]||0)+1;}
var h=huffman(v,7);tD=getTree(h);return h;})();var sq=(function(){var v=[];var encode=function(c){var record=function(s,min,max){while(n>=min){var c=(n>=max?max:n);v.push(s);v.push(c-min);n-=c;}};for(var i=0;i<c.length;i++){var n=1;while((i+1<c.length)&&(c[i+1]==c[i])){n+=1;i+=1;}
if(c[i]||(n<3)){v.push(c[i]);n-=1;}
if(c[i]){record(16,3,6);}
else{record(18,11,138);record(17,3,6);}
while(n>0){v.push(c[i]);n-=1;}}};encode(cL);encode(cD);return v;})();var cB=(function(){var v=[];for(var i=0;i<19;i++){v[i]=v[i]||0;}
for(var i=0;i<sq.length;i++){v[sq[i]]+=1;switch(sq[i]){case 16:case 17:case 18:i+=1;break;}}
var h=huffman(v,7);tB=getTree(h);for(var i=0;i<mO.length;i++){v[i]=h[mO[i]];}
while(v.length&&(v[v.length-1]==0)){v.pop();}
return v;})();writeInt(1,h,true);writeInt(2,m,true);writeInt(5,cL.length-256-1,true);writeInt(5,cD.length-1,true);writeInt(4,cB.length-4,true);for(var i=0;i<cB.length;i++){writeInt(3,cB[i],true);}
for(var i=0;i<sq.length;i++){writeCode(tB,sq[i]);switch(sq[i]){case 16:writeInt(2,sq[++i],true);break;case 17:writeInt(3,sq[++i],true);break;case 18:writeInt(7,sq[++i],true);break;}}
writeData(lz);break;}};while(s<buffer.length){if(mode!=0){lz=(function(){var v=[];e=buffer.length;var table=[];var ms=[];var match=function(p){var m=[buffer[p],0];if(p+2<e){var h=buffer[p]+","+buffer[p+1]+","+buffer[p+2];table[h]=table[h]||[];table[h].push(p);for(var i=table[h].length-2;i>-1;i--){var l=table[h][i];var n=0;while((p+n<e)&&(buffer[l+n]==buffer[p+n])&&(n<lzL)){n+=1;}
if((n>=3)&&(!m[1]||(n>=m[0]))){m=[n,p-l];}}}
return m;};for(var i=s;i<e;i++){ms=[match(i)];while(ms[0][1]){if(v.length+ms[0][0]+1>=lzs){ms.push([256,0]);}
else{for(var j=1;j<ms[0][0];j++){var m=match(i+j);if(m[1]){if(m[0]>ms[0][0]){if(j>=3){m[0]-=ms[0][0]-j;}
else{ms[0]=[buffer[i],0];}}
else{m=[buffer[i+j],0];}}
ms.push(m);if(m[1]){break;}}}
if(!ms[0][1]){i+=ms.length-1;var t=ms.pop();v.writes(ms);ms=[t];}
else{i+=ms[0][0]-1;ms=[ms[0]];break;}}
v.push(ms[0]);if(v.length+1==lzs){e=i+1;break;}}
v.push([256,0]);return v;})();}
else{e=Math.min(s+ss,buffer.length);}
var h=(e==buffer.length?1:0);switch(mode){case 0:case 1:case 2:break;default:mode=(function(){var nL=0;var nC=0;for(var i=0;i<lz.length;i++){if(lz[i][1]){nL+=lz[i][0];nC+=1;}}
return(32+(nL-nC)*8<lzL+nC*12?0:2);})();break;}
writeChunk(h,mode);s=e;}
return new Uint8Array(r);};Uint8Array.prototype.inflate=function(){if(!this.length){return new Uint8Array();}
var buffer=this;var r=[];var w=0;var p=0;var mO=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var mL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];var mD=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];var getTree=function(t){var v=[];var d=[];for(var i=0;i<t.length;i++){d[t[i]]=d[t[i]]||[];d[t[i]].push(i);}
var c=0;for(var i=1;i<d.length;i++){c<<=1;if(d[i]){for(var j=0;j<d[i].length;j++){v.push([i,c,d[i][j]]);c+=1;}}}
return v;};var readInt=function(n){var v=0;for(var i=0;i<n;i++){v+=buffer.getBit(p+i,true)<<i;}
p+=n;return v;};var readCode=function(t){var v=0;var n=0;for(var i=0;i<t.length;i++){while(n<t[i][0]){v<<=1;v+=buffer.getBit(p+n,true);n+=1;}
if((n==t[i][0])&&(v==t[i][1])){p+=t[i][0];return t[i][2];}}
var v=0;var n=0;var o={};for(var i=0;i<t.length;i++){while(n<t[i][0]){v<<=1;v+=buffer.getBit(p+n,true);n+=1;o[n]=v;}
if(o[t[i][0]]==t[i][1]){p+=t[i][0];return t[i][2];}}};var readC=function(l){var v=[];var c=0;while(v.length<l){var s=readCode(tB);switch(s){case 16:var n=readInt(2)+3;for(var i=0;i<n;i++){v.push(c);}
break;case 17:var n=readInt(3)+3;for(var i=0;i<n;i++){v.push(0);}
break;case 18:var n=readInt(7)+11;for(var i=0;i<n;i++){v.push(0);}
break;default:c=s;v.push(c);break;}}
return v;};var readL=function(n){var c=(n/4|0)-1;c=(c<0?0:c);c=(c>5?0:c);return mL[n]+readInt(c);};var readD=function(n){var c=(n/2|0)-1;c=(c<0?0:c);return mD[n]+readInt(c);};var readData=function(){var e=buffer.length*8;while(p<e){var s=readCode(tL);if(s<256){r[w++]=s;}
else if(s>256){var l=readL(s-256-1);var d=readD(readCode(tD));for(var i=0;i<l;i++){r[w++]=r[w-1-d];}}
else if(s==256){break;}}};while(true){var h=readInt(1);var m=readInt(2);switch(m){case 0:p+=8-(p%8||8);var l=readInt(16);var nl=readInt(16);var a=buffer.slice(p/8,p/8+l);for(var i=0;i<a.length;i++){r[w++]=a[i];}
p+=l*8;break;case 1:var tL=(function(){var v=[];for(var i=0;i<286;i++){switch(true){case(i<144):v.push([8,i+48,i]);break;case(i<256):v.push([9,i+256,i]);break;case(i<280):v.push([7,i-256,i]);break;case(i<286):v.push([8,i-88,i]);break;}}
return v;})();var tD=(function(){var v=[];for(var i=0;i<30;i++){v.push([5,i,i]);}
return v;})();readData();break;case 2:var lL=readInt(5)+256+1;var lD=readInt(5)+1;var lB=readInt(4)+4;var cB=(function(){var v=[];var d=[];for(var i=0;i<lB;i++){d.push(readInt(3));}
for(var i=lB;i<19;i++){d.push(0);}
for(var i=0;i<mO.length;i++){v[mO[i]]=d[i];}
return v;})();var tB=getTree(cB);var cL=readC(lL);var tL=getTree(cL);var cD=readC(lD);var tD=getTree(cD);readData();break;}
if(h){break;}}
return new Uint8Array(r);};Uint8Array.prototype.unserializeSer=function(){var buffer=this;var table=[];var p=0;var BV={"STREAM_MAGIC":0xACED,"STREAM_VERSION":0x0005,"baseWireHandle":0x7E0000};var TS={"BYTE":0x42,"CHAR":0x43,"DOUBLE":0x44,"FLOAT":0x46,"INTEGER":0x49,"LONG":0x4A,"SHORT":0x53,"BOOLEAN":0x5A,"ARRAY":0x5B,"OBJECT":0x4C};var TC={"NULL":0x70,"REFERENCE":0x71,"CLASSDESC":0x72,"OBJECT":0x73,"STRING":0x74,"ARRAY":0x75,"CLASS":0x76,"BLOCKDATA":0x77,"ENDBLOCKDATA":0x78,"RESET":0x79,"BLOCKDATALONG":0x7A,"EXCEPTION":0x7B,"LONGSTRING":0x7C,"PROXYCLASSDESC":0x7D,"ENUM":0x7E};var SC={"WRITE_METHOD":0x01,"SERIALIZABLE":0x02,"EXTERNALIZABLE":0x04,"BLOCK_DATA":0x08,"ENUM":0x10};var isTC=function(s){for(var key in TC){if(TC[key]==s){return true;}}
return false;};var readUint=function(n){var r=buffer.getUint(n,p,false);p+=n;return r;};var readInt=function(n){var r=buffer.getInt(n,p,false);p+=n;return r;};var readFloat=function(n){var r=buffer.getFloat(n,p,false).toAbbreviated(4);p+=n;return r;};var readUtf=function(n){var r=buffer.getText(p,n);p+=n;return r;};var readNull=function(){return{"type":TC["NULL"],"value":null};};var readHandle=function(){return table[readUint(4)-BV["baseWireHandle"]];};var readByte=function(){return readUint(1);};var readChar=function(){return String.fromCharCode(readUint(2));};var readDouble=function(){return readFloat(8);};var readSingle=function(){return readFloat(4);};var readInteger=function(){return readInt(4);};var readLong=function(){return readUint(4).mergeLong(readUint(4));};var readShort=function(){return readInt(2);};var readBoolean=function(){return(readByte()!=0?true:false);};var readBuffer=function(n){var r=new Uint8Array(buffer.slice(p,p+n));p+=n;return r;};var readText=function(){return readUtf(readUint(2));};var readClassDesc=function(){var r={"type":TC["CLASSDESC"],"value":{}};r["value"]["class"]=readText();r["value"]["suid"]=readLong();addHandle(r);r["value"]["flag"]=readByte();var size=readUint(2);r["value"]["field"]=(function(){var v=[];for(var i=0;i<size;i++){var f={};f["type"]=readByte();f["key"]=readText();f["class"]=(function(){switch(f["type"]){case TS["ARRAY"]:case TS["OBJECT"]:return getString();break;}})();v.push(f);}
if(buffer[p]==TC["ENDBLOCKDATA"]){p+=1;}
return v;})();return r;};var readObject=function(){var r={"type":TC["OBJECT"],"value":{}};r["value"]["desc"]=getClassDesc();addHandle(r);r["value"]["data"]=(function(){var v={};for(var i=0;i<r["value"]["desc"][0]["value"]["fields"].length;i++){v[r["value"]["desc"][0]["value"]["fields"][i]["key"]]=getValue(r["value"]["desc"][0]["value"]["fields"][i]["type"]);}
return v;})();r["value"]["content"]=(function(){switch(true){case((r["value"]["desc"][0]["value"]["flag"]&SC["SERIALIZABLE"])&&(r["value"]["desc"][0]["value"]["flag"]&SC["WRITE_METHOD"])==0):var v=[];switch(r["value"]["desc"][0]["value"]["class"]){case"com.cyberstep.ring.data.ChallengeClearData":var b=8;var n=r["value"]["data"]["clearflag"]["value"]["data"].length;var s=p-n*b;for(var i=0;i<n;i++){for(var j=0;j<b;j++){v.push(buffer[s+(i+1)*8-j-1]);}}
v={"type":TC["BLOCKDATA"],"value":new Uint8Array(v)};break;}
return v;break;case((r["value"]["desc"][0]["value"]["flag"]&SC["SERIALIZABLE"])&&(r["value"]["desc"][0]["value"]["flag"]&SC["WRITE_METHOD"])>0):var v=[];switch(r["value"]["desc"][0]["value"]["class"]){case"java.util.Hashtable":case"java.util.HashMap":var block=transBlockData(getBlockData());var size=block.getInt(4,4,false);for(var i=0;i<size;i++){v.push({"key":getObject(),"value":getObject()});}
break;case"java.util.TreeMap":var block=transBlockData(getBlockData());var size=block.getInt(4,0,false);for(var i=0;i<size;i++){v.push({"key":getObject(),"value":getObject()});}
break;case"java.util.TreeSet":var sort=getObject();var block=transBlockData(getBlockData());var size=block.getInt(4,0,false);for(var i=0;i<size;i++){v.push({"key":getObject(),"value":getObject()});}
break;case"java.util.ArrayList":var block=getBlockData();var size=r["value"]["data"]["size"];for(var i=0;i<size;i++){v.push(getObject());}
break;case"java.util.Vector":break;case"java.util.BitSet":var b=8;var n=r["value"]["data"]["bits"]["value"]["data"].length;var s=p-n*b;for(var i=0;i<n;i++){for(var j=0;j<b;j++){v.push(buffer[s+(i+1)*8-j-1]);}}
v={"type":TC["BLOCKDATA"],"value":new Uint8Array(v)};break;default:console.log("flag: "+r["value"]["desc"][0]["value"]["flag"]+" class :"+r["value"]["desc"][0]["value"]["class"],p);break;}
if(buffer[p]==TC["ENDBLOCKDATA"]){p+=1;}
return v;break;case((r["value"]["desc"][0]["value"]["flag"]&SC["EXTERNALIZABLE"])&&(r["value"]["desc"][0]["value"]["flag"]&SC["BLOCK_DATA"])>0):var v=[];switch(r["value"]["desc"][0]["value"]["class"]){case"com.cyberstep.geometry.Vector3D":var block=transBlockData(getBlockData());v=[block.getFloat(4,0,false),block.getFloat(4,4,false),block.getFloat(4,8,false)];break;case"com.cyberstep.ring.util.Counter":var block=transBlockData(getBlockData());var size=block.getInt(2,0,false);for(var i=0;i<size;i++){v.push({"key":getObject(),"value":getBlockData()});}
break;case"com.cyberstep.ring.util.Param":case"com.cyberstep.ring.data.UserBaggage":var block=transBlockData(getBlockData());var size=block.getInt(4,0,false);for(var i=0;i<size;i++){var key=getObject();var block=transBlockData(getBlockData());switch(block[0]){case 0:v.push({"key":key,"value":block.getInt(1,1,false)});break;case 1:v.push({"key":key,"value":block.getInt(2,1,false)});break;case 2:v.push({"key":key,"value":block.getInt(4,1,false)});break;case 3:v.push({"key":key,"value":block.getInt(4,1,false).mergeLong(block.getInt(4,5,false))});break;case 7:v.push({"key":key,"value":getObject()});break;case 9:v.push({"key":key,"value":{"type":TC["NULL"],"value":null}});break;default:console.log("flag: "+r["value"]["desc"][0]["value"]["flag"]+" class :"+r["value"]["desc"][0]["value"]["class"]+" param0 :"+block[0],p);break;}}
break;case"com.cyberstep.ring.sys.HostInfo":case"com.cyberstep.ring.sys.EntryID":case"com.cyberstep.ring.sys.chat.ChatRoomID":case"com.cyberstep.ring.sys.guild.GuildID":case"com.cyberstep.ring.shop.ShopItem":case"com.cyberstep.ring.shop.ShopItemConsumable":v=getBlockData();break;case"com.cyberstep.ring.sys.UserID":case"com.cyberstep.ring.sys.EUserID":v=getString();break;case"com.cyberstep.onstage.gfx.Texture":case"com.cyberstep.ring.sys.UserList":case"com.cyberstep.ring.sys.chat.ChatMessage":case"com.cyberstep.ring.data.SkinHead":var a=[];while(true){if((buffer[p]==TC["BLOCKDATA"])||(buffer[p]==TC["BLOCKDATALONG"])){v=getBlockData();a.writes(v["value"]);}
else if(buffer[p]==TC["NULL"]){p+=1;}
else if(buffer[p]==TC["ENDBLOCKDATA"]){break;}}
if((v["type"]==TC["BLOCKDATA"])||(v["type"]==TC["BLOCKDATALONG"])){v["value"]=new Uint8Array(a);if(v["value"].length>0xFF){v["type"]=TC["BLOCKDATALONG"];}}
break;case"com.cyberstep.ring.sys.event.EventSavedInfoBaggage":case"com.cyberstep.ring.sys.event.EventInfoData":case"com.cyberstep.ring.data.RecentRecord":case"com.cyberstep.ring.data.UserProfile":case"com.cyberstep.ring.data.CommunityConfig":v=getObject();break;case"com.cyberstep.ring.sys.room.GameRoomEntryInfoBag":case"com.cyberstep.ring.data.CommunityUserData":while(true){if(isTC(buffer[p])){if(buffer[p]==TC["ENDBLOCKDATA"]){p+=1;break;}
else{v.push(getBlockData());v.push(getObject());}}
else{break;}}
break;case"com.cyberstep.ring.data.UserData":while(true){if(isTC(buffer[p])){if(buffer[p]==TC["ENDBLOCKDATA"]){p+=1;break;}
else{v.push(getObject());}}
else{break;}}
break;default:console.log("flag: "+r["value"]["desc"][0]["value"]["flag"]+" class :"+r["value"]["desc"][0]["value"]["class"],p);break;}
if(buffer[p]==TC["ENDBLOCKDATA"]){p+=1;}
return v;break;}})();return r;};var readString=function(){var size=readUint(2);var v={"type":TC["STRING"],"value":readUtf(size)};addHandle(v);return v;};var readArray=function(){var r={"type":TC["ARRAY"],"value":{}};r["value"]["desc"]=getClassDesc();addHandle(r);var size=readUint(4);r["value"]["data"]=(function(){var v=[];var type=r["value"]["desc"][0]["value"]["class"].charCodeAt(1);for(var i=0;i<size;i++){v.push(getValue(type));}
return v;})();return r;};var readClass=function(){var r={"type":TC["CLASS"],"value":{}};r["value"]["desc"]=getClassDesc();addHandle(r);return r;};var readBlockData=function(){return{"type":TC["BLOCKDATA"],"value":readBuffer(readByte())};};var readBlockDataLong=function(){return{"type":TC["BLOCKDATALONG"],"value":readBuffer(readUint(4))};};var readException=function(){return{"type":TC["EXCEPTION"]};};var readLongString=function(){var size=readLong();var v={"type":TC["LONGSTRING"],"value":readUtf(size)};addHandle(v);return v;};var readProxyClassDesc=function(){var r={"type":TC["PROXYCLASSDESC"],"value":{}};addHandle(r);var size=readUint(4);r["value"]["interface"]=(function(){var v=[];for(var i=0;i<size;i++){var name=readText();v.push(name);}
return v;})();return r;};var readEnum=function(){var r={"type":TC["ENUM"],"value":{}};r["value"]["desc"]=getClassDesc();addHandle(r);r["value"]["name"]=getString();return r;};var addHandle=function(object){object["handle"]=table.length;table.push(object);};var toSimple=function(data){var d=(arguments.length>1?arguments[1]:data);if(data["value"]["data"]&&data["value"]["data"]["id"]&&data["value"]["data"]["id"]["value"]){return data["value"]["data"]["id"];}
else if(data["value"]["data"]&&data["value"]["data"]["name"]&&data["value"]["data"]["name"]["value"]){return data["value"]["data"]["name"];}
else{return d;}};var getValue=function(type){switch(type){case TS["BYTE"]:return readByte();break;case TS["CHAR"]:return readChar();break;case TS["DOUBLE"]:return readDouble();break;case TS["FLOAT"]:return readSingle();break;case TS["INTEGER"]:return readInteger();break;case TS["LONG"]:return readLong();break;case TS["SHORT"]:return readShort();break;case TS["BOOLEAN"]:return readBoolean();break;case TS["ARRAY"]:case TS["OBJECT"]:return getObject();break;}};var getString=function(){var code=readByte();switch(code){case TC["NULL"]:return readNull();break;case TC["REFERENCE"]:return readHandle();break;case TC["STRING"]:return readString();break;case TC["LONGSTRING"]:return readLongString();break;default:p-=1;break;}};var getBlockData=function(){var code=readByte();switch(code){case TC["NULL"]:return readNull();break;case TC["REFERENCE"]:return readHandle();break;case TC["BLOCKDATA"]:return readBlockData();break;case TC["BLOCKDATALONG"]:return readBlockDataLong();break;default:p-=1;break;}};var getClassDesc=function(){var v=[];var fillFields=function(){for(var i=v.length-1;i>-1;i--){if(!v[i]["value"]["fields"]){v[i]["value"]["fields"]=[];if(i+1<v.length){v[i]["value"]["fields"].writes(v[i+1]["value"]["fields"]);}
v[i]["value"]["fields"].writes(v[i]["value"]["field"]);}}
for(var i=v.length-2;i>-1;i--){v[i]["value"]["desc"]=v[i+1];}
return v;};while(true){var code=readByte();switch(code){case TC["NULL"]:return fillFields();break;case TC["REFERENCE"]:v.push(readHandle());return fillFields();break;case TC["CLASSDESC"]:v.push(readClassDesc());break;case TC["PROXYCLASSDESC"]:v.push(readProxyClassDesc());break;default:p-=1;return;break;}}};var getObject=function(){var r={};var code=readByte();switch(code){case TC["NULL"]:r=readNull();break;case TC["REFERENCE"]:r=readHandle();switch(r["type"]){case TC["OBJECT"]:r=toSimple(r);break;}
break;case TC["CLASSDESC"]:r=readClassDesc();break;case TC["OBJECT"]:r=readObject();break;case TC["STRING"]:r=readString();break;case TC["ARRAY"]:r=readArray();break;case TC["CLASS"]:r=readClass();break;case TC["BLOCKDATA"]:case TC["BLOCKDATALONG"]:var param=[];switch(code){case TC["BLOCKDATA"]:r=readBlockData();break;case TC["BLOCKDATALONG"]:r=readBlockDataLong();break;}
param=r["value"];if(buffer[p]==TC["ENDBLOCKDATA"]){p+=1;}
else{r=getObject();}
if((r["type"]==TC["BLOCKDATA"])||(r["type"]==TC["BLOCKDATALONG"])){r["value"]=param;}
else{r["param"]=param;}
break;case TC["RESET"]:table=[];break;case TC["EXCEPTION"]:r=readException();table=[];break;case TC["LONGSTRING"]:r=readLongString();break;case TC["PROXYCLASSDESC"]:r=readProxyClassDesc();break;case TC["ENUM"]:r=readEnum();break;}
return r;};var getSet=function(){if(readUint(2)!=BV["STREAM_MAGIC"]){return;}
if(readUint(2)!=BV["STREAM_VERSION"]){return;}
var r;while(true){if(isTC(buffer[p])){if(buffer[p]==TC["ENDBLOCKDATA"]){p+=1;break;}
else{r=getObject();}}
else{break;}}
return r;};var transObject=function(object){var handles=(arguments.length>1?arguments[1]:[]);var r={};switch(object["desc"][0]["value"]["class"]){case"java.util.Hashtable":case"java.util.HashMap":case"java.util.TreeMap":case"com.cyberstep.ring.util.Counter":case"com.cyberstep.ring.util.Param":case"com.cyberstep.ring.data.UserBaggage":for(var i=0;i<object["content"].length;i++){var key=transData(object["content"][i]["key"],handles.slice());var value=transData(object["content"][i]["value"],handles.slice());if(!isUndefined(key)&&!isNull(key)&&(key!="")){if(!isUndefined(key["value"])){key=key["value"];}
if(key!="this$0"){r[key]=value;}}}
break;case"java.util.ArrayList":case"com.cyberstep.ring.sys.room.GameRoomEntryInfoBag":case"com.cyberstep.ring.data.UserData":case"com.cyberstep.ring.data.CommunityUserData":return transArray(object["content"],handles.slice());break;case"java.util.BitSet":case"com.cyberstep.ring.sys.event.EventSavedInfoBaggage":case"com.cyberstep.ring.data.UserBaggage":case"com.cyberstep.ring.data.RecentRecord":case"com.cyberstep.ring.data.ChallengeClearData":return transData(object["content"],handles.slice());break;default:if(Object.keys(object["data"]).length){for(var key in object["data"]){var data=transData(object["data"][key],handles.slice());if(key!="this$0"){r[key]=data;}}}
else{return transBlockData(object["content"],handles.slice());}
break;}
return r;};var transBlockData=function(blockData){if(blockData&&blockData["value"]){return blockData["value"];}
return new Uint8Array();};var transString=function(string){if(!isUndefined(string)&&!isUndefined(string["value"])){return string["value"];}
return"";};var transArray=function(array){var handles=(arguments.length>1?arguments[1]:[]);var r=[];for(var i=0;i<array.length;i++){r.push(transData(array[i],handles.slice()));}
return r;};var transData=function(data){var handles=(arguments.length>1?arguments[1]:[]);var r=(function(){if(!isUndefined(data["handle"])){var h=handles.indexOf(data["handle"]);if(h!=-1){switch(table[handles[h]]["type"]){case TC["OBJECT"]:return transString(toSimple(data,undefined));break;}}
handles.push(data["handle"]);}
if(isUndefined(data["type"])){return data;}
switch(data["type"]){case TC["NULL"]:return null;break;case TC["REFERENCE"]:case TC["CLASSDESC"]:case TC["CLASS"]:case TC["RESET"]:case TC["EXCEPTION"]:case TC["PROXYCLASSDESC"]:case TC["ENUM"]:return undefined;break;case TC["BLOCKDATA"]:case TC["BLOCKDATALONG"]:return transBlockData(data);break;case TC["OBJECT"]:return transObject(data["value"],handles.slice());break;case TC["STRING"]:case TC["LONGSTRING"]:return transString(data);break;case TC["ARRAY"]:return transArray(data["value"]["data"],handles.slice());break;}})();if(isNull(r)){r="";}
if(isObject(r)&&!Object.getOwnPropertyNames(r).length){r="";}
return r;};return transData(getSet());};Date.prototype.fromDos=function(dos){this.setTime(new Date(((dos>>25)&0x7F)+1980,((dos>>21)&0x0F)-1,(dos>>16)&0x1F,(dos>>11)&0x1F,(dos>>5)&0x3F,(dos&0x1F)*2,0).getTime());return this;};Date.prototype.toDos=function(){return(((this.getFullYear()-1980)&0x7F)<<25)|(((this.getMonth()+1)&0x0F)<<21)|((this.getDate()&0x1F)<<16)|((this.getHours()&0x3F)<<11)|((this.getMinutes()&0x1F)<<5)|(this.getSeconds()/2);};Date.prototype.format=function(){var m=(arguments.length>0?arguments[0]:"datetime");var r=[];if(m.indexOf("date")!=-1){r.push(this.getFullYear().toString().padStart(4,"0")+"."+(this.getMonth()+1).toString().padStart(2,"0")+"."+this.getDate().toString().padStart(2,"0"));}
if(m.indexOf("time")!=-1){r.push(this.getHours().toString().padStart(2,"0")+":"+this.getMinutes().toString().padStart(2,"0")+":"+this.getSeconds().toString().padStart(2,"0"));}
return r.join(" ");};function FileInfo(path){var buffer=(arguments.length>1?arguments[1]:new Uint8Array());path=path||"0";path=(typeof path=="string"?path:path.toString());var filename=path.slice(path.lastIndexOf("/")+1);var name=(function(){var v=filename;var ld=v.lastIndexOf(".");if(ld!=-1){v=v.slice(0,ld);}
return v;})();var nameFact=(function(){var de=(arguments.length>0?arguments[0]:true);var dc=(arguments.length>1?arguments[1]:true);var db=(arguments.length>2?arguments[2]:true);var dp=(arguments.length>3?arguments[3]:true);var v=name;if(!v.length){return v;}
if(de){var l=v.length;while(l!=-1){v=v.slice(0,l);l=v.lastIndexOf(".");}}
if(dc){var m=[" - 副本"," - Copy"];while(true){var l=-1;var i=-1;for(var i=0;i<m.length;i++){l=v.lastIndexOf(m[i]);if(l!=-1){m=i;break;}}
if((l!=-1)&&(l==v.length-m[i].length)){v=v.slice(0,l);}
else{break;}}}
if(db){while(true){var m1="(";var m2=")";var l1=v.lastIndexOf(m1);var l2=v.lastIndexOf(m2);if((l1!=-1)&&(l2!=-1)&&(l1<l2)&&(l2==v.length-m2.length)&&isPositiveDecimal(v.slice(l1+1,l2))){v=v.slice(0,l1).trim();}
else{break;}}}
if(dp){while(true){var m1="[";var m2="]";var l1=v.lastIndexOf(m1);var l2=v.lastIndexOf(m2);if((l1!=-1)&&(l2!=-1)&&(l1<l2)&&(l2==v.length-m2.length)){v=v.slice(0,l1).trim();}
else{break;}}}
return v;})();var extension=(function(){var v=[];var s=filename.length;while(s){var l=filename.lastIndexOf(".",s-1);if(l!=-1){v.push(filename.slice(l+1,s).toLowerCase());s=l;}
else{break;}}
return v;})();var directory="";var type=extension[0];var version="";var text="";var json="";var nameCore=nameFact;var getDirectory=function(){var v="";var l=path.lastIndexOf("/");if(l!=-1){v=path.slice(0,l);}
v+="/";return v;};this.buffer=buffer;this.path=path;this.filename=filename;this.name=name;this.nameFact=nameFact;this.extension=extension;Object.defineProperty(this,"directory",{"get":function(){directory=directory||getDirectory();return directory;}});Object.defineProperty(this,"type",{"get":function(){return type;}});Object.defineProperty(this,"version",{"get":function(){return version;}});Object.defineProperty(this,"text",{"get":function(){return text;}});Object.defineProperty(this,"json",{"get":function(){return json;}});Object.defineProperty(this,"nameCore",{"get":function(){return nameCore;}});}
function FileBuffer(){var buffer=(arguments.length>0?arguments[0]:new Uint8Array());var array=[];var writeBytes=function(t){array.writes(t);};var writeInt=function(n,t,e){writeBytes(new Uint8Array().fromInt(n,t,e));};var writeUint=function(n,t,e){writeBytes(new Uint8Array().fromUint(n,t,e));};var writeFloat=function(n,t,e){writeBytes(new Uint8Array().fromFloat(n,t,e));};var writeText=function(t){var e=(arguments.length>1?arguments[1]:"UTF-8");writeBytes(new Uint8Array().fromText(t,e));};this.writeBytes=writeBytes;this.writeInt=writeInt;this.writeUint=writeUint;this.writeFloat=writeFloat;this.writeText=writeText;this.fromBuffer=function(buffer){array=new Array.from(buffer);};this.toBuffer=function(){return new Uint8Array(array);};Object.defineProperty(this,"length",{"get":function(){return array.length;}});(function(){if(buffer.length){this.fromBuffer(buffer);}})();}
function Zip(){var buffer=(arguments.length>0?arguments[0]:new Uint8Array());var empty={"path":"","compressedBuffer":new Uint8Array(),"uncompressedBuffer":new Uint8Array(),"datetime":new Date(0),"crc32":"00000000","method":0};var list=[];var indexOf=function(path){for(var i=0;i<list.length;i++){if(list[i]["path"]==path){return i;}}
return-1;};var getFolders=function(path){var r=[];var s=0;while(true){var l=path.indexOf("/",s);if(l>0){r.push((r.length?r[r.length-1]:"")+path.slice(s,l+1));s=l;}
s+=1;if(l==-1){break;}}
return r;};var add=function(file){if(file["path"]){while(file["path"][0]=="/"){file["path"]=file["path"].slice(1);}}
var n=-1;if(file["path"]){var l=indexOf(file["path"]);if(l!=-1){n=l;list[l]["path"]=(file["path"]?file["path"]:list[l]["path"]);list[l]["folders"]=getFolders(list[l]["path"]);list[l]["compressedBuffer"]=(file["compressedBuffer"]?file["compressedBuffer"]:list[l]["compressedBuffer"]||empty["compressedBuffer"]);list[l]["uncompressedBuffer"]=(file["uncompressedBuffer"]?file["uncompressedBuffer"]:list[l]["uncompressedBuffer"]||empty["uncompressedBuffer"]);list[l]["datetime"]=(file["datetime"]?file["datetime"]:list[l]["datetime"]);list[l]["crc32"]=(file["crc32"]?file["crc32"]:list[l]["crc32"]||empty["crc32"]);list[l]["method"]=(file["method"]?file["method"]:(!isUndefined(list[l]["method"])?list[l]["method"]:8));}
else{n=list.length;list.push({"path":file["path"],"folders":getFolders(file["path"]),"compressedBuffer":file["compressedBuffer"]||empty["compressedBuffer"],"uncompressedBuffer":file["uncompressedBuffer"]||empty["uncompressedBuffer"],"datetime":file["datetime"],"crc32":file["crc32"]||empty["crc32"],"method":(!isUndefined(file["method"])?file["method"]:8)});}}
for(var i=0;i<list[n]["folders"].length;i++){var l=indexOf(list[n]["folders"][i]);if(l==-1){list.push({"path":list[n]["folders"][i],"folders":getFolders(list[n]["folders"][i]),"compressedBuffer":empty["compressedBuffer"],"uncompressedBuffer":empty["uncompressedBuffer"],"datetime":list[n]["datetime"],"crc32":empty["crc32"],"method":empty["method"]});}}};var remove=function(path){var l=indexOf(path);if(l!=-1){list.spilce(l,1);}};var sort=function(){var s=function(a,b){var sa=a["path"].split("/");var sb=b["path"].split("/");var l=Math.min(sa.length,sb.length);for(var i=0;i<l;i++){if(!sa[i]||((i<sa.length-1)&&(i==sb.length-1))){return-1;}
else if(!sb[i]||((i==sa.length-1)&&(i<sb.length-1))){return 1;}
else{if(sa[i]!=sb[i]){return sa[i]-sb[i];}}}};list=list.sort(s);};var compress=function(index){var m=(arguments.length>1?arguments[1]:-1);if(m==0){list[index]["method"]=0;}
var r=new Uint8Array();switch(list[index]["method"]){case 0:r=list[index]["uncompressedBuffer"];break;case 8:r=list[index]["uncompressedBuffer"].deflate(m);break;}
if(r.length>list[index]["uncompressedBuffer"].length){list[index]["method"]=0;r=list[index]["uncompressedBuffer"];}
return r;};var uncompress=function(index){var r=new Uint8Array();switch(list[index]["method"]){case 0:r=list[index]["compressedBuffer"];break;case 8:r=list[index]["compressedBuffer"].inflate();break;}
return r;};this.addFiles=function(files){for(var i=0;i<files.length;i++){add(files[i]);}
return this;};this.addFile=function(file){this.addFiles([file]);return this;};this.removeFiles=function(paths){for(var i=0;i<paths.length;i++){remove(paths[i]);}
return this;};this.removeFile=function(path){this.removeFiles([path]);return this;};this.sort=function(){sort();return this;};this.getFileInfo=function(path,field){var m=(arguments.length>2?arguments[2]:-1);var l=indexOf(path);if(l!=-1){switch(field){case"compressedBuffer":list[l]["compressedBuffer"]=(list[l]["compressedBuffer"].length?list[l]["compressedBuffer"]:compress(l,m));break;case"uncompressedBuffer":list[l]["uncompressedBuffer"]=(list[l]["uncompressedBuffer"].length?list[l]["uncompressedBuffer"]:uncompress(l));break;}}
return(list[l]||empty)[field];};this.getList=function(){return list;};this.fromZip=function(buffer){var files=[];var p=0;var t=0;var getMethod=function(m){switch(m){case 0:return"store";break;case 1:return"shrunk";break;case 2:return"expand1";break;case 3:return"expand2";break;case 4:return"expand3";break;case 5:return"expand4";break;case 6:return"implode";break;case 7:return"tokenize";break;case 8:return"deflate";break;case 9:return"deflate64";break;case 10:return"PKWARE DCL";break;case 12:return"BZIP2";break;case 14:return"LZMA";break;case 18:return"IBM TERSE";break;case 19:return"IBM LZ77";break;case 97:return"WavPack";break;case 98:return"PPMd";break;}
return"unknown";};var readInt=function(n){var r=buffer.getInt(n,p,true);p+=n;return r;};var readText=function(n){var e=(arguments.length>1?arguments[1]:"ANSI");var r=buffer.getText(p,n,e);p+=n;return r;};var readHeader=function(){while(p+3<buffer.length){if((buffer[p]==0x50)&&(buffer[p+1]==0x4B)){var v=readInt(4);switch(v){case 0x04034B50:case 0x08074B50:case 0x08064B50:case 0x02014B50:case 0x05054B50:case 0x06064B50:case 0x07064B50:case 0x06054B50:case 0x30304B50:return v;break;}
p-=2;}
else{p+=1;}}
return 0;};var readDateTime=function(){var dos=readInt(4);if(dos){return new Date().fromDos(dos);}};var readCRC32=function(){return new Uint8Array(4).setInt32(readInt(4),0,false).getHex();};var readExtra=function(n){var r=[];var e=p+n;while(p<e){var m=readInt(2);switch(m){case 0x7075:var size=readInt(2);var version=readInt(1);var crc32=readInt(4);var path=readText(size-5,"UTF-8");r["path"]=path;break;case 0x6375:var size=readInt(2);var version=readInt(1);var crc32=readInt(4);var comment=readText(size-5,"UTF-8");r["comment"]=comment;break;default:p=e;break;}}
return r;};while(true){var header=readHeader();switch(header){case 0x04034B50:var eVersion=readInt(2);var flag=readInt(2);var method=readInt(2);if((method!=0)&&(method!=8)){alert("目前不支持压缩方法"+method+"-"+getMethod(method)+"。");return;}
var datetime=readDateTime();var crc32=readCRC32();var cSize=readInt(4);var uSize=readInt(4);var nLength=readInt(2);var eLength=readInt(2);var path=readText(nLength,"ANSI");var extra=readExtra(eLength);if(flag>>3&1){t=p;}
files.push({"path":path,"compressedBuffer":buffer.slice(p,p+cSize),"datetime":datetime,"crc32":crc32,"method":method});p+=cSize;break;case 0x08074B50:var crc32=readCRC32();var cSize=readInt(4);var uSize=readInt(4);if(t){files[files.length-1]["compressedBuffer"]=buffer.slice(t,t+cSize);files[files.length-1]["crc32"]=crc32;t=0;}
break;case 0x08064B50:var eLength=readInt(4);var extra=readExtra(eLength);break;case 0x02014B50:var mVersion=readInt(2);var eVersion=readInt(2);var flag=readInt(2);var method=readInt(2);var datetime=readDateTime();var crc32=readCRC32();var cSize=readInt(4);var uSize=readInt(4);var nLength=readInt(2);var eLength=readInt(2);var cLength=readInt(2);var sNumber=readInt(2);var iAttributes=readInt(2);var eAttributes=readInt(4);var offset=readInt(4);var path=readText(nLength,"ANSI");var extra=readExtra(eLength);var comment=readText(cLength,"ANSI");break;case 0x05054B50:var sLength=readInt(2);var signature=readText(sLength,"ANSI");break;case 0x06064B50:var eSize=readInt(8);var mVersion=readInt(2);var eVersion=readInt(2);var cNumber=readInt(4);var sNumber=readInt(4);var cCount=readInt(8);var tCount=readInt(8);var size=readInt(8);var offset=readInt(8);var e=p+eSize-44;while(p<e){var id=readInt(2);var length=readInt(4);var value=readText(length,"ANSI");}
break;case 0x07064B50:var sNumber=readInt(4);var offset=readInt(8);var tCount=readInt(4);break;case 0x06054B50:var cNumber=readInt(2);var sNumber=readInt(2);var cCount=readInt(2);var tCount=readInt(2);var size=readInt(4);var offset=readInt(4);var cLength=readInt(2);var comment=readText(cLength,"ANSI");break;case 0x30304B50:break;}
if(header==0){break;}}
list=[];this.addFiles(files);return this;};this.toZip=function(){var m=(arguments.length>0?arguments[0]:-1);for(var i=0;i<list.length;i++){list[i]["compressedBuffer"]=(list[i]["compressedBuffer"].length?list[i]["compressedBuffer"]:compress(i,m));list[i]["uncompressedBuffer"]=(list[i]["uncompressedBuffer"].length?list[i]["uncompressedBuffer"]:uncompress(i));list[i]["crc32"]=(list[i]["crc32"]!=empty["crc32"]?list[i]["crc32"]:list[i]["uncompressedBuffer"].getCRC32());}
var zip=new FileBuffer();var writeBytes=function(t){zip.writeBytes(t);};var writeInt=function(l,t){zip.writeInt(l,t,true);};var writeDateTime=function(t){writeInt(4,(t?t.toDos():0));};var writeCRC32=function(t){writeBytes(new Uint8Array().fromHex(t.splitEvery(2).reverse().join("")));};var offsetLocalFile=[];var crc32=[];var writeLocalFile=(function(){var header=0x04034B50;var flag=0x0000;for(var i=0;i<list.length;i++){offsetLocalFile[i]=zip.length;crc32[i]=list[i]["uncompressedBuffer"].getCRC32();writeInt(4,header);writeInt(2,(list[i]["path"].endsWith("/")||!list[i]["uncompressedBuffer"].length?0x000A:0x0014));writeInt(2,flag);writeInt(2,(list[i]["path"].endsWith("/")||!list[i]["uncompressedBuffer"].length?0x0000:list[i]["method"]));writeDateTime(list[i]["datetime"]);writeCRC32(crc32[i]);writeInt(4,list[i]["compressedBuffer"].length);writeInt(4,list[i]["uncompressedBuffer"].length);var name=new Uint8Array().fromText(list[i]["path"],"ANSI");var extra=new Uint8Array().fromText("","ANSI");writeInt(2,name.length);writeInt(2,extra.length);writeBytes(name);writeBytes(extra);writeBytes(list[i]["compressedBuffer"]);}})();var offsetCentralDirectory=zip.length;var writeCentralDirectory=(function(){var header=0x02014B50;var mVersion=0x001F;var flag=0x0000;var sNumber=0x0000;var iAttributes=0x0000;for(var i=0;i<list.length;i++){writeInt(4,header);writeInt(2,mVersion);writeInt(2,(list[i]["path"].endsWith("/")||!list[i]["uncompressedBuffer"].length?0x000A:0x0014));writeInt(2,flag);writeInt(2,(list[i]["path"].endsWith("/")||!list[i]["uncompressedBuffer"].length?0x0000:list[i]["method"]));writeDateTime(list[i]["datetime"]);writeCRC32(crc32[i]);writeInt(4,list[i]["compressedBuffer"].length);writeInt(4,list[i]["uncompressedBuffer"].length);var name=new Uint8Array().fromText(list[i]["path"],"ANSI");var extra=new Uint8Array().fromText("","ANSI");var comment=new Uint8Array().fromText("","ANSI");writeInt(2,name.length);writeInt(2,extra.length);writeInt(2,comment.length);writeInt(2,sNumber);writeInt(2,iAttributes);writeInt(4,(list[i]["path"].endsWith("/")?0x00000010:0x00000020));writeInt(4,offsetLocalFile[i]);writeBytes(name);writeBytes(extra);writeBytes(comment);}})();var sizeCentralDirectory=zip.length-offsetCentralDirectory;var writeEndOfCentralDirectory=(function(){var header=0x06054B50;var cNumber=0x0000;var sNumber=0x0000;var cCount=list.length;var tCount=list.length;var size=sizeCentralDirectory;var offset=offsetCentralDirectory;var comment="";writeInt(4,header);writeInt(2,cNumber);writeInt(2,sNumber);writeInt(2,cCount);writeInt(2,tCount);writeInt(4,size);writeInt(4,offset);var comment=new Uint8Array().fromText("","ANSI");writeInt(2,comment.length);writeBytes(comment);})();return zip.toBuffer();};if(buffer.length){this.fromZip(buffer);}}
var LittleEndian=(function(){var b=new ArrayBuffer(2);new DataView(b).setInt16(0,1,true);return new Int16Array(b)[0]==1;})();var Runtime=(function(){var img=new Image();img.src="";return img.src.split(":")[0];})();var SupportZip=["zip","zar"];var SupportRes=["tab"];var SupportAPI=function(n){switch(n){case"File":return!isUndefined(window.Blob&&window.File&&window.FileList&&window.FileReader&&window.URL);break;case"TypedArrays":return!isUndefined(window.ArrayBuffer&&window.Int8Array&&window.Int16Array&&window.Int32Array&&window.Uint8Array&&window.Uint8ClampedArray&&window.Uint16Array&&window.Uint32Array&&window.Float32Array&&window.Float64Array&&window.DataView);break;case"Canvas":return!isUndefined(document.createElement("canvas")&&document.createElement("canvas").getContext("2d")&&document.createElement("canvas").getContext("2d").drawImage);break;case"Audio":return!isUndefined(window.AudioContext);break;case"MIDI":return!isUndefined(navigator.requestMIDIAccess);break;case"UserMedia":return!isUndefined(navigator.getUserMedia);break;case"Gamepads":return!isUndefined(navigator.getGamepads);break;}};var IncludeAgent=function(n){switch(n){case"MSIE":case"Mozilla":case"Chrome":case"AppleWebKit":case"Safari":case"Mobile Safari":case"UCBrowser":case"MQQBrowser":case"QQ":case"MicroMessenger":return((" "+navigator.userAgent).indexOf(" "+n+"/")!=-1);break;}};function getChecked(t){var c=(typeof t=="string"?document.getElementById(t):t);if(c){return c.checked;}}
function setChecked(t,v){var c=(typeof t=="string"?document.getElementById(t):t);if(c){c.checked=v;}}
function getSelected(t){var l=(arguments.length>1?arguments[1]:-1);if(l!=-1){var n=(t.startsWith("select")?t.slice(6):t);document.getElementsByName(n).forEach(function(a){var i=a.index;if(i==l){return a.options[a.selectedIndex].value;}});}
else{var s=(typeof t=="string"?document.getElementById(t):t);if(s&&s.options&&s.options[s.selectedIndex]){return s.options[s.selectedIndex].value;}}}
function setSelected(t,v){var s=(typeof t=="string"?document.getElementById(t):t);if(s&&s.options){for(var i=0;i<s.options.length;i++){if(s.options[i].value==v){s.options[i].selected=true;return true;}}}
return false;}
function getSelectedIndex(t){var s=(typeof t=="string"?document.getElementById(t):t);if(s&&s.options){return s.selectedIndex;}}
function setSelectedIndex(t,v){var s=(typeof t=="string"?document.getElementById(t):t);if(s&&s.options){if(s.options[i].length>v){s.options[v].selected=true;return true;}}
return false;}
function getImgType(buffer){switch(buffer[0]){case 0x42:return"bmp";break;case 0xFF:return"jpeg";break;case 0x47:return"gif";break;case 0x89:return"png";break;}}
function getImgSrc(buffer){if(buffer.length==0){return"";}
var type=getImgType(buffer);if((type=="bmp")&&(buffer.getInt16(28,true)==32)){var offset=buffer.getInt32(10,true);var width=buffer.getInt32(18,true);var height=buffer.getInt32(22,true);var cvs=document.createElement("canvas");cvs.width=width;cvs.height=height;var ctx=cvs.getContext("2d");var d=ctx.getImageData(0,0,cvs.width,cvs.height);var p=offset;for(var y=height-1;y>-1;y--){for(var x=0;x<width;x++){var n=(y*width+x)*4;d.data[n+2]=buffer[p];d.data[n+1]=buffer[p+1];d.data[n]=buffer[p+2];d.data[n+3]=buffer[p+3];p+=4;}}
ctx.putImageData(d,0,0);return cvs.toDataURL("image/png");}
else{return"data:image/"+(type=="jpeg"?"jpg":type)+";base64,"+buffer.getBase64();}}
function GetImgSize(buffer){if(buffer.length==0){return"0×0";}
var img=document.createElement("img");img.src=getImgSrc(buffer);return img.width.toString()+"×"+img.height.toString();}</script><script type="text/javascript">"use strict";function Pkg(fileInfo){var buffer=fileInfo.buffer;var ext=fileInfo.extension[0];var isValid=false;var All;var File;var Index;var p;var reset=function(){isValid=false;All={};File=[];Index=0;p=0;};var readBuffer=function(n){var r=buffer.slice(p,p+n);p+=n;return r;};var getUint=function(n,s,e){return buffer.getUint(n,s,e);};var setList=function(){var list=[];for(var index=0;index<File.length;index++){list[index]={"path":File[index]["path"],"mark":File[index]["mark"]};}
SetFileList("selectPkgList",list);};var checkBuffer=function(){var m=(arguments.length>0?arguments[0]:"");var date=new Date();if(m){if(!All["checked"]){var tIndex=Index;var zip=new Zip();for(var i=0;i<File.length;i++){Index=i;checkBuffer();zip.addFile({"path":File[i]["path"],"uncompressedBuffer":File[i]["buffer"]});}
All["buffer"]=zip.toZip(0);All["size"]=All["buffer"].length;All["time"]=new Date()-date;All["checked"]=true;Index=tIndex;}}
else{if(!File[Index]["checked"]){switch(ext){case"zip":var u=(File[Index]["method"]==8?File[Index]["buffer"].inflate():File[Index]["buffer"]);if(u.getCRC32()==File[Index]["crc32"]){File[Index]["buffer"]=u;File[Index]["size"]=File[Index]["buffer"].length;File[Index]["time"]=new Date()-date;}
else{File[Index]["buffer"]=new Uint8Array();File[Index]["size"]=File[Index]["buffer"].length;File[Index]["time"]=undefined;}
File[Index]["checked"]=true;break;case"dmp":File[Index]["time"]=File[Index]["time"]||(new Date()-date);File[Index]["checked"]=true;break;}}}};var checkInfo=function(){var m=(arguments.length>0?arguments[0]:"");var t=(m?All:File[Index]);var v=[];var f=new FileInfo(t["path"]);v.push("path: "+f.directory);if(f.name){v.push("name: "+f.name);}
if(f.extension[0]){v.push("type: "+f.extension[0]);}
if(f.name){v.push("byte: "+t["buffer"].length+" ("+t["buffer"].length.toByteLength(2)+")");}
if(!isUndefined(t["datetime"])){v.push("date: "+t["datetime"].format());}
if(f.name){v.push("time: "+(!isUndefined(t["time"])?t["time"]+"ms":"Error"));}
return v.join("\r\n");};var fromZipBuffer=function(buffer){var list=new Zip(buffer).getList();for(var i=0;i<list.length;i++){File.push({"path":list[i]["path"],"buffer":list[i]["compressedBuffer"],"datetime":list[i]["datetime"],"crc32":list[i]["crc32"],"size":list[i]["compressedBuffer"].length,"method":list[i]["method"]});}
setList();isValid=true;};var fromDmpBuffer=function(buffer){var signSer=new Uint8Array([0xAC,0xED,0x00,0x05]);while(p<buffer.length){p=buffer.find(signSer,p);if((p!=-1)&&(p-signSer.length>0)){var n=getUint(4,p-signSer.length,true);var bf=readBuffer(n).trimRight(0);if(bf.length){if(bf[bf.length-1]==0x78){var crc32=bf.getCRC32();var isExist=(function(){for(var i=0;i<File.length;i++){if(File[i]["crc32"]==crc32){return true;}}
return false;})()
if(!isExist){File.push({"buffer":bf,"crc32":crc32});}}}
else{p+=signSer.length;}}
else{break;}}
var m=[{"ext":"tex","header":new Uint8Array().fromHex("ACED000573720021636F6D2E6379626572737465702E6F6E73746167652E6766782E54657874757265")},{"ext":"shp","header":new Uint8Array().fromHex("ACED00057372001F636F6D2E6379626572737465702E6F6E73746167652E6766782E5368617065")},{"ext":"prm","header":new Uint8Array().fromHex("ACED000573720023636F6D2E6379626572737465702E6F6E73746167652E6766782E5072696D6974697665")},{"ext":"fp","header":new Uint8Array().fromHex("ACED000573720021636F6D2E6379626572737465702E72696E672E646174612E466163655061727473")},{"ext":"face","header":new Uint8Array().fromHex("ACED000573720022636F6D2E6379626572737465702E72696E672E646174612E506C6179657246616365")},{"ext":"body","header":new Uint8Array().fromHex("ACED000573720022636F6D2E6379626572737465702E72696E672E646174612E506C61796572426F6479")},{"ext":"md","header":new Uint8Array().fromHex("ACED00057372001F636F6D2E6379626572737465702E72696E672E646174612E4D617044617461")},{"ext":"mop","header":new Uint8Array().fromHex("ACED000573720023636F6D2E6379626572737465702E6F6E73746167652E6766782E4D6F72706844617461")},{"ext":"ptc","header":new Uint8Array().fromHex("ACED000573720022636F6D2E6379626572737465702E6F6E73746167652E6766782E5061727469636C65")},{"ext":"pt2","header":new Uint8Array().fromHex("ACED000573720023636F6D2E6379626572737465702E6F6E73746167652E6766782E5061727469636C6532")},{"ext":"mpv","header":new Uint8Array().fromHex("ACED000573720025636F6D2E6379626572737465702E6F6E73746167652E6766782E6D61702E4D617056696577")},{"ext":"oa","header":new Uint8Array().fromHex("ACED000573720022636F6D2E6379626572737465702E72696E672E646174612E4F626A65637444617461")},{"ext":"aoa","header":new Uint8Array().fromHex("ACED000573720022636F6D2E6379626572737465702E72696E672E646174612E41747461636B44617461")},{"ext":"ioa","header":new Uint8Array().fromHex("ACED000573720020636F6D2E6379626572737465702E72696E672E646174612E4974656D44617461")},{"ext":"poa","header":new Uint8Array().fromHex("ACED000573720022636F6D2E6379626572737465702E72696E672E646174612E506C617965724461746100")},{"ext":"tech","header":new Uint8Array().fromHex("ACED00057372002C636F6D2E6379626572737465702E72696E672E646174612E506C617965724461746124546563686E69717565")},{"ext":"atk","header":new Uint8Array().fromHex("ACED000573720029636F6D2E6379626572737465702E72696E672E646174612E506C61796572446174612441747461636B")},{"ext":"sc","header":new Uint8Array().fromHex("ACED00057372001E636F6D2E6379626572737465702E72696E672E7574696C2E536372697074")},{"ext":"srt","header":new Uint8Array().fromHex("ACED000573720023636F6D2E6379626572737465702E6F6E73746167652E6766782E537472756374757265")},{"ext":"sr","header":new Uint8Array().fromHex("ACED000573720029636F6D2E6379626572737465702E6F6E73746167652E617564696F2E536F756E645265736F75726365")},{"ext":"accs","header":new Uint8Array().fromHex("ACED000573720025636F6D2E6379626572737465702E72696E672E646174612E4163636573736F727944617461")},{"ext":"accs","header":new Uint8Array().fromHex("ACED000573720027636F6D2E6379626572737465702E72696E672E646174612E416363734461746157726170706572")},{"ext":"skin","header":new Uint8Array().fromHex("ACED000573720020636F6D2E6379626572737465702E72696E672E646174612E536B696E44617461")},{"ext":"hskin","header":new Uint8Array().fromHex("ACED0005770101707A00000400010800031F57ACED000573720020636F6D2E6379626572737465702E72696E672E646174612E536B696E44617461")}];var l=File.length.toString().length;var suffixFromClass=function(bf){var v="";var n=bf.slice(0,0x100).find(new Uint8Array().fromText("com."));while((n>6)&&((bf[n-2]!=0x72)||(bf[n-1]!=0x00))){n-=1;}
if(n>6){var s=bf.slice(n+1,n+1+bf[n]).getText();v=s.slice(s.lastIndexOf(".")+1);}
return v;};var suffixFromName=function(bf){var v="";if(bf.length>0x3B+2){var l=bf.getInt(2,0x3B,false);if(bf.length>0x3B+2+l){v=bf.getText(0x3B+2,l);}}
return v;};for(var i=0;i<File.length;i++){var e="ser";for(var j=0;j<m.length;j++){if(File[i]["buffer"].startsWith(m[j]["header"])){e=m[j]["ext"];break;}}
var s=(e=="ser"?suffixFromClass(File[i]["buffer"]):"");var n=(e=="tex"?suffixFromName(File[i]["buffer"]):"");File[i]["path"]=i.toString().padStart(l,"0")+(s?"_"+s:"")+(n?"_"+n:"")+"."+e;}
if(!File.length){return;}
setList();isValid=true;};this.GetBuffer=function(){var m=(arguments.length>0?arguments[0]:"");checkBuffer(m);return(m?All["buffer"]:File[Index]["buffer"]);};this.GetInfo=function(){var m=(arguments.length>0?arguments[0]:"");checkBuffer(m);if(m){All["info"]=All["info"]||checkInfo(m);return All["info"];}
else{File[Index]["info"]=File[Index]["info"]||checkInfo(m);return File[Index]["info"];}};Object.defineProperty(this,"IsValid",{"get":function(){return isValid;}});this.Choose=function(index){Index=index;};(function(){if(buffer.length==0){return;}
reset();switch(ext){case"zip":fromZipBuffer(buffer);break;case"dmp":fromDmpBuffer(buffer);break;}})();}
function Ser(fileInfo){var buffer=fileInfo.buffer;var ext=fileInfo.extension[0];var isValid=false;var Data;var Index;var Buffer;var Text;var reset=function(){isValid=false;Data=undefined;Index=0;Buffer={};Buffer["json"]=undefined;Buffer["csv"]=undefined;Text={};Text["json"]=undefined;Text["csv"]=undefined;};var fromSerBuffer=function(buffer){Data=buffer.unserializeSer();Text["csv"]=toCsvText();isValid=true;};var toJsonBuffer=function(){Text["json"]=Text["json"]||toJsonText();return new Uint8Array().fromText(Text["json"]);};var toCsvBuffer=function(){Text["csv"]=Text["csv"]||toCsvText();var r=[];for(var index=0;index<Text["csv"].length;index++){r[index]=new Uint8Array().fromText(Text["csv"][index]);}
return r;};var toJsonText=function(){var replacer=function(key,value){var isMergeArray=false;if(isMergeArray&&(isArray(value))){var hasObject=(function(){for(var i=0;i<value.length;i++){if(isObject(value[i])){return true;}}
return false;})();if(!hasObject){value=value.join(",");}}
var isTransUin8Array=true;if(isTransUin8Array&&(isUint8Array(value))){value=Array.from(value);}
return value;};return JSON.stringify(Data,replacer,2).replace(/\n/g,"\r\n");};var toCsvText=function(){var getList=function(object,mode){var prefix=(arguments.length>2?arguments[2]:"");if(!isUndefined(object)&&!isNull(object)&&isNumber(object)&&!isString(object)&&!isUint8Array(object)){return[];}
switch(mode){case"key":if(isArray(object)){var v=[];for(var i=0;i<object.length;i++){v.push((prefix==""?i:prefix+"\\"+i));}
return v;}
else{return Object.keys(object);}
break;case"value":if(isArray(object)){return object;}
else{return Object.values(object)||[];}
break;}};var mergeObject=function(object){if(isArray(object)){return mergeArray(object);}
else{var keys=Object.keys(object);var values=Object.values(object);for(var i=0;i<values.length;i++){values[i]=mergeData(values[i]);}
switch(keys.length){case 0:return"";break;case 1:return values[0];break;case 2:if(!isNaN(parseFloat(values[0]))&&isNaN(parseFloat(values[1]))){return values[1]+":"+values[0];}
else{return values.join(":");}
break;default:return values.join(":");break;}}};var mergeArray=function(array){if(!isArray(array)){return array;}
for(var i=0;i<array.length;i++){if(isObject(array[i])){array[i]=mergeObject(array[i]);}}
return array.join(",");};var mergeData=function(data){if(isObject(data)){return mergeObject(data);}
else{return data.toString();}};var list=[];var csv=[];var names=getList(Data,"key",fileInfo.name);var items=getList(Data,"value");for(var index=0;index<items.length;index++){var keys=getList(items[index],"key",names[index]);var values=getList(items[index],"value");var tables=[];for(var i=0;i<values.length;i++){values[i]=getList(values[i],"value");var rows=[];var fields=[];for(var j=0;j<values[i].length;j++){var row=[];var ks=getList(values[i][j],"key");var vs=getList(values[i][j],"value");for(var k=0;k<ks.length;k++){var v=mergeData(vs[k]);var l=fields.indexOf(ks[k]);if(l!=-1){row[l]=v;}
else{fields.push(ks[k]);row[fields.length-1]=v;}}
for(var k=0;k<row.length;k++){if(isUndefined(row[k])){row[k]="";}}
rows.push(row.join("\t"));}
rows.unshift(fields.join("\t"));tables[i]=rows.join("\r\n");}
for(var i=0;i<keys.length;i++){list.push({"path":keys[i]});}
csv.writes(tables);}
SetFileList("selectSerList",list);return csv;};this.ToBuffer=function(ext){switch(ext){case"json":Buffer[ext]=Buffer[ext]||toJsonBuffer(ext);return Buffer[ext];break;case"csv":Buffer[ext]=Buffer[ext]||toCsvBuffer(ext);return Buffer[ext][Index];break;}};this.ToText=function(ext){switch(ext){case"json":Text[ext]=Text[ext]||toJsonText();return Text[ext];break;case"csv":Text[ext]=Text[ext]||toCsvText();return Text[ext][Index];break;}};Object.defineProperty(this,"IsValid",{"get":function(){return isValid;}});this.Choose=function(index){Index=index;};(function(){if(buffer.length==0){return;}
reset();switch(ext){case"ser":fromSerBuffer(buffer);break;}})();}
function Tex(fileInfo){var buffer=fileInfo.buffer;var ext=fileInfo.extension[0];var isValid=false;var Data;var Buffer;var Text;var reset=function(){isValid=false;Data=undefined;Buffer={};Buffer["bmp"]=undefined;Buffer["png"]=undefined;Text={};Text["bmp"]=undefined;Text["png"]=undefined;};var fromTexBuffer=function(buffer){var p=0;buffer=buffer.unserializeSer();if(!buffer.length){return;}
var readUint=function(n){var r=buffer.getUint(n,p,false);p+=n;return r;};var readInt=function(n){var r=buffer.getInt(n,p,false);p+=n;return r;};var readFloat=function(n){var r=buffer.getFloat(n,p,false).toAbbreviated(4);p+=n;return r;};var readUtf=function(n){var r=buffer.getText(p,n);p+=n;return r;};var readByte=function(){return readUint(1);};var readSingle=function(){return readFloat(4);};var readInteger=function(){return readInt(4);};var readBoolean=function(){return(readByte()!=0?true:false);};var readBuffer=function(n){var r=new Uint8Array(buffer.slice(p,p+n));p+=n;return r;};var readText=function(){return readUtf(readUint(2));};var name=readText();var pixel=readInteger();var width=readInteger();var height=readInteger();var repeatCoordinate=readBoolean();var animeCount=readSingle();var priority=readSingle();var data=readBuffer(readInteger());var texture=(data.startsWith([0x78,0x9C])?data.slice(2).inflate():new Uint8Array());var rgba=(function(){var l=width*height;var v=new Uint8Array(l*4);switch(pixel){case-2:for(var i=0;i<l;i++){v[i*4+0]=((texture[i*4+0]<<2)+(texture[i*4+1]>>>6))>>>2;v[i*4+1]=(((texture[i*4+1]&0x3F)<<4)+(texture[i*4+2]>>>4))>>>2;v[i*4+2]=(((texture[i*4+2]&0x0F)<<6)+((texture[i*4+3]&0xFC)>>>2))>>>2;v[i*4+3]=(texture[i*4+3]&0x03)<<6;}
break;case-1:for(var i=0;i<l;i++){v[i*4+0]=(texture[i*2+0]>>>3)<<3;v[i*4+1]=(((texture[i*2+0]&0x07)<<2)+((texture[i*2+1]&0xC0)>>>6))<<3;v[i*4+2]=((texture[i*2+1]&0x3E)>>>1)<<3;v[i*4+3]=((texture[i*2+1]&0x01)?255:0);}
break;case 1:for(var i=0;i<l;i++){v[i*4+0]=texture[i*3+0];v[i*4+1]=texture[i*3+1];v[i*4+2]=texture[i*3+2];v[i*4+3]=255;}
break;case 3:for(var i=0;i<l;i++){v[i*4+0]=texture[i*4+0];v[i*4+1]=texture[i*4+1];v[i*4+2]=texture[i*4+2];v[i*4+3]=texture[i*4+3];}
break;case 5:for(var i=0;i<l;i++){v[i*4+0]=(texture[i*2+0]>>>3)<<3;v[i*4+1]=(((texture[i*2+0]&0x07)<<3)+((texture[i*2+1]&0xE0)>>>5))<<2;v[i*4+2]=(texture[i*2+1]&0x1F)<<3;v[i*4+3]=255;}
break;case 6:for(var i=0;i<l;i++){v[i*4+0]=texture[i*2+0]&0xF0;v[i*4+1]=(texture[i*2+0]&0x0F)<<4;v[i*4+2]=texture[i*2+1]&0xF0;v[i*4+3]=(texture[i*2+1]&0x0F)<<4;}
break;default:console.log("pixel: "+pixel+" unknown for: "+texture[0]+", "+texture[1]+", "+texture[2]+", "+texture[3]+"...");break;}
return v;})();var img=new Image();img.width=width;img.height=height;var cvs=document.createElement("canvas");cvs.width=img.width;cvs.height=img.height;var ctx=cvs.getContext("2d");Data=ctx.getImageData(0,0,cvs.width,cvs.height);for(var y=0;y<cvs.height;y++){for(var x=0;x<cvs.width;x++){var n=(y*cvs.width+x)*4;var n2=((cvs.height-1-y)*cvs.width+x)*4;Data.data[n]=rgba[n2];Data.data[n+1]=rgba[n2+1];Data.data[n+2]=rgba[n2+2];Data.data[n+3]=rgba[n2+3];}}
isValid=true;};var toImgBuffer=function(type){switch(type){case"bmp":var e=LittleEndian;var u=new Uint8Array(54+Data.width*Data.height*4);new DataView(u.buffer,0,2).setInt16(0,0x4D42,e);new DataView(u.buffer,2,4).setInt32(0,u.length,e);new DataView(u.buffer,10,4).setInt32(0,54,e);new DataView(u.buffer,14,4).setInt32(0,40,e);new DataView(u.buffer,18,4).setInt32(0,Data.width,e);new DataView(u.buffer,22,4).setInt32(0,Data.height,e);new DataView(u.buffer,26,2).setInt16(0,1,e);new DataView(u.buffer,28,2).setInt16(0,32,e);new DataView(u.buffer,30,4).setInt32(0,0,e);new DataView(u.buffer,34,4).setInt32(0,Data.width*Data.height,e);new DataView(u.buffer,38,4).setInt32(0,0,e);new DataView(u.buffer,42,4).setInt32(0,0,e);new DataView(u.buffer,46,4).setInt32(0,0,e);new DataView(u.buffer,50,4).setInt32(0,0,e);var p=54;for(var y=Data.height-1;y>-1;y--){for(var x=0;x<Data.width;x++){var n=(y*Data.width+x)*4;u[p]=Data.data[n+2];u[p+1]=Data.data[n+1];u[p+2]=Data.data[n];u[p+3]=Data.data[n+3];p+=4;}}
return u;break;case"png":var img=new Image();img.width=Data.width;img.height=Data.height;var cvs=document.createElement("canvas");cvs.width=img.width;cvs.height=img.height;var ctx=cvs.getContext("2d");ctx.putImageData(Data,0,0);return new Uint8Array().fromBase64(cvs.toDataURL("image/png").split(",")[1]);break;}};this.ToBuffer=function(type){Buffer[type]=Buffer[type]||toImgBuffer(type);return Buffer[type];};var toImgText=function(type){var img=new Image();img.width=Data.width;img.height=Data.height;var cvs=document.createElement("canvas");cvs.width=img.width;cvs.height=img.height;var ctx=cvs.getContext("2d");ctx.putImageData(Data,0,0);return cvs.toDataURL("image/png");};this.ToText=function(type){Text[type]=Text[type]||toImgText(type);return Text[type];};Object.defineProperty(this,"IsValid",{"get":function(){return isValid;}});(function(){if(buffer.length==0){return;}
reset();switch(ext){case"tex":fromTexBuffer(buffer);break;}})();}</script><script type="text/javascript">"use strict";var Info={};var Data={};var Res=[];var Config={"ShowResult":true};var Color={"fontColor":"black","titleSwitch":"gray"};function HideOperate(){document.getElementById("divOperatePkg").style.display="none";document.getElementById("divOperateSer").style.display="none";document.getElementById("divOperateTex").style.display="none";document.getElementById("divSave").style.display="none";document.getElementById("divResult").innerHTML="";}
function HideOption(c,m){switch(c){case"pkg":document.getElementById("divListPkg").style.display=(m?"none":"block");break;case"ser":document.getElementById("divListSer").style.display=(m=="csv"?"block":"none");break;}}
function SetFileList(id,list){document.getElementById(id).onchange=null;document.getElementById(id).innerHTML="";var o=[];for(var i=0;i<list.length;i++){o[i]=document.createElement("option");o[i].value=list[i]["path"];o[i].innerHTML=list[i]["path"];if(!isUndefined(list[i]["mark"])){o[i].title=list[i]["mark"];}
document.getElementById(id).appendChild(o[i]);}
document.getElementById(id).onchange=ModeChanged;}
function SetSave(d,n,e,t){if(d.length==0){return;}
var a=document.getElementById("aSave");a.blob=new Blob([d],{"type":t});URL.revokeObjectURL(a.href);a.href=URL.createObjectURL(a.blob);a.download=n+(e!=""?".":"")+e;a.title=a.download+"\r\n"+d.length.toByteLength(2);document.getElementById("divSave").style.display="block";}
function SetResult(m,s,d,n,e,t){var w=(arguments.length>6?arguments[6]:false);document.getElementById("divResult").innerHTML="";switch(m){case"text":if((Info.type=="bin")&&(d.length==0)){document.getElementById("divOperateBin").style.display="none";alert("格式 "+Info.path+" 无需转换。");return;}
if(Config["ShowResult"]){var p=document.createElement("p");p.style.textAlign="left";p.style.fontSize="14px";if(w){p.style.wordWrap="break-word";}
p.innerHTML=s.toHtml().replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>");document.getElementById("divResult").appendChild(p);}
break;case"image":if(!s.length||!d.length){return;}
if(Config["ShowResult"]){var img=document.createElement("img");img.src=s;document.getElementById("divResult").appendChild(img);}
break;}
SetSave(d,n,e,t);}
function ReadPkg(){if(!Data.IsValid){return;}
document.getElementById("divOperatePkg").style.display="block";var m=(getChecked("inputPkgAllfile")?"all":"");HideOption("pkg",m);if(m){SetResult("text",Data.GetInfo(m),Data.GetBuffer(m),Info.nameCore,"zip","application/octet-binary");}
else{Data.Choose(getSelectedIndex("selectPkgList"));var f=new FileInfo(getSelected("selectPkgList"));var n=f.name;var m=f.extension[0];SetResult("text",Data.GetInfo(),Data.GetBuffer(),n,m,"application/octet-binary");}}
function ReadSer(){if(!Data.IsValid){return;}
document.getElementById("divOperateSer").style.display="block";var m=getSelected("selectSerMode");HideOption("ser",m);switch(m){case"json":SetResult("text",Data.ToText(m),Data.ToBuffer(m),Info.nameCore,m,"text/json");break;case"csv":Data.Choose(getSelectedIndex("selectSerList"));var f=new FileInfo(getSelected("selectSerList"));var n=f.name;SetResult("text",Data.ToText(m),Data.ToBuffer(m),n,m,"text/csv");break;}}
function ReadTex(){if(!Data.IsValid){return;}
document.getElementById("divOperateTex").style.display="block";var m=getSelected("selectTexMode");switch(m){case"bmp":case"png":SetResult("image",Data.ToText(m),Data.ToBuffer(m),Info.nameCore,m,"image/"+m);break;}}
async function ReadBuffer(){switch(Info.extension[0]){case"zip":case"dmp":Data=new Pkg(Info);break;case"ser":Data=new Ser(Info);break;case"tex":Data=new Tex(Info);break;}}
function ReadData(){HideOperate();switch(Info.extension[0]){case"zip":case"dmp":ReadPkg();break;case"ser":ReadSer();break;case"tex":ReadTex();break;case"js":var script=document.createElement("script");script.src="data:text/javascript;base64,"+Info.buffer.getBase64();script.type="text/javascript";script.async=true;document.getElementsByTagName("head")[0].appendChild(script);break;}}
function ReadInput(n,b){Info=new FileInfo(n,b);ReadBuffer();ReadData();}
function ReadBlob(n,b){if(!SupportAPI("File")){alert("当前浏览器内核不支持File API。");return;}
var r=new FileReader();r.onload=function(){ReadInput(n,new Uint8Array(this.result));};r.readAsArrayBuffer(b);}
function ReadFile(e){if(e.target.files.length){ReadBlob(e.target.files[0].name,e.target.files[0]);}}
function DragFile(e){var n=e.dataTransfer.getData("name");if(n!=""){var r=new XMLHttpRequest();r.open("GET",e.dataTransfer.getData("blob"));r.responseType="blob";r.onload=function(){document.getElementById("inputFile").value="";ReadBlob(n,r.response);};r.send();}}
function DragBlob(e){e.preventDefault();}
function DragInput(e){e.dataTransfer.setData("name",e.target.download);e.dataTransfer.setData("blob",e.target.href);}
function OpenFile(){document.getElementById("inputFile").value="";var a=document.getElementById("aSave");ReadBlob(a.download,a.blob);}
function ReadRes(e){var input=document.createElement("input");input.type="file";input.multiple=true;input.accept=e.target.accept;input.onchange=function(e){if(e.target.files.length){var files=e.target.files;var addRes=function(b){var ext=new FileInfo(files[i].name).extension[0];if(SupportRes.indexOf(ext)!=-1){res.push({"path":files[i].name,"base64":b.getBase64()});}
else if(SupportZip.indexOf(ext)!=-1){var list=new Zip(b).getList();for(var j=0;j<list.length;j++){list[j]["uncompressedBuffer"]=(list[j]["uncompressedBuffer"].length?list[j]["uncompressedBuffer"]:(list[j]["method"]==8?list[j]["compressedBuffer"].inflate():new Uint8Array()));if(list[j]["path"]&&list[j]["uncompressedBuffer"].length){var e=new FileInfo(list[j]["path"]).extension[0];if(SupportRes.indexOf(e)!=-1){res.push({"path":list[j]["path"],"base64":list[j]["uncompressedBuffer"].getBase64()});}}}}
i+=1;if(i<files.length){r.readAsArrayBuffer(files[i]);}
else{for(var i=0;i<res.length;i++){var l=(function(){for(var j=0;j<Res.length;j++){if(Res[j]["path"]==res[i]["path"]){return j;}}
return-1;})();if(l!=-1){Res[l]["base64"]=res[i]["base64"];}
else{Res.push({"path":res[i]["path"],"base64":res[i]["base64"]});}}
var list=[];for(var index=0;index<Res.length;index++){list[index]={"path":Res[index]["path"]};}
SetFileList("selectMstList",list);ResChanged(e);}};var res=[];var i=0;var r=new FileReader();r.onload=function(){addRes(new Uint8Array(this.result));};r.readAsArrayBuffer(files[i]);}};input.click();}
function ApplyChanged(e){ReadData();}
function ModeChanged(e){ApplyChanged(e);}
function ResChanged(e){ApplyChanged(e);}
function SelectChanged(e){ReadData();}
function KeyChange(e){if(e.type=="keyup"){switch(e.key){case"Shift":Config["ShowResult"]=!Config["ShowResult"];UpdateConfig();break;}}}
function UpdateConfig(){var t=[];for(var n in Config){t.push(n+": "+Config[n]);}
document.getElementById("divTitle").title=t.join("");document.getElementById("divTitle").childNodes[0].style.color=(Config["ShowResult"]?Color["fontColor"]:Color["titleSwitch"]);}
function StartPress(e){switch(e.target.id){case"inputFile":e.target.pressEvent=setTimeout(function(){var m={"inputFile":["inputRes","aOpen"]};if(m[e.target.id]){for(var i=0;i<m[e.target.id].length;i++){var switchId=m[e.target.id][i];switch(switchId){case"inputRes":case"aOpen":document.getElementById(switchId).style.display=(document.getElementById(switchId).style.display=="block"?"none":"block");break;}}
e.target.pressEvent=-1;}},1000);break;}}
function StopPress(e){if(e.target.pressEvent>0){switch(e.target.id){case"inputFile":clearTimeout(e.target.pressEvent);e.target.pressEvent=0;break;}}
else if(e.target.pressEvent<0){e.preventDefault();}}
function Initialize(){var LoadLabel=(function(){var loadText=function(id,text){document.getElementById(id).innerHTML=text;}
loadText("divTitle","ampedT");loadText("divCopyright","Copyright © 心のsky Group");})();var LoadConfig=(function(){var loadLink=function(id,url){var a=document.createElement("a");a.href=url;a.target="_blank";a.innerHTML=document.getElementById(id).innerHTML;a.style.textDecoration="none";a.style.color=Color["fontColor"];document.getElementById(id).innerHTML="";document.getElementById(id).appendChild(a);};loadLink("divTitle","http://shang.qq.com/wpa/qunwpa?idkey=73a1de166e06a6c8a9a3856ef18bec30bfe9036ca3b7cee2fa537edd5ebf2d20");loadLink("divCopyright","http://wpa.qq.com/msgrd?v=3&uin=308973930&site=ampedT_"+Version+".html&menu=yes");var loadAccept=function(id,d,m){var v=[];for(var i=0;i<m.length;i++){v.push("★"+m[i].map(function(a){return"."+a}).join(","));}
v=v.join("\r\n");document.getElementById(id).title=d+"\r\n"+v;document.getElementById(id).accept=(IncludeAgent("QQ")?"":v.replace(/★/g,"").replace(/\r\n/g,","));};loadAccept("inputFile","Load File",[["zip","dmp"],["ser"],["tex"],["js"]]);loadAccept("inputRes","Add Res",[SupportRes,SupportZip]);UpdateConfig();})();var LoadUrlParameter=(function(){var s=location.search.slice(1).split("&");for(var i=0;i<s.length;i++){var a=s[i].split("=");if(a.length==2){switch(a[0].toLowerCase()){case"help":var m=(function(){var r="";var helphelp="\r\n<help>\r\n　[bgcolor]　Help of bgcolor\r\n　[show]　Help of show\r\n　[check]　Help of check\r\n　[input]　Help of input\r\n　[all]　Help above all\r\n";var helpbgcolor="\r\n<bgcolor>\r\n　[#rrggbbaa]　RGBA Hex\r\n";var helpshow="\r\n<show>\r\n　[version]　Version\r\n　[bgcolor]　BackgroundColor\r\n";var helpcheck="\r\n<check>\r\n　[le]　LittleEndian\r\n　[api]　SupportAPI\r\n　[agent]　UserAgent\r\n";var helpinput="\r\n<input>\r\n　[filename.ext|filebufferbase64string]　Input File Info\r\n";var helpkey="\r\n<key>\r\n　[module|key]　Module Key Info\r\n";var v=a[1].split(",");for(var j=0;j<v.length;j++){switch(v[j].toLowerCase()){case"help":r+=helphelp;break;case"bgcolor":r+=helpbgcolor;break;case"show":r+=helpshow;break;case"check":r+=helpcheck;break;case"default":r+=helpdefault;break;case"input":r+=helpinput;break;case"key":r+=helpkey;break;case"all":return helphelp+helpbgcolor+helpshow+helpcheck+helpdefault+helpinput+helpkey;break;}}
return r;})();document.write(("【"+a[0]+"】\r\n\r\nexpurl/ampedT.html?key1=value1&key2=value2,value3|value4&key3=name1:value5,value6;name2:value7|value8\r\n\r\n<key>　{name}　[value]　explain\r\n"+m).toHtml().replace(/\r\n/g,"</br>"))
break;case"bgcolor":var v=a[1].split(",");var c=v[v.length-1].slice(0,8).padEnd(8,"0");if(c.isHex()){var a=parseInt(c.slice(0,2),16)/256;var r=parseInt(c.slice(2,4),16);var g=parseInt(c.slice(4,6),16);var b=parseInt(c.slice(6,8),16);document.body.style.backgroundColor="rgba("+r+", "+g+", "+b+", "+a+")";}
break;case"show":var m=(function(){var r="";var showversion="\r\nVersion："+Version+"\r\n";var showbgcolor="\r\nBgColor："+(document.body.style.backgroundColor==""?"rgb(255, 255, 255)":document.body.style.backgroundColor)+"\r\n";var v=a[1].split(",");for(var j=0;j<v.length;j++){switch(v[j].toLowerCase()){case"version":r+=showversion;break;case"bgcolor":r+=showbgcolor;break;case"all":return showversion+showbgcolor;break;}}
return r;})();alert("【"+a[0]+"】\r\n"+m);break;case"check":var m=(function(){var r="";var checkle="\r\nLittleEndian："+LittleEndian+"\r\n";var checkapi=(function(){var n=["File","TypedArrays","Canvas","Audio","MIDI","UserMedia","Gamepads"];var m=[];for(var k=0;k<n.length;k++){m.push("\r\nSupport"+n[k]+"API："+SupportAPI(n[k]));}
return m.join("")+"\r\n";})();var checkagent=(function(){var n=["MSIE","Mozilla","Chrome","AppleWebKit","Safari","Mobile Safari","UCBrowser","QQ","MicroMessenger"];var m=[];for(var k=0;k<n.length;k++){m.push("\r\nInclude"+n[k].replace(/\ /g,"")+"Agent："+IncludeAgent(n[k]));}
return m.join("")+"\r\n";})();var v=a[1].split(",");for(var j=0;j<v.length;j++){switch(v[j].toLowerCase()){case"le":r+=checkle;break;case"api":r+=checkapi;break;case"agent":r+=checkagent;break;case"all":return checkle+checkapi+checkagent;break;}}
return r;})();alert("【"+a[0]+"】\r\n"+m);break;case"input":var v=a[1].split(",");for(var j=0;j<v.length;j++){var f=v[j].split("|");if((f.length==2)&&(j==0)){ReadInput(f[0],new Uint8Array().fromBase64(f[1]));}}
break;case"key":var v=a[1].split(",");for(var j=0;j<v.length;j++){var c=v[j].split(":");if(c.length==2){var module=c[0].toLowerCase();switch(module){case"wave":Module.set(module,c[1]);break;}}}
break;}}}})();var addEvent=(function(){window.onkeydown=KeyChange;window.onkeyup=KeyChange;document.getElementById("inputFile").onchange=ReadFile;document.getElementById("inputFile").ondragover=DragBlob;document.getElementById("inputFile").ondrop=DragFile;document.getElementById("inputFile").onmousedown=StartPress;document.getElementById("inputFile").ontouchstart=StartPress;document.getElementById("inputFile").onmouseout=StopPress;document.getElementById("inputFile").ontouchmove=StopPress;document.getElementById("inputFile").ontouchend=StopPress;document.getElementById("inputFile").ontouchcancel=StopPress;document.getElementById("inputFile").onclick=StopPress;document.getElementById("inputRes").onclick=ReadRes;document.getElementById("selectSerMode").onchange=SelectChanged;document.getElementById("selectSerList").onchange=SelectChanged;document.getElementById("inputPkgAllfile").onchange=SelectChanged;document.getElementById("selectPkgList").onchange=SelectChanged;document.getElementById("selectTexMode").onchange=SelectChanged;document.getElementById("aOpen").onclick=OpenFile;document.getElementById("aSave").ondragstart=DragInput;})();}
window.onload=Initialize;</script></body></html>
