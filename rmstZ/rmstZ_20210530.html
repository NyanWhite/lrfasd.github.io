<!DOCTYPE html><html><head><meta http-equiv="Content-Type"content="text/html;charset=UTF-8"/><meta name="viewport"content="width=device-width,initial-scale=1,user-scalable=yes"/><style type="text/css">#divRoot{text-align:center}#divTitle{clear:both;margin:16px}#divFile{margin:3px}#inputResMst{display:none}#divOperate{margin:3px}#divOperateMst{display:none}#divOperateImg{display:none}#divOperatePkg{display:none}#divOperateBin{display:none}#divSave{margin:3px;display:none}#aOpen{display:none}#divResult{font-family:Consolas}#divCopyright{clear:both;margin:16px}summary{cursor:pointer}</style></head><body><div id="divRoot"><div id="divTitle"></div><div id="divFile"><input id="inputFile"type="file"/></div><div id="divOperate"><div id="divOperateMst"><a id="inputResMst"href="javascript:void(0)">+</a><div id="divGroupMst"><select id="selectGroupMst"title="Group"><option value="data"selected="selected">数据</option><option value="file">文件</option></select></div><div id="divGroupMstData"><label title="AutoApply"><input type="checkbox"id="inputAutoApply"checked="checked">自动</input></label><select id="selectMstMode"title="Ext"><option value="log">log</option><option value="bms">bms</option><option value="bme">bme</option><option value="bml">bml</option><option value="pms">pms</option><option value="dtx">dtx</option><option value="msd">msd</option><option value="sm">sm</option><option value="sma">sma</option><option value="ssc">ssc</option><option value="dwi">dwi</option><option value="ksf">ksf</option><option value="ucs">ucs</option><option value="dance">dance</option><option value="tja">tja</option><option value="osu">osu</option><option value="xml">xml</option><option value="vox">vox</option><option value="ksh">ksh</option><option value="imd">imd</option><option value="mde">mde</option><option value="txt">txt</option><option value="json">json</option><option value="mc">mc</option><option value="c2s">c2s</option><option value="aff">aff</option><option value="drb">drb</option><option value="mst">mst</option><option value="png">png</option><option value="html">html</option></select><label title="LockKey"><input type="checkbox"id="inputLockKey">锁键</input></label><div><div id="divSelectMstdtx"><label title="Drum"><input type="checkbox"id="inputMstdtxdrum"checked="checked">乐鼓</input></label><label title="Guitar"><input type="checkbox"id="inputMstdtxguitar"checked="checked">吉他</input></label><label title="Bass"><input type="checkbox"id="inputMstdtxbass"checked="checked">贝斯</input></label></div><div id="divSelectMsttja"><select id="selectMsttjaMode"title="Mode"><option value="taiko"selected="selected">taiko</option><option value="jube">jube</option></select></div><div id="divSelectMstosu"><select id="selectMstosuMode"title="Mode"><option value="osu"selected="selected">osu</option><option value="taiko">taiko</option><option value="ctb">ctb</option><option value="mania">mania</option></select></div><div id="divSelectMstxml"><select id="selectMstxmlMode"title="Type"><option value="yddr"selected="selected">yddr</option><option value="ydsd">ydsd</option><option value="mde">mde</option><option value="dynamix">dynamix</option><option value="qqx5">qqx5</option></select><div id="divSelectMstxmlqqx5"><select id="selectMstxmlqqx5Mode"title="Mode"><option value="idol"selected="selected">idol</option><option value="crescent">crescent</option><option value="pinball">pinball</option><option value="classic">classic</option><option value="bubble">bubble</option></select></div></div><div id="divSelectMsttxt"><select id="selectMsttxtMode"title="Type"><option value="cytus"selected="selected">cytus</option><option value="cytus2">cytus2</option><option value="musync">musync</option><option value="bangdream">bangdream</option></select><div id="divSelectMsttxtcytus"><label title="Version2"><input type="checkbox"id="inputMsttxtcytusVersion2"checked="checked">Version2</input></label></div><div id="divSelectMsttxtmusync"><label title="Encrypt"><input type="checkbox"id="inputMsttxtmusyncEncrypt">加密</input></label></div></div><div id="divSelectMstjson"><select id="selectMstjsonMode"title="Type"><option value="deemo"selected="selected">deemo</option><option value="imd">imd</option></select></div><div id="divSelectMstmc"><select id="selectMstmcMode"title="Mode"><option value="key"selected="selected">key</option><option value="step">step</option><option value="dj">dj</option><option value="catch">catch</option><option value="pad">pad</option><option value="taiko">taiko</option><option value="ring">ring</option><option value="slide">slide</option></select></div><div id="divSelectMstdraw"><select id="selectMstdrawMode"title="Style"><option value="bms">bms</option><option value="tja">tja</option><option value="osu">osu</option><option value="imd">imd</option><option value="mc">mc</option><option value="aff"selected="selected">aff</option><option value="txt">txt</option></select></div><div id="divSelectMstIndex"></div></div><details id="detailsOptionMstDraw"><summary title="Draw">绘制</summary><div id="divOptionMstDrawOption"><div><label title="DrawBackground"><input type="checkbox"id="inputDrawBackground"checked="checked">背景色</input></label><label title="DrawTrack"><input type="checkbox"id="inputDrawTrack"checked="checked">轨道线</input></label><label title="DrawFrame"><input type="checkbox"id="inputDrawFrame"checked="checked">边框线</input></label></div><div><label title="DrawStartEndLine"><input type="checkbox"id="inputDrawStartEndLine"checked="checked">起止线</input></label><label title="DrawBeatLine"><input type="checkbox"id="inputDrawBeatline"checked="checked">音拍线</input></label><label title="DrawNoteLine"><input type="checkbox"id="inputDrawNoteline"checked="checked">音节线</input></label></div><div><label title="DrawBeatData"><input type="checkbox"id="inputDrawBeatData"checked="checked">变拍数</input></label><label title="DrawNoteDataCombo"><input type="checkbox"id="inputDrawNoteDataCombo"checked="checked">连击数</input></label><label title="DrawEffectDataBGM"><input type="checkbox"id="inputDrawEffectDataBGM"checked="checked">背景音</input></label></div><div><label title="DrawEffectDataSE"><input type="checkbox"id="inputDrawEffectDataSE"checked="checked">效果音</input></label><label title="DrawStatusData"><input type="checkbox"id="inputDrawStatusData"checked="checked">状态值</input></label><label title="DrawTransformData"><input type="checkbox"id="inputDrawTransformData"checked="checked">变换值</input></label></div><div><label title="DrawTime"><input type="checkbox"id="inputDrawTime"checked="checked">音时数</input></label><label title="DrawBeat"><input type="checkbox"id="inputDrawBeat">音拍数</input></label><label title="DrawNote"><input type="checkbox"id="inputDrawNote">音节数</input></label></div><div id="divOptionMstDrawAudio"><label title="DrawTimeDomain"><input type="checkbox"id="inputDrawTimeDomain">时间域</input></label><label title="DrawFrequencyDomain"><input type="checkbox"id="inputDrawFrequencyDomain">频率域</input></label></div></div><div id="divOptionMstDrawScale"><select id="selectDrawScaleX"title="DrawScaleX"><option value="1"selected="selected">128px</option><option value="2.5">320px</option><option value="5">640px</option><option value="7.5">960px</option></select><select id="selectDrawScaleY"title="DrawScaleY"><option value="1">X1</option><option value="2">X2</option><option value="3">X3</option><option value="4"selected="selected">X4</option></select></div></details></div><div id="divGroupMstFile"><div id="divListMst"><select id="selectMstList"title="List"></select></div></div></div><div id="divOperateImg"><select id="selectImgMode"title="Size"><option value="0X0"selected="selected">_raw.png</option><option value="480X320">.png</option><option value="140X60">_title_ipad.png</option><option value="140X90">_title_140_90.png</option><option value="210X98">_cover_hd.png</option><option value="1024X768">_ipad.png</option><option value="500X500">_base.jpg</option><option value="256X256">_base_256.jpg</option></select></div><div id="divOperatePkg"><label title="AllFile"><input type="checkbox"id="inputPkgAllfile">全部文件</input></label><div id="divOptionPkg"><select id="selectPkgTransMode"title="TransData"><option value="|"selected="selected">|</option></select></div><div id="divListPkg"><select id="selectPkgList"title="List"></select></div></div><div id="divOperateBin"><select id="selectBinMode"title="Type"><option value="bin">bin</option><option value="xml"selected="selected">xml</option><option value="html">html</option><option value="json">json</option><option value="list">list</option><option value="bat">bat</option></select></div><div id="divSave"><a id="aOpen"href="javascript:void(0)"title="Open">↑</a><a id="aSave"title="Save">保存</a></div></div><div id="divResult"></div><div id="divCopyright"></div></div><script type="text/javascript">"use strict";var Version="20210530";var Coding={"ANSI":{"from":"00FF,8140,8141,8144,8145,8146,8147,814A,814B,814C,814D,814F,8150,8151,8152,8153,8154,8157,8158,8159,815A,815B,815C,815D,815F,8163,8165,816B,816C,8176,817D,817E,8180,8181,8183,8184,8187,8188,8189,818C,818D,8191,8194,8195,8196,8198,8199,819C,819D,819E,81A0,81A1,81A4,81A5,81A6,81A9,81AA,81AB,81AC,81B3,81B5,81BA,81BC,81BD,81BE,81C0,81C3,81C4,81C5,81C6,81C7,81C8,81C9,81CE,81D0,81D6,81D7,81D8,81D9,81DB,81DC,81DD,81DF,81E1,81E3,81E4,81E8,81E9,81EC,81EF,81F0,81F1,81F2,81F3,81F5,81F7,81FA,81FB,81FD,8240,8241,8242,8243,8248,8251,8254,8258,825B,8260,8261,8262,8263,8264,8266,8267,8269,826A,826B,826F,8270,8273,8280,8281,8282,8284,8285,8288,8289,828B,828C,828F,8290,8291,829C,829D,829E,82A2,82A5,82A8,82A9,82AE,82B2,82B3,82BB,82C1,82CA,82CD,82CF,82D3,82D5,82D9,82EE,82EF,82F0,82F2,82F7,82FE,8340,8352,8358,835B,8366,836A,836E,836F,8374,837E,8380,8382,8388,8396,83B3,83B4,83B5,83B6,83B7,83BA,83BC,83BF,83C0,83C5,83C7,83C9,83CB,83CC,83CD,83CE,83D0,83D2,83D4,83D6,83DA,83DC,83DD,83DE,83E1,83E2,83E3,83E8,83EA,83EB,83EE,83F0,83F3,83F4,83F5,83F6,83F8,83F9,8440,8443,8444,8446,8448,844E,844F,8450,8452,8453,8454,8455,8457,8458,845A,845C,845F,8460,8462,8465,8468,8469,846A,846B,846D,846F,8470,8471,8477,8478,847A,847C,847D,8480,8483,8484,8486,8489,848A,848B,848F,8491,849B,849C,849D,84A2,84A9,84AB,84B2,84B3,84B7,84BA,84C4,84C7,84CA,84CB,84CC,84D0,84D1,84D4,84D5,84DB,84DF,84EA,84F2,84F5,84F9,84FA,84FE,8540,8544,8545,8547,8549,854A,854C,854F,8552,855C,855E,855F,8560,8561,8562,8565,8566,8567,8569,856A,856B,856C,856D,856E,8570,8571,8572,8573,8577,8579,857A,857C,857D,8580,8585,8587,8588,858A,858B,858D,858E,858F,8593,859A,859E,85A1,85A2,85A7,85AA,85AC,85AD,85AE,85B1,85B3,85B4,85B5,85B6,85B9,85BA,85BB,85BC,85BD,85BE,85C1,85C2,85C3,85C5,85C6,85C7,85C8,85CA,85CB,85CC,85CD,85CF,85D1,85D2,85D3,85D7,85D8,85D9,85DE,85DF,85E0,85E1,85E9,85EA,85EC,85EE,85EF,85F0,85F1,85F5,85F6,85F7,85F8,85FA,85FB,8640,8641,8642,8643,8644,8645,8648,864A,864B,864C,864D,864E,8650,8651,8652,8653,8658,865A,865D,8663,8664,8665,8666,866A,866B,8670,8672,8678,867C,867D,8680,8682,8683,8684,8685,8688,868C,868D,868E,868F,8690,8692,8697,869B,86A0,86A4,86A6,86A8,86A9,86AF,86B1,86B2,86B3,86B5,86B8,86B9,86BB,86BE,86C0,86C1,86C8,86D1,86D2,86D3,86D4,86D5,86D6,86D7,86DC,86DF,86E1,86E4,86E5,86EA,86EB,86EC,86ED,86EE,86EF,86F1,86F3,86F4,86F5,86FA,86FB,8740,8742,8744,8745,874D,874F,8751,8754,8756,875A,875D,875E,875F,8761,8762,8765,8771,8776,8778,877A,8780,8781,8784,8788,878C,8790,8798,879F,87A2,87B1,87BC,87C3,87C7,87D4,87DD,87DF,87E1,87E2,87E3,87E9,87EA,87EC,87EE,87F1,87F3,87F6,87F7,87F8,8840,884A,884C,884F,8853,8854,8856,885B,885D,885E,885F,8863,8865,8866,886B,886D,886F,8870,8871,8872,8873,8876,8878,887B,8880,8881,8885,888A,8891,8895,8896,8897,8898,8899,889C,889D,88A0,88A9,88B0,88B2,88B4,88B5,88B7,88B9,88BA,88BD,88C5,88C6,88CA,88CD,88CF,88D1,88D2,88D5,88D8,88D9,88DC,88DF,88E2,88E6,88E7,88E9,88EE,88F3,88F7,8940,8946,894D,8950,8952,8955,895A,8960,8965,8976,8977,8978,8979,897C,8980,8985,898A,898D,8995,89A7,89AB,89AE,89B9,89BC,89CA,89D0,89D1,89D2,89D4,89D6,89D8,89E0,89E1,89E3,89E8,89E9,89ED,89EF,89F0,89F2,89F6,89F7,89F8,89F9,89FA,89FC,89FE,8A40,8A44,8A45,8A47,8A48,8A4A,8A4B,8A4D,8A4E,8A53,8A54,8A56,8A63,8A64,8A65,8A68,8A6B,8A6C,8A6D,8A6F,8A73,8A75,8A76,8A7A,8A7E,8A80,8A81,8A83,8A85,8A8B,8A8C,8A8E,8A95,8A98,8A9C,8A9E,8A9F,8AA0,8AA5,8AA6,8AA8,8AAB,8AB7,8AB8,8ABB,8ABC,8ABD,8ABF,8AC3,8AC4,8AC8,8ACB,8ACD,8ACF,8AD0,8AD3,8ADA,8ADB,8ADC,8AE1,8AE4,8AE9,8AEB,8AF5,8AF9,8B40,8B41,8B45,8B47,8B50,8B52,8B56,8B68,8B6F,8B7D,8B80,8B85,8B86,8B88,8B8D,8B8F,8B95,8B97,8B9C,8B9D,8B9E,8B9F,8BA2,8BA5,8BA6,8BA8,8BAA,8BAB,8BB0,8BC7,8BD3,8BED,8BEE,8BF0,8BF8,8C40,8C48,8C49,8C4A,8C4B,8C4D,8C4F,8C50,8C53,8C54,8C55,8C59,8C5B,8C5D,8C5E,8C5F,8C60,8C62,8C65,8C66,8C67,8C68,8C6B,8C6F,8C71,8C72,8C75,8C77,8C78,8C7C,8C80,8C81,8C8A,8C8B,8C8D,8C8F,8C94,8C95,8C9C,8C9E,8C9F,8CA1,8CA2,8CA4,8CA8,8CA9,8CAB,8CAC,8CAD,8CAE,8CB2,8CB3,8CB4,8CB8,8CBC,8CBE,8CC1,8CC3,8CC5,8CC7,8CCA,8CCD,8CD1,8CD2,8CD3,8CD4,8CDB,8CDC,8CE3,8CE7,8CE8,8CED,8CF0,8CF2,8CF4,8CF5,8CFA,8D40,8D41,8D44,8D45,8D46,8D47,8D4B,8D4C,8D4D,8D4F,8D55,8D5B,8D61,8D68,8D6A,8D6B,8D6C,8D6E,8D70,8D7A,8D80,8D81,8D83,8D89,8D8E,8D8F,8D93,8D95,8D9A,8D9B,8D9C,8D9F,8DA4,8DAC,8DB4,8DB6,8DC1,8DC3,8DC4,8DCF,8DD0,8DD2,8DD6,8DE3,8DF9,8DFC,8E40,8E56,8E63,8E6A,8E77,8E78,8E7A,8E7C,8E7D,8E80,8E81,8E83,8E88,8E8A,8E8B,8E8C,8E8F,8E91,8E93,8E94,8E9C,8EA1,8EA3,8EA8,8EAA,8EAE,8EAF,8EB5,8EBC,8EC1,8EC3,8EC5,8ED4,8ED5,8ED6,8ED7,8ED8,8EDB,8EDC,8EDE,8EE1,8EE2,8EE3,8EE4,8EE5,8EE9,8EEE,8EF3,8EF4,8EF8,8F40,8F43,8F49,8F4B,8F4F,8F5B,8F5C,8F65,8F66,8F68,8F6B,8F6E,8F6F,8F72,8F73,8F74,8F75,8F76,8F78,8F7B,8F80,8F81,8F83,8F84,8F85,8F8C,8F8D,8F90,8F9F,8FA0,8FA1,8FA5,8FA8,8FA9,8FAA,8FAC,8FAD,8FAF,8FB0,8FB3,8FB4,8FB5,8FB8,8FB9,8FBA,8FBD,8FBE,8FC0,8FC1,8FC3,8FC7,8FCD,8FCE,8FD0,8FD6,8FD7,8FDB,8FE0,8FE2,8FE4,8FE5,8FE8,8FEB,8FED,8FEF,8FF1,8FF3,8FF4,8FF6,8FF9,8FFB,8FFD,8FFE,9040,9042,9044,9046,9047,9049,904A,904C,904F,9052,9057,905C,905E,905F,9066,9067,9069,906A,906C,906F,9071,9075,9077,9078,907A,907C,907D,907E,9080,9082,9086,9088,908C,908D,908E,9091,9092,9093,9095,9097,9098,909A,909B,909C,909D,90A0,90A2,90AA,90AD,90B2,90B5,90B7,90B8,90B9,90BA,90BF,90C0,90C2,90C3,90C5,90CA,90CE,90CF,90D2,90D7,90DB,90DF,90E1,90E2,90E5,90F8,9140,9141,9142,9143,9144,9146,9149,9150,9154,9158,915F,9163,9164,9177,9179,917E,9180,9187,9190,9192,919C,91A2,91A5,91AA,91AB,91B0,91B1,91C2,91D0,91D9,91DF,91E0,91E1,91E3,91E4,91E7,91E8,91E9,91ED,91EE,91EF,91F3,91F5,91FA,91FB,91FE,9240,9242,9245,9247,924E,9250,9251,9253,9255,9257,9259,925A,925D,9261,9267,9268,9269,926C,926D,926F,9271,9275,9278,927B,927C,927D,9280,9281,9282,9283,9284,9285,9287,9289,928A,928C,928D,928E,928F,9293,9294,9298,929C,929E,92A2,92A5,92A6,92A8,92A9,92AC,92AE,92B4,92B6,92BA,92BB,92BD,92BE,92C2,92CA,92CB,92CE,92CF,92D2,92D4,92D8,92DA,92DE,92DF,92E3,92E4,92E5,92E6,92E9,92EA,92F1,92F2,92F3,92F4,92F5,92F6,92F8,92FA,92FB,92FC,92FD,9340,9343,9344,9346,9349,934A,934D,9354,9355,9356,935B,935D,9361,9362,9363,9364,9368,9369,936B,9370,9372,9374,937A,937B,937C,9380,9381,9384,9385,938B,9390,9392,9393,9394,9396,9397,939E,939F,93A2,93A7,93AF,93B0,93B3,93BD,93C4,93C5,93C6,93CF,93D1,93D3,93D7,93DC,93E0,93E2,93E3,93E7,93E8,93E9,93EA,93ED,93EE,93F0,93F7,93F8,93F9,93FD,9440,9443,9446,9447,9448,9461,9469,9471,9476,9480,9483,9488,948A,948E,948F,9490,9492,9497,9499,949B,949D,949E,94A1,94A3,94A4,94A5,94A8,94AA,94AE,94B1,94B2,94B3,94B5,94C4,94C7,94CA,94CB,94CE,94CF,94D0,94D2,94D3,94D5,94D6,94D7,94D8,94D9,94DA,94E2,94E4,94E7,94E8,94EC,94ED,94EF,94F2,94FA,94FB,94FD,9540,9544,9546,954B,954C,954E,9551,9552,9553,9556,9559,955C,955D,9561,9562,9566,9567,9568,956A,956F,9570,9572,9573,957A,957C,957E,9580,9581,9585,9586,9588,9589,958A,958F,9592,9593,9595,9598,959B,959C,959E,95A2,95A6,95AA,95AF,95B8,95BD,95C2,95C6,95CA,95E4,95E5,95ED,95EF,95F5,95F6,95F8,95F9,95FB,95FC,9640,9644,9645,9647,964A,964B,964E,964F,9650,9656,9657,9658,9659,965A,965C,9660,9662,9664,9665,9667,9668,966A,966B,966C,966E,9673,9674,9677,9679,967B,967C,967D,967E,9680,9684,9685,9686,9688,968A,968B,968C,9690,9694,9695,9696,9697,969A,969B,969C,969D,969E,969F,96A1,96A2,96AA,96AB,96B5,96B8,96B9,96BA,96BB,96BD,96C0,96C2,96C4,96C5,96CD,96CE,96D2,96D3,96D4,96D5,96D6,96D8,96DD,96E0,96E7,96EE,96F1,96F3,96F4,96F5,96F6,96F7,96F8,96F9,9740,9744,9745,974D,974E,9757,9758,9759,9761,9764,9767,9771,9774,9778,9779,977B,977C,9780,9787,9788,978E,978F,9790,9794,9796,9798,9799,979E,97A0,97AA,97AB,97AE,97B1,97B2,97B6,97B9,97BE,97BF,97C0,97C1,97CD,97D0,97D8,97DA,97DD,97E1,97E4,97E5,97E7,97F8,97FA,97FC,97FE,9840,9842,9844,9848,984A,984C,9851,9853,9856,9857,9858,9859,985C,9862,9864,9866,9870,9872,9873,9876,9878,987A,987D,9880,9883,988B,988C,988D,988E,9891,9897,989A,98A6,98AA,98B4,98B5,98BF,98CB,98D1,98D2,98D8,98D9,98DD,98DE,98E1,98E8,98ED,98EF,98F7,98FE,9940,9945,9948,9953,995A,995C,995F,9962,996B,996C,9971,9979,9980,9982,9983,99F6,99F8,9A40,9A43,9A47,9A48,9A4B,9A4F,9A51,9A52,9A54,9A60,9A68,9A6A,9A78,9A79,9A7D,9A7E,9A80,9A81,9A85,9A87,9A8A,9A8F,9A97,9A9F,9AA0,9AA7,9AA8,9AAA,9AAF,9AB0,9AB1,9AB3,9AB4,9AB5,9ABA,9AC2,9AC5,9AC8,9AC9,9ACC,9ACF,9AD6,9ADB,9ADC,9ADD,9ADE,9AE1,9AE2,9AE3,9AE4,9AE7,9AE8,9AE9,9AEB,9AEF,9AF1,9AF4,9AF5,9AFA,9AFD,9AFE,9B40,9B42,9B44,9B47,9B4C,9B4D,9B4E,9B4F,9B51,9B54,9B56,9B57,9B58,9B5A,9B5C,9B5E,9B62,9B63,9B66,9B67,9B68,9B69,9B6A,9B6C,9B70,9B71,9B75,9B78,9B79,9B7C,9B7E,9B80,9B82,9B84,9B85,9B86,9B88,9B89,9B8B,9B8C,9B8D,9B8E,9B90,9B92,9B94,9B97,9B98,9B9B,9B9F,9BA0,9BA2,9BA8,9BA9,9BAB,9BAD,9BAF,9BB0,9BB3,9BB4,9BB6,9BB7,9BB8,9BB9,9BBA,9BBB,9BBF,9BC0,9BC1,9BC2,9BC4,9BC6,9BC8,9BCB,9BCF,9BD1,9BD4,9BD9,9BDB,9BDD,9BDF,9BE0,9BE2,9BE3,9BE8,9BE9,9BEA,9BEB,9BED,9BEF,9BF1,9BF3,9BF9,9BFC,9C40,9C44,9C48,9C49,9C4C,9C4D,9C4F,9C50,9C54,9C55,9C57,9C58,9C5B,9C5C,9C5D,9C65,9C69,9C6A,9C6B,9C6D,9C6E,9C70,9C72,9C74,9C75,9C78,9C79,9C7A,9C7B,9C7D,9C7E,9C80,9C82,9C83,9C8B,9C93,9C97,9C98,9C99,9C9B,9C9E,9CA9,9CAB,9CBA,9CBD,9CBE,9CC0,9CC5,9CCC,9CCF,9CD1,9CD3,9CD5,9CD6,9CD8,9CDC,9CDD,9CDE,9CDF,9CE1,9CE2,9CE5,9CE9,9CEC,9CEF,9CF0,9CF1,9CF2,9CF4,9CF7,9CF8,9CF9,9D40,9D44,9D48,9D50,9D53,9D55,9D5A,9D5D,9D67,9D6A,9D6E,9D6F,9D70,9D71,9D72,9D74,9D7B,9D80,9D83,9D86,9D87,9D91,9D94,9D95,9D98,9D9B,9DA1,9DA4,9DA5,9DA8,9DA9,9DAA,9DB1,9DB4,9DB6,9DC3,9DC7,9DCC,9DD7,9DD9,9DDB,9DE1,9DE2,9DE8,9DEF,9DFA,9DFB,9E40,9E48,9E69,9E71,9E78,9E80,9E8A,9E8D,9E9F,9EA1,9EAF,9EBB,9EBC,9EC0,9EC1,9EC4,9EC5,9EC9,9ECC,9ECF,9ED2,9ED3,9ED5,9ED7,9EE4,9EE5,9EE6,9EE9,9EEA,9EEC,9EF0,9EF1,9EFE,9F40,9F43,9F47,9F48,9F49,9F4A,9F51,9F52,9F55,9F60,9F65,9F67,9F68,9F69,9F74,9F7C,9F80,9F81,9F8F,9F93,9F94,9F95,9FA2,9FA3,9FA8,9FA9,9FAE,9FB1,9FB5,9FB6,9FB8,9FBE,9FC3,9FC7,9FCB,9FCE,9FD3,9FDA,9FDD,9FE3,9FE4,9FE7,9FF0,9FFA,A040,A04A,A04E,A04F,A055,A05F,A06B,A080,A082,A08C,A08D,A08E,A091,A094,A095,A096,A097,A09E,A0A1,A0A5,A0A8,A0AA,A0AB,A0AC,A0AD,A0AE,A0B1,A0B2,A0B6,A0B8,A0BA,A0BD,A0C0,A0C2,A0C7,A0C8,A0C9,A0CB,A0D7,A0E3,A0E4,A0E7,A0E8,A0EF,A0F2,A0F6,A0F7,A0F8,A0FC,A0FD,A140,A180,A1A1,A1A2,A1A3,A1A4,A1A5,A1A6,A1A7,A1A8,A1A9,A1AA,A1AB,A1AC,A1AD,A1AE,A1AF,A1B0,A1B1,A1B2,A1B3,A1B4,A1B5,A1B6,A1B7,A1B8,A1B9,A1BA,A1BB,A1BC,A1BD,A1BE,A1BF,A1C0,A1C1,A1C2,A1C3,A1C4,A1C5,A1C6,A1C7,A1C8,A1C9,A1CA,A1CB,A1CC,A1CD,A1CE,A1CF,A1D0,A1D1,A1D2,A1D3,A1D4,A1D5,A1D6,A1D7,A1D8,A1D9,A1DA,A1DB,A1DC,A1DD,A1DE,A1DF,A1E0,A1E1,A1E2,A1E3,A1E4,A1E5,A1E6,A1E7,A1E8,A1E9,A1EA,A1EB,A1EC,A1ED,A1EE,A1EF,A1F0,A1F1,A1F2,A1F3,A1F4,A1F5,A1F6,A1F7,A1F8,A1F9,A1FA,A1FB,A1FC,A1FD,A1FE,A240,A280,A2A1,A2AB,A2B1,A2B2,A2B3,A2B4,A2B5,A2B6,A2B7,A2B8,A2B9,A2BA,A2BB,A2BC,A2BD,A2BE,A2BF,A2C0,A2C1,A2C2,A2C3,A2C4,A2C5,A2C6,A2C7,A2C8,A2C9,A2CA,A2CB,A2CC,A2CD,A2CE,A2CF,A2D0,A2D1,A2D2,A2D3,A2D4,A2D5,A2D6,A2D7,A2D8,A2D9,A2DA,A2DB,A2DC,A2DD,A2DE,A2DF,A2E0,A2E1,A2E2,A2E3,A2E5,A2E6,A2E7,A2E8,A2E9,A2EA,A2EB,A2EC,A2ED,A2EE,A2EF,A2F1,A2F2,A2F3,A2F4,A2F5,A2F6,A2F7,A2F8,A2F9,A2FA,A2FB,A2FC,A2FD,A340,A380,A3A1,A3A2,A3A3,A3A4,A3A5,A3A6,A3A7,A3A8,A3A9,A3AA,A3AB,A3AC,A3AD,A3AE,A3AF,A3B0,A3B1,A3B2,A3B3,A3B4,A3B5,A3B6,A3B7,A3B8,A3B9,A3BA,A3BB,A3BC,A3BD,A3BE,A3BF,A3C0,A3C1,A3C2,A3C3,A3C4,A3C5,A3C6,A3C7,A3C8,A3C9,A3CA,A3CB,A3CC,A3CD,A3CE,A3CF,A3D0,A3D1,A3D2,A3D3,A3D4,A3D5,A3D6,A3D7,A3D8,A3D9,A3DA,A3DB,A3DC,A3DD,A3DE,A3DF,A3E0,A3E1,A3E2,A3E3,A3E4,A3E5,A3E6,A3E7,A3E8,A3E9,A3EA,A3EB,A3EC,A3ED,A3EE,A3EF,A3F0,A3F1,A3F2,A3F3,A3F4,A3F5,A3F6,A3F7,A3F8,A3F9,A3FA,A3FB,A3FC,A3FD,A3FE,A440,A480,A4A1,A4A2,A4A3,A4A4,A4A5,A4A6,A4A7,A4A8,A4A9,A4AA,A4AB,A4AC,A4AD,A4AE,A4AF,A4B0,A4B1,A4B2,A4B3,A4B4,A4B5,A4B6,A4B7,A4B8,A4B9,A4BA,A4BB,A4BC,A4BD,A4BE,A4BF,A4C0,A4C1,A4C2,A4C3,A4C4,A4C5,A4C6,A4C7,A4C8,A4C9,A4CA,A4CB,A4CC,A4CD,A4CE,A4CF,A4D0,A4D1,A4D2,A4D3,A4D4,A4D5,A4D6,A4D7,A4D8,A4D9,A4DA,A4DB,A4DC,A4DD,A4DE,A4DF,A4E0,A4E1,A4E2,A4E3,A4E4,A4E5,A4E6,A4E7,A4E8,A4E9,A4EA,A4EB,A4EC,A4ED,A4EE,A4EF,A4F0,A4F1,A4F2,A4F3,A4F4,A540,A580,A5A1,A5A2,A5A3,A5A4,A5A5,A5A6,A5A7,A5A8,A5A9,A5AA,A5AB,A5AC,A5AD,A5AE,A5AF,A5B0,A5B1,A5B2,A5B3,A5B4,A5B5,A5B6,A5B7,A5B8,A5B9,A5BA,A5BB,A5BC,A5BD,A5BE,A5BF,A5C0,A5C1,A5C2,A5C3,A5C4,A5C5,A5C6,A5C7,A5C8,A5C9,A5CA,A5CB,A5CC,A5CD,A5CE,A5CF,A5D0,A5D1,A5D2,A5D3,A5D4,A5D5,A5D6,A5D7,A5D8,A5D9,A5DA,A5DB,A5DC,A5DD,A5DE,A5DF,A5E0,A5E1,A5E2,A5E3,A5E4,A5E5,A5E6,A5E7,A5E8,A5E9,A5EA,A5EB,A5EC,A5ED,A5EE,A5EF,A5F0,A5F1,A5F2,A5F3,A5F4,A5F5,A5F6,A5F7,A640,A680,A6A1,A6A2,A6A3,A6A4,A6A5,A6A6,A6A7,A6A8,A6A9,A6AA,A6AB,A6AC,A6AD,A6AE,A6AF,A6B0,A6B1,A6B2,A6B3,A6B4,A6B5,A6B6,A6B7,A6B8,A6B9,A6C1,A6C2,A6C3,A6C4,A6C5,A6C6,A6C7,A6C8,A6C9,A6CA,A6CB,A6CC,A6CD,A6CE,A6CF,A6D0,A6D1,A6D2,A6D3,A6D4,A6D5,A6D6,A6D7,A6D8,A6D9,A6E0,A6E2,A6E4,A6E6,A6E8,A6EC,A6EE,A6F0,A6F2,A6F3,A6F4,A6F6,A740,A780,A7A1,A7A2,A7A3,A7A4,A7A5,A7A6,A7A7,A7A8,A7A9,A7AA,A7AB,A7AC,A7AD,A7AE,A7AF,A7B0,A7B1,A7B2,A7B3,A7B4,A7B5,A7B6,A7B7,A7B8,A7B9,A7BA,A7BB,A7BC,A7BD,A7BE,A7BF,A7C0,A7C1,A7C2,A7D1,A7D2,A7D3,A7D4,A7D5,A7D6,A7D7,A7D8,A7D9,A7DA,A7DB,A7DC,A7DD,A7DE,A7DF,A7E0,A7E1,A7E2,A7E3,A7E4,A7E5,A7E6,A7E7,A7E8,A7E9,A7EA,A7EB,A7EC,A7ED,A7EE,A7EF,A7F0,A7F1,A7F2,A840,A842,A843,A844,A845,A846,A847,A848,A849,A84D,A84E,A84F,A850,A851,A853,A854,A878,A880,A888,A88B,A88D,A891,A892,A893,A894,A896,A8A1,A8A2,A8A3,A8A4,A8A5,A8A6,A8A7,A8A8,A8A9,A8AA,A8AB,A8AC,A8AD,A8AE,A8AF,A8B0,A8B1,A8B2,A8B3,A8B4,A8B5,A8B6,A8B7,A8B8,A8B9,A8BA,A8BB,A8BC,A8BD,A8BE,A8BF,A8C0,A8C1,A8C5,A8C6,A8C7,A8C8,A8C9,A8CA,A8CB,A8CC,A8CD,A8CE,A8CF,A8D0,A8D1,A8D2,A8D3,A8D4,A8D5,A8D6,A8D7,A8D8,A8D9,A8DA,A8DB,A8DC,A8DD,A8DE,A8DF,A8E0,A8E1,A8E2,A8E3,A8E4,A8E5,A8E6,A8E7,A8E8,A8E9,A8EA,A940,A949,A94A,A94C,A94F,A950,A951,A952,A954,A955,A956,A957,A958,A959,A95A,A95B,A95C,A95D,A960,A961,A963,A965,A966,A968,A972,A976,A980,A985,A989,A996,A997,A9A4,A9A5,A9A6,A9A7,A9A8,A9A9,A9AA,A9AB,A9AC,A9AD,A9AE,A9AF,A9B0,A9B1,A9B2,A9B3,A9B4,A9B5,A9B6,A9B7,A9B8,A9B9,A9BA,A9BB,A9BC,A9BD,A9BE,A9BF,A9C0,A9C1,A9C2,A9C3,A9C4,A9C5,A9C6,A9C7,A9C8,A9C9,A9CA,A9CB,A9CC,A9CD,A9CE,A9CF,A9D0,A9D1,A9D2,A9D3,A9D4,A9D5,A9D6,A9D7,A9D8,A9D9,A9DA,A9DB,A9DC,A9DD,A9DE,A9DF,A9E0,A9E1,A9E2,A9E3,A9E4,A9E5,A9E6,A9E7,A9E8,A9E9,A9EA,A9EB,A9EC,A9ED,A9EE,A9EF,A9F0,AA40,AA42,AA43,AA49,AA4B,AA4D,AA4E,AA52,AA53,AA59,AA5C,AA60,AA61,AA64,AA66,AA68,AA6B,AA6C,AA6E,AA70,AA72,AA76,AA80,AA84,AA86,AA87,AA8B,AA93,AA9E,AA9F,AAA1,AB40,AB4C,AB51,AB53,AB54,AB55,AB57,AB59,AB5D,AB61,AB64,AB66,AB6C,AB6D,AB6F,AB70,AB73,AB75,AB79,AB7A,AB80,AB82,AB83,AB8A,AB8E,AB8F,AB93,AB94,AB95,AB98,AB9C,ABA1,AC40,AC4B,AC4C,AC4E,AC52,AC5B,AC61,AC63,AC64,AC65,AC66,AC67,AC68,AC6A,AC6F,AC73,AC80,AC87,AC88,AC89,AC8A,AC97,AC99,AC9E,ACA1,AD40,AD43,AD44,AD45,AD48,AD4B,AD4D,AD4E,AD59,AD5A,AD62,AD72,AD80,AD8A,AD93,AD94,AD95,AD96,AD97,AD9E,ADA1,AE40,AE41,AE42,AE49,AE4D,AE55,AE56,AE57,AE58,AE5C,AE5D,AE5F,AE64,AE66,AE67,AE68,AE69,AE6A,AE6B,AE6D,AE6E,AE72,AE74,AE76,AE77,AE7B,AE80,AE88,AE8B,AE92,AE93,AE96,AE9B,AE9E,AEA0,AEA1,AF40,AF43,AF46,AF47,AF48,AF49,AF4A,AF4C,AF4D,AF4E,AF53,AF54,AF56,AF58,AF5B,AF5C,AF5E,AF62,AF63,AF64,AF66,AF68,AF6B,AF6C,AF6D,AF71,AF73,AF77,AF79,AF7B,AF7C,AF7D,AF80,AF82,AF83,AF86,AF8A,AF8B,AF8C,AF8F,AF90,AF91,AF93,AF94,AF96,AF98,AF9A,AF9D,AF9E,AFA0,AFA1,B040,B047,B04D,B04E,B053,B054,B058,B05F,B062,B06A,B06C,B06D,B070,B071,B072,B074,B076,B078,B079,B07B,B07D,B080,B088,B091,B093,B094,B09E,B0A0,B0A1,B0A2,B0A3,B0A4,B0A5,B0A6,B0A7,B0A8,B0A9,B0AA,B0AB,B0AC,B0AD,B0AE,B0AF,B0B0,B0B1,B0B2,B0B3,B0B4,B0B5,B0B6,B0B7,B0B8,B0B9,B0BA,B0BB,B0BC,B0BD,B0BE,B0BF,B0C0,B0C1,B0C2,B0C3,B0C4,B0C5,B0C6,B0C7,B0C8,B0C9,B0CA,B0CB,B0CC,B0CD,B0CE,B0CF,B0D0,B0D1,B0D2,B0D3,B0D4,B0D5,B0D6,B0D7,B0D8,B0D9,B0DA,B0DB,B0DC,B0DD,B0DE,B0DF,B0E0,B0E1,B0E2,B0E3,B0E4,B0E5,B0E6,B0E7,B0E8,B0E9,B0EA,B0EB,B0EC,B0ED,B0EE,B0EF,B0F0,B0F1,B0F2,B0F3,B0F4,B0F5,B0F6,B0F7,B0F8,B0F9,B0FA,B0FB,B0FC,B0FD,B0FE,B140,B141,B142,B143,B145,B146,B147,B149,B14C,B151,B159,B15A,B15B,B15E,B160,B161,B163,B165,B167,B168,B169,B174,B178,B179,B17C,B17D,B180,B181,B182,B187,B188,B189,B18C,B18D,B190,B198,B1A0,B1A1,B1A2,B1A3,B1A4,B1A5,B1A6,B1A7,B1A8,B1A9,B1AA,B1AB,B1AC,B1AD,B1AE,B1AF,B1B0,B1B1,B1B2,B1B3,B1B4,B1B5,B1B6,B1B7,B1B8,B1B9,B1BA,B1BB,B1BC,B1BD,B1BE,B1BF,B1C0,B1C1,B1C2,B1C3,B1C4,B1C5,B1C6,B1C7,B1C8,B1C9,B1CA,B1CB,B1CC,B1CD,B1CE,B1CF,B1D0,B1D1,B1D2,B1D3,B1D4,B1D5,B1D6,B1D7,B1D8,B1D9,B1DA,B1DB,B1DC,B1DD,B1DE,B1DF,B1E0,B1E1,B1E2,B1E3,B1E4,B1E5,B1E6,B1E7,B1E8,B1E9,B1EA,B1EB,B1EC,B1ED,B1EE,B1EF,B1F0,B1F1,B1F2,B1F3,B1F4,B1F5,B1F6,B1F7,B1F8,B1F9,B1FA,B1FB,B1FC,B1FD,B1FE,B240,B244,B245,B246,B248,B254,B257,B25A,B260,B262,B26E,B26F,B271,B272,B273,B274,B277,B279,B27A,B280,B281,B282,B28F,B298,B29B,B2A0,B2A1,B2A2,B2A3,B2A4,B2A5,B2A6,B2A7,B2A8,B2A9,B2AA,B2AB,B2AC,B2AD,B2AE,B2AF,B2B0,B2B1,B2B2,B2B3,B2B4,B2B5,B2B6,B2B7,B2B8,B2B9,B2BA,B2BB,B2BC,B2BD,B2BE,B2BF,B2C0,B2C1,B2C2,B2C3,B2C4,B2C5,B2C6,B2C7,B2C8,B2C9,B2CA,B2CB,B2CC,B2CD,B2CE,B2CF,B2D0,B2D1,B2D2,B2D3,B2D4,B2D5,B2D6,B2D7,B2D8,B2D9,B2DA,B2DB,B2DC,B2DD,B2DE,B2DF,B2E0,B2E1,B2E2,B2E3,B2E4,B2E5,B2E6,B2E7,B2E8,B2E9,B2EA,B2EB,B2EC,B2ED,B2EE,B2EF,B2F0,B2F1,B2F2,B2F3,B2F4,B2F5,B2F6,B2F7,B2F8,B2F9,B2FA,B2FB,B2FC,B2FD,B2FE,B340,B341,B342,B343,B347,B349,B34A,B34E,B354,B356,B359,B35A,B35B,B35C,B35D,B35E,B361,B362,B363,B365,B367,B36A,B36C,B36D,B36E,B372,B373,B377,B378,B379,B37A,B37C,B380,B382,B38E,B396,B39A,B3A1,B3A2,B3A3,B3A4,B3A5,B3A6,B3A7,B3A8,B3A9,B3AA,B3AB,B3AC,B3AD,B3AE,B3AF,B3B0,B3B1,B3B2,B3B3,B3B4,B3B5,B3B6,B3B7,B3B8,B3B9,B3BA,B3BB,B3BC,B3BD,B3BE,B3BF,B3C0,B3C1,B3C2,B3C3,B3C4,B3C5,B3C6,B3C7,B3C8,B3C9,B3CA,B3CB,B3CC,B3CD,B3CE,B3CF,B3D0,B3D1,B3D2,B3D3,B3D4,B3D5,B3D6,B3D7,B3D8,B3D9,B3DA,B3DB,B3DC,B3DD,B3DE,B3DF,B3E0,B3E1,B3E2,B3E3,B3E4,B3E5,B3E6,B3E7,B3E8,B3E9,B3EA,B3EB,B3EC,B3ED,B3EE,B3EF,B3F0,B3F1,B3F2,B3F3,B3F4,B3F5,B3F6,B3F7,B3F8,B3F9,B3FA,B3FB,B3FC,B3FD,B3FE,B440,B443,B444,B446,B448,B449,B44C,B44D,B44F,B450,B451,B452,B453,B45B,B45F,B463,B465,B468,B46B,B46F,B472,B475,B480,B484,B487,B48C,B48D,B48F,B491,B497,B49A,B4A1,B4A2,B4A3,B4A4,B4A5,B4A6,B4A7,B4A8,B4A9,B4AA,B4AB,B4AC,B4AD,B4AE,B4AF,B4B0,B4B1,B4B2,B4B3,B4B4,B4B5,B4B6,B4B7,B4B8,B4B9,B4BA,B4BB,B4BC,B4BD,B4BE,B4BF,B4C0,B4C1,B4C2,B4C3,B4C4,B4C5,B4C6,B4C7,B4C8,B4C9,B4CA,B4CB,B4CC,B4CD,B4CE,B4CF,B4D0,B4D1,B4D2,B4D3,B4D4,B4D5,B4D6,B4D7,B4D8,B4D9,B4DA,B4DB,B4DC,B4DD,B4DE,B4DF,B4E0,B4E1,B4E2,B4E3,B4E4,B4E5,B4E6,B4E7,B4E8,B4E9,B4EA,B4EB,B4EC,B4ED,B4EE,B4EF,B4F0,B4F1,B4F2,B4F3,B4F4,B4F5,B4F6,B4F7,B4F8,B4F9,B4FA,B4FB,B4FC,B4FD,B4FE,B540,B546,B550,B555,B564,B569,B56A,B56B,B56F,B570,B579,B57B,B57D,B57E,B580,B581,B582,B586,B587,B58E,B58F,B594,B596,B59A,B59E,B5A1,B5A2,B5A3,B5A4,B5A5,B5A6,B5A7,B5A8,B5A9,B5AA,B5AB,B5AC,B5AD,B5AE,B5AF,B5B0,B5B1,B5B2,B5B3,B5B4,B5B5,B5B6,B5B7,B5B8,B5B9,B5BA,B5BB,B5BC,B5BD,B5BE,B5BF,B5C0,B5C1,B5C2,B5C3,B5C4,B5C5,B5C6,B5C7,B5C8,B5C9,B5CA,B5CB,B5CC,B5CD,B5CE,B5CF,B5D0,B5D1,B5D2,B5D3,B5D4,B5D5,B5D6,B5D7,B5D8,B5D9,B5DA,B5DB,B5DC,B5DD,B5DE,B5DF,B5E0,B5E1,B5E2,B5E3,B5E4,B5E5,B5E6,B5E7,B5E8,B5E9,B5EA,B5EB,B5EC,B5ED,B5EE,B5EF,B5F0,B5F1,B5F2,B5F3,B5F4,B5F5,B5F6,B5F7,B5F8,B5F9,B5FA,B5FB,B5FC,B5FD,B5FE,B640,B647,B653,B65E,B663,B664,B665,B666,B668,B66A,B66B,B66C,B66F,B671,B673,B679,B67C,B67D,B67E,B680,B681,B682,B689,B68B,B68C,B68E,B68F,B691,B695,B696,B69B,B69D,B69F,B6A1,B6A2,B6A3,B6A4,B6A5,B6A6,B6A7,B6A8,B6A9,B6AA,B6AB,B6AC,B6AD,B6AE,B6AF,B6B0,B6B1,B6B2,B6B3,B6B4,B6B5,B6B6,B6B7,B6B8,B6B9,B6BA,B6BB,B6BC,B6BD,B6BE,B6BF,B6C0,B6C1,B6C2,B6C3,B6C4,B6C5,B6C6,B6C7,B6C8,B6C9,B6CA,B6CB,B6CC,B6CD,B6CE,B6CF,B6D0,B6D1,B6D2,B6D3,B6D4,B6D5,B6D6,B6D7,B6D8,B6D9,B6DA,B6DB,B6DC,B6DD,B6DE,B6DF,B6E0,B6E1,B6E2,B6E3,B6E4,B6E5,B6E6,B6E7,B6E8,B6E9,B6EA,B6EB,B6EC,B6ED,B6EE,B6EF,B6F0,B6F1,B6F2,B6F3,B6F4,B6F5,B6F6,B6F7,B6F8,B6F9,B6FA,B6FB,B6FC,B6FD,B6FE,B740,B741,B742,B744,B753,B756,B757,B758,B759,B75F,B769,B76E,B780,B787,B78A,B78B,B78F,B790,B791,B792,B796,B799,B79B,B79E,B79F,B7A1,B7A2,B7A3,B7A4,B7A5,B7A6,B7A7,B7A8,B7A9,B7AA,B7AB,B7AC,B7AD,B7AE,B7AF,B7B0,B7B1,B7B2,B7B3,B7B4,B7B5,B7B6,B7B7,B7B8,B7B9,B7BA,B7BB,B7BC,B7BD,B7BE,B7BF,B7C0,B7C1,B7C2,B7C3,B7C4,B7C5,B7C6,B7C7,B7C8,B7C9,B7CA,B7CB,B7CC,B7CD,B7CE,B7CF,B7D0,B7D1,B7D2,B7D3,B7D4,B7D5,B7D6,B7D7,B7D8,B7D9,B7DA,B7DB,B7DC,B7DD,B7DE,B7DF,B7E0,B7E1,B7E2,B7E3,B7E4,B7E5,B7E6,B7E7,B7E8,B7E9,B7EA,B7EB,B7EC,B7ED,B7EE,B7EF,B7F0,B7F1,B7F2,B7F3,B7F4,B7F5,B7F6,B7F7,B7F8,B7F9,B7FA,B7FB,B7FC,B7FD,B7FE,B840,B842,B843,B846,B84B,B856,B861,B86B,B86D,B871,B873,B874,B87A,B87B,B880,B885,B887,B888,B88B,B88C,B88D,B88E,B891,B892,B894,B897,B898,B89A,B89B,B89E,B89F,B8A0,B8A1,B8A2,B8A3,B8A4,B8A5,B8A6,B8A7,B8A8,B8A9,B8AA,B8AB,B8AC,B8AD,B8AE,B8AF,B8B0,B8B1,B8B2,B8B3,B8B4,B8B5,B8B6,B8B7,B8B8,B8B9,B8BA,B8BB,B8BC,B8BD,B8BE,B8BF,B8C0,B8C1,B8C2,B8C3,B8C4,B8C5,B8C6,B8C7,B8C8,B8C9,B8CA,B8CB,B8CC,B8CD,B8CE,B8CF,B8D0,B8D1,B8D2,B8D3,B8D4,B8D5,B8D6,B8D7,B8D8,B8D9,B8DA,B8DB,B8DC,B8DD,B8DE,B8DF,B8E0,B8E1,B8E2,B8E3,B8E4,B8E5,B8E6,B8E7,B8E8,B8E9,B8EA,B8EB,B8EC,B8ED,B8EE,B8EF,B8F0,B8F1,B8F2,B8F3,B8F4,B8F5,B8F6,B8F7,B8F8,B8F9,B8FA,B8FB,B8FC,B8FD,B8FE,B940,B942,B943,B947,B948,B949,B94A,B950,B951,B952,B953,B955,B956,B957,B958,B959,B95A,B95C,B95D,B968,B96A,B96C,B96D,B96E,B96F,B971,B972,B976,B97D,B980,B983,B984,B988,B98B,B98E,B991,B993,B996,B99E,B9A1,B9A2,B9A3,B9A4,B9A5,B9A6,B9A7,B9A8,B9A9,B9AA,B9AB,B9AC,B9AD,B9AE,B9AF,B9B0,B9B1,B9B2,B9B3,B9B4,B9B5,B9B6,B9B7,B9B8,B9B9,B9BA,B9BB,B9BC,B9BD,B9BE,B9BF,B9C0,B9C1,B9C2,B9C3,B9C4,B9C5,B9C6,B9C7,B9C8,B9C9,B9CA,B9CB,B9CC,B9CD,B9CE,B9CF,B9D0,B9D1,B9D2,B9D3,B9D4,B9D5,B9D6,B9D7,B9D8,B9D9,B9DA,B9DB,B9DC,B9DD,B9DE,B9DF,B9E0,B9E1,B9E2,B9E3,B9E4,B9E5,B9E6,B9E7,B9E8,B9E9,B9EA,B9EB,B9EC,B9ED,B9EE,B9EF,B9F0,B9F1,B9F2,B9F3,B9F4,B9F5,B9F6,B9F7,B9F8,B9F9,B9FA,B9FB,B9FC,B9FD,B9FE,BA40,BA41,BA45,BA49,BA4A,BA4F,BA51,BA54,BA57,BA5A,BA5D,BA5F,BA64,BA68,BA69,BA71,BA74,BA76,BA7C,BA80,BA85,BA8B,BA8D,BA9A,BAA0,BAA1,BAA2,BAA3,BAA4,BAA5,BAA6,BAA7,BAA8,BAA9,BAAA,BAAB,BAAC,BAAD,BAAE,BAAF,BAB0,BAB1,BAB2,BAB3,BAB4,BAB5,BAB6,BAB7,BAB8,BAB9,BABA,BABB,BABC,BABD,BABE,BABF,BAC0,BAC1,BAC2,BAC3,BAC4,BAC5,BAC6,BAC7,BAC8,BAC9,BACA,BACB,BACC,BACD,BACE,BACF,BAD0,BAD1,BAD2,BAD3,BAD4,BAD5,BAD6,BAD7,BAD8,BAD9,BADA,BADB,BADC,BADD,BADE,BADF,BAE0,BAE1,BAE2,BAE3,BAE4,BAE5,BAE6,BAE7,BAE8,BAE9,BAEA,BAEB,BAEC,BAED,BAEE,BAEF,BAF0,BAF1,BAF2,BAF3,BAF4,BAF5,BAF6,BAF7,BAF8,BAF9,BAFA,BAFB,BAFC,BAFD,BAFE,BB40,BB4A,BB6F,BB75,BB80,BB81,BB88,BB8A,BB8B,BB8E,BB90,BB91,BB95,BB98,BB9A,BB9F,BBA1,BBA2,BBA3,BBA4,BBA5,BBA6,BBA7,BBA8,BBA9,BBAA,BBAB,BBAC,BBAD,BBAE,BBAF,BBB0,BBB1,BBB2,BBB3,BBB4,BBB5,BBB6,BBB7,BBB8,BBB9,BBBA,BBBB,BBBC,BBBD,BBBE,BBBF,BBC0,BBC1,BBC2,BBC3,BBC4,BBC5,BBC6,BBC7,BBC8,BBC9,BBCA,BBCB,BBCC,BBCD,BBCE,BBCF,BBD0,BBD1,BBD2,BBD3,BBD4,BBD5,BBD6,BBD7,BBD8,BBD9,BBDA,BBDB,BBDC,BBDD,BBDE,BBDF,BBE0,BBE1,BBE2,BBE3,BBE4,BBE5,BBE6,BBE7,BBE8,BBE9,BBEA,BBEB,BBEC,BBED,BBEE,BBEF,BBF0,BBF1,BBF2,BBF3,BBF4,BBF5,BBF6,BBF7,BBF8,BBF9,BBFA,BBFB,BBFC,BBFD,BBFE,BC40,BC42,BC45,BC46,BC47,BC48,BC4F,BC50,BC52,BC54,BC5B,BC61,BC69,BC6B,BC79,BC80,BC8F,BC90,BC94,BC97,BC9A,BCA1,BCA2,BCA3,BCA4,BCA5,BCA6,BCA7,BCA8,BCA9,BCAA,BCAB,BCAC,BCAD,BCAE,BCAF,BCB0,BCB1,BCB2,BCB3,BCB4,BCB5,BCB6,BCB7,BCB8,BCB9,BCBA,BCBB,BCBC,BCBD,BCBE,BCBF,BCC0,BCC1,BCC2,BCC3,BCC4,BCC5,BCC6,BCC7,BCC8,BCC9,BCCA,BCCB,BCCC,BCCD,BCCE,BCCF,BCD0,BCD1,BCD2,BCD3,BCD4,BCD5,BCD6,BCD7,BCD8,BCD9,BCDA,BCDB,BCDC,BCDD,BCDE,BCDF,BCE0,BCE1,BCE2,BCE3,BCE4,BCE5,BCE6,BCE7,BCE8,BCE9,BCEA,BCEB,BCEC,BCED,BCEE,BCEF,BCF0,BCF1,BCF2,BCF3,BCF4,BCF5,BCF6,BCF7,BCF8,BCF9,BCFA,BCFB,BCFC,BCFD,BCFE,BD40,BD77,BD80,BDA1,BDA2,BDA3,BDA4,BDA5,BDA6,BDA7,BDA8,BDA9,BDAA,BDAB,BDAC,BDAD,BDAE,BDAF,BDB0,BDB1,BDB2,BDB3,BDB4,BDB5,BDB6,BDB7,BDB8,BDB9,BDBA,BDBB,BDBC,BDBD,BDBE,BDBF,BDC0,BDC1,BDC2,BDC3,BDC4,BDC5,BDC6,BDC7,BDC8,BDC9,BDCA,BDCB,BDCC,BDCD,BDCE,BDCF,BDD0,BDD1,BDD2,BDD3,BDD4,BDD5,BDD6,BDD7,BDD8,BDD9,BDDA,BDDB,BDDC,BDDD,BDDE,BDDF,BDE0,BDE1,BDE2,BDE3,BDE4,BDE5,BDE6,BDE7,BDE8,BDE9,BDEA,BDEB,BDEC,BDED,BDEE,BDEF,BDF0,BDF1,BDF2,BDF3,BDF4,BDF5,BDF6,BDF7,BDF8,BDF9,BDFA,BDFB,BDFC,BDFD,BDFE,BE40,BE4D,BE54,BE80,BEA1,BEA2,BEA3,BEA4,BEA5,BEA6,BEA7,BEA8,BEA9,BEAA,BEAB,BEAC,BEAD,BEAE,BEAF,BEB0,BEB1,BEB2,BEB3,BEB4,BEB5,BEB6,BEB7,BEB8,BEB9,BEBA,BEBB,BEBC,BEBD,BEBE,BEBF,BEC0,BEC1,BEC2,BEC3,BEC4,BEC5,BEC6,BEC7,BEC8,BEC9,BECA,BECB,BECC,BECD,BECE,BECF,BED0,BED1,BED2,BED3,BED4,BED5,BED6,BED7,BED8,BED9,BEDA,BEDB,BEDC,BEDD,BEDE,BEDF,BEE0,BEE1,BEE2,BEE3,BEE4,BEE5,BEE6,BEE7,BEE8,BEE9,BEEA,BEEB,BEEC,BEED,BEEE,BEEF,BEF0,BEF1,BEF2,BEF3,BEF4,BEF5,BEF6,BEF7,BEF8,BEF9,BEFA,BEFB,BEFC,BEFD,BEFE,BF40,BF80,BF81,BF86,BF8B,BFA1,BFA2,BFA3,BFA4,BFA5,BFA6,BFA7,BFA8,BFA9,BFAA,BFAB,BFAC,BFAD,BFAE,BFAF,BFB0,BFB1,BFB2,BFB3,BFB4,BFB5,BFB6,BFB7,BFB8,BFB9,BFBA,BFBB,BFBC,BFBD,BFBE,BFBF,BFC0,BFC1,BFC2,BFC3,BFC4,BFC5,BFC6,BFC7,BFC8,BFC9,BFCA,BFCB,BFCC,BFCD,BFCE,BFCF,BFD0,BFD1,BFD2,BFD3,BFD4,BFD5,BFD6,BFD7,BFD8,BFD9,BFDA,BFDB,BFDC,BFDD,BFDE,BFDF,BFE0,BFE1,BFE2,BFE3,BFE4,BFE5,BFE6,BFE7,BFE8,BFE9,BFEA,BFEB,BFEC,BFED,BFEE,BFEF,BFF0,BFF1,BFF2,BFF3,BFF4,BFF5,BFF6,BFF7,BFF8,BFF9,BFFA,BFFB,BFFC,BFFD,BFFE,C040,C064,C07C,C080,C081,C082,C084,C085,C086,C087,C088,C089,C08A,C08B,C08C,C08D,C094,C095,C09F,C0A1,C0A2,C0A3,C0A4,C0A5,C0A6,C0A7,C0A8,C0A9,C0AA,C0AB,C0AC,C0AD,C0AE,C0AF,C0B0,C0B1,C0B2,C0B3,C0B4,C0B5,C0B6,C0B7,C0B8,C0B9,C0BA,C0BB,C0BC,C0BD,C0BE,C0BF,C0C0,C0C1,C0C2,C0C3,C0C4,C0C5,C0C6,C0C7,C0C8,C0C9,C0CA,C0CB,C0CC,C0CD,C0CE,C0CF,C0D0,C0D1,C0D2,C0D3,C0D4,C0D5,C0D6,C0D7,C0D8,C0D9,C0DA,C0DB,C0DC,C0DD,C0DE,C0DF,C0E0,C0E1,C0E2,C0E3,C0E4,C0E5,C0E6,C0E7,C0E8,C0E9,C0EA,C0EB,C0EC,C0ED,C0EE,C0EF,C0F0,C0F1,C0F2,C0F3,C0F4,C0F5,C0F6,C0F7,C0F8,C0F9,C0FA,C0FB,C0FC,C0FD,C0FE,C140,C141,C142,C146,C147,C14C,C14F,C151,C152,C156,C15A,C15C,C164,C165,C166,C16B,C170,C172,C173,C175,C177,C17E,C180,C185,C187,C188,C189,C18C,C190,C191,C192,C197,C199,C19F,C1A1,C1A2,C1A3,C1A4,C1A5,C1A6,C1A7,C1A8,C1A9,C1AA,C1AB,C1AC,C1AD,C1AE,C1AF,C1B0,C1B1,C1B2,C1B3,C1B4,C1B5,C1B6,C1B7,C1B8,C1B9,C1BA,C1BB,C1BC,C1BD,C1BE,C1BF,C1C0,C1C1,C1C2,C1C3,C1C4,C1C5,C1C6,C1C7,C1C8,C1C9,C1CA,C1CB,C1CC,C1CD,C1CE,C1CF,C1D0,C1D1,C1D2,C1D3,C1D4,C1D5,C1D6,C1D7,C1D8,C1D9,C1DA,C1DB,C1DC,C1DD,C1DE,C1DF,C1E0,C1E1,C1E2,C1E3,C1E4,C1E5,C1E6,C1E7,C1E8,C1E9,C1EA,C1EB,C1EC,C1ED,C1EE,C1EF,C1F0,C1F1,C1F2,C1F3,C1F4,C1F5,C1F6,C1F7,C1F8,C1F9,C1FA,C1FB,C1FC,C1FD,C1FE,C240,C241,C243,C247,C248,C249,C250,C253,C254,C258,C25A,C25B,C25C,C25E,C261,C262,C264,C26A,C26B,C26C,C26E,C26F,C270,C272,C274,C277,C27B,C27C,C280,C281,C28F,C295,C2A1,C2A2,C2A3,C2A4,C2A5,C2A6,C2A7,C2A8,C2A9,C2AA,C2AB,C2AC,C2AD,C2AE,C2AF,C2B0,C2B1,C2B2,C2B3,C2B4,C2B5,C2B6,C2B7,C2B8,C2B9,C2BA,C2BB,C2BC,C2BD,C2BE,C2BF,C2C0,C2C1,C2C2,C2C3,C2C4,C2C5,C2C6,C2C7,C2C8,C2C9,C2CA,C2CB,C2CC,C2CD,C2CE,C2CF,C2D0,C2D1,C2D2,C2D3,C2D4,C2D5,C2D6,C2D7,C2D8,C2D9,C2DA,C2DB,C2DC,C2DD,C2DE,C2DF,C2E0,C2E1,C2E2,C2E3,C2E4,C2E5,C2E6,C2E7,C2E8,C2E9,C2EA,C2EB,C2EC,C2ED,C2EE,C2EF,C2F0,C2F1,C2F2,C2F3,C2F4,C2F5,C2F6,C2F7,C2F8,C2F9,C2FA,C2FB,C2FC,C2FD,C2FE,C340,C341,C343,C344,C345,C346,C34C,C34E,C34F,C350,C351,C352,C355,C356,C357,C358,C35A,C35C,C35D,C35E,C363,C36A,C36B,C36D,C36F,C370,C371,C372,C373,C374,C375,C379,C37C,C37E,C380,C381,C382,C383,C384,C387,C394,C396,C397,C39A,C39B,C3A0,C3A1,C3A2,C3A3,C3A4,C3A5,C3A6,C3A7,C3A8,C3A9,C3AA,C3AB,C3AC,C3AD,C3AE,C3AF,C3B0,C3B1,C3B2,C3B3,C3B4,C3B5,C3B6,C3B7,C3B8,C3B9,C3BA,C3BB,C3BC,C3BD,C3BE,C3BF,C3C0,C3C1,C3C2,C3C3,C3C4,C3C5,C3C6,C3C7,C3C8,C3C9,C3CA,C3CB,C3CC,C3CD,C3CE,C3CF,C3D0,C3D1,C3D2,C3D3,C3D4,C3D5,C3D6,C3D7,C3D8,C3D9,C3DA,C3DB,C3DC,C3DD,C3DE,C3DF,C3E0,C3E1,C3E2,C3E3,C3E4,C3E5,C3E6,C3E7,C3E8,C3E9,C3EA,C3EB,C3EC,C3ED,C3EE,C3EF,C3F0,C3F1,C3F2,C3F3,C3F4,C3F5,C3F6,C3F7,C3F8,C3F9,C3FA,C3FB,C3FC,C3FD,C3FE,C440,C446,C447,C448,C44B,C44C,C44F,C454,C458,C459,C45A,C45D,C45E,C460,C464,C465,C46A,C46B,C46F,C470,C476,C478,C47D,C480,C481,C482,C48A,C490,C494,C496,C499,C49A,C4A1,C4A2,C4A3,C4A4,C4A5,C4A6,C4A7,C4A8,C4A9,C4AA,C4AB,C4AC,C4AD,C4AE,C4AF,C4B0,C4B1,C4B2,C4B3,C4B4,C4B5,C4B6,C4B7,C4B8,C4B9,C4BA,C4BB,C4BC,C4BD,C4BE,C4BF,C4C0,C4C1,C4C2,C4C3,C4C4,C4C5,C4C6,C4C7,C4C8,C4C9,C4CA,C4CB,C4CC,C4CD,C4CE,C4CF,C4D0,C4D1,C4D2,C4D3,C4D4,C4D5,C4D6,C4D7,C4D8,C4D9,C4DA,C4DB,C4DC,C4DD,C4DE,C4DF,C4E0,C4E1,C4E2,C4E3,C4E4,C4E5,C4E6,C4E7,C4E8,C4E9,C4EA,C4EB,C4EC,C4ED,C4EE,C4EF,C4F0,C4F1,C4F2,C4F3,C4F4,C4F5,C4F6,C4F7,C4F8,C4F9,C4FA,C4FB,C4FC,C4FD,C4FE,C540,C54F,C552,C554,C555,C55A,C560,C561,C562,C563,C568,C56A,C56B,C56C,C572,C573,C574,C578,C579,C57A,C57B,C57C,C57E,C580,C584,C586,C587,C588,C58B,C593,C594,C598,C5A0,C5A1,C5A2,C5A3,C5A4,C5A5,C5A6,C5A7,C5A8,C5A9,C5AA,C5AB,C5AC,C5AD,C5AE,C5AF,C5B0,C5B1,C5B2,C5B3,C5B4,C5B5,C5B6,C5B7,C5B8,C5B9,C5BA,C5BB,C5BC,C5BD,C5BE,C5BF,C5C0,C5C1,C5C2,C5C3,C5C4,C5C5,C5C6,C5C7,C5C8,C5C9,C5CA,C5CB,C5CC,C5CD,C5CE,C5CF,C5D0,C5D1,C5D2,C5D3,C5D4,C5D5,C5D6,C5D7,C5D8,C5D9,C5DA,C5DB,C5DC,C5DD,C5DE,C5DF,C5E0,C5E1,C5E2,C5E3,C5E4,C5E5,C5E6,C5E7,C5E8,C5E9,C5EA,C5EB,C5EC,C5ED,C5EE,C5EF,C5F0,C5F1,C5F2,C5F3,C5F4,C5F5,C5F6,C5F7,C5F8,C5F9,C5FA,C5FB,C5FC,C5FD,C5FE,C640,C644,C645,C649,C64B,C64D,C64E,C651,C652,C653,C654,C658,C65A,C65B,C65C,C65E,C65F,C660,C662,C665,C667,C669,C66B,C66C,C66D,C66E,C670,C671,C672,C676,C679,C67A,C67C,C67E,C680,C681,C686,C688,C689,C68A,C68C,C68D,C68F,C699,C69B,C69C,C69D,C69E,C69F,C6A0,C6A1,C6A2,C6A3,C6A4,C6A5,C6A6,C6A7,C6A8,C6A9,C6AA,C6AB,C6AC,C6AD,C6AE,C6AF,C6B0,C6B1,C6B2,C6B3,C6B4,C6B5,C6B6,C6B7,C6B8,C6B9,C6BA,C6BB,C6BC,C6BD,C6BE,C6BF,C6C0,C6C1,C6C2,C6C3,C6C4,C6C5,C6C6,C6C7,C6C8,C6C9,C6CA,C6CB,C6CC,C6CD,C6CE,C6CF,C6D0,C6D1,C6D2,C6D3,C6D4,C6D5,C6D6,C6D7,C6D8,C6D9,C6DA,C6DB,C6DC,C6DD,C6DE,C6DF,C6E0,C6E1,C6E2,C6E3,C6E4,C6E5,C6E6,C6E7,C6E8,C6E9,C6EA,C6EB,C6EC,C6ED,C6EE,C6EF,C6F0,C6F1,C6F2,C6F3,C6F4,C6F5,C6F6,C6F7,C6F8,C6F9,C6FA,C6FB,C6FC,C6FD,C6FE,C740,C742,C744,C746,C747,C74C,C74D,C752,C753,C754,C75B,C75D,C764,C766,C76A,C76D,C771,C773,C774,C775,C77C,C780,C781,C782,C783,C785,C788,C789,C78B,C78C,C78E,C792,C793,C794,C797,C798,C79B,C79E,C7A1,C7A2,C7A3,C7A4,C7A5,C7A6,C7A7,C7A8,C7A9,C7AA,C7AB,C7AC,C7AD,C7AE,C7AF,C7B0,C7B1,C7B2,C7B3,C7B4,C7B5,C7B6,C7B7,C7B8,C7B9,C7BA,C7BB,C7BC,C7BD,C7BE,C7BF,C7C0,C7C1,C7C2,C7C3,C7C4,C7C5,C7C6,C7C7,C7C8,C7C9,C7CA,C7CB,C7CC,C7CD,C7CE,C7CF,C7D0,C7D1,C7D2,C7D3,C7D4,C7D5,C7D6,C7D7,C7D8,C7D9,C7DA,C7DB,C7DC,C7DD,C7DE,C7DF,C7E0,C7E1,C7E2,C7E3,C7E4,C7E5,C7E6,C7E7,C7E8,C7E9,C7EA,C7EB,C7EC,C7ED,C7EE,C7EF,C7F0,C7F1,C7F2,C7F3,C7F4,C7F5,C7F6,C7F7,C7F8,C7F9,C7FA,C7FB,C7FC,C7FD,C7FE,C840,C842,C847,C84A,C84D,C84E,C84F,C853,C854,C85A,C85D,C863,C86B,C871,C874,C87C,C880,C887,C88C,C88D,C891,C892,C897,C898,C89B,C89C,C89D,C89E,C89F,C8A1,C8A2,C8A3,C8A4,C8A5,C8A6,C8A7,C8A8,C8A9,C8AA,C8AB,C8AC,C8AD,C8AE,C8AF,C8B0,C8B1,C8B2,C8B3,C8B4,C8B5,C8B6,C8B7,C8B8,C8B9,C8BA,C8BB,C8BC,C8BD,C8BE,C8BF,C8C0,C8C1,C8C2,C8C3,C8C4,C8C5,C8C6,C8C7,C8C8,C8C9,C8CA,C8CB,C8CC,C8CD,C8CE,C8CF,C8D0,C8D1,C8D2,C8D3,C8D4,C8D5,C8D6,C8D7,C8D8,C8D9,C8DA,C8DB,C8DC,C8DD,C8DE,C8DF,C8E0,C8E1,C8E2,C8E3,C8E4,C8E5,C8E6,C8E7,C8E8,C8E9,C8EA,C8EB,C8EC,C8ED,C8EE,C8EF,C8F0,C8F1,C8F2,C8F3,C8F4,C8F5,C8F6,C8F7,C8F8,C8F9,C8FA,C8FB,C8FC,C8FD,C8FE,C940,C945,C949,C94A,C94B,C953,C954,C956,C95A,C967,C969,C96A,C96D,C96F,C970,C971,C973,C977,C979,C97B,C97C,C97E,C980,C985,C986,C988,C989,C98E,C991,C99C,C99E,C9A1,C9A2,C9A3,C9A4,C9A5,C9A6,C9A7,C9A8,C9A9,C9AA,C9AB,C9AC,C9AD,C9AE,C9AF,C9B0,C9B1,C9B2,C9B3,C9B4,C9B5,C9B6,C9B7,C9B8,C9B9,C9BA,C9BB,C9BC,C9BD,C9BE,C9BF,C9C0,C9C1,C9C2,C9C3,C9C4,C9C5,C9C6,C9C7,C9C8,C9C9,C9CA,C9CB,C9CC,C9CD,C9CE,C9CF,C9D0,C9D1,C9D2,C9D3,C9D4,C9D5,C9D6,C9D7,C9D8,C9D9,C9DA,C9DB,C9DC,C9DD,C9DE,C9DF,C9E0,C9E1,C9E2,C9E3,C9E4,C9E5,C9E6,C9E7,C9E8,C9E9,C9EA,C9EB,C9EC,C9ED,C9EE,C9EF,C9F0,C9F1,C9F2,C9F3,C9F4,C9F5,C9F6,C9F7,C9F8,C9F9,C9FA,C9FB,C9FC,C9FD,C9FE,CA40,CA49,CA4D,CA4E,CA51,CA53,CA57,CA58,CA61,CA6B,CA70,CA74,CA80,CA82,CA86,CA8B,CA8E,CA97,CA98,CA9C,CA9E,CAA1,CAA2,CAA3,CAA4,CAA5,CAA6,CAA7,CAA8,CAA9,CAAA,CAAB,CAAC,CAAD,CAAE,CAAF,CAB0,CAB1,CAB2,CAB3,CAB4,CAB5,CAB6,CAB7,CAB8,CAB9,CABA,CABB,CABC,CABD,CABE,CABF,CAC0,CAC1,CAC2,CAC3,CAC4,CAC5,CAC6,CAC7,CAC8,CAC9,CACA,CACB,CACC,CACD,CACE,CACF,CAD0,CAD1,CAD2,CAD3,CAD4,CAD5,CAD6,CAD7,CAD8,CAD9,CADA,CADB,CADC,CADD,CADE,CADF,CAE0,CAE1,CAE2,CAE3,CAE4,CAE5,CAE6,CAE7,CAE8,CAE9,CAEA,CAEB,CAEC,CAED,CAEE,CAEF,CAF0,CAF1,CAF2,CAF3,CAF4,CAF5,CAF6,CAF7,CAF8,CAF9,CAFA,CAFB,CAFC,CAFD,CAFE,CB40,CB42,CB43,CB4A,CB55,CB5C,CB5F,CB60,CB63,CB69,CB6A,CB71,CB78,CB7D,CB80,CB81,CB87,CB8E,CB92,CBA1,CBA2,CBA3,CBA4,CBA5,CBA6,CBA7,CBA8,CBA9,CBAA,CBAB,CBAC,CBAD,CBAE,CBAF,CBB0,CBB1,CBB2,CBB3,CBB4,CBB5,CBB6,CBB7,CBB8,CBB9,CBBA,CBBB,CBBC,CBBD,CBBE,CBBF,CBC0,CBC1,CBC2,CBC3,CBC4,CBC5,CBC6,CBC7,CBC8,CBC9,CBCA,CBCB,CBCC,CBCD,CBCE,CBCF,CBD0,CBD1,CBD2,CBD3,CBD4,CBD5,CBD6,CBD7,CBD8,CBD9,CBDA,CBDB,CBDC,CBDD,CBDE,CBDF,CBE0,CBE1,CBE2,CBE3,CBE4,CBE5,CBE6,CBE7,CBE8,CBE9,CBEA,CBEB,CBEC,CBED,CBEE,CBEF,CBF0,CBF1,CBF2,CBF3,CBF4,CBF5,CBF6,CBF7,CBF8,CBF9,CBFA,CBFB,CBFC,CBFD,CBFE,CC40,CC42,CC45,CC4A,CC55,CC59,CC69,CC6A,CC78,CC7B,CC80,CC8C,CC8E,CC93,CC96,CC99,CCA1,CCA2,CCA3,CCA4,CCA5,CCA6,CCA7,CCA8,CCA9,CCAA,CCAB,CCAC,CCAD,CCAE,CCAF,CCB0,CCB1,CCB2,CCB3,CCB4,CCB5,CCB6,CCB7,CCB8,CCB9,CCBA,CCBB,CCBC,CCBD,CCBE,CCBF,CCC0,CCC1,CCC2,CCC3,CCC4,CCC5,CCC6,CCC7,CCC8,CCC9,CCCA,CCCB,CCCC,CCCD,CCCE,CCCF,CCD0,CCD1,CCD2,CCD3,CCD4,CCD5,CCD6,CCD7,CCD8,CCD9,CCDA,CCDB,CCDC,CCDD,CCDE,CCDF,CCE0,CCE1,CCE2,CCE3,CCE4,CCE5,CCE6,CCE7,CCE8,CCE9,CCEA,CCEB,CCEC,CCED,CCEE,CCEF,CCF0,CCF1,CCF2,CCF3,CCF4,CCF5,CCF6,CCF7,CCF8,CCF9,CCFA,CCFB,CCFC,CCFD,CCFE,CD40,CD41,CD43,CD4A,CD51,CD56,CD57,CD5D,CD62,CD64,CD65,CD67,CD69,CD6C,CD71,CD74,CD75,CD76,CD78,CD7A,CD7D,CD7E,CD80,CD81,CD85,CD89,CD8C,CD8D,CD90,CD94,CD95,CD96,CD99,CD9B,CD9F,CDA0,CDA1,CDA2,CDA3,CDA4,CDA5,CDA6,CDA7,CDA8,CDA9,CDAA,CDAB,CDAC,CDAD,CDAE,CDAF,CDB0,CDB1,CDB2,CDB3,CDB4,CDB5,CDB6,CDB7,CDB8,CDB9,CDBA,CDBB,CDBC,CDBD,CDBE,CDBF,CDC0,CDC1,CDC2,CDC3,CDC4,CDC5,CDC6,CDC7,CDC8,CDC9,CDCA,CDCB,CDCC,CDCD,CDCE,CDCF,CDD0,CDD1,CDD2,CDD3,CDD4,CDD5,CDD6,CDD7,CDD8,CDD9,CDDA,CDDB,CDDC,CDDD,CDDE,CDDF,CDE0,CDE1,CDE2,CDE3,CDE4,CDE5,CDE6,CDE7,CDE8,CDE9,CDEA,CDEB,CDEC,CDED,CDEE,CDEF,CDF0,CDF1,CDF2,CDF3,CDF4,CDF5,CDF6,CDF7,CDF8,CDF9,CDFA,CDFB,CDFC,CDFD,CDFE,CE40,CE41,CE42,CE43,CE45,CE46,CE49,CE4D,CE4F,CE51,CE53,CE56,CE58,CE5F,CE61,CE62,CE66,CE69,CE6A,CE70,CE72,CE7A,CE7B,CE7E,CE80,CE84,CE87,CE88,CE8A,CE8C,CE8D,CE92,CE95,CE9C,CEA1,CEA2,CEA3,CEA4,CEA5,CEA6,CEA7,CEA8,CEA9,CEAA,CEAB,CEAC,CEAD,CEAE,CEAF,CEB0,CEB1,CEB2,CEB3,CEB4,CEB5,CEB6,CEB7,CEB8,CEB9,CEBA,CEBB,CEBC,CEBD,CEBE,CEBF,CEC0,CEC1,CEC2,CEC3,CEC4,CEC5,CEC6,CEC7,CEC8,CEC9,CECA,CECB,CECC,CECD,CECE,CECF,CED0,CED1,CED2,CED3,CED4,CED5,CED6,CED7,CED8,CED9,CEDA,CEDB,CEDC,CEDD,CEDE,CEDF,CEE0,CEE1,CEE2,CEE3,CEE4,CEE5,CEE6,CEE7,CEE8,CEE9,CEEA,CEEB,CEEC,CEED,CEEE,CEEF,CEF0,CEF1,CEF2,CEF3,CEF4,CEF5,CEF6,CEF7,CEF8,CEF9,CEFA,CEFB,CEFC,CEFD,CEFE,CF40,CF43,CF45,CF46,CF49,CF4A,CF4E,CF50,CF52,CF57,CF5A,CF5F,CF66,CF6A,CF6E,CF72,CF75,CF80,CF84,CF88,CF8E,CF96,CF97,CF9B,CFA0,CFA1,CFA2,CFA3,CFA4,CFA5,CFA6,CFA7,CFA8,CFA9,CFAA,CFAB,CFAC,CFAD,CFAE,CFAF,CFB0,CFB1,CFB2,CFB3,CFB4,CFB5,CFB6,CFB7,CFB8,CFB9,CFBA,CFBB,CFBC,CFBD,CFBE,CFBF,CFC0,CFC1,CFC2,CFC3,CFC4,CFC5,CFC6,CFC7,CFC8,CFC9,CFCA,CFCB,CFCC,CFCD,CFCE,CFCF,CFD0,CFD1,CFD2,CFD3,CFD4,CFD5,CFD6,CFD7,CFD8,CFD9,CFDA,CFDB,CFDC,CFDD,CFDE,CFDF,CFE0,CFE1,CFE2,CFE3,CFE4,CFE5,CFE6,CFE7,CFE8,CFE9,CFEA,CFEB,CFEC,CFED,CFEE,CFEF,CFF0,CFF1,CFF2,CFF3,CFF4,CFF5,CFF6,CFF7,CFF8,CFF9,CFFA,CFFB,CFFC,CFFD,CFFE,D040,D04E,D054,D056,D059,D05C,D062,D068,D06A,D06B,D072,D074,D075,D076,D077,D078,D07C,D080,D082,D083,D084,D086,D088,D089,D08D,D090,D095,D09A,D09B,D0A1,D0A2,D0A3,D0A4,D0A5,D0A6,D0A7,D0A8,D0A9,D0AA,D0AB,D0AC,D0AD,D0AE,D0AF,D0B0,D0B1,D0B2,D0B3,D0B4,D0B5,D0B6,D0B7,D0B8,D0B9,D0BA,D0BB,D0BC,D0BD,D0BE,D0BF,D0C0,D0C1,D0C2,D0C3,D0C4,D0C5,D0C6,D0C7,D0C8,D0C9,D0CA,D0CB,D0CC,D0CD,D0CE,D0CF,D0D0,D0D1,D0D2,D0D3,D0D4,D0D5,D0D6,D0D7,D0D8,D0D9,D0DA,D0DB,D0DC,D0DD,D0DE,D0DF,D0E0,D0E1,D0E2,D0E3,D0E4,D0E5,D0E6,D0E7,D0E8,D0E9,D0EA,D0EB,D0EC,D0ED,D0EE,D0EF,D0F0,D0F1,D0F2,D0F3,D0F4,D0F5,D0F6,D0F7,D0F8,D0F9,D0FA,D0FB,D0FC,D0FD,D0FE,D140,D141,D144,D149,D14D,D151,D153,D155,D159,D15C,D15D,D15F,D164,D166,D168,D16F,D170,D173,D175,D176,D179,D180,D181,D186,D187,D18C,D191,D194,D198,D19C,D19F,D1A0,D1A1,D1A2,D1A3,D1A4,D1A5,D1A6,D1A7,D1A8,D1A9,D1AA,D1AB,D1AC,D1AD,D1AE,D1AF,D1B0,D1B1,D1B2,D1B3,D1B4,D1B5,D1B6,D1B7,D1B8,D1B9,D1BA,D1BB,D1BC,D1BD,D1BE,D1BF,D1C0,D1C1,D1C2,D1C3,D1C4,D1C5,D1C6,D1C7,D1C8,D1C9,D1CA,D1CB,D1CC,D1CD,D1CE,D1CF,D1D0,D1D1,D1D2,D1D3,D1D4,D1D5,D1D6,D1D7,D1D8,D1D9,D1DA,D1DB,D1DC,D1DD,D1DE,D1DF,D1E0,D1E1,D1E2,D1E3,D1E4,D1E5,D1E6,D1E7,D1E8,D1E9,D1EA,D1EB,D1EC,D1ED,D1EE,D1EF,D1F0,D1F1,D1F2,D1F3,D1F4,D1F5,D1F6,D1F7,D1F8,D1F9,D1FA,D1FB,D1FC,D1FD,D1FE,D240,D249,D24B,D264,D26A,D27E,D280,D282,D283,D284,D286,D2A1,D2A2,D2A3,D2A4,D2A5,D2A6,D2A7,D2A8,D2A9,D2AA,D2AB,D2AC,D2AD,D2AE,D2AF,D2B0,D2B1,D2B2,D2B3,D2B4,D2B5,D2B6,D2B7,D2B8,D2B9,D2BA,D2BB,D2BC,D2BD,D2BE,D2BF,D2C0,D2C1,D2C2,D2C3,D2C4,D2C5,D2C6,D2C7,D2C8,D2C9,D2CA,D2CB,D2CC,D2CD,D2CE,D2CF,D2D0,D2D1,D2D2,D2D3,D2D4,D2D5,D2D6,D2D7,D2D8,D2D9,D2DA,D2DB,D2DC,D2DD,D2DE,D2DF,D2E0,D2E1,D2E2,D2E3,D2E4,D2E5,D2E6,D2E7,D2E8,D2E9,D2EA,D2EB,D2EC,D2ED,D2EE,D2EF,D2F0,D2F1,D2F2,D2F3,D2F4,D2F5,D2F6,D2F7,D2F8,D2F9,D2FA,D2FB,D2FC,D2FD,D2FE,D340,D35F,D360,D361,D364,D367,D368,D369,D36D,D36E,D372,D375,D378,D380,D385,D38B,D3A1,D3A2,D3A3,D3A4,D3A5,D3A6,D3A7,D3A8,D3A9,D3AA,D3AB,D3AC,D3AD,D3AE,D3AF,D3B0,D3B1,D3B2,D3B3,D3B4,D3B5,D3B6,D3B7,D3B8,D3B9,D3BA,D3BB,D3BC,D3BD,D3BE,D3BF,D3C0,D3C1,D3C2,D3C3,D3C4,D3C5,D3C6,D3C7,D3C8,D3C9,D3CA,D3CB,D3CC,D3CD,D3CE,D3CF,D3D0,D3D1,D3D2,D3D3,D3D4,D3D5,D3D6,D3D7,D3D8,D3D9,D3DA,D3DB,D3DC,D3DD,D3DE,D3DF,D3E0,D3E1,D3E2,D3E3,D3E4,D3E5,D3E6,D3E7,D3E8,D3E9,D3EA,D3EB,D3EC,D3ED,D3EE,D3EF,D3F0,D3F1,D3F2,D3F3,D3F4,D3F5,D3F6,D3F7,D3F8,D3F9,D3FA,D3FB,D3FC,D3FD,D3FE,D440,D460,D469,D480,D49A,D4A1,D4A2,D4A3,D4A4,D4A5,D4A6,D4A7,D4A8,D4A9,D4AA,D4AB,D4AC,D4AD,D4AE,D4AF,D4B0,D4B1,D4B2,D4B3,D4B4,D4B5,D4B6,D4B7,D4B8,D4B9,D4BA,D4BB,D4BC,D4BD,D4BE,D4BF,D4C0,D4C1,D4C2,D4C3,D4C4,D4C5,D4C6,D4C7,D4C8,D4C9,D4CA,D4CB,D4CC,D4CD,D4CE,D4CF,D4D0,D4D1,D4D2,D4D3,D4D4,D4D5,D4D6,D4D7,D4D8,D4D9,D4DA,D4DB,D4DC,D4DD,D4DE,D4DF,D4E0,D4E1,D4E2,D4E3,D4E4,D4E5,D4E6,D4E7,D4E8,D4E9,D4EA,D4EB,D4EC,D4ED,D4EE,D4EF,D4F0,D4F1,D4F2,D4F3,D4F4,D4F5,D4F6,D4F7,D4F8,D4F9,D4FA,D4FB,D4FC,D4FD,D4FE,D540,D548,D550,D580,D5A1,D5A2,D5A3,D5A4,D5A5,D5A6,D5A7,D5A8,D5A9,D5AA,D5AB,D5AC,D5AD,D5AE,D5AF,D5B0,D5B1,D5B2,D5B3,D5B4,D5B5,D5B6,D5B7,D5B8,D5B9,D5BA,D5BB,D5BC,D5BD,D5BE,D5BF,D5C0,D5C1,D5C2,D5C3,D5C4,D5C5,D5C6,D5C7,D5C8,D5C9,D5CA,D5CB,D5CC,D5CD,D5CE,D5CF,D5D0,D5D1,D5D2,D5D3,D5D4,D5D5,D5D6,D5D7,D5D8,D5D9,D5DA,D5DB,D5DC,D5DD,D5DE,D5DF,D5E0,D5E1,D5E2,D5E3,D5E4,D5E5,D5E6,D5E7,D5E8,D5E9,D5EA,D5EB,D5EC,D5ED,D5EE,D5EF,D5F0,D5F1,D5F2,D5F3,D5F4,D5F5,D5F6,D5F7,D5F8,D5F9,D5FA,D5FB,D5FC,D5FD,D5FE,D640,D663,D680,D682,D6A1,D6A2,D6A3,D6A4,D6A5,D6A6,D6A7,D6A8,D6A9,D6AA,D6AB,D6AC,D6AD,D6AE,D6AF,D6B0,D6B1,D6B2,D6B3,D6B4,D6B5,D6B6,D6B7,D6B8,D6B9,D6BA,D6BB,D6BC,D6BD,D6BE,D6BF,D6C0,D6C1,D6C2,D6C3,D6C4,D6C5,D6C6,D6C7,D6C8,D6C9,D6CA,D6CB,D6CC,D6CD,D6CE,D6CF,D6D0,D6D1,D6D2,D6D3,D6D4,D6D5,D6D6,D6D7,D6D8,D6D9,D6DA,D6DB,D6DC,D6DD,D6DE,D6DF,D6E0,D6E1,D6E2,D6E3,D6E4,D6E5,D6E6,D6E7,D6E8,D6E9,D6EA,D6EB,D6EC,D6ED,D6EE,D6EF,D6F0,D6F1,D6F2,D6F3,D6F4,D6F5,D6F6,D6F7,D6F8,D6F9,D6FA,D6FB,D6FC,D6FD,D6FE,D740,D760,D765,D780,D799,D79A,D79B,D79C,D79D,D79E,D79F,D7A0,D7A1,D7A2,D7A3,D7A4,D7A5,D7A6,D7A7,D7A8,D7A9,D7AA,D7AB,D7AC,D7AD,D7AE,D7AF,D7B0,D7B1,D7B2,D7B3,D7B4,D7B5,D7B6,D7B7,D7B8,D7B9,D7BA,D7BB,D7BC,D7BD,D7BE,D7BF,D7C0,D7C1,D7C2,D7C3,D7C4,D7C5,D7C6,D7C7,D7C8,D7C9,D7CA,D7CB,D7CC,D7CD,D7CE,D7CF,D7D0,D7D1,D7D2,D7D3,D7D4,D7D5,D7D6,D7D7,D7D8,D7D9,D7DA,D7DB,D7DC,D7DD,D7DE,D7DF,D7E0,D7E1,D7E2,D7E3,D7E4,D7E5,D7E6,D7E7,D7E8,D7E9,D7EA,D7EB,D7EC,D7ED,D7EE,D7EF,D7F0,D7F1,D7F2,D7F3,D7F4,D7F5,D7F6,D7F7,D7F8,D7F9,D7FA,D840,D849,D84D,D84E,D850,D858,D85C,D862,D869,D870,D874,D87B,D87D,D880,D881,D882,D889,D88C,D8A1,D8A2,D8A3,D8A4,D8A5,D8A6,D8A7,D8A8,D8A9,D8AA,D8AB,D8AC,D8AD,D8AE,D8AF,D8B0,D8B1,D8B2,D8B3,D8B4,D8B5,D8B6,D8B7,D8B8,D8B9,D8BA,D8BB,D8BC,D8BD,D8BE,D8BF,D8C0,D8C1,D8C2,D8C3,D8C4,D8C5,D8C6,D8C7,D8C8,D8C9,D8CA,D8CB,D8CC,D8CD,D8CE,D8CF,D8D0,D8D1,D8D2,D8D3,D8D4,D8D5,D8D6,D8D7,D8D8,D8D9,D8DA,D8DB,D8DC,D8DD,D8DE,D8DF,D8E0,D8E1,D8E2,D8E3,D8E4,D8E5,D8E6,D8E7,D8E8,D8E9,D8EA,D8EB,D8EC,D8ED,D8EE,D8EF,D8F0,D8F1,D8F2,D8F3,D8F4,D8F5,D8F6,D8F7,D8F8,D8F9,D8FA,D8FB,D8FC,D8FD,D8FE,D940,D980,D9A1,D9A2,D9A3,D9A4,D9A5,D9A6,D9A7,D9A8,D9A9,D9AA,D9AB,D9AC,D9AD,D9AE,D9AF,D9B0,D9B1,D9B2,D9B3,D9B4,D9B5,D9B6,D9B7,D9B8,D9B9,D9BA,D9BB,D9BC,D9BD,D9BE,D9BF,D9C0,D9C1,D9C2,D9C3,D9C4,D9C5,D9C6,D9C7,D9C8,D9C9,D9CA,D9CB,D9CC,D9CD,D9CE,D9CF,D9D0,D9D1,D9D2,D9D3,D9D4,D9D5,D9D6,D9D7,D9D8,D9D9,D9DA,D9DB,D9DC,D9DD,D9DE,D9DF,D9E0,D9E1,D9E2,D9E3,D9E4,D9E5,D9E6,D9E7,D9E8,D9E9,D9EA,D9EB,D9EC,D9ED,D9EE,D9EF,D9F0,D9F1,D9F2,D9F3,D9F4,D9F5,D9F6,D9F7,D9F8,D9F9,D9FA,D9FB,D9FC,D9FD,D9FE,DA40,DA4F,DA50,DA52,DA53,DA54,DA55,DA58,DA59,DA5B,DA5D,DA66,DA68,DA6C,DA71,DA73,DA7D,DA80,DA81,DA8E,DA8F,DA91,DA92,DA93,DA94,DA97,DA98,DA9C,DA9D,DA9E,DAA1,DAA2,DAA3,DAA4,DAA5,DAA6,DAA7,DAA8,DAA9,DAAA,DAAB,DAAC,DAAD,DAAE,DAAF,DAB0,DAB1,DAB2,DAB3,DAB4,DAB5,DAB6,DAB7,DAB8,DAB9,DABA,DABB,DABC,DABD,DABE,DABF,DAC0,DAC1,DAC2,DAC3,DAC4,DAC5,DAC6,DAC7,DAC8,DAC9,DACA,DACB,DACC,DACD,DACE,DACF,DAD0,DAD1,DAD2,DAD3,DAD4,DAD5,DAD6,DAD7,DAD8,DAD9,DADA,DADB,DADC,DADD,DADE,DADF,DAE0,DAE1,DAE2,DAE3,DAE4,DAE5,DAE6,DAE7,DAE8,DAE9,DAEA,DAEB,DAEC,DAED,DAEE,DAEF,DAF0,DAF1,DAF2,DAF3,DAF4,DAF5,DAF6,DAF7,DAF8,DAF9,DAFA,DAFB,DAFC,DAFD,DAFE,DB40,DB41,DB43,DB44,DB47,DB4A,DB4B,DB4D,DB50,DB51,DB52,DB53,DB5A,DB5D,DB5E,DB60,DB64,DB6C,DB6E,DB73,DB74,DB75,DB76,DB79,DB7C,DB7E,DB80,DB81,DB82,DB84,DB89,DB8F,DB9B,DB9D,DB9F,DBA0,DBA1,DBA2,DBA3,DBA4,DBA5,DBA6,DBA7,DBA8,DBA9,DBAA,DBAB,DBAC,DBAD,DBAE,DBAF,DBB0,DBB1,DBB2,DBB3,DBB4,DBB5,DBB6,DBB7,DBB8,DBB9,DBBA,DBBB,DBBC,DBBD,DBBE,DBBF,DBC0,DBC1,DBC2,DBC3,DBC4,DBC5,DBC6,DBC7,DBC8,DBC9,DBCA,DBCB,DBCC,DBCD,DBCE,DBCF,DBD0,DBD1,DBD2,DBD3,DBD4,DBD5,DBD6,DBD7,DBD8,DBD9,DBDA,DBDB,DBDC,DBDD,DBDE,DBDF,DBE0,DBE1,DBE2,DBE3,DBE4,DBE5,DBE6,DBE7,DBE8,DBE9,DBEA,DBEB,DBEC,DBED,DBEE,DBEF,DBF0,DBF1,DBF2,DBF3,DBF4,DBF5,DBF6,DBF7,DBF8,DBF9,DBFA,DBFB,DBFC,DBFD,DBFE,DC40,DC41,DC42,DC47,DC49,DC4A,DC4D,DC4E,DC55,DC58,DC5F,DC60,DC6C,DC6E,DC70,DC77,DC80,DC8B,DCA1,DCA2,DCA3,DCA4,DCA5,DCA6,DCA7,DCA8,DCA9,DCAA,DCAB,DCAC,DCAD,DCAE,DCAF,DCB0,DCB1,DCB2,DCB3,DCB4,DCB5,DCB6,DCB7,DCB8,DCB9,DCBA,DCBB,DCBC,DCBD,DCBE,DCBF,DCC0,DCC1,DCC2,DCC3,DCC4,DCC5,DCC6,DCC7,DCC8,DCC9,DCCA,DCCB,DCCC,DCCD,DCCE,DCCF,DCD0,DCD1,DCD2,DCD3,DCD4,DCD5,DCD6,DCD7,DCD8,DCD9,DCDA,DCDB,DCDC,DCDD,DCDE,DCDF,DCE0,DCE1,DCE2,DCE3,DCE4,DCE5,DCE6,DCE7,DCE8,DCE9,DCEA,DCEB,DCEC,DCED,DCEE,DCEF,DCF0,DCF1,DCF2,DCF3,DCF4,DCF5,DCF6,DCF7,DCF8,DCF9,DCFA,DCFB,DCFC,DCFD,DCFE,DD40,DD80,DDA1,DDA2,DDA3,DDA4,DDA5,DDA6,DDA7,DDA8,DDA9,DDAA,DDAB,DDAC,DDAD,DDAE,DDAF,DDB0,DDB1,DDB2,DDB3,DDB4,DDB5,DDB6,DDB7,DDB8,DDB9,DDBA,DDBB,DDBC,DDBD,DDBE,DDBF,DDC0,DDC1,DDC2,DDC3,DDC4,DDC5,DDC6,DDC7,DDC8,DDC9,DDCA,DDCB,DDCC,DDCD,DDCE,DDCF,DDD0,DDD1,DDD2,DDD3,DDD4,DDD5,DDD6,DDD7,DDD8,DDD9,DDDA,DDDB,DDDC,DDDD,DDDE,DDDF,DDE0,DDE1,DDE2,DDE3,DDE4,DDE5,DDE6,DDE7,DDE8,DDE9,DDEA,DDEB,DDEC,DDED,DDEE,DDEF,DDF0,DDF1,DDF2,DDF3,DDF4,DDF5,DDF6,DDF7,DDF8,DDF9,DDFA,DDFB,DDFC,DDFD,DDFE,DE40,DE61,DE62,DE63,DE64,DE65,DE66,DE69,DE6D,DE6E,DE72,DE76,DE78,DE7B,DE7D,DE7E,DE80,DE85,DE86,DE87,DE89,DE8A,DE8C,DE8D,DE8E,DE8F,DE90,DE92,DE95,DE98,DE9A,DE9C,DE9D,DE9E,DE9F,DEA0,DEA1,DEA2,DEA3,DEA4,DEA5,DEA6,DEA7,DEA8,DEA9,DEAA,DEAB,DEAC,DEAD,DEAE,DEAF,DEB0,DEB1,DEB2,DEB3,DEB4,DEB5,DEB6,DEB7,DEB8,DEB9,DEBA,DEBB,DEBC,DEBD,DEBE,DEBF,DEC0,DEC1,DEC2,DEC3,DEC4,DEC5,DEC6,DEC7,DEC8,DEC9,DECA,DECB,DECC,DECD,DECE,DECF,DED0,DED1,DED2,DED3,DED4,DED5,DED6,DED7,DED8,DED9,DEDA,DEDB,DEDC,DEDD,DEDE,DEDF,DEE0,DEE1,DEE2,DEE3,DEE4,DEE5,DEE6,DEE7,DEE8,DEE9,DEEA,DEEB,DEEC,DEED,DEEE,DEEF,DEF0,DEF1,DEF2,DEF3,DEF4,DEF5,DEF6,DEF7,DEF8,DEF9,DEFA,DEFB,DEFC,DEFD,DEFE,DF40,DF41,DF42,DF45,DF4B,DF50,DF51,DF53,DF54,DF56,DF57,DF59,DF5E,DF5F,DF62,DF64,DF6A,DF6B,DF6D,DF71,DF76,DF7D,DF7E,DF80,DF84,DF86,DF8B,DF8C,DF8D,DF8E,DF8F,DF90,DF91,DF94,DF96,DF99,DF9A,DF9B,DF9C,DF9D,DF9F,DFA1,DFA2,DFA3,DFA4,DFA5,DFA6,DFA7,DFA8,DFA9,DFAA,DFAB,DFAC,DFAD,DFAE,DFAF,DFB0,DFB1,DFB2,DFB3,DFB4,DFB5,DFB6,DFB7,DFB8,DFB9,DFBA,DFBB,DFBC,DFBD,DFBE,DFBF,DFC0,DFC1,DFC2,DFC3,DFC4,DFC5,DFC6,DFC7,DFC8,DFC9,DFCA,DFCB,DFCC,DFCD,DFCE,DFCF,DFD0,DFD1,DFD2,DFD3,DFD4,DFD5,DFD6,DFD7,DFD8,DFD9,DFDA,DFDB,DFDC,DFDD,DFDE,DFDF,DFE0,DFE1,DFE2,DFE3,DFE4,DFE5,DFE6,DFE7,DFE8,DFE9,DFEA,DFEB,DFEC,DFED,DFEE,DFEF,DFF0,DFF1,DFF2,DFF3,DFF4,DFF5,DFF6,DFF7,DFF8,DFF9,DFFA,DFFB,DFFC,DFFD,DFFE,E040,E042,E043,E045,E048,E049,E04C,E04F,E052,E055,E057,E058,E059,E05D,E060,E064,E067,E068,E07C,E080,E081,E084,E08F,E090,E097,E0A0,E0A1,E0A2,E0A3,E0A4,E0A5,E0A6,E0A7,E0A8,E0A9,E0AA,E0AB,E0AC,E0AD,E0AE,E0AF,E0B0,E0B1,E0B2,E0B3,E0B4,E0B5,E0B6,E0B7,E0B8,E0B9,E0BA,E0BB,E0BC,E0BD,E0BE,E0BF,E0C0,E0C1,E0C2,E0C3,E0C4,E0C5,E0C6,E0C7,E0C8,E0C9,E0CA,E0CB,E0CC,E0CD,E0CE,E0CF,E0D0,E0D1,E0D2,E0D3,E0D4,E0D5,E0D6,E0D7,E0D8,E0D9,E0DA,E0DB,E0DC,E0DD,E0DE,E0DF,E0E0,E0E1,E0E2,E0E3,E0E4,E0E5,E0E6,E0E7,E0E8,E0E9,E0EA,E0EB,E0EC,E0ED,E0EE,E0EF,E0F0,E0F1,E0F2,E0F3,E0F4,E0F5,E0F6,E0F7,E0F8,E0F9,E0FA,E0FB,E0FC,E0FD,E0FE,E140,E141,E143,E144,E148,E14A,E14C,E14E,E151,E152,E153,E154,E157,E15C,E15D,E15E,E15F,E161,E168,E16E,E174,E176,E17A,E17E,E180,E18B,E18C,E18D,E18E,E198,E1A1,E1A2,E1A3,E1A4,E1A5,E1A6,E1A7,E1A8,E1A9,E1AA,E1AB,E1AC,E1AD,E1AE,E1AF,E1B0,E1B1,E1B2,E1B3,E1B4,E1B5,E1B6,E1B7,E1B8,E1B9,E1BA,E1BB,E1BC,E1BD,E1BE,E1BF,E1C0,E1C1,E1C2,E1C3,E1C4,E1C5,E1C6,E1C7,E1C8,E1C9,E1CA,E1CB,E1CC,E1CD,E1CE,E1CF,E1D0,E1D1,E1D2,E1D3,E1D4,E1D5,E1D6,E1D7,E1D8,E1D9,E1DA,E1DB,E1DC,E1DD,E1DE,E1DF,E1E0,E1E1,E1E2,E1E3,E1E4,E1E5,E1E6,E1E7,E1E8,E1E9,E1EA,E1EB,E1EC,E1ED,E1EE,E1EF,E1F0,E1F1,E1F2,E1F3,E1F4,E1F5,E1F6,E1F7,E1F8,E1F9,E1FA,E1FB,E1FC,E1FD,E1FE,E240,E280,E2A1,E2A2,E2A3,E2A4,E2A5,E2A6,E2A7,E2A8,E2A9,E2AA,E2AB,E2AC,E2AD,E2AE,E2AF,E2B0,E2B1,E2B2,E2B3,E2B4,E2B5,E2B6,E2B7,E2B8,E2B9,E2BA,E2BB,E2BC,E2BD,E2BE,E2BF,E2C0,E2C1,E2C2,E2C3,E2C4,E2C5,E2C6,E2C7,E2C8,E2C9,E2CA,E2CB,E2CC,E2CD,E2CE,E2CF,E2D0,E2D1,E2D2,E2D3,E2D4,E2D5,E2D6,E2D7,E2D8,E2D9,E2DA,E2DB,E2DC,E2DD,E2DE,E2DF,E2E0,E2E1,E2E2,E2E3,E2E4,E2E5,E2E6,E2E7,E2E8,E2E9,E2EA,E2EB,E2EC,E2ED,E2EE,E2EF,E2F0,E2F1,E2F2,E2F3,E2F4,E2F5,E2F6,E2F7,E2F8,E2F9,E2FA,E2FB,E2FC,E2FD,E2FE,E340,E36E,E380,E388,E3A1,E3A2,E3A3,E3A4,E3A5,E3A6,E3A7,E3A8,E3A9,E3AA,E3AB,E3AC,E3AD,E3AE,E3AF,E3B0,E3B1,E3B2,E3B3,E3B4,E3B5,E3B6,E3B7,E3B8,E3B9,E3BA,E3BB,E3BC,E3BD,E3BE,E3BF,E3C0,E3C1,E3C2,E3C3,E3C4,E3C5,E3C6,E3C7,E3C8,E3C9,E3CA,E3CB,E3CC,E3CD,E3CE,E3CF,E3D0,E3D1,E3D2,E3D3,E3D4,E3D5,E3D6,E3D7,E3D8,E3D9,E3DA,E3DB,E3DC,E3DD,E3DE,E3DF,E3E0,E3E1,E3E2,E3E3,E3E4,E3E5,E3E6,E3E7,E3E8,E3E9,E3EA,E3EB,E3EC,E3ED,E3EE,E3EF,E3F0,E3F1,E3F2,E3F3,E3F4,E3F5,E3F6,E3F7,E3F8,E3F9,E3FA,E3FB,E3FC,E3FD,E3FE,E440,E446,E45F,E480,E4A1,E4A2,E4A3,E4A4,E4A5,E4A6,E4A7,E4A8,E4A9,E4AA,E4AB,E4AC,E4AD,E4AE,E4AF,E4B0,E4B1,E4B2,E4B3,E4B4,E4B5,E4B6,E4B7,E4B8,E4B9,E4BA,E4BB,E4BC,E4BD,E4BE,E4BF,E4C0,E4C1,E4C2,E4C3,E4C4,E4C5,E4C6,E4C7,E4C8,E4C9,E4CA,E4CB,E4CC,E4CD,E4CE,E4CF,E4D0,E4D1,E4D2,E4D3,E4D4,E4D5,E4D6,E4D7,E4D8,E4D9,E4DA,E4DB,E4DC,E4DD,E4DE,E4DF,E4E0,E4E1,E4E2,E4E3,E4E4,E4E5,E4E6,E4E7,E4E8,E4E9,E4EA,E4EB,E4EC,E4ED,E4EE,E4EF,E4F0,E4F1,E4F2,E4F3,E4F4,E4F5,E4F6,E4F7,E4F8,E4F9,E4FA,E4FB,E4FC,E4FD,E4FE,E540,E574,E580,E5A0,E5A1,E5A2,E5A3,E5A4,E5A5,E5A6,E5A7,E5A8,E5A9,E5AA,E5AB,E5AC,E5AD,E5AE,E5AF,E5B0,E5B1,E5B2,E5B3,E5B4,E5B5,E5B6,E5B7,E5B8,E5B9,E5BA,E5BB,E5BC,E5BD,E5BE,E5BF,E5C0,E5C1,E5C2,E5C3,E5C4,E5C5,E5C6,E5C7,E5C8,E5C9,E5CA,E5CB,E5CC,E5CD,E5CE,E5CF,E5D0,E5D1,E5D2,E5D3,E5D4,E5D5,E5D6,E5D7,E5D8,E5D9,E5DA,E5DB,E5DC,E5DD,E5DE,E5DF,E5E0,E5E1,E5E2,E5E3,E5E4,E5E5,E5E6,E5E7,E5E8,E5E9,E5EA,E5EB,E5EC,E5ED,E5EE,E5EF,E5F0,E5F1,E5F2,E5F3,E5F4,E5F5,E5F6,E5F7,E5F8,E5F9,E5FA,E5FB,E5FC,E5FD,E5FE,E640,E663,E680,E69E,E6A1,E6A2,E6A3,E6A4,E6A5,E6A6,E6A7,E6A8,E6A9,E6AA,E6AB,E6AC,E6AD,E6AE,E6AF,E6B0,E6B1,E6B2,E6B3,E6B4,E6B5,E6B6,E6B7,E6B8,E6B9,E6BA,E6BB,E6BC,E6BD,E6BE,E6BF,E6C0,E6C1,E6C2,E6C3,E6C4,E6C5,E6C6,E6C7,E6C8,E6C9,E6CA,E6CB,E6CC,E6CD,E6CE,E6CF,E6D0,E6D1,E6D2,E6D3,E6D4,E6D5,E6D6,E6D7,E6D8,E6D9,E6DA,E6DB,E6DC,E6DD,E6DE,E6DF,E6E0,E6E1,E6E2,E6E3,E6E4,E6E5,E6E6,E6E7,E6E8,E6E9,E6EA,E6EB,E6EC,E6ED,E6EE,E6EF,E6F0,E6F1,E6F2,E6F3,E6F4,E6F5,E6F6,E6F7,E6F8,E6F9,E6FA,E6FB,E6FC,E6FD,E6FE,E740,E748,E780,E7A1,E7A2,E7A3,E7A4,E7A5,E7A6,E7A7,E7A8,E7A9,E7AA,E7AB,E7AC,E7AD,E7AE,E7AF,E7B0,E7B1,E7B2,E7B3,E7B4,E7B5,E7B6,E7B7,E7B8,E7B9,E7BA,E7BB,E7BC,E7BD,E7BE,E7BF,E7C0,E7C1,E7C2,E7C3,E7C4,E7C5,E7C6,E7C7,E7C8,E7C9,E7CA,E7CB,E7CC,E7CD,E7CE,E7CF,E7D0,E7D1,E7D2,E7D3,E7D4,E7D5,E7D6,E7D7,E7D8,E7D9,E7DA,E7DB,E7DC,E7DD,E7DE,E7DF,E7E0,E7E1,E7E2,E7E3,E7E4,E7E5,E7E6,E7E7,E7E8,E7E9,E7EA,E7EB,E7EC,E7ED,E7EE,E7EF,E7F0,E7F1,E7F2,E7F3,E7F4,E7F5,E7F6,E7F7,E7F8,E7F9,E7FA,E7FB,E7FC,E7FD,E7FE,E840,E84F,E87B,E880,E895,E896,E897,E898,E899,E89A,E89C,E89D,E89E,E89F,E8A0,E8A1,E8A2,E8A3,E8A4,E8A5,E8A6,E8A7,E8A8,E8A9,E8AA,E8AB,E8AC,E8AD,E8AE,E8AF,E8B0,E8B1,E8B2,E8B3,E8B4,E8B5,E8B6,E8B7,E8B8,E8B9,E8BA,E8BB,E8BC,E8BD,E8BE,E8BF,E8C0,E8C1,E8C2,E8C3,E8C4,E8C5,E8C6,E8C7,E8C8,E8C9,E8CA,E8CB,E8CC,E8CD,E8CE,E8CF,E8D0,E8D1,E8D2,E8D3,E8D4,E8D5,E8D6,E8D7,E8D8,E8D9,E8DA,E8DB,E8DC,E8DD,E8DE,E8DF,E8E0,E8E1,E8E2,E8E3,E8E4,E8E5,E8E6,E8E7,E8E8,E8E9,E8EA,E8EB,E8EC,E8ED,E8EE,E8EF,E8F0,E8F1,E8F2,E8F3,E8F4,E8F5,E8F6,E8F7,E8F8,E8F9,E8FA,E8FB,E8FC,E8FD,E8FE,E940,E941,E942,E943,E944,E945,E946,E947,E948,E949,E94A,E94C,E954,E980,E9A1,E9A2,E9A3,E9A4,E9A5,E9A6,E9A7,E9A8,E9A9,E9AA,E9AB,E9AC,E9AD,E9AE,E9AF,E9B0,E9B1,E9B2,E9B3,E9B4,E9B5,E9B6,E9B7,E9B8,E9B9,E9BA,E9BB,E9BC,E9BD,E9BE,E9BF,E9C0,E9C1,E9C2,E9C3,E9C4,E9C5,E9C6,E9C7,E9C8,E9C9,E9CA,E9CB,E9CC,E9CD,E9CE,E9CF,E9D0,E9D1,E9D2,E9D3,E9D4,E9D5,E9D6,E9D7,E9D8,E9D9,E9DA,E9DB,E9DC,E9DD,E9DE,E9DF,E9E0,E9E1,E9E2,E9E3,E9E4,E9E5,E9E6,E9E7,E9E8,E9E9,E9EA,E9EB,E9EC,E9ED,E9EE,E9EF,E9F0,E9F1,E9F2,E9F3,E9F4,E9F5,E9F6,E9F7,E9F8,E9F9,E9FA,E9FB,E9FC,E9FD,E9FE,EA40,EA5C,EA5D,EA5E,EA5F,EA60,EA61,EA62,EA63,EA64,EA6B,EA6E,EA70,EA74,EA75,EA76,EA77,EA78,EA7A,EA7D,EA80,EA83,EA86,EA87,EA88,EA8A,EA8B,EA90,EA91,EA9E,EA9F,EAA1,EAA2,EAA3,EAA4,EAA5,EAA6,EAA7,EAA8,EAA9,EAAA,EAAB,EAAC,EAAD,EAAE,EAAF,EAB0,EAB1,EAB2,EAB3,EAB4,EAB5,EAB6,EAB7,EAB8,EAB9,EABA,EABB,EABC,EABD,EABE,EABF,EAC0,EAC1,EAC2,EAC3,EAC4,EAC5,EAC6,EAC7,EAC8,EAC9,EACA,EACB,EACC,EACD,EACE,EACF,EAD0,EAD1,EAD2,EAD3,EAD4,EAD5,EAD6,EAD7,EAD8,EAD9,EADA,EADB,EADC,EADD,EADE,EADF,EAE0,EAE1,EAE2,EAE3,EAE4,EAE5,EAE6,EAE7,EAE8,EAE9,EAEA,EAEB,EAEC,EAED,EAEE,EAEF,EAF0,EAF1,EAF2,EAF3,EAF4,EAF5,EAF6,EAF7,EAF8,EAF9,EAFA,EAFB,EAFC,EAFD,EAFE,EB40,EB41,EB42,EB45,EB47,EB49,EB53,EB5B,EB5D,EB5F,EB61,EB63,EB64,EB66,EB67,EB69,EB6B,EB6D,EB77,EB7E,EB80,EB83,EB86,EB88,EB89,EB8D,EB8E,EB90,EB91,EB94,EB97,EB99,EB9E,EB9F,EBA1,EBA2,EBA3,EBA4,EBA5,EBA6,EBA7,EBA8,EBA9,EBAA,EBAB,EBAC,EBAD,EBAE,EBAF,EBB0,EBB1,EBB2,EBB3,EBB4,EBB5,EBB6,EBB7,EBB8,EBB9,EBBA,EBBB,EBBC,EBBD,EBBE,EBBF,EBC0,EBC1,EBC2,EBC3,EBC4,EBC5,EBC6,EBC7,EBC8,EBC9,EBCA,EBCB,EBCC,EBCD,EBCE,EBCF,EBD0,EBD1,EBD2,EBD3,EBD4,EBD5,EBD6,EBD7,EBD8,EBD9,EBDA,EBDB,EBDC,EBDD,EBDE,EBDF,EBE0,EBE1,EBE2,EBE3,EBE4,EBE5,EBE6,EBE7,EBE8,EBE9,EBEA,EBEB,EBEC,EBED,EBEE,EBEF,EBF0,EBF1,EBF2,EBF3,EBF4,EBF5,EBF6,EBF7,EBF8,EBF9,EBFA,EBFB,EBFC,EBFD,EBFE,EC40,EC49,EC4B,EC4D,EC4E,EC53,EC57,EC6A,EC6C,EC6E,EC6F,EC71,EC72,EC74,EC77,EC80,EC81,EC82,EC87,EC8F,EC94,EC95,EC98,EC99,EC9C,ECA1,ECA2,ECA3,ECA4,ECA5,ECA6,ECA7,ECA8,ECA9,ECAA,ECAB,ECAC,ECAD,ECAE,ECAF,ECB0,ECB1,ECB2,ECB3,ECB4,ECB5,ECB6,ECB7,ECB8,ECB9,ECBA,ECBB,ECBC,ECBD,ECBE,ECBF,ECC0,ECC1,ECC2,ECC3,ECC4,ECC5,ECC6,ECC7,ECC8,ECC9,ECCA,ECCB,ECCC,ECCD,ECCE,ECCF,ECD0,ECD1,ECD2,ECD3,ECD4,ECD5,ECD6,ECD7,ECD8,ECD9,ECDA,ECDB,ECDC,ECDD,ECDE,ECDF,ECE0,ECE1,ECE2,ECE3,ECE4,ECE5,ECE6,ECE7,ECE8,ECE9,ECEA,ECEB,ECEC,ECED,ECEE,ECEF,ECF0,ECF1,ECF2,ECF3,ECF4,ECF5,ECF6,ECF7,ECF8,ECF9,ECFA,ECFB,ECFC,ECFD,ECFE,ED40,ED42,ED44,ED4B,ED4C,ED4D,ED4F,ED50,ED80,ED82,ED83,ED88,ED89,EDA1,EDA2,EDA3,EDA4,EDA5,EDA6,EDA7,EDA8,EDA9,EDAA,EDAB,EDAC,EDAD,EDAE,EDAF,EDB0,EDB1,EDB2,EDB3,EDB4,EDB5,EDB6,EDB7,EDB8,EDB9,EDBA,EDBB,EDBC,EDBD,EDBE,EDBF,EDC0,EDC1,EDC2,EDC3,EDC4,EDC5,EDC6,EDC7,EDC8,EDC9,EDCA,EDCB,EDCC,EDCD,EDCE,EDCF,EDD0,EDD1,EDD2,EDD3,EDD4,EDD5,EDD6,EDD7,EDD8,EDD9,EDDA,EDDB,EDDC,EDDD,EDDE,EDDF,EDE0,EDE1,EDE2,EDE3,EDE4,EDE5,EDE6,EDE7,EDE8,EDE9,EDEA,EDEB,EDEC,EDED,EDEE,EDEF,EDF0,EDF1,EDF2,EDF3,EDF4,EDF5,EDF6,EDF7,EDF8,EDF9,EDFA,EDFB,EDFC,EDFD,EDFE,EE40,EE80,EEA1,EEA2,EEA3,EEA4,EEA5,EEA6,EEA7,EEA8,EEA9,EEAA,EEAB,EEAC,EEAD,EEAE,EEAF,EEB0,EEB1,EEB2,EEB3,EEB4,EEB5,EEB6,EEB7,EEB8,EEB9,EEBA,EEBB,EEBC,EEBD,EEBE,EEBF,EEC0,EEC1,EEC2,EEC3,EEC4,EEC5,EEC6,EEC7,EEC8,EEC9,EECA,EECB,EECC,EECD,EECE,EECF,EED0,EED1,EED2,EED3,EED4,EED5,EED6,EED7,EED8,EED9,EEDA,EEDB,EEDC,EEDD,EEDE,EEDF,EEE0,EEE1,EEE2,EEE3,EEE4,EEE5,EEE6,EEE7,EEE8,EEE9,EEEA,EEEB,EEEC,EEED,EEEE,EEEF,EEF0,EEF1,EEF2,EEF3,EEF4,EEF5,EEF6,EEF7,EEF8,EEF9,EEFA,EEFB,EEFC,EEFD,EEFE,EF40,EF46,EF47,EF48,EF49,EF4A,EF4B,EF4C,EF72,EF74,EF75,EF77,EF7A,EF80,EF82,EFA1,EFA2,EFA3,EFA4,EFA5,EFA6,EFA7,EFA8,EFA9,EFAA,EFAB,EFAC,EFAD,EFAE,EFAF,EFB0,EFB1,EFB2,EFB3,EFB4,EFB5,EFB6,EFB7,EFB8,EFB9,EFBA,EFBB,EFBC,EFBD,EFBE,EFBF,EFC0,EFC1,EFC2,EFC3,EFC4,EFC5,EFC6,EFC7,EFC8,EFC9,EFCA,EFCB,EFCC,EFCD,EFCE,EFCF,EFD0,EFD1,EFD2,EFD3,EFD4,EFD5,EFD6,EFD7,EFD8,EFD9,EFDA,EFDB,EFDC,EFDD,EFDE,EFDF,EFE0,EFE1,EFE2,EFE3,EFE4,EFE5,EFE6,EFE7,EFE8,EFE9,EFEA,EFEB,EFEC,EFED,EFEE,EFEF,EFF0,EFF1,EFF2,EFF3,EFF4,EFF5,EFF6,EFF7,EFF8,EFF9,EFFA,EFFB,EFFC,EFFD,EFFE,F040,F045,F047,F064,F080,F08A,F097,F098,F099,F09A,F09C,F09D,F09E,F0A0,F0A1,F0A2,F0A3,F0A4,F0A5,F0A6,F0A7,F0A8,F0A9,F0AA,F0AB,F0AC,F0AD,F0AE,F0AF,F0B0,F0B1,F0B2,F0B3,F0B4,F0B5,F0B6,F0B7,F0B8,F0B9,F0BA,F0BB,F0BC,F0BD,F0BE,F0BF,F0C0,F0C1,F0C2,F0C3,F0C4,F0C5,F0C6,F0C7,F0C8,F0C9,F0CA,F0CB,F0CC,F0CD,F0CE,F0CF,F0D0,F0D1,F0D2,F0D3,F0D4,F0D5,F0D6,F0D7,F0D8,F0D9,F0DA,F0DB,F0DC,F0DD,F0DE,F0DF,F0E0,F0E1,F0E2,F0E3,F0E4,F0E5,F0E6,F0E7,F0E8,F0E9,F0EA,F0EB,F0EC,F0ED,F0EE,F0EF,F0F0,F0F1,F0F2,F0F3,F0F4,F0F5,F0F6,F0F7,F0F8,F0F9,F0FA,F0FB,F0FC,F0FD,F0FE,F140,F141,F142,F14D,F14F,F180,F1A1,F1A2,F1A3,F1A4,F1A5,F1A6,F1A7,F1A8,F1A9,F1AA,F1AB,F1AC,F1AD,F1AE,F1AF,F1B0,F1B1,F1B2,F1B3,F1B4,F1B5,F1B6,F1B7,F1B8,F1B9,F1BA,F1BB,F1BC,F1BD,F1BE,F1BF,F1C0,F1C1,F1C2,F1C3,F1C4,F1C5,F1C6,F1C7,F1C8,F1C9,F1CA,F1CB,F1CC,F1CD,F1CE,F1CF,F1D0,F1D1,F1D2,F1D3,F1D4,F1D5,F1D6,F1D7,F1D8,F1D9,F1DA,F1DB,F1DC,F1DD,F1DE,F1DF,F1E0,F1E1,F1E2,F1E3,F1E4,F1E5,F1E6,F1E7,F1E8,F1E9,F1EA,F1EB,F1EC,F1ED,F1EE,F1EF,F1F0,F1F1,F1F2,F1F3,F1F4,F1F5,F1F6,F1F7,F1F8,F1F9,F1FA,F1FB,F1FC,F1FD,F1FE,F240,F280,F2A1,F2A2,F2A3,F2A4,F2A5,F2A6,F2A7,F2A8,F2A9,F2AA,F2AB,F2AC,F2AD,F2AE,F2AF,F2B0,F2B1,F2B2,F2B3,F2B4,F2B5,F2B6,F2B7,F2B8,F2B9,F2BA,F2BB,F2BC,F2BD,F2BE,F2BF,F2C0,F2C1,F2C2,F2C3,F2C4,F2C5,F2C6,F2C7,F2C8,F2C9,F2CA,F2CB,F2CC,F2CD,F2CE,F2CF,F2D0,F2D1,F2D2,F2D3,F2D4,F2D5,F2D6,F2D7,F2D8,F2D9,F2DA,F2DB,F2DC,F2DD,F2DE,F2DF,F2E0,F2E1,F2E2,F2E3,F2E4,F2E5,F2E6,F2E7,F2E8,F2E9,F2EA,F2EB,F2EC,F2ED,F2EE,F2EF,F2F0,F2F1,F2F2,F2F3,F2F4,F2F5,F2F6,F2F7,F2F8,F2F9,F2FA,F2FB,F2FC,F2FD,F2FE,F340,F352,F353,F354,F355,F357,F359,F35A,F35B,F362,F366,F367,F368,F36B,F36D,F372,F376,F377,F37B,F380,F382,F383,F387,F38B,F38C,F38D,F396,F397,F39E,F3A1,F3A2,F3A3,F3A4,F3A5,F3A6,F3A7,F3A8,F3A9,F3AA,F3AB,F3AC,F3AD,F3AE,F3AF,F3B0,F3B1,F3B2,F3B3,F3B4,F3B5,F3B6,F3B7,F3B8,F3B9,F3BA,F3BB,F3BC,F3BD,F3BE,F3BF,F3C0,F3C1,F3C2,F3C3,F3C4,F3C5,F3C6,F3C7,F3C8,F3C9,F3CA,F3CB,F3CC,F3CD,F3CE,F3CF,F3D0,F3D1,F3D2,F3D3,F3D4,F3D5,F3D6,F3D7,F3D8,F3D9,F3DA,F3DB,F3DC,F3DD,F3DE,F3DF,F3E0,F3E1,F3E2,F3E3,F3E4,F3E5,F3E6,F3E7,F3E8,F3E9,F3EA,F3EB,F3EC,F3ED,F3EE,F3EF,F3F0,F3F1,F3F2,F3F3,F3F4,F3F5,F3F6,F3F7,F3F8,F3F9,F3FA,F3FB,F3FC,F3FD,F3FE,F440,F441,F447,F44A,F455,F458,F463,F465,F46D,F471,F472,F475,F476,F477,F479,F480,F4A1,F4A2,F4A3,F4A4,F4A5,F4A6,F4A7,F4A8,F4A9,F4AA,F4AB,F4AC,F4AD,F4AE,F4AF,F4B0,F4B1,F4B2,F4B3,F4B4,F4B5,F4B6,F4B7,F4B8,F4B9,F4BA,F4BB,F4BC,F4BD,F4BE,F4BF,F4C0,F4C1,F4C2,F4C3,F4C4,F4C5,F4C6,F4C7,F4C8,F4C9,F4CA,F4CB,F4CC,F4CD,F4CE,F4CF,F4D0,F4D1,F4D2,F4D3,F4D4,F4D5,F4D6,F4D7,F4D8,F4D9,F4DA,F4DB,F4DC,F4DD,F4DE,F4DF,F4E0,F4E1,F4E2,F4E3,F4E4,F4E5,F4E6,F4E7,F4E8,F4E9,F4EA,F4EB,F4EC,F4ED,F4EE,F4EF,F4F0,F4F1,F4F2,F4F3,F4F4,F4F5,F4F6,F4F7,F4F8,F4F9,F4FA,F4FB,F4FC,F4FD,F4FE,F540,F580,F5A1,F5A2,F5A3,F5A4,F5A5,F5A6,F5A7,F5A8,F5A9,F5AA,F5AB,F5AC,F5AD,F5AE,F5AF,F5B0,F5B1,F5B2,F5B3,F5B4,F5B5,F5B6,F5B7,F5B8,F5B9,F5BA,F5BB,F5BC,F5BD,F5BE,F5BF,F5C0,F5C1,F5C2,F5C3,F5C4,F5C5,F5C6,F5C7,F5C8,F5C9,F5CA,F5CB,F5CC,F5CD,F5CE,F5CF,F5D0,F5D1,F5D2,F5D3,F5D4,F5D5,F5D6,F5D7,F5D8,F5D9,F5DA,F5DB,F5DC,F5DD,F5DE,F5DF,F5E0,F5E1,F5E2,F5E3,F5E4,F5E5,F5E6,F5E7,F5E8,F5E9,F5EA,F5EB,F5EC,F5ED,F5EE,F5EF,F5F0,F5F1,F5F2,F5F3,F5F4,F5F5,F5F6,F5F7,F5F8,F5F9,F5FA,F5FB,F5FC,F5FD,F5FE,F640,F680,F6A1,F6A2,F6A3,F6A4,F6A5,F6A6,F6A7,F6A8,F6A9,F6AA,F6AB,F6AC,F6AD,F6AE,F6AF,F6B0,F6B1,F6B2,F6B3,F6B4,F6B5,F6B6,F6B7,F6B8,F6B9,F6BA,F6BB,F6BC,F6BD,F6BE,F6BF,F6C0,F6C1,F6C2,F6C3,F6C4,F6C5,F6C6,F6C7,F6C8,F6C9,F6CA,F6CB,F6CC,F6CD,F6CE,F6CF,F6D0,F6D1,F6D2,F6D3,F6D4,F6D5,F6D6,F6D7,F6D8,F6D9,F6DA,F6DB,F6DC,F6DD,F6DE,F6DF,F6E0,F6E1,F6E2,F6E3,F6E4,F6E5,F6E6,F6E7,F6E8,F6E9,F6EA,F6EB,F6EC,F6ED,F6EE,F6EF,F6F0,F6F1,F6F2,F6F3,F6F4,F6F5,F6F6,F6F7,F6F8,F6F9,F6FA,F6FB,F6FC,F6FD,F6FE,F740,F780,F781,F783,F784,F786,F788,F789,F78A,F78B,F78F,F790,F791,F792,F793,F794,F799,F79B,F79D,F79F,F7A1,F7A2,F7A3,F7A4,F7A5,F7A6,F7A7,F7A8,F7A9,F7AA,F7AB,F7AC,F7AD,F7AE,F7AF,F7B0,F7B1,F7B2,F7B3,F7B4,F7B5,F7B6,F7B7,F7B8,F7B9,F7BA,F7BB,F7BC,F7BD,F7BE,F7BF,F7C0,F7C1,F7C2,F7C3,F7C4,F7C5,F7C6,F7C7,F7C8,F7C9,F7CA,F7CB,F7CC,F7CD,F7CE,F7CF,F7D0,F7D1,F7D2,F7D3,F7D4,F7D5,F7D6,F7D7,F7D8,F7D9,F7DA,F7DB,F7DC,F7DD,F7DE,F7DF,F7E0,F7E1,F7E2,F7E3,F7E4,F7E5,F7E6,F7E7,F7E8,F7E9,F7EA,F7EB,F7EC,F7ED,F7EE,F7EF,F7F0,F7F1,F7F2,F7F3,F7F4,F7F5,F7F6,F7F7,F7F8,F7F9,F7FA,F7FB,F7FC,F7FD,F7FE,F840,F880,F8A1,F940,F980,F9A1,FA40,FA80,FAA1,FB40,FB5C,FB5D,FB5E,FB5F,FB60,FB61,FB63,FB64,FB65,FB66,FB69,FB6A,FB6B,FB6C,FB70,FB71,FB73,FB74,FB7E,FB80,FB81,FB85,FB87,FB8D,FB96,FB97,FB9D,FBA1,FC40,FC49,FC4C,FC4E,FC4F,FC54,FC58,FC5B,FC5C,FC5E,FC61,FC63,FC64,FC65,FC67,FC68,FC69,FC6D,FC76,FC77,FC78,FC80,FC85,FC86,FC87,FC89,FC8C,FC8D,FC93,FC94,FC9D,FC9F,FCA1,FD40,FD45,FD46,FD47,FD48,FD4D,FD58,FD80,FD86,FD88,FD94,FD97,FD9C,FD9D,FD9E,FD9F,FDA0,FDA1,FE40,FE44,FE45,FE47,FE48,FE4B,FE4D,FE50,FE80,FEA1","to":"F8F5,4E02,4E04,4E0F,4E12,4E17,4E1F,4E23,4E26,4E29,4E2E,4E31,4E33,4E35,4E37,4E3C,4E40,4E44,4E46,4E4A,4E51,4E55,4E57,4E5A,4E62,4E67,4E6A,4E72,4E74,4E7F,4E87,4E8A,4E90,4E96,4E99,4E9C,4EA3,4EAA,4EAF,4EB4,4EB6,4EBC,4EC8,4ECC,4ECF,4ED2,4EDA,4EE0,4EE2,4EE6,4EE9,4EED,4EF1,4EF4,4EF8,4EFC,4EFE,4F00,4F02,4F0B,4F12,4F1C,4F21,4F23,4F28,4F2C,4F31,4F33,4F35,4F37,4F39,4F3B,4F3E,4F44,4F47,4F52,4F54,4F56,4F61,4F66,4F68,4F6A,4F6D,4F71,4F75,4F77,4F7D,4F80,4F85,4F8A,4F8C,4F8E,4F90,4F92,4F95,4F98,4F9C,4F9E,4FA1,4FA4,4FAB,4FAD,4FB0,4FB6,4FC0,4FC6,4FCB,4FD2,4FD9,4FDB,4FE0,4FE2,4FE4,4FE7,4FEB,4FF0,4FF2,4FF4,4FF9,4FFB,4FFF,500B,500E,5010,5013,5015,501B,501D,5020,5022,5027,502B,502F,503B,503D,503F,5044,5049,504D,5050,5056,505B,505D,5066,506D,5078,507C,5081,5086,5089,508E,50A4,50A6,50AA,50AD,50B3,50BC,50BD,50D0,50D7,50DB,50E8,50EF,50F4,50F6,50FC,5108,5109,510C,5113,5122,5142,5147,514A,514C,514E,5152,5157,515B,515D,5163,5166,5169,516F,5172,517A,517E,5183,5186,518A,518E,5193,5198,519A,519D,51A1,51A3,51A6,51AD,51B4,51B8,51BE,51C1,51C5,51C8,51CA,51CD,51D0,51D2,51D8,51DC,51DE,51E2,51E5,51EC,51EE,51F1,51F4,51F7,51FE,5204,5209,520B,520F,5213,521C,521E,5221,5225,522A,522C,522F,5231,5234,523C,523E,5244,524B,524E,5252,5255,5257,5259,525D,525F,5262,5266,5268,526B,5270,5273,527E,5280,5283,5289,5291,5294,529C,52A4,52AE,52B4,52C0,52C4,52C8,52CA,52CC,52D1,52D3,52D7,52D9,52E0,52E5,52F1,52FB,5301,5307,5309,530E,5311,5318,531B,531E,5322,5324,5327,532B,532F,533C,5340,5342,5344,5346,534B,5350,5354,5358,535B,535D,5365,5368,536A,536C,5372,5376,5379,537B,5380,5383,5387,538A,538E,5390,5396,5399,539B,539E,53A0,53A4,53A7,53AA,53AF,53B7,53BC,53C0,53C3,53CE,53D2,53D5,53DA,53DC,53E1,53E7,53F4,53FA,53FE,5402,5405,5407,540B,5414,5418,541C,5422,5424,542A,5430,5433,5436,543A,543D,543F,5441,5444,5447,5449,544C,5451,545A,545D,5463,5465,5467,5469,5474,5479,547E,5481,5483,5485,5487,548D,5491,5493,5497,549C,549E,54A2,54A5,54AE,54B0,54B2,54B5,54B9,54BC,54BE,54C3,54C5,54CA,54D6,54D8,54DB,54E0,54EB,54EF,54F4,54FB,54FE,5500,5502,5508,550A,5512,5515,551C,5521,5525,5528,552B,552D,5532,5534,5538,553D,5540,5542,5545,5547,554B,5551,5557,555D,5562,5568,556B,556F,5579,557D,557F,5585,558C,5590,5592,5595,559A,559E,55A0,55A8,55B2,55B4,55B6,55B8,55BA,55BC,55BF,55C6,55CA,55CE,55D5,55D7,55DE,55E0,55E2,55E7,55E9,55ED,55F0,55F4,55F6,55F8,55FF,5602,5606,560A,560D,5610,5619,561C,5620,5625,5628,562E,5633,5635,5637,563A,563C,5640,564F,5655,565A,565D,5663,5665,566D,5672,5677,567D,5687,5690,5694,56A4,56B0,56B8,56BD,56CB,56D5,56D8,56DC,56E3,56E5,56EC,56EE,56F2,56F6,56FB,5700,5705,5707,570B,5712,571D,5720,5724,572B,5731,5734,573C,573F,5741,5743,5748,574B,5752,5758,5762,5765,5767,576C,576E,5770,5774,5778,577D,5781,5787,578D,5794,579C,57A5,57A8,57AA,57AC,57AF,57B3,57B5,57B9,57C4,57CC,57D0,57D3,57D6,57DB,57DE,57E1,57E5,57EE,57F0,57F5,57FB,57FE,5801,5803,5808,580C,580E,5812,5816,581A,581F,5822,5825,582B,5831,5836,583E,5845,584E,5852,5855,5859,585F,5866,586D,587F,5882,5884,5886,588A,588D,5894,589B,58A0,58AA,58BD,58C2,58C6,58D2,58D6,58E5,58ED,58EF,58F1,58F4,58F7,58FA,5903,5905,5908,590E,5910,5917,591B,591D,5920,5926,5928,592C,5930,5932,5935,593B,593D,5943,5945,594A,594C,5950,5952,5959,595B,5961,5963,5966,5975,5977,597A,597E,5985,5989,598B,598E,5994,5998,599A,599F,59A6,59A7,59AC,59B0,59B3,59BA,59BC,59BF,59C7,59CC,59D5,59D9,59DB,59DE,59E4,59E6,59E9,59ED,59FA,59FC,5A00,5A02,5A0A,5A0D,5A12,5A14,5A19,5A1D,5A21,5A24,5A26,5A2A,5A33,5A35,5A37,5A3D,5A41,5A47,5A4B,5A56,5A5B,5A61,5A63,5A68,5A6B,5A78,5A7B,5A80,5A93,5A9C,5AAB,5AAD,5AB4,5AB6,5AB9,5ABF,5AC3,5ACA,5ACD,5AD3,5AD5,5AD7,5AD9,5ADD,5AE2,5AE4,5AE7,5AEA,5AEC,5AF2,5B0A,5B18,5B33,5B35,5B38,5B41,5B48,5B52,5B56,5B5E,5B60,5B67,5B6B,5B6D,5B72,5B74,5B76,5B7B,5B7E,5B82,5B86,5B8A,5B8D,5B90,5B94,5B96,5B9F,5BA7,5BAC,5BB1,5BB7,5BBA,5BC0,5BC3,5BC8,5BCD,5BD1,5BD4,5BE0,5BE2,5BE6,5BE9,5BEF,5BF1,5BFD,5C00,5C02,5C05,5C07,5C0B,5C10,5C12,5C17,5C19,5C1B,5C1E,5C23,5C26,5C28,5C2D,5C32,5C35,5C43,5C46,5C4C,5C52,5C56,5C5A,5C5F,5C62,5C64,5C67,5C70,5C72,5C7B,5C80,5C83,5C89,5C8E,5C92,5C95,5C9D,5CA4,5CAA,5CAE,5CB2,5CB4,5CB6,5CB9,5CBE,5CC0,5CC2,5CC5,5CCC,5CD3,5CDA,5CE2,5CE7,5CE9,5CEB,5CEE,5CF1,5CFC,5D01,5D04,5D08,5D0F,5D15,5D17,5D1C,5D1F,5D25,5D28,5D2A,5D2F,5D35,5D3F,5D48,5D4D,5D59,5D5C,5D5E,5D6A,5D6D,5D70,5D75,5D83,5D9A,5D9E,5DA1,5DB8,5DC6,5DCE,5DDC,5DDF,5DE3,5DEA,5DEC,5DF0,5DF5,5DF8,5DFF,5E04,5E07,5E09,5E0D,5E12,5E17,5E1E,5E28,5E2F,5E32,5E39,5E3E,5E43,5E46,5E4D,5E56,5E5C,5E5F,5E63,5E75,5E77,5E79,5E7E,5E81,5E85,5E88,5E8C,5E92,5E98,5E9B,5E9D,5EA1,5EA8,5EAE,5EB4,5EBA,5EBF,5EC6,5ECB,5ED4,5ED7,5EDC,5EE9,5EEB,5EF5,5EF8,5EFB,5F05,5F09,5F0C,5F10,5F12,5F14,5F16,5F19,5F1C,5F21,5F28,5F2B,5F2E,5F30,5F32,5F3B,5F3D,5F41,5F51,5F54,5F59,5F5E,5F63,5F65,5F67,5F6B,5F6E,5F72,5F74,5F78,5F7A,5F7D,5F83,5F86,5F8D,5F91,5F93,5F96,5F9A,5F9D,5FA2,5FA9,5FAB,5FAF,5FB6,5FB8,5FBE,5FC7,5FCA,5FCE,5FD3,5FDA,5FDE,5FE2,5FE5,5FE8,5FEC,5FEF,5FF2,5FF6,5FF9,5FFC,6007,6008,600B,6010,6013,6017,601A,601E,6022,602C,6030,6036,603D,6040,6044,604C,604E,6051,6053,6056,605B,605E,6065,606E,6071,6074,6077,607E,6080,6081,6085,608A,608E,6093,6095,6097,609C,609E,60A1,60A4,60A7,60A9,60AE,60B0,60B3,60B5,60B9,60BD,60C7,60CC,60D2,60D6,60D9,60DB,60DE,60E1,60EA,60F1,60F5,60F7,60FB,6102,6107,610A,6110,6116,611B,6121,6125,6128,612C,6140,6147,6149,614B,614D,614F,6152,6156,615E,6163,6169,6171,6176,6178,618C,618F,6195,6196,619E,61AA,61AD,61B8,61BF,61C3,61C9,61CC,61D3,61D5,61E7,61F6,6200,6207,6209,6213,6219,621C,6220,6223,6226,622B,622D,622F,6235,6238,6242,6244,624A,624F,6255,6259,625C,6264,6268,6271,6274,6277,627A,627D,6281,6285,628B,6294,6299,629C,62A3,62A6,62A9,62AD,62B2,62B6,62BA,62BE,62C0,62C3,62CB,62CF,62D1,62D5,62DD,62E0,62E4,62EA,62F0,62F2,62F5,62F8,6300,6303,630A,630F,6312,6317,631C,6326,6329,632C,6330,6333,633B,633E,6344,6347,634A,6351,6356,6360,6364,6368,636A,636F,6372,6378,637C,6381,6383,638B,638D,6391,6393,6397,6399,63A1,63A4,63A6,63AB,63AF,63B1,63B5,63B9,63BB,63BD,63BF,63C1,63C5,63C7,63CA,63D1,63D3,63D7,63DF,63E2,63E4,63EB,63EE,63F3,63F5,63F7,63F9,63FE,6403,6406,640D,6411,6415,641D,641F,6422,6425,6427,642B,642E,6435,643B,643E,6440,6442,6449,644B,6453,6455,6459,645F,6468,646A,646E,647B,6483,6486,6488,6493,6497,649A,649F,64A5,64AA,64AF,64B1,64B6,64B9,64BB,64BD,64C1,64C3,64C6,64CF,64D1,64D3,64D9,64DB,64DF,64E3,64E5,64E7,6501,650A,6513,6519,6522,6526,652C,6530,6537,653A,653C,6540,6546,654A,654D,6550,6552,6557,655A,655C,655F,6564,6567,656D,6571,6573,6575,6578,6588,658D,6592,6594,6598,659A,659D,65A0,65A2,65A6,65A8,65AA,65AC,65AE,65B1,65BA,65BE,65C2,65C7,65CD,65D0,65D3,65D8,65E1,65E3,65EA,65F2,65F8,65FB,6601,6604,6607,660B,660D,6610,6616,661A,661E,6621,6626,6629,662E,6630,6632,6637,663D,663F,6642,6644,664D,6650,6658,6659,665B,6660,6662,6665,6667,6669,6671,6675,6678,667B,667F,6683,6685,6688,668D,6692,6698,669E,66A9,66AF,66B5,66BA,66BF,66DA,66DE,66E7,66EA,66F1,66F5,66F8,66FA,66FD,6701,6704,670C,670E,6711,6716,6718,671C,671E,6720,6727,6729,672E,6730,6732,6736,673B,673E,6741,6744,6747,674A,674D,6752,6754,6757,675D,6762,6766,676B,676E,6771,6774,6776,6778,677D,6780,6782,6785,6788,678A,678C,6791,6796,6799,679B,679F,67A4,67A6,67A9,67AC,67AE,67B1,67B4,67B9,67C2,67C5,67D5,67DB,67DF,67E1,67E3,67E6,67EA,67ED,67F2,67F5,67FE,6801,6806,680D,6810,6812,6814,6818,681E,6822,682B,6834,683A,683F,6847,684B,684D,684F,6852,6856,685C,686A,686C,6875,6878,6882,6884,6887,6890,6894,6898,68A3,68A9,68AE,68B1,68B4,68B6,68B9,68C1,68C3,68CA,68CC,68CE,68D3,68D6,68D9,68DB,68E1,68E4,68EF,68F2,68F6,68FB,68FD,6902,6906,690C,690F,6911,6913,6921,6925,692E,6931,6935,693A,693E,6940,6943,6955,6958,695B,695F,6961,6964,6967,696C,696F,6972,697A,697D,6981,6983,6985,698A,698E,6996,6999,699D,69A9,69AC,69AE,69B2,69B5,69B8,69BC,69BE,69C2,69CB,69CD,69CF,69D1,69D5,69DC,69E1,69EE,69F3,69FE,6A00,6A0B,6A19,6A20,6A22,6A29,6A2B,6A30,6A32,6A36,6A3F,6A45,6A48,6A51,6A5A,6A5C,6A62,6A66,6A72,6A7A,6A7D,6A81,6A85,6A8F,6A92,6A98,6AA1,6AA7,6AAA,6AAD,6B25,6B28,6B2F,6B33,6B38,6B3B,6B3F,6B44,6B48,6B4A,6B4D,6B5A,6B68,6B6B,6B7A,6B7D,6B85,6B88,6B8C,6B8E,6B94,6B97,6B9C,6BA2,6BAB,6BB6,6BB8,6BC0,6BC3,6BC6,6BCC,6BCE,6BD0,6BD8,6BDA,6BDC,6BE2,6BEC,6BF0,6BF4,6BF6,6BFA,6BFE,6C08,6C0E,6C12,6C17,6C1C,6C20,6C23,6C25,6C2B,6C31,6C33,6C36,6C39,6C3E,6C43,6C48,6C4B,6C51,6C56,6C58,6C59,6C62,6C65,6C6B,6C71,6C73,6C75,6C77,6C7A,6C7F,6C84,6C87,6C8A,6C8D,6C91,6C95,6C9A,6C9C,6CA0,6CA2,6CA8,6CAC,6CAF,6CB4,6CBA,6CC0,6CC6,6CCB,6CCD,6CD1,6CD8,6CD9,6CDC,6CDF,6CE4,6CE6,6CE9,6CEC,6CF2,6CF4,6CF9,6CFF,6D02,6D05,6D08,6D0D,6D0F,6D13,6D18,6D1C,6D1F,6D26,6D28,6D2C,6D2F,6D34,6D36,6D3A,6D3F,6D42,6D44,6D49,6D4C,6D50,6D55,6D5B,6D5D,6D5F,6D61,6D64,6D67,6D6B,6D70,6D75,6D79,6D7D,6D83,6D86,6D8A,6D8D,6D8F,6D92,6D96,6D9C,6DA2,6DA5,6DAC,6DB0,6DB3,6DB6,6DB9,6DC1,6DC8,6DCD,6DD2,6DD7,6DDA,6DDF,6DE2,6DE5,6DE7,6DED,6DEF,6DF2,6DF4,6DF8,6DFA,6DFD,6E06,6E0B,6E0F,6E12,6E15,6E18,6E1B,6E1E,6E22,6E26,6E2A,6E2C,6E2E,6E30,6E33,6E35,6E36,6E39,6E3B,6E45,6E4F,6E55,6E57,6E59,6E5C,6E60,6E6C,6E6F,6E80,6E84,6E87,6E8A,6E91,6E99,6E9D,6EA0,6EA3,6EA6,6EA8,6EAB,6EB0,6EB3,6EB5,6EB8,6EBC,6EBE,6EC3,6EC8,6ECC,6ED0,6ED2,6ED6,6ED8,6EDB,6EE3,6EE7,6EEA,6EF0,6EF5,6EFA,6F03,6F07,6F0A,6F10,6F16,6F21,6F25,6F2C,6F2E,6F30,6F32,6F34,6F37,6F3F,6F43,6F48,6F4C,6F4E,6F59,6F5D,6F5F,6F63,6F67,6F6F,6F73,6F75,6F79,6F7B,6F7D,6F85,6F8A,6F8F,6F9D,6FA2,6FA8,6FB4,6FB7,6FBA,6FC1,6FC3,6FCA,6FD3,6FDF,6FE2,6FE6,6FF0,7012,701C,7024,702B,7036,703A,704D,7050,705F,706E,7071,7077,7079,707D,7081,7086,708B,708F,7093,7097,709A,709E,70B0,70B2,70B4,70BA,70BE,70C4,70C9,70CB,70DA,70DC,70E0,70E5,70EA,70EE,70F0,70F8,70FA,70FE,710B,7111,7114,7117,711B,7127,7132,7135,7137,7146,714B,714D,714F,715D,715F,7165,7169,716F,7174,7179,717B,717E,7185,718B,7190,7195,719A,71A1,71A9,71AD,71B4,71B6,71BA,71C4,71CF,71D6,71E1,71E6,71E8,71EF,71FA,7207,721B,721E,7229,722B,722D,7232,723A,723C,723E,7240,7249,724E,7253,7257,725A,725C,725E,7260,7263,7268,726A,7270,7273,7276,727B,7282,7285,728C,728E,7290,7293,72A0,72AE,72B1,72B5,72BA,72C5,72C9,72CF,72D1,72D3,72D8,72DA,E4C6,E505,3000,3001,3002,00B7,02C9,02C7,00A8,3003,3005,2014,FF5E,2016,2026,2018,2019,201C,201D,3014,3015,3008,3009,300A,300B,300C,300D,300E,300F,3016,3017,3010,3011,00B1,00D7,00F7,2236,2227,2228,2211,220F,222A,2229,2208,2237,221A,22A5,2225,2220,2312,2299,222B,222E,2261,224C,2248,223D,221D,2260,226E,226F,2264,2265,221E,2235,2234,2642,2640,00B0,2032,2033,2103,FF04,00A4,FFE0,FFE1,2030,00A7,2116,2606,2605,25CB,25CF,25CE,25C7,25C6,25A1,25A0,25B3,25B2,203B,2192,2190,2191,2193,3013,E526,E565,2170,E766,2488,2489,248A,248B,248C,248D,248E,248F,2490,2491,2492,2493,2494,2495,2496,2497,2498,2499,249A,249B,2474,2475,2476,2477,2478,2479,247A,247B,247C,247D,247E,247F,2480,2481,2482,2483,2484,2485,2486,2487,2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,E76C,3220,3221,3222,3223,3224,3225,3226,3227,3228,3229,E76E,2160,2161,2162,2163,2164,2165,2166,2167,2168,2169,216A,216B,E770,E586,E5C5,FF01,FF02,FF03,FFE5,FF05,FF06,FF07,FF08,FF09,FF0A,FF0B,FF0C,FF0D,FF0E,FF0F,FF10,FF11,FF12,FF13,FF14,FF15,FF16,FF17,FF18,FF19,FF1A,FF1B,FF1C,FF1D,FF1E,FF1F,FF20,FF21,FF22,FF23,FF24,FF25,FF26,FF27,FF28,FF29,FF2A,FF2B,FF2C,FF2D,FF2E,FF2F,FF30,FF31,FF32,FF33,FF34,FF35,FF36,FF37,FF38,FF39,FF3A,FF3B,FF3C,FF3D,FF3E,FF3F,FF40,FF41,FF42,FF43,FF44,FF45,FF46,FF47,FF48,FF49,FF4A,FF4B,FF4C,FF4D,FF4E,FF4F,FF50,FF51,FF52,FF53,FF54,FF55,FF56,FF57,FF58,FF59,FF5A,FF5B,FF5C,FF5D,FFE3,E5E6,E625,3041,3042,3043,3044,3045,3046,3047,3048,3049,304A,304B,304C,304D,304E,304F,3050,3051,3052,3053,3054,3055,3056,3057,3058,3059,305A,305B,305C,305D,305E,305F,3060,3061,3062,3063,3064,3065,3066,3067,3068,3069,306A,306B,306C,306D,306E,306F,3070,3071,3072,3073,3074,3075,3076,3077,3078,3079,307A,307B,307C,307D,307E,307F,3080,3081,3082,3083,3084,3085,3086,3087,3088,3089,308A,308B,308C,308D,308E,308F,3090,3091,3092,3093,E772,E646,E685,30A1,30A2,30A3,30A4,30A5,30A6,30A7,30A8,30A9,30AA,30AB,30AC,30AD,30AE,30AF,30B0,30B1,30B2,30B3,30B4,30B5,30B6,30B7,30B8,30B9,30BA,30BB,30BC,30BD,30BE,30BF,30C0,30C1,30C2,30C3,30C4,30C5,30C6,30C7,30C8,30C9,30CA,30CB,30CC,30CD,30CE,30CF,30D0,30D1,30D2,30D3,30D4,30D5,30D6,30D7,30D8,30D9,30DA,30DB,30DC,30DD,30DE,30DF,30E0,30E1,30E2,30E3,30E4,30E5,30E6,30E7,30E8,30E9,30EA,30EB,30EC,30ED,30EE,30EF,30F0,30F1,30F2,30F3,30F4,30F5,30F6,E77D,E6A6,E6E5,0391,0392,0393,0394,0395,0396,0397,0398,0399,039A,039B,039C,039D,039E,039F,03A0,03A1,03A3,03A4,03A5,03A6,03A7,03A8,03A9,E785,03B1,03B2,03B3,03B4,03B5,03B6,03B7,03B8,03B9,03BA,03BB,03BC,03BD,03BE,03BF,03C0,03C1,03C3,03C4,03C5,03C6,03C7,03C8,03C9,E78D,FE35,FE39,FE3F,FE3D,FE41,E794,FE3B,FE37,FE31,E796,FE33,E797,E706,E745,0410,0411,0412,0413,0414,0415,0401,0416,0417,0418,0419,041A,041B,041C,041D,041E,041F,0420,0421,0422,0423,0424,0425,0426,0427,0428,0429,042A,042B,042C,042D,042E,042F,E7A0,0430,0431,0432,0433,0434,0435,0451,0436,0437,0438,0439,043A,043B,043C,043D,043E,043F,0440,0441,0442,0443,0444,0445,0446,0447,0448,0449,044A,044B,044C,044D,044E,044F,E7AF,02CA,02D9,2013,2015,2025,2035,2105,2109,2196,2215,221F,2223,2252,2266,22BF,2550,2581,2588,2593,25BC,25E2,2609,2295,3012,301D,E7BC,0101,00E1,01CE,00E0,0113,00E9,011B,00E8,012B,00ED,01D0,00EC,014D,00F3,01D2,00F2,016B,00FA,01D4,00F9,01D6,01D8,01DA,01DC,00FC,00EA,0251,1E3F,0144,0148,E7C8,0261,E7C9,3105,3106,3107,3108,3109,310A,310B,310C,310D,310E,310F,3110,3111,3112,3113,3114,3115,3116,3117,3118,3119,311A,311B,311C,311D,311E,311F,3120,3121,3122,3123,3124,3125,3126,3127,3128,3129,E7CD,3021,32A3,338E,339C,33A1,33C4,33CE,33D1,33D5,FE30,FFE2,FFE4,E7E2,2121,3231,E7E3,2010,E7E4,30FC,309B,30FD,3006,309D,FE49,FE54,FE59,FE62,FE68,E7E7,3007,E7F4,2500,2501,2502,2503,2504,2505,2506,2507,2508,2509,250A,250B,250C,250D,250E,250F,2510,2511,2512,2513,2514,2515,2516,2517,2518,2519,251A,251B,251C,251D,251E,251F,2520,2521,2522,2523,2524,2525,2526,2527,2528,2529,252A,252B,252C,252D,252E,252F,2530,2531,2532,2533,2534,2535,2536,2537,2538,2539,253A,253B,253C,253D,253E,253F,2540,2541,2542,2543,2544,2545,2546,2547,2548,2549,254A,254B,E801,72DC,72DF,72E2,72EA,72F5,72F9,72FD,7302,7304,730B,730F,7314,7318,731F,7323,7326,732D,732F,7332,7335,733A,7340,7349,734E,7351,7353,7358,7361,736E,7370,E000,7372,737F,7385,7388,738A,738C,738F,7392,7397,739C,73A0,73A3,73AA,73AC,73B1,73B4,73B8,73BC,73C1,73C3,73CB,73CE,73D2,73DA,73DF,73E1,73E6,73E8,73EA,73EE,73F3,E05E,73F8,7404,7407,740B,7411,741C,7423,7427,7429,742B,742D,742F,7431,7437,743D,7442,744E,7456,7458,745D,7460,746E,7471,7478,E0BC,747B,747F,7482,7484,7488,748C,748F,7491,749D,749F,74AA,74BB,74C8,74D3,74DD,74DF,74E1,74E5,74E7,74F0,E11A,74F3,74F5,74F8,7500,7505,750E,7510,7512,7514,751B,751D,7520,7526,752A,752E,7534,7536,7539,753C,753F,7541,7546,7549,754D,7550,7555,755D,7567,756B,7573,7575,757A,7580,7584,7587,E178,7588,758C,7590,7593,7595,7598,759B,759E,75A2,75A6,75AD,75B6,75BA,75BF,75C6,75CB,75CE,75D3,75D7,75D9,75DC,75DF,75E5,75E9,75EC,75F2,75F5,75FA,75FD,7602,7604,7606,7608,760B,760D,7611,7616,761A,761C,7621,7623,7627,762C,762E,7631,7636,7639,763D,7641,7644,E1D6,7645,764E,7655,7657,765D,765F,7664,766C,7670,7679,767C,767F,7683,7685,7689,768C,768F,7692,7694,7697,769A,769C,76A5,76AF,76B3,76B5,76C0,76C3,554A,963F,57C3,6328,54CE,5509,54C0,7691,764C,853C,77EE,827E,788D,7231,9698,978D,6C28,5B89,4FFA,6309,6697,5CB8,80FA,6848,80AE,6602,76CE,51F9,6556,71AC,7FF1,8884,50B2,5965,61CA,6FB3,82AD,634C,6252,53ED,5427,7B06,516B,75A4,5DF4,62D4,8DCB,9776,628A,8019,575D,9738,7F62,7238,767D,67CF,767E,6446,4F70,8D25,62DC,7A17,6591,73ED,642C,6273,822C,9881,677F,7248,626E,62CC,4F34,74E3,534A,529E,7ECA,90A6,5E2E,6886,699C,8180,7ED1,68D2,78C5,868C,9551,508D,8C24,82DE,80DE,5305,8912,5265,76C4,76C7,76C9,76CB,76D3,76D5,76D9,76DC,76E0,76E6,76F0,76F3,76F5,76FA,76FD,76FF,7702,7705,770A,770C,770E,771B,7721,7723,7727,772A,772C,772E,7730,7739,773B,773D,7742,7744,7748,7752,775C,8584,96F9,4FDD,5821,9971,5B9D,62B1,62A5,66B4,8C79,9C8D,7206,676F,7891,60B2,5351,5317,8F88,80CC,8D1D,94A1,500D,72C8,5907,60EB,7119,88AB,5954,82EF,672C,7B28,5D29,7EF7,752D,6CF5,8E66,8FF8,903C,9F3B,6BD4,9119,7B14,5F7C,78A7,84D6,853D,6BD5,6BD9,6BD6,5E01,5E87,75F9,95ED,655D,5F0A,5FC5,8F9F,58C1,81C2,907F,965B,97AD,8FB9,7F16,8D2C,6241,4FBF,53D8,535E,8FA8,8FA9,8FAB,904D,6807,5F6A,8198,8868,9CD6,618B,522B,762A,5F6C,658C,6FD2,6EE8,5BBE,6448,5175,51B0,67C4,4E19,79C9,997C,70B3,775D,7764,7767,7769,776D,777A,7781,7786,778F,7793,77A1,77A3,77A6,77A8,77AB,77AD,77B1,77B4,77B6,77BC,77BE,77C0,77CE,77D8,77DD,77E4,75C5,5E76,73BB,83E0,64AD,62E8,94B5,6CE2,535A,52C3,640F,94C2,7B94,4F2F,5E1B,8236,8116,818A,6E24,6CCA,9A73,6355,535C,54FA,8865,57E0,4E0D,5E03,6B65,7C3F,90E8,6016,64E6,731C,88C1,6750,624D,8D22,776C,8E29,91C7,5F69,83DC,8521,9910,53C2,8695,6B8B,60ED,60E8,707F,82CD,8231,4ED3,6CA7,85CF,64CD,7CD9,69FD,66F9,8349,5395,7B56,4FA7,518C,6D4B,5C42,8E6D,63D2,53C9,832C,8336,67E5,78B4,643D,5BDF,5C94,5DEE,8BE7,62C6,67F4,8C7A,6400,63BA,8749,998B,8C17,7F20,94F2,4EA7,9610,98A4,660C,7316,77E6,77E8,77EA,77EF,77F4,77F7,77F9,7803,780A,780E,7813,7815,7819,781B,781E,7820,7824,7828,782A,782E,7831,7835,783D,783F,7841,7846,7848,784D,784F,7851,7853,7858,785B,785E,786F,7878,787D,573A,5C1D,5E38,957F,507F,80A0,5382,655E,7545,5531,5021,8D85,6284,949E,671D,5632,6F6E,5DE2,5435,7092,8F66,626F,64A4,63A3,5F7B,6F88,90F4,81E3,8FB0,5C18,6668,5FF1,6C89,9648,8D81,886C,6491,79F0,57CE,6A59,6210,5448,4E58,7A0B,60E9,6F84,8BDA,627F,901E,9A8B,79E4,5403,75F4,6301,5319,6C60,8FDF,5F1B,9A70,803B,9F7F,4F88,5C3A,8D64,7FC5,65A5,70BD,5145,51B2,866B,5D07,5BA0,62BD,916C,7574,8E0C,7A20,6101,7B79,4EC7,7EF8,7785,4E11,81ED,521D,51FA,6A71,53A8,8E87,9504,96CF,6EC1,9664,695A,7884,7888,788A,788F,7892,7894,7899,789D,78A0,78A2,78A4,78A6,78A8,78B5,78BA,78BF,78C2,78C6,78CC,78D1,78D6,78DA,78E4,78E9,78ED,78F3,78F5,78F8,78FB,7902,7906,7840,50A8,77D7,6410,89E6,5904,63E3,5DDD,7A7F,693D,4F20,8239,5598,4E32,75AE,7A97,5E62,5E8A,95EF,521B,5439,708A,6376,9524,5782,6625,693F,9187,5507,6DF3,7EAF,8822,6233,7EF0,75B5,8328,78C1,96CC,8F9E,6148,74F7,8BCD,6B64,523A,8D50,6B21,806A,8471,56F1,5306,4ECE,4E1B,51D1,7C97,918B,7C07,4FC3,8E7F,7BE1,7A9C,6467,5D14,50AC,8106,7601,7CB9,6DEC,7FE0,6751,5B58,5BF8,78CB,64AE,6413,63AA,632B,9519,642D,8FBE,7B54,7629,6253,5927,5446,6B79,50A3,6234,5E26,6B86,4EE3,8D37,888B,5F85,902E,790D,7914,791F,7925,7935,793D,793F,7942,7947,794A,7954,7958,7961,7963,7964,7966,7969,796E,7970,7979,797B,7982,7986,798B,7990,6020,803D,62C5,4E39,5355,90F8,63B8,80C6,65E6,6C2E,4F46,60EE,6DE1,8BDE,5F39,86CB,5F53,6321,515A,8361,6863,5200,6363,8E48,5012,5C9B,7977,5BFC,5230,7A3B,60BC,9053,76D7,5FB7,5F97,7684,8E6C,706F,767B,7B49,77AA,51F3,9093,5824,4F4E,6EF4,8FEA,654C,7B1B,72C4,6DA4,7FDF,5AE1,62B5,5E95,5730,8482,7B2C,5E1D,5F1F,9012,7F14,98A0,6382,6EC7,7898,70B9,5178,975B,57AB,7535,4F43,7538,5E97,60E6,5960,6DC0,6BBF,7889,53FC,96D5,51CB,5201,6389,540A,9493,8C03,8DCC,7239,789F,8776,8FED,8C0D,53E0,7993,799B,79A8,79B4,79BC,79BF,79C2,79C4,79C7,79CA,79CC,79CE,79D3,79D6,79D9,79E0,79E5,79E8,79EA,79EC,79EE,79F1,79F9,79FC,79FE,7A01,7A04,7A07,7A0C,7A0F,7A15,7A18,7A1B,4E01,76EF,53EE,9489,9876,9F0E,952D,5B9A,8BA2,4E22,4E1C,51AC,8463,61C2,52A8,680B,4F97,606B,51BB,6D1E,515C,6296,6597,9661,8C46,9017,75D8,90FD,7763,6BD2,728A,72EC,8BFB,5835,7779,8D4C,675C,9540,809A,5EA6,6E21,5992,7AEF,77ED,953B,6BB5,65AD,7F0E,5806,5151,961F,5BF9,58A9,5428,8E72,6566,987F,56E4,949D,76FE,9041,6387,54C6,591A,593A,579B,8EB2,6735,8DFA,8235,5241,60F0,5815,86FE,5CE8,9E45,4FC4,989D,8BB9,5A25,6076,5384,627C,904F,9102,997F,6069,800C,513F,8033,5C14,9975,6D31,4E8C,7A1D,7A1F,7A21,7A24,7A34,7A38,7A3A,7A3E,7A40,7A47,7A52,7A58,7A69,7A71,7A75,7A7B,7A82,7A85,7A87,7A89,7A8E,7A93,7A99,7A9E,7AA1,8D30,53D1,7F5A,7B4F,4F10,4E4F,9600,6CD5,73D0,85E9,5E06,756A,7FFB,6A0A,77FE,9492,7E41,51E1,70E6,53CD,8FD4,8303,8D29,72AF,996D,6CDB,574A,82B3,65B9,80AA,623F,9632,59A8,4EFF,8BBF,7EBA,653E,83F2,975E,5561,98DE,80A5,532A,8BFD,5420,80BA,5E9F,6CB8,8D39,82AC,915A,5429,6C1B,5206,7EB7,575F,711A,6C7E,7C89,594B,4EFD,5FFF,6124,7CAA,4E30,5C01,67AB,8702,5CF0,950B,98CE,75AF,70FD,9022,51AF,7F1D,8BBD,5949,51E4,4F5B,5426,592B,6577,80A4,5B75,6276,62C2,8F90,5E45,6C1F,7B26,4F0F,4FD8,670D,7AA3,7AA7,7AA9,7AAE,7AB4,7AC0,7ACC,7AD7,7ADA,7AE1,7AE4,7AE7,7AEE,7AF0,7AF4,7AFB,7AFE,7B00,7B05,7B07,7B09,7B0C,7B10,7B12,7B16,7B1A,7B1C,7B1F,7B21,7B27,7B29,7B2D,6D6E,6DAA,798F,88B1,5F17,752B,629A,8F85,4FEF,91DC,65A7,812F,8151,5E9C,8150,8D74,526F,8986,8D4B,590D,5085,4ED8,961C,7236,8179,8D1F,5BCC,8BA3,9644,5987,7F1A,5490,5676,560E,8BE5,6539,6982,9499,76D6,6E89,5E72,7518,6746,67D1,7AFF,809D,8D76,611F,79C6,6562,8D63,5188,521A,94A2,7F38,809B,7EB2,5C97,6E2F,6760,7BD9,768B,9AD8,818F,7F94,7CD5,641E,9550,7A3F,544A,54E5,6B4C,6401,6208,9E3D,80F3,7599,5272,9769,845B,683C,86E4,9601,9694,94EC,4E2A,5404,7ED9,6839,8DDF,8015,66F4,5E9A,7FB9,7B2F,7B32,7B34,7B39,7B3B,7B3D,7B3F,7B46,7B48,7B4A,7B4D,7B53,7B55,7B57,7B59,7B5C,7B5E,7B61,7B63,7B6F,7B73,7B76,7B78,7B7A,7B7C,7B7F,7B81,7B86,7B8E,7B91,7B96,7B98,7B9E,7BA3,7BAE,7BB2,7BB5,7BB9,7BC2,57C2,803F,6897,5DE5,653B,529F,606D,9F9A,4F9B,8EAC,516C,5BAB,5F13,5DE9,6C5E,62F1,8D21,5171,94A9,52FE,6C9F,82DF,72D7,57A2,6784,8D2D,591F,8F9C,83C7,5495,7B8D,4F30,6CBD,5B64,59D1,9F13,53E4,86CA,9AA8,8C37,80A1,6545,987E,56FA,96C7,522E,74DC,5250,5BE1,6302,8902,4E56,62D0,602A,68FA,5173,5B98,51A0,89C2,7BA1,9986,7F50,60EF,704C,8D2F,5149,5E7F,901B,7470,89C4,572D,7845,5F52,9F9F,95FA,8F68,9B3C,8BE1,7678,6842,67DC,8DEA,8D35,523D,8F8A,6EDA,68CD,9505,90ED,56FD,679C,88F9,8FC7,54C8,7BC5,7BC8,7BCD,7BD2,7BD4,7BDB,7BDE,7BE2,7BE7,7BEB,7BEF,7BF2,7BF8,7BFD,7BFF,7C08,7C0D,7C10,7C17,7C1A,7C20,7C28,7C2B,7C39,7C42,9AB8,5B69,6D77,6C26,4EA5,5BB3,9A87,9163,61A8,90AF,97E9,542B,6DB5,5BD2,51FD,558A,7F55,7FF0,64BC,634D,65F1,61BE,608D,710A,6C57,6C49,592F,676D,822A,58D5,568E,8C6A,6BEB,90DD,597D,8017,53F7,6D69,5475,559D,8377,83CF,6838,79BE,548C,4F55,5408,76D2,8C89,9602,6CB3,6DB8,8D6B,8910,9E64,8D3A,563F,9ED1,75D5,5F88,72E0,6068,54FC,4EA8,6A2A,8861,6052,8F70,54C4,70D8,8679,9E3F,6D2A,5B8F,5F18,7EA2,5589,4FAF,7334,543C,539A,5019,540E,547C,4E4E,5FFD,745A,58F6,846B,80E1,8774,72D0,7CCA,6E56,7C43,7C4E,7C75,7C7E,7C88,7C8A,7C93,7C96,7C99,7CA0,7CA3,7CA6,7CAB,7CAF,7CB4,7CBA,5F27,864E,552C,62A4,4E92,6CAA,6237,82B1,54D7,534E,733E,6ED1,753B,5212,5316,8BDD,69D0,5F8A,6000,6DEE,574F,6B22,73AF,6853,8FD8,7F13,6362,60A3,5524,75EA,8C62,7115,6DA3,5BA6,5E7B,8352,614C,9EC4,78FA,8757,7C27,7687,51F0,60F6,714C,6643,5E4C,604D,8C0E,7070,6325,8F89,5FBD,6062,86D4,56DE,6BC1,6094,6167,5349,60E0,6666,8D3F,79FD,4F1A,70E9,6C47,8BB3,8BF2,7ED8,8364,660F,5A5A,9B42,6D51,6DF7,8C41,6D3B,4F19,706B,83B7,6216,60D1,970D,8D27,7978,51FB,573E,57FA,673A,7578,7A3D,79EF,7B95,7CBF,7CC2,7CC6,7CC9,7CCB,7CCE,7CD8,7CDA,7CDD,7CE1,7CE9,7CF0,7CF9,7CFC,7D0B,7D11,7D21,7D23,7D28,7D2C,7D30,808C,9965,8FF9,6FC0,8BA5,9E21,59EC,7EE9,7F09,5409,6781,68D8,8F91,7C4D,96C6,53CA,6025,75BE,6C72,5373,5AC9,7EA7,6324,51E0,810A,5DF1,84DF,6280,5180,5B63,4F0E,796D,5242,60B8,6D4E,5BC4,5BC2,8BA1,8BB0,65E2,5FCC,9645,5993,7EE7,7EAA,5609,67B7,5939,4F73,5BB6,52A0,835A,988A,8D3E,7532,94BE,5047,7A3C,4EF7,67B6,9A7E,5AC1,6B7C,76D1,575A,5C16,7B3A,95F4,714E,517C,80A9,8270,5978,7F04,8327,68C0,67EC,78B1,7877,62E3,6361,7B80,4FED,526A,51CF,8350,69DB,9274,8DF5,8D31,89C1,952E,7BAD,4EF6,7D37,7D6F,7D78,5065,8230,5251,996F,6E10,6E85,6DA7,5EFA,50F5,59DC,5C06,6D46,6C5F,7586,848B,6868,5956,8BB2,5320,9171,964D,8549,6912,7901,7126,80F6,4EA4,90CA,6D47,9A84,5A07,56BC,6405,94F0,77EB,4FA5,811A,72E1,89D2,997A,7F34,7EDE,527F,6559,9175,8F7F,8F83,53EB,7A96,63ED,63A5,7686,79F8,8857,9636,622A,52AB,8282,6854,6770,6377,776B,7AED,6D01,7ED3,89E3,59D0,6212,85C9,82A5,754C,501F,4ECB,75A5,8BEB,5C4A,5DFE,7B4B,65A4,91D1,4ECA,6D25,895F,7D27,9526,4EC5,8C28,8FDB,9773,664B,7981,8FD1,70EC,6D78,7D99,7DA7,7DAF,7DDA,5C3D,52B2,8346,5162,830E,775B,6676,9CB8,4EAC,60CA,7CBE,7CB3,7ECF,4E95,8B66,666F,9888,9759,5883,656C,955C,5F84,75C9,9756,7ADF,7ADE,51C0,70AF,7A98,63EA,7A76,7EA0,7396,97ED,4E45,7078,4E5D,9152,53A9,6551,65E7,81FC,8205,548E,5C31,759A,97A0,62D8,72D9,75BD,5C45,9A79,83CA,5C40,5480,77E9,4E3E,6CAE,805A,62D2,636E,5DE8,5177,8DDD,8E1E,952F,4FF1,53E5,60E7,70AC,5267,6350,9E43,5A1F,5026,7737,5377,7EE2,6485,652B,6289,6398,5014,7235,89C9,51B3,8BC0,7EDD,5747,83CC,94A7,519B,541B,5CFB,7DFB,7E3A,7E3C,7E42,7E48,4FCA,7AE3,6D5A,90E1,9A8F,5580,5496,5361,54AF,5F00,63E9,6977,51EF,6168,520A,582A,52D8,574E,780D,770B,5EB7,6177,7CE0,625B,6297,4EA2,7095,8003,62F7,70E4,9760,5777,82DB,67EF,68F5,78D5,9897,79D1,58F3,54B3,53EF,6E34,514B,523B,5BA2,8BFE,80AF,5543,57A6,6073,5751,542D,7A7A,6050,5B54,63A7,62A0,53E3,6263,5BC7,67AF,54ED,7A9F,82E6,9177,5E93,88E4,5938,57AE,630E,8DE8,80EF,5757,7B77,4FA9,5FEB,5BBD,6B3E,5321,7B50,72C2,6846,77FF,7736,65F7,51B5,4E8F,76D4,5CBF,7AA5,8475,594E,9B41,5080,7E5E,7E83,7E9C,7EAE,7EB4,7EBB,7ED6,7EE4,7EEC,7EF9,7F0A,7F10,7F1E,7F37,7F39,7F3B,7F43,7F46,7F52,9988,6127,6E83,5764,6606,6346,56F0,62EC,6269,5ED3,9614,5783,62C9,5587,8721,814A,8FA3,5566,83B1,6765,8D56,84DD,5A6A,680F,62E6,7BEE,9611,5170,6F9C,8C30,63FD,89C8,61D2,7F06,70C2,6EE5,7405,6994,72FC,5ECA,90CE,6717,6D6A,635E,52B3,7262,8001,4F6C,59E5,916A,70D9,6D9D,52D2,4E50,96F7,956D,857E,78CA,7D2F,5121,5792,64C2,808B,7C7B,6CEA,68F1,695E,51B7,5398,68A8,7281,9ECE,7BF1,72F8,79BB,6F13,7406,674E,91CC,9CA4,793C,8389,8354,540F,6817,4E3D,5389,52B1,783E,5386,5229,5088,4F8B,4FD0,7F56,7F59,7F5B,7F60,7F63,7F6B,7F6F,7F73,7F75,7F7A,7F7F,7F82,7F8B,7F8D,7F8F,7F95,7F9B,7FA0,7FA2,7FA5,7FA8,7FB1,7FB3,7FBA,7FBE,7FC0,7FC2,7FC6,7FCB,7FCD,7FCF,7FD6,7FD9,7FE2,75E2,7ACB,7C92,6CA5,96B6,529B,7483,54E9,4FE9,8054,83B2,8FDE,9570,5EC9,601C,6D9F,5E18,655B,8138,94FE,604B,70BC,7EC3,7CAE,51C9,6881,7CB1,826F,4E24,8F86,91CF,667E,4EAE,8C05,64A9,804A,50DA,7597,71CE,5BE5,8FBD,6F66,4E86,6482,9563,5ED6,6599,5217,88C2,70C8,52A3,730E,7433,6797,78F7,9716,4E34,90BB,9CDE,6DCB,51DB,8D41,541D,62CE,73B2,83F1,96F6,9F84,94C3,4F36,7F9A,51CC,7075,9675,5CAD,9886,53E6,4EE4,6E9C,7409,69B4,786B,998F,7559,5218,7624,6D41,67F3,516D,9F99,804B,5499,7B3C,7ABF,7FE4,7FE7,7FEA,7FEF,7FF2,7FF4,7FFD,8002,8007,800E,8011,8013,801A,801D,8021,8023,802B,8032,8034,8039,803C,803E,8040,8044,8047,804E,8053,8055,8059,805B,806B,8072,9686,5784,62E2,9647,697C,5A04,6402,7BD3,6F0F,964B,82A6,5362,9885,5E90,7089,63B3,5364,864F,9C81,9E93,788C,9732,8DEF,8D42,9E7F,6F5E,7984,5F55,9646,622E,9A74,5415,94DD,4FA3,65C5,5C65,5C61,7F15,8651,6C2F,5F8B,7387,6EE4,7EFF,5CE6,631B,5B6A,6EE6,5375,4E71,63A0,7565,62A1,8F6E,4F26,4ED1,6CA6,7EB6,8BBA,841D,87BA,7F57,903B,9523,7BA9,9AA1,88F8,843D,6D1B,9A86,7EDC,5988,9EBB,739B,7801,8682,9A6C,9A82,561B,5417,57CB,4E70,9EA6,5356,8FC8,8109,7792,9992,86EE,6EE1,8513,66FC,6162,6F2B,807E,8081,8085,8088,808A,808D,8094,8097,8099,809E,80A3,80A6,80AC,80B0,80B3,80B5,80B8,80BB,80C5,80C7,80CF,80D8,80DF,80E2,80E6,80EE,80F5,80F7,80F9,80FB,80FE,8103,8107,810B,810C,8115,8117,8119,811B,811F,812D,8130,8133,8137,8139,813F,8C29,8292,832B,76F2,6C13,5FD9,83BD,732B,8305,951A,6BDB,77DB,94C6,536F,8302,5192,5E3D,8C8C,8D38,4E48,73AB,679A,6885,9176,9709,7164,6CA1,7709,5A92,9541,6BCF,7F8E,6627,5BD0,59B9,5A9A,95E8,95F7,4EEC,840C,8499,6AAC,76DF,9530,731B,68A6,5B5F,772F,919A,9761,7CDC,8FF7,8C1C,5F25,7C73,79D8,89C5,6CCC,871C,5BC6,5E42,68C9,7720,7EF5,5195,514D,52C9,5A29,7F05,9762,82D7,63CF,7784,85D0,79D2,6E3A,5E99,5999,8511,706D,6C11,62BF,76BF,654F,60AF,95FD,660E,879F,9E23,94ED,540D,547D,8C2C,6478,8140,8147,8149,814D,8152,8156,815B,8161,8166,8168,816A,816F,8172,8175,8181,8183,8189,818B,8190,8192,8199,819E,81A4,81A7,81A9,81AB,81B4,81BC,81C4,81C7,81CB,81CD,6479,8611,6A21,819C,78E8,6469,9B54,62B9,672B,83AB,58A8,9ED8,6CAB,6F20,5BDE,964C,8C0B,725F,67D0,62C7,7261,4EA9,59C6,6BCD,5893,66AE,5E55,52DF,6155,6728,76EE,7766,7267,7A46,62FF,54EA,5450,94A0,90A3,5A1C,7EB3,6C16,4E43,5976,8010,5948,5357,7537,96BE,56CA,6320,8111,607C,95F9,6DD6,5462,9981,5185,5AE9,80FD,59AE,9713,502A,6CE5,5C3C,62DF,4F60,533F,817B,9006,6EBA,852B,62C8,5E74,78BE,64B5,637B,5FF5,5A18,917F,9E1F,5C3F,634F,8042,5B7D,556E,954A,954D,6D85,60A8,67E0,72DE,51DD,5B81,81D4,81E4,81E8,81EB,81EE,81F5,81FD,81FF,8203,8207,820E,8211,8213,8215,821D,8220,8224,8229,822E,8232,823A,823C,823F,8240,8245,8248,824A,824C,8250,8259,825B,8260,8269,62E7,6CDE,725B,626D,94AE,7EBD,8113,6D53,519C,5F04,5974,52AA,6012,5973,6696,8650,759F,632A,61E6,7CEF,8BFA,54E6,6B27,9E25,6BB4,85D5,5455,5076,6CA4,556A,8DB4,722C,5E15,6015,7436,62CD,6392,724C,5F98,6E43,6D3E,6500,6F58,76D8,78D0,76FC,7554,5224,53DB,4E53,5E9E,65C1,802A,80D6,629B,5486,5228,70AE,888D,8DD1,6CE1,5478,80DA,57F9,88F4,8D54,966A,914D,4F69,6C9B,55B7,76C6,7830,62A8,70F9,6F8E,5F6D,84EC,68DA,787C,7BF7,81A8,670B,9E4F,6367,78B0,576F,7812,9739,6279,62AB,5288,7435,6BD7,826A,8271,8275,827B,8280,8283,8285,8289,828C,8290,8293,829A,829E,82A0,82A2,82A7,82B2,82B5,82BA,82BF,82C2,82C5,82C9,82D0,82D6,82D9,82DD,82E2,82E7,82EC,82F0,82F2,82F5,82F8,82FA,82FC,830A,830D,8310,8312,8316,8318,831D,8329,832E,8330,8332,8337,833B,833D,5564,813E,75B2,76AE,5339,75DE,50FB,5C41,8B6C,7BC7,504F,7247,9A97,98D8,6F02,74E2,7968,6487,77A5,62FC,9891,8D2B,54C1,8058,4E52,576A,82F9,840D,5E73,51ED,74F6,8BC4,5C4F,5761,6CFC,9887,5A46,7834,9B44,8FEB,7C95,5256,6251,94FA,4EC6,8386,8461,83E9,84B2,57D4,6734,5703,666E,6D66,8C31,66DD,7011,671F,6B3A,6816,621A,59BB,4E03,51C4,6F06,67D2,6C8F,5176,68CB,5947,6B67,7566,5D0E,8110,9F50,65D7,7948,7941,9A91,8D77,5C82,4E5E,4F01,542F,5951,780C,5668,6C14,8FC4,5F03,6C7D,6CE3,8BAB,6390,833E,8341,8344,8348,834A,8353,8355,835D,8362,8370,8379,837E,8387,838A,838F,8394,8399,839D,839F,83A1,83AC,83AF,83B5,83BB,83BE,83C2,83C6,83C8,83CB,83CD,83D0,83D5,83D7,83D9,83DE,83E2,83E6,83EB,6070,6D3D,7275,6266,948E,94C5,5343,8FC1,7B7E,4EDF,8C26,4E7E,9ED4,94B1,94B3,524D,6F5C,9063,6D45,8C34,5811,5D4C,6B20,6B49,67AA,545B,8154,7F8C,5899,8537,5F3A,62A2,6A47,9539,6572,6084,6865,77A7,4E54,4FA8,5DE7,9798,64AC,7FD8,5CED,4FCF,7A8D,5207,8304,4E14,602F,7A83,94A6,4FB5,4EB2,79E6,7434,52E4,82B9,64D2,79BD,5BDD,6C81,9752,8F7B,6C22,503E,537F,6E05,64CE,6674,6C30,60C5,9877,8BF7,5E86,743C,7A77,79CB,4E18,90B1,7403,6C42,56DA,914B,6CC5,8D8B,533A,86C6,66F2,8EAF,5C48,9A71,6E20,83EE,83F3,83FA,83FE,8402,8405,8407,8410,8412,8419,841E,8429,8432,8439,843E,8447,844A,8452,8458,845D,8462,8464,846A,846E,8472,8474,8477,8479,847B,53D6,5A36,9F8B,8DA3,53BB,5708,98A7,6743,919B,6CC9,5168,75CA,62F3,72AC,5238,529D,7F3A,7094,7638,5374,9E4A,69B7,786E,96C0,88D9,7FA4,7136,71C3,5189,67D3,74E4,58E4,6518,56B7,8BA9,9976,6270,7ED5,60F9,70ED,58EC,4EC1,4EBA,5FCD,97E7,4EFB,8BA4,5203,598A,7EAB,6254,4ECD,65E5,620E,8338,84C9,8363,878D,7194,6EB6,5BB9,7ED2,5197,63C9,67D4,8089,8339,8815,5112,5B7A,5982,8FB1,4E73,6C5D,5165,8925,8F6F,962E,854A,745E,9510,95F0,6DA6,82E5,5F31,6492,6D12,8428,816E,9CC3,585E,8D5B,4E09,53C1,847D,8483,848A,848D,848F,8498,849A,849D,84A2,84B0,84B3,84B5,84BB,84BE,84C0,84C2,84C5,84CB,84CE,84D2,84D4,84D7,84D8,84DE,84E1,84E4,84E7,84ED,84F1,84FD,8500,4F1E,6563,6851,55D3,4E27,6414,9A9A,626B,5AC2,745F,8272,6DA9,68EE,50E7,838E,7802,6740,5239,6C99,7EB1,50BB,5565,715E,7B5B,6652,73CA,82EB,6749,5C71,5220,717D,886B,95EA,9655,64C5,8D61,81B3,5584,6C55,6247,7F2E,5892,4F24,5546,8D4F,664C,4E0A,5C1A,88F3,68A2,634E,7A0D,70E7,828D,52FA,97F6,5C11,54E8,90B5,7ECD,5962,8D4A,86C7,820C,820D,8D66,6444,5C04,6151,6D89,793E,8BBE,7837,7533,547B,4F38,8EAB,6DF1,5A20,7EC5,795E,6C88,5BA1,5A76,751A,80BE,614E,6E17,58F0,751F,7525,7272,5347,7EF3,8503,850D,8512,8514,8518,851B,8520,8522,852D,853E,8544,854B,8557,855A,855F,8565,8569,8573,8575,857C,857F,7701,76DB,5269,80DC,5723,5E08,5931,72EE,65BD,6E7F,8BD7,5C38,8671,5341,77F3,62FE,65F6,4EC0,98DF,8680,5B9E,8BC6,53F2,77E2,4F7F,5C4E,9A76,59CB,5F0F,793A,58EB,4E16,67FF,4E8B,62ED,8A93,901D,52BF,662F,55DC,566C,9002,4ED5,4F8D,91CA,9970,6C0F,5E02,6043,5BA4,89C6,8BD5,6536,624B,9996,5B88,5BFF,6388,552E,53D7,7626,517D,852C,67A2,68B3,6B8A,6292,8F93,53D4,8212,6DD1,758F,4E66,8D4E,5B70,719F,85AF,6691,66D9,7F72,8700,9ECD,9F20,5C5E,672F,8FF0,6811,675F,620D,7AD6,5885,5EB6,6570,6F31,8582,8586,8588,8590,859D,85A5,85A9,85AB,85B1,85B8,85BA,85C2,85CA,85D1,85D4,85D6,85DD,85E5,85EA,6055,5237,800D,6454,8870,7529,5E05,6813,62F4,971C,53CC,723D,8C01,6C34,7761,7A0E,542E,77AC,987A,821C,8BF4,7855,6714,70C1,65AF,6495,5636,601D,79C1,53F8,4E1D,6B7B,8086,5BFA,55E3,56DB,4F3A,4F3C,9972,5DF3,677E,8038,6002,9882,9001,5B8B,8BBC,8BF5,641C,8258,64DE,55FD,82CF,9165,4FD7,7D20,901F,7C9F,50F3,5851,6EAF,5BBF,8BC9,8083,9178,849C,7B97,867D,968B,968F,7EE5,9AD3,788E,5C81,7A57,9042,96A7,795F,5B59,635F,7B0B,84D1,68AD,5506,7F29,7410,7D22,9501,6240,584C,4ED6,5B83,5979,5854,85F9,85FC,8600,8606,8612,8617,8628,862A,8639,863D,8641,8652,8655,865B,865F,8663,736D,631E,8E4B,8E0F,80CE,82D4,62AC,53F0,6CF0,915E,592A,6001,6C70,574D,644A,8D2A,762B,6EE9,575B,6A80,75F0,6F6D,8C2D,8C08,5766,6BEF,8892,78B3,63A2,53F9,70AD,6C64,5858,642A,5802,68E0,819B,5510,7CD6,5018,8EBA,6DCC,8D9F,70EB,638F,6D9B,6ED4,7EE6,8404,6843,9003,6DD8,9676,8BA8,5957,7279,85E4,817E,75BC,8A8A,68AF,5254,8E22,9511,63D0,9898,8E44,557C,4F53,66FF,568F,60D5,6D95,5243,5C49,5929,6DFB,586B,7530,751C,606C,8214,8146,6311,6761,8FE2,773A,8DF3,8D34,94C1,5E16,5385,542C,70C3,866D,866F,8672,8683,868E,8694,8696,869E,86A5,86AB,86AD,86B2,86B7,86BB,86C1,86C5,86C8,86CC,86D2,86D5,86DA,86DC,86DD,86E0,86E5,86EA,86EF,86F5,86FA,86FF,8701,8704,870B,870E,8714,8716,6C40,5EF7,505C,4EAD,5EAD,633A,8247,901A,6850,916E,77B3,540C,94DC,5F64,7AE5,6876,6345,7B52,7EDF,75DB,5077,6295,5934,900F,51F8,79C3,7A81,56FE,5F92,9014,6D82,5C60,571F,5410,5154,6E4D,56E2,63A8,9893,817F,8715,892A,9000,541E,5C6F,81C0,62D6,6258,8131,9E35,9640,9A6E,9A7C,692D,59A5,62D3,553E,6316,54C7,86D9,6D3C,5A03,74E6,889C,6B6A,5916,8C4C,5F2F,6E7E,73A9,987D,4E38,70F7,5B8C,7897,633D,665A,7696,60CB,5B9B,5A49,4E07,8155,6C6A,738B,4EA1,6789,7F51,5F80,65FA,671B,5FD8,5984,5A01,8719,871B,871D,871F,8724,8726,872A,872F,8732,8735,8738,873C,8740,874A,874D,874F,8754,8758,875A,8761,8766,876F,8771,8775,8777,877F,8784,8786,8789,878C,878E,8794,8798,87A0,5DCD,5FAE,5371,97E6,8FDD,6845,56F4,552F,60DF,4E3A,6F4D,7EF4,82C7,840E,59D4,4F1F,4F2A,5C3E,7EAC,672A,851A,5473,754F,80C3,5582,9B4F,4F4D,6E2D,8C13,5C09,6170,536B,761F,6E29,868A,6587,95FB,7EB9,543B,7A33,7D0A,95EE,55E1,7FC1,74EE,631D,8717,6DA1,7A9D,6211,65A1,5367,63E1,6C83,5DEB,545C,94A8,4E4C,6C61,8BEC,5C4B,65E0,829C,68A7,543E,5434,6BCB,6B66,4E94,6342,5348,821E,4F0D,4FAE,575E,620A,96FE,6664,7269,52FF,52A1,609F,8BEF,6614,7199,6790,897F,7852,77FD,6670,563B,5438,9521,727A,87A5,87A9,87AE,87B0,87B4,87B6,87BB,87BE,87C1,87C7,87CC,87D4,87DC,87E1,87E6,87EB,87EF,87FA,87FF,8804,880B,8814,8817,881C,8823,7A00,606F,5E0C,6089,819D,5915,60DC,7184,70EF,6EAA,6C50,7280,6A84,88AD,5E2D,4E60,5AB3,559C,94E3,6D17,7CFB,9699,620F,7EC6,778E,867E,5323,971E,8F96,6687,5CE1,4FA0,72ED,4E0B,53A6,590F,5413,6380,9528,5148,4ED9,9C9C,7EA4,54B8,8D24,8854,8237,95F2,6D8E,5F26,5ACC,663E,9669,73B0,732E,53BF,817A,9985,7FA1,5BAA,9677,9650,7EBF,76F8,53A2,9576,9999,7BB1,8944,6E58,4E61,7FD4,7965,8BE6,60F3,54CD,4EAB,9879,5DF7,6A61,50CF,5411,8C61,8427,785D,9704,524A,54EE,56A3,9500,6D88,5BB5,6DC6,6653,8824,8833,883A,883D,8841,8846,884E,8855,8858,885A,8866,886A,886D,886F,8871,8873,8878,887B,8880,8883,8886,8889,888C,888E,8893,8897,889D,88A3,88A5,5C0F,5B5D,6821,8096,5578,7B11,6548,6954,4E9B,6B47,874E,978B,534F,631F,643A,90AA,659C,80C1,8C10,5199,68B0,5378,87F9,61C8,6CC4,6CFB,8C22,5C51,85AA,82AF,950C,6B23,8F9B,65B0,5FFB,5FC3,4FE1,8845,661F,8165,7329,60FA,5174,5211,578B,5F62,90A2,884C,9192,5E78,674F,6027,59D3,5144,51F6,80F8,5308,6C79,96C4,718A,4F11,4FEE,7F9E,673D,55C5,9508,79C0,8896,7EE3,589F,620C,9700,865A,5618,987B,5F90,8BB8,84C4,9157,53D9,65ED,5E8F,755C,6064,7D6E,5A7F,7EEA,7EED,8F69,55A7,5BA3,60AC,65CB,7384,88AC,88AE,88B2,88B8,88BD,88C3,88C7,88CA,88CF,88D3,88D6,88DA,88E0,88E6,88E9,88F2,88F5,88FA,88FD,88FF,8903,8909,890B,8911,8914,891C,8922,8926,892C,8931,8935,8937,9009,7663,7729,7EDA,9774,859B,5B66,7A74,96EA,8840,52CB,718F,5FAA,65EC,8BE2,5BFB,9A6F,5DE1,6B89,6C5B,8BAD,8BAF,900A,8FC5,538B,62BC,9E26,9E2D,5440,4E2B,82BD,7259,869C,5D16,8859,6DAF,96C5,54D1,4E9A,8BB6,7109,54BD,9609,70DF,6DF9,76D0,4E25,7814,8712,5CA9,5EF6,8A00,989C,960E,708E,6CBF,5944,63A9,773C,884D,6F14,8273,5830,71D5,538C,781A,96C1,5501,5F66,7130,5BB4,8C1A,9A8C,6B83,592E,9E2F,79E7,6768,626C,4F6F,75A1,7F8A,6D0B,9633,6C27,4EF0,75D2,517B,6837,6F3E,9080,8170,5996,7476,8938,8942,8945,8960,8967,897C,897D,8980,8982,8984,8987,6447,5C27,9065,7A91,8C23,59DA,54AC,8200,836F,8981,8000,6930,564E,8036,7237,91CE,51B6,4E5F,9875,6396,4E1A,53F6,66F3,814B,591C,6DB2,4E00,58F9,533B,63D6,94F1,4F9D,4F0A,8863,9890,5937,9057,79FB,4EEA,80F0,7591,6C82,5B9C,59E8,5F5D,6905,8681,501A,5DF2,4E59,77E3,4EE5,827A,6291,6613,9091,5C79,4EBF,5F79,81C6,9038,8084,75AB,4EA6,88D4,610F,6BC5,5FC6,4E49,76CA,6EA2,8BE3,8BAE,8C0A,8BD1,5F02,7FFC,7FCC,7ECE,8335,836B,56E0,6BB7,97F3,9634,59FB,541F,94F6,6DEB,5BC5,996E,5C39,5F15,9690,89A2,89C3,89CD,89D3,89D7,89DB,89DD,89DF,89E4,89E7,89EC,89F0,89F4,89FB,8A01,8A08,5370,82F1,6A31,5A74,9E70,5E94,7F28,83B9,8424,8425,8367,8747,8FCE,8D62,76C8,5F71,9896,786C,6620,54DF,62E5,4F63,81C3,75C8,5EB8,96CD,8E0A,86F9,548F,6CF3,6D8C,6C38,607F,52C7,7528,5E7D,4F18,60A0,5FE7,5C24,7531,90AE,94C0,72B9,6CB9,6E38,9149,6709,53CB,53F3,4F51,91C9,8BF1,53C8,5E7C,8FC2,6DE4,4E8E,76C2,6986,865E,611A,8206,4F59,4FDE,903E,9C7C,6109,6E1D,6E14,9685,4E88,5A31,96E8,4E0E,5C7F,79B9,5B87,8BED,7FBD,7389,57DF,828B,90C1,5401,9047,55BB,5CEA,5FA1,6108,6B32,72F1,80B2,8A89,8A1E,8A3F,8A49,8A5F,8A7A,6D74,5BD3,88D5,9884,8C6B,9A6D,9E33,6E0A,51A4,5143,57A3,8881,539F,63F4,8F95,56ED,5458,5706,733F,6E90,7F18,8FDC,82D1,613F,6028,9662,66F0,7EA6,8D8A,8DC3,94A5,5CB3,7CA4,6708,60A6,9605,8018,4E91,90E7,5300,9668,5141,8FD0,8574,915D,6655,97F5,5B55,531D,7838,6742,683D,54C9,707E,5BB0,8F7D,518D,5728,54B1,6512,6682,8D5E,8D43,810F,846C,906D,7CDF,51FF,85FB,67A3,65E9,6FA1,86A4,8E81,566A,9020,7682,7076,71E5,8D23,62E9,5219,6CFD,8D3C,600E,589E,618E,66FE,8D60,624E,55B3,6E23,672D,8F67,8A81,8A8B,8A94,8AC3,94E1,95F8,7728,6805,69A8,548B,4E4D,70B8,8BC8,6458,658B,5B85,7A84,503A,5BE8,77BB,6BE1,8A79,7C98,6CBE,76CF,65A9,8F97,5D2D,5C55,8638,6808,5360,6218,7AD9,6E5B,7EFD,6A1F,7AE0,5F70,6F33,5F20,638C,6DA8,6756,4E08,5E10,8D26,4ED7,80C0,7634,969C,62DB,662D,627E,6CBC,8D75,7167,7F69,5146,8087,53EC,906E,6298,54F2,86F0,8F99,8005,9517,8517,8FD9,6D59,73CD,659F,771F,7504,7827,81FB,8D1E,9488,4FA6,6795,75B9,8BCA,9707,632F,9547,9635,84B8,6323,7741,5F81,72F0,4E89,6014,6574,62EF,6B63,653F,8AE4,8B08,8B24,8B27,5E27,75C7,90D1,8BC1,829D,679D,652F,5431,8718,77E5,80A2,8102,6C41,4E4B,7EC7,804C,76F4,690D,6B96,6267,503C,4F84,5740,6307,6B62,8DBE,53EA,65E8,7EB8,5FD7,631A,63B7,81F3,81F4,7F6E,5E1C,5CD9,5236,667A,79E9,7A1A,8D28,7099,75D4,6EDE,6CBB,7A92,4E2D,76C5,5FE0,949F,8877,7EC8,79CD,80BF,91CD,4EF2,4F17,821F,5468,5DDE,6D32,8BCC,7CA5,8F74,8098,5E1A,5492,76B1,5B99,663C,9AA4,73E0,682A,86DB,6731,732A,8BF8,8BDB,9010,7AF9,70DB,716E,62C4,77A9,5631,4E3B,8457,67F1,52A9,86C0,8D2E,94F8,7B51,8B46,8B67,8B6D,8B87,8BAC,8BB1,8BBB,8BC7,8BD0,8BEA,8C09,8C1E,4F4F,6CE8,795D,9A7B,6293,722A,62FD,4E13,7816,8F6C,64B0,8D5A,7BC6,6869,5E84,88C5,5986,649E,58EE,72B6,690E,9525,8FFD,8D58,5760,7F00,8C06,51C6,6349,62D9,5353,684C,7422,8301,914C,5544,7740,707C,6D4A,5179,54A8,8D44,59FF,6ECB,6DC4,5B5C,7D2B,4ED4,7C7D,6ED3,5B50,81EA,6E0D,5B57,9B03,68D5,8E2A,5B97,7EFC,603B,7EB5,90B9,8D70,594F,63CD,79DF,8DB3,5352,65CF,7956,8BC5,963B,7EC4,94BB,7E82,5634,9189,6700,7F6A,5C0A,9075,6628,5DE6,4F50,67DE,505A,4F5C,5750,5EA7,E810,8C38,8C42,8C48,8C4A,8C4D,8C56,8C5B,8C63,8C6C,8C74,8C7B,8C83,8C86,8C88,8C8B,8C8D,8C95,8C99,4E8D,4E0C,5140,4E10,5EFF,5345,4E15,4E98,4E1E,9B32,5B6C,5669,4E28,79BA,4E3F,5315,4E47,592D,723B,536E,6C10,56DF,80E4,9997,6BD3,777E,9F17,4E36,4E9F,9F10,4E5C,4E69,4E93,8288,5B5B,556C,560F,4EC4,538D,539D,53A3,53A5,53AE,9765,8D5D,531A,53F5,5326,532E,533E,8D5C,5366,5363,5202,5208,520E,522D,5233,523F,5240,524C,525E,5261,525C,84AF,527D,5282,5281,5290,5293,5182,7F54,4EBB,4EC3,4EC9,4EC2,4EE8,4EE1,4EEB,4EDE,4F1B,4EF3,4F22,4F64,4EF5,4F25,4F27,4F09,4F2B,4F5E,4F67,6538,4F5A,4F5D,8CAE,8CED,4F5F,4F57,4F32,4F3D,4F76,4F74,4F91,4F89,4F83,4F8F,4F7E,4F7B,4FAA,4F7C,4FAC,4F94,4FE6,4FE8,4FEA,4FC5,4FDA,4FE3,4FDC,4FD1,4FDF,4FF8,5029,504C,4FF3,502C,500F,502E,502D,4FFE,501C,500C,5025,5028,507E,5043,5055,5048,504E,506C,507B,50A5,50A7,50A9,50BA,50D6,5106,50ED,50EC,50E6,50EE,5107,510B,4EDD,6C3D,4F58,4F65,4FCE,9FA0,6C46,7C74,516E,5DFD,9EC9,9998,5181,5914,52F9,530D,8A07,5310,51EB,5919,5155,4EA0,5156,4EB3,886E,88A4,4EB5,8114,88D2,7980,5B34,8803,7FB8,51AB,51B1,51BD,51BC,8D0E,8D20,8D51,8D57,8D5F,8D65,8D68,8D6C,8D6E,8D71,8D78,8D82,8D86,8D8C,8D92,8D95,8DA0,8DA2,8DA4,8DB2,8DB6,8DB9,8DBB,8DBD,8DC0,8DC5,8DC7,8DCD,8DD0,8DD2,51C7,5196,51A2,51A5,8BA0,8BA6,8BA7,8BAA,8BB4,8BB5,8BB7,8BC2,8BC3,8BCB,8BCF,8BCE,8BD2,8BD3,8BD4,8BD6,8BD8,8BD9,8BDC,8BDF,8BE0,8BE4,8BE8,8BE9,8BEE,8BF0,8BF3,8BF6,8BF9,8BFC,8BFF,8C00,8C02,8C04,8C07,8C0C,8C0F,8C11,8C12,8C14,8C15,8C16,8C19,8C1B,8C18,8C1D,8C1F,8C20,8C21,8C25,8C27,8C2A,8C2B,8C2E,8C2F,8C32,8C33,8C35,8C36,5369,537A,961D,9622,9621,9631,962A,963D,963C,9642,9649,9654,965F,9667,966C,9672,9674,9688,968D,9697,96B0,9097,909B,909D,9099,90AC,90A1,90B4,90B3,90B6,90BA,8DD5,8DD8,8DDC,8DE0,8DE5,8DE9,8DED,8DF0,8DF4,8DF6,8DFC,8DFE,8E06,8E0B,8E0D,8E10,8E15,8E20,8E24,8E2B,8E2D,8E30,8E32,8E36,8E3B,8E3E,8E3F,8E43,8E45,8E4C,8E53,8E5A,8E67,8E6A,8E6E,8E71,90B8,90B0,90CF,90C5,90BE,90D0,90C4,90C7,90D3,90E6,90E2,90DC,90D7,90DB,90EB,90EF,90FE,9104,9122,911E,9123,9131,912F,9139,9143,9146,520D,5942,52A2,52AC,52AD,52BE,54FF,52D0,52D6,52F0,53DF,71EE,77CD,5EF4,51F5,51FC,9B2F,53B6,5F01,755A,5DEF,574C,57A9,57A1,587E,58BC,58C5,58D1,5729,572C,572A,5733,5739,572E,572F,575C,573B,5742,5769,5785,576B,5786,577C,577B,5768,576D,5776,5773,57AD,57A4,578C,57B2,57CF,57A7,57B4,5793,57A0,57D5,57D8,57DA,57D9,57D2,57B8,57F4,57EF,57F8,57E4,57DD,8E73,8E75,8E77,8E7D,8E80,8E82,8E86,8E88,8E91,8E95,8E9D,8E9F,8EAD,8EB0,8EB3,8EBB,8EC3,8ECF,580B,580D,57FD,57ED,5800,581E,5819,5844,5820,5865,586C,5881,5889,589A,5880,99A8,9F19,61FF,8279,827D,827F,828F,828A,82A8,8284,828E,8291,8297,8299,82AB,82B8,82BE,82B0,82C8,82CA,82E3,8298,82B7,82AE,82CB,82CC,82C1,82A9,82B4,82A1,82AA,829F,82C4,82CE,82A4,82E1,8309,82F7,82E4,830F,8307,82DC,82F4,82D2,82D8,830C,82FB,82D3,8311,831A,8306,8314,8315,82E0,82D5,831C,8351,835B,835C,8308,8392,833C,8334,8331,839B,835E,832F,834F,8347,8343,835F,8340,8317,8360,832D,833A,8333,8366,8365,8EE5,8F24,8368,831B,8369,836C,836A,836D,836E,83B0,8378,83B3,83B4,83A0,83AA,8393,839C,8385,837C,83B6,83A9,837D,83B8,837B,8398,839E,83A8,83BA,83BC,83C1,8401,83E5,83D8,5807,8418,840B,83DD,83FD,83D6,841C,8438,8411,8406,83D4,83DF,840F,8403,83F8,83F9,83EA,83C5,83C0,8426,83F0,83E1,845C,8451,845A,8459,8473,8487,8488,847A,8489,8478,843C,8446,8469,8476,848C,848E,8431,846D,84C1,84CD,84D0,84E6,84BD,84D3,84CA,84BF,84BA,84E0,84A1,84B9,84B4,8497,84E5,84E3,850C,750D,8538,84F0,8539,851F,853A,8F45,8F6A,8F80,8F8C,8F92,8F9D,8FA0,8FA4,8FAA,8FAC,8FB2,8FB7,8FBA,8FBF,8FC3,8FC6,8FC9,8FCF,8FD2,8FD6,8FDA,8FE0,8FE3,8FE7,8FEC,8FEF,8FF1,8FF4,8FFA,8FFE,9007,900C,900E,9013,9015,9018,8556,853B,84FF,84FC,8559,8548,8568,8564,855E,857A,77A2,8543,8572,857B,85A4,85A8,8587,858F,8579,85AE,859C,8585,85B9,85B7,85B0,85D3,85C1,85DC,85FF,8627,8605,8629,8616,863C,5EFE,5F08,593C,5941,8037,5955,595A,5958,530F,5C22,5C25,5C2C,5C34,624C,626A,629F,62BB,62CA,62DA,62D7,62EE,6322,62F6,6339,634B,6343,63AD,63F6,6371,637A,638E,63B4,636D,63AC,638A,6369,63AE,63BC,63F2,63F8,63E0,63FF,63C4,63DE,63CE,6452,63C6,63BE,6445,6441,640B,641B,6420,640C,6426,6421,645E,6484,646D,6496,9019,901C,9023,9027,9030,9037,9039,903D,903F,9043,9045,9048,904E,9054,9059,905C,9064,9066,9069,906F,9076,907E,9081,9084,9089,908C,9092,9094,9096,9098,909A,909C,909E,90A4,90A7,90AB,90AD,90B2,90B7,90BC,90BF,647A,64B7,64B8,6499,64BA,64C0,64D0,64D7,64E4,64E2,6509,6525,652E,5F0B,5FD2,7519,5F11,535F,53F1,53FD,53E9,53E8,53FB,5412,5416,5406,544B,5452,5453,5454,5456,5443,5421,5457,5459,5423,5432,5482,5494,5477,5471,5464,549A,549B,5484,5476,5466,549D,54D0,54AD,54C2,54B4,54D2,54A7,54A6,54D3,54D4,5472,54A3,54D5,54BB,54BF,54CC,54D9,54DA,54DC,54A9,54AA,54A4,54DD,54CF,54DE,551B,54E7,5520,54FD,5514,54F3,5522,5523,550F,5511,5527,552A,5567,558F,55B5,5549,556D,5541,5555,553F,5550,553C,90C2,90C6,90C8,90CB,90D2,90D4,90D8,90DE,90E3,90E9,90EC,90EE,90F0,90F5,90F9,90FF,9103,9105,911A,911D,911F,9124,9130,9132,913A,9144,5537,5556,5575,5576,5577,5533,5530,555C,558B,55D2,5583,55B1,55B9,5588,5581,559F,557E,55D6,5591,557B,55DF,55BD,55BE,5594,5599,55EA,55F7,55C9,561F,55D1,55EB,55EC,55D4,55E6,55DD,55C4,55EF,55E5,55F2,55F3,55CC,55CD,55E8,55F5,55E4,8F94,561E,5608,560C,5601,5624,5623,55FE,5600,5627,562D,5658,5639,5657,562C,564D,5662,5659,565C,564C,5654,5686,5664,5671,566B,567B,567C,5685,5693,56AF,56D4,56D7,56DD,56E1,56F5,56EB,56F9,56FF,5704,570A,5709,571C,5E0F,5E19,5E14,5E11,5E31,5E3B,5E3C,9145,9147,9151,9153,9158,915B,915F,9166,916B,916D,9173,917A,9180,9186,9188,918A,918E,9193,919C,91A4,91AB,91B0,91B6,91BB,91BC,91C8,91CB,91D0,91D2,91DD,5E37,5E44,5E54,5E5B,5E5E,5E61,5C8C,5C7A,5C8D,5C90,5C96,5C88,5C98,5C99,5C91,5C9A,5C9C,5CB5,5CA2,5CBD,5CAC,5CAB,5CB1,5CA3,5CC1,5CB7,5CC4,5CD2,5CE4,5CCB,5CE5,5D02,5D03,5D27,5D26,5D2E,5D24,5D1E,5D06,5D1B,5D58,5D3E,5D34,5D3D,5D6C,5D5B,5D6F,5D5D,5D6B,5D4B,5D4A,5D69,5D74,5D82,5D99,5D9D,8C73,5DB7,5DC5,5F73,5F77,5F82,5F87,5F89,5F8C,5F95,5F99,5F9C,5FA8,5FAD,5FB5,5FBC,8862,5F61,72AD,72B0,72B4,72B7,72B8,72C3,72C1,72CE,72CD,72D2,72E8,72EF,72E9,72F2,72F4,72F7,7301,72F3,7303,72FA,91E6,9225,72FB,7317,7313,7321,730A,731E,731D,7315,7322,7339,7325,732C,7338,7331,7350,734D,7357,7360,736C,736F,737E,821B,5925,98E7,5924,5902,9963,9967,9968,9969,996A,996B,996C,9974,9977,997D,9980,9984,9987,998A,998D,9990,9991,9993,9994,9995,5E80,5E91,5E8B,5E96,5EA5,5EA0,5EB9,5EB5,5EBE,5EB3,8D53,5ED2,5ED1,5EDB,5EE8,5EEA,81BA,5FC4,5FC9,5FD6,5FCF,6003,5FEE,6004,5FE1,5FE4,5FFE,6005,6006,5FEA,5FED,5FF8,6019,6035,6026,601B,600F,600D,6029,602B,600A,603F,6021,6078,6079,607B,607A,6042,9246,9275,9286,928F,606A,607D,6096,609A,60AD,609D,6083,6092,608C,609B,60EC,60BB,60B1,60DD,60D8,60C6,60DA,60B4,6120,6126,6115,6123,60F4,6100,610E,612B,614A,6175,61AC,6194,61A7,61B7,61D4,61F5,5FDD,96B3,95E9,95EB,95F1,95F3,95F5,95F6,95FC,95FE,9603,9604,9606,9608,960A,960B,960C,960D,960F,9612,9615,9616,9617,9619,961A,4E2C,723F,6215,6C35,6C54,6C5C,6C4A,6CA3,6C85,6C90,6C94,6C8C,6C68,6C69,6C74,6C76,6C86,6CA9,6CD0,6CD4,6CAD,6CF7,6CF8,6CF1,6CD7,6CB2,6CE0,6CD6,6CFA,6CEB,6CEE,6CB1,6CD3,6CEF,6CFE,92A8,92AF,92C9,92E9,6D39,6D27,6D0C,6D43,6D48,6D07,6D04,6D19,6D0E,6D2B,6D4D,6D2E,6D35,6D1A,6D4F,6D52,6D54,6D33,6D91,6D6F,6D9E,6DA0,6D5E,6D93,6D94,6D5C,6D60,6D7C,6D63,6E1A,6DC7,6DC5,6DDE,6E0E,6DBF,6DE0,6E11,6DE6,6DDD,6DD9,6E16,6DAB,6E0C,6DAE,6E2B,6E6E,6E4E,6E6B,6EB2,6E5F,6E86,6E53,6E54,6E32,6E25,6E44,6EDF,6EB1,6E98,6EE0,6F2D,6EE2,6EA5,6EA7,6EBD,6EBB,6EB7,6ED7,6EB4,6ECF,6E8F,6EC2,6E9F,6F62,6F46,6F47,6F24,6F15,6EF9,6F2F,6F36,6F4B,6F74,6F2A,6F09,6F29,6F89,6F8D,6F8C,6F78,6F72,6F7C,6F7A,6FD1,930A,933F,934A,936B,6FC9,6FA7,6FB9,6FB6,6FC2,6FE1,6FEE,6FDE,6FE0,6FEF,701A,7023,701B,7039,7035,704F,705E,5B80,5B84,5B95,5B93,5BA5,5BB8,752F,9A9E,6434,5BE4,5BEE,8930,5BF0,8E47,8B07,8FB6,8FD3,8FD5,8FE5,8FEE,8FE4,8FE9,8FE6,8FF3,8FE8,9005,9004,900B,9026,9011,900D,9016,9021,9035,9036,902D,902F,9044,9051,9052,9050,9068,9058,9062,905B,66B9,9074,907D,9082,9088,9083,908B,5F50,5F57,5F56,5F58,5C3B,54AB,5C50,5C59,5B71,5C63,5C66,7FBC,5F2A,5F29,5F2D,8274,5F3C,9B3B,5C6E,5981,5983,598D,59A9,59AA,59A3,936C,9390,93AC,93CB,5997,59CA,59AB,599E,59A4,59D2,59B2,59AF,59D7,59BE,5A05,5A06,59DD,5A08,59E3,59D8,59F9,5A0C,5A09,5A32,5A34,5A11,5A23,5A13,5A40,5A67,5A4A,5A55,5A3C,5A62,5A75,80EC,5AAA,5A9B,5A77,5A7A,5ABE,5AEB,5AB2,5AD2,5AD4,5AB8,5AE0,5AE3,5AF1,5AD6,5AE6,5AD8,5ADC,5B09,5B17,5B16,5B32,5B37,5B40,5C15,5C1C,5B5A,5B65,5B73,5B51,5B53,5B62,9A75,9A77,9A78,9A7A,9A7F,9A7D,9A80,9A81,9A85,9A88,9A8A,9A90,9A92,9A93,9A96,9A98,9A9B,9A9C,9A9D,9A9F,9AA0,9AA2,9AA3,9AA5,9AA7,7E9F,7EA1,7EA3,7EA5,7EA8,7EA9,93CE,93D7,940E,7EAD,7EB0,7EBE,7EC0,7EC1,7EC2,7EC9,7ECB,7ECC,7ED0,7ED4,7ED7,7EDB,7EE0,7EE1,7EE8,7EEB,7EEE,7EEF,7EF1,7EF2,7F0D,7EF6,7EFA,7EFB,7EFE,7F01,7F02,7F03,7F07,7F08,7F0B,7F0C,7F0F,7F11,7F12,7F17,7F19,7F1C,7F1B,7F1F,7F21,7F22,7F23,7F24,7F25,7F26,7F27,7F2A,7F2B,7F2C,7F2D,7F2F,7F30,7F31,7F32,7F33,7F35,5E7A,757F,5DDB,753E,9095,738E,7391,73AE,73A2,739F,73CF,73C2,73D1,73B7,73B3,73C0,73C9,73C8,73E5,73D9,987C,740A,73E9,73E7,73DE,73BA,73F2,740F,742A,745B,7426,7425,7428,7430,742E,742C,942F,943F,946C,9470,9491,9496,9498,94C7,94CF,94D3,94DA,94E6,94FB,951C,9520,741B,741A,7441,745C,7457,7455,7459,7477,746D,747E,749C,748E,7480,7481,7487,748B,749E,74A8,74A9,7490,74A7,74D2,74BA,97EA,97EB,97EC,674C,6753,675E,6748,6769,67A5,6787,676A,6773,6798,67A7,6775,67A8,679E,67AD,678B,6777,677C,67F0,6809,67D8,680A,67E9,67B0,680C,67D9,67B5,67DA,67B3,67DD,6800,67C3,67B8,67E2,680E,67C1,67FD,6832,6833,6860,6861,684E,6862,6844,6864,6883,681D,6855,6866,6841,6867,6840,683E,684A,6849,6829,68B5,688F,6874,6877,6893,686B,68C2,696E,68FC,691F,6920,68F9,9527,9533,953D,9543,9548,954B,9555,955A,9560,956E,9574,9577,9580,95AB,6924,68F0,690B,6901,6957,68E3,6910,6971,6939,6960,6942,695D,6984,696B,6980,6998,6978,6934,69CC,6987,6988,69CE,6989,6966,6963,6979,699B,69A7,69BB,69AB,69AD,69D4,69B1,69C1,69CA,69DF,6995,69E0,698D,69FF,6A2F,69ED,6A17,6A18,6A65,69F2,6A44,6A3E,6AA0,6A50,6A5B,6A35,6A8E,6A79,6A3D,6A28,6A58,6A7C,6A91,6A90,6AA9,6A97,6AAB,7337,7352,6B81,6B82,6B87,6B84,6B92,6B93,6B8D,6B9A,6B9B,6BA1,6BAA,8F6B,8F6D,8F71,8F72,8F73,8F75,8F76,8F78,8F77,8F79,8F7A,8F7C,8F7E,8F81,8F82,8F84,8F87,8F8B,95CC,95EC,95FF,9607,9613,9618,961B,961E,9620,9623,962B,962F,9637,963E,9641,9643,964A,964E,9651,9656,9658,965C,9660,9663,9665,966B,966D,9673,9678,9687,9689,8F8D,8F8E,8F8F,8F98,8F9A,8ECE,620B,6217,621B,621F,6222,6221,6225,6224,622C,81E7,74EF,74F4,74FF,750F,7511,7513,6534,65EE,65EF,65F0,660A,6619,6772,6603,6615,6600,7085,66F7,661D,6634,6631,6636,6635,8006,665F,6654,6641,664F,6656,6661,6657,6677,6684,668C,66A7,669D,66BE,66DB,66DC,66E6,66E9,8D32,8D33,8D36,8D3B,8D3D,8D40,8D45,8D46,8D48,8D49,8D47,8D4D,8D55,8D59,89C7,89CA,89CB,89CC,89CE,89CF,89D0,89D1,726E,729F,725D,7266,726F,727E,727F,7284,728B,728D,728F,7292,6308,6332,63B0,968C,968E,9691,9695,969A,969D,96A8,96B1,96B4,96B7,96BA,96BF,96C2,96C8,96CA,96D0,96D3,96D6,96E1,96EB,96EC,96F0,96F4,96F8,96FA,96FF,9702,9705,970A,9710,9714,9717,971D,971F,643F,64D8,8004,6BEA,6BF3,6BFD,6BF5,6BF9,6C05,6C07,6C06,6C0D,6C15,6C18,6C19,6C1A,6C21,6C29,6C24,6C2A,6C32,6535,6555,656B,724D,7252,7256,7230,8662,5216,809F,809C,8093,80BC,670A,80BD,80B1,80AB,80AD,80B4,80B7,80E7,80E8,80E9,80EA,80DB,80C2,80C4,80D9,80CD,80D7,6710,80DD,80EB,80F1,80F4,80ED,810D,810E,80F2,80FC,6715,8112,8C5A,8136,811E,812C,8118,8132,8148,814C,8153,8174,8159,815A,8171,8160,8169,817C,817D,816D,8167,584D,5AB5,8188,8182,8191,6ED5,81A3,81AA,81CC,6726,81CA,81BB,9721,972B,972E,9731,9733,973A,973F,9754,9757,975A,975C,975F,9763,9766,976A,9772,9775,9777,977D,9786,978C,978E,9793,9795,9799,81C1,81A6,6B24,6B37,6B39,6B43,6B46,6B59,98D1,98D2,98D3,98D5,98D9,98DA,6BB3,5F40,6BC2,89F3,6590,9F51,6593,65BC,65C6,65C4,65C3,65CC,65CE,65D2,65D6,7080,709C,7096,709D,70BB,70C0,70B7,70AB,70B1,70E8,70CA,7110,7113,7116,712F,7131,7173,715C,7168,7145,7172,714A,7178,717A,7198,71B3,71B5,71A8,71A0,71E0,71D4,71E7,71F9,721D,7228,706C,7118,7166,71B9,623E,623D,6243,6248,6249,793B,7940,7946,7949,795B,795C,7953,795A,7962,7957,7960,796F,7967,797A,7985,798A,799A,79A7,79B3,5FD1,5FD0,979E,97A1,97A4,97AC,97AE,97B0,97B3,97B5,97E4,97E8,97EE,97F4,97F7,603C,605D,605A,6067,6041,6059,6063,60AB,6106,610D,615D,61A9,619D,61CB,61D1,6206,8080,807F,6C93,6CF6,6DFC,77F6,77F8,7800,7809,7817,7818,7811,65AB,782D,781C,781D,7839,783A,783B,781F,783C,7825,782C,7823,7829,784E,786D,7856,7857,7826,7850,7847,784C,786A,789B,7893,789A,7887,789C,78A1,78A3,78B2,78B9,78A5,78D4,78D9,78C9,78EC,78F2,7905,78F4,7913,7924,791E,7934,9F9B,9EF9,9EFB,9EFC,76F1,7704,770D,76F9,7707,7708,771A,7722,7719,772D,7726,7735,7738,7750,7751,7747,7743,775A,7768,980F,984E,7762,7765,777F,778D,777D,7780,778C,7791,779F,77A0,77B0,77B5,77BD,753A,7540,754E,754B,7548,755B,7572,7579,7583,7F58,7F61,7F5F,8A48,7F68,7F74,7F71,7F79,7F81,7F7E,76CD,76E5,8832,9485,9486,9487,948B,948A,948C,948D,948F,9490,9494,9497,9495,949A,949B,949C,94A3,94A4,94AB,94AA,94AD,94AC,94AF,94B0,94B2,94B4,94B6,94B7,94B8,94B9,94BA,94BC,94BD,94BF,94C4,94C8,94C9,94CA,94CB,94CC,94CD,94CE,94D0,94D1,94D2,94D5,94D6,94D7,94D9,94D8,94DB,94DE,94DF,94E0,94E2,94E4,94E5,94E7,94E8,94EA,986F,988B,988E,9892,9895,9899,98A3,98A8,98CF,98D4,98D6,98DB,98E0,98E5,98E9,94E9,94EB,94EE,94EF,94F3,94F4,94F5,94F7,94F9,94FC,94FD,94FF,9503,9502,9506,9507,9509,950A,950D,950E,950F,9512,9513,9514,9515,9516,9518,951B,951D,951E,951F,9522,952A,952B,9529,952C,9531,9532,9534,9536,9537,9538,953C,953E,953F,9542,9535,9544,9545,9546,9549,954C,954E,954F,9552,9553,9554,9556,9557,9558,9559,955B,955E,955F,955D,9561,9562,9564,9565,9566,9567,9568,9569,956A,956B,956C,956F,9571,9572,9573,953A,77E7,77EC,96C9,79D5,79ED,79E3,79EB,7A06,5D47,7A03,7A02,7A1E,7A14,9908,990E,9911,992F,994A,9956,9964,9966,9973,9978,997B,997E,9982,9989,7A39,7A37,7A51,9ECF,99A5,7A70,7688,768E,7693,7699,76A4,74DE,74E0,752C,9E20,9E22,9E28,9E29,9E2A,9E2B,9E2C,9E32,9E31,9E36,9E38,9E37,9E39,9E3A,9E3E,9E41,9E42,9E44,9E46,9E47,9E48,9E49,9E4B,9E4C,9E4E,9E51,9E55,9E57,9E5A,9E5B,9E5C,9E5E,9E63,9E66,9E67,9E68,9E69,9E6A,9E6B,9E6C,9E71,9E6D,9E73,7592,7594,7596,75A0,759D,75AC,75A3,75B3,75B4,75B8,75C4,75B1,75B0,75C3,75C2,75D6,75CD,75E3,75E8,75E6,75E4,75EB,75E7,7603,75F1,75FC,75FF,7610,7600,7605,760C,7617,760A,7625,7618,7615,7619,998C,998E,999A,99A6,99A9,99D9,761B,763C,7622,7620,7640,762D,7630,763F,7635,7643,763E,7633,764D,765E,7654,765C,7656,766B,766F,7FCA,7AE6,7A78,7A79,7A80,7A86,7A88,7A95,7AA6,7AA0,7AAC,7AA8,7AAD,7AB3,8864,8869,8872,887D,887F,8882,88A2,88C6,88B7,88BC,88C9,88E2,88CE,88E3,88E5,88F1,891A,88FC,88E8,88FE,88F0,8921,8919,8913,891B,890A,8934,892B,8936,8941,8966,897B,758B,80E5,76B2,76B4,77DC,8012,8014,8016,801C,8020,8022,8025,8026,8027,8029,8028,8031,800B,8035,8043,8046,804D,8052,8069,8071,8983,9878,9880,9883,99FA,9A39,9889,988C,988D,988F,9894,989A,989B,989E,989F,98A1,98A2,98A5,98A6,864D,8654,866C,866E,867F,867A,867C,867B,86A8,868D,868B,86AC,869D,86A7,86A3,86AA,8693,86A9,86B6,86C4,86B5,86CE,86B0,86BA,86B1,86AF,86C9,86CF,86B4,86E9,86F1,86F2,86ED,86F3,86D0,8713,86DE,86F4,86DF,86D8,86D1,8703,8707,86F8,8708,870A,870D,8709,8723,873B,871E,8725,872E,871A,873E,8748,8734,8731,8729,8737,873F,8782,8722,877D,877E,877B,8760,8770,874C,876E,878B,8753,8763,877C,8764,8759,8765,8793,87AF,87A8,87D2,9A5A,9A72,9A83,9A89,9A8D,9A94,9A99,9AA6,9AA9,9AB2,9AB9,9ABB,9ABD,9AC3,9AC6,9ACD,9AD2,9AD4,9AD9,9ADD,9AE0,9AE2,9AE7,9AEC,9AEE,9AF0,9AFA,9AFC,9B04,87C6,8788,8785,87AD,8797,8783,87AB,87E5,87AC,87B5,87B3,87CB,87D3,87BD,87D1,87C0,87CA,87DB,87EA,87E0,87EE,8816,8813,87FE,880A,881B,8821,8839,883C,7F36,7F42,7F44,7F45,8210,7AFA,7AFD,7B08,7B03,7B04,7B15,7B0A,7B2B,7B0F,7B47,7B38,7B2A,7B19,7B2E,7B31,7B20,7B25,7B24,7B33,7B3E,7B1E,7B58,7B5A,7B45,7B75,7B4C,7B5D,7B60,7B6E,7B7B,7B62,7B72,7B71,7B90,7BA6,7BA7,7BB8,7BAC,7B9D,7BA8,7B85,7BAA,7B9C,7BA2,7BAB,7BB4,7BD1,7BC1,7BCC,7BDD,7BDA,7BE5,7BE6,7BEA,7C0C,7BFE,7BFC,7C0F,7C16,7C0B,9B07,9B09,9B10,9B14,9B20,9B24,9B30,9B33,9B3D,9B46,9B4A,9B4E,9B50,9B52,9B55,9B5B,7C1F,7C2A,7C26,7C38,7C41,7C40,81FE,8201,8202,8204,81EC,8844,8221,8222,8223,822D,822F,8228,822B,8238,823B,8233,8234,823E,8244,8249,824B,824F,825A,825F,8268,887E,8885,8888,88D8,88DF,895E,7F9D,7F9F,7FA7,7FAF,7FB0,7FB2,7C7C,6549,7C91,7C9D,7C9C,7C9E,7CA2,7CB2,7CBC,7CBD,7CC1,7CC7,7CCC,7CCD,7CC8,7CC5,7CD7,7CE8,826E,66A8,7FBF,7FCE,7FD5,7FE5,7FE1,7FE6,7FE9,7FEE,7FF3,7CF8,7D77,7DA6,7DAE,7E47,7E9B,9EB8,9EB4,8D73,8D84,8D94,8D91,8DB1,8D67,8D6D,8C47,8C49,914A,9150,914E,914F,9164,9B7C,9BBB,9162,9161,9170,9169,916F,917D,917E,9172,9174,9179,918C,9185,9190,918D,9191,91A2,91A3,91AA,91AD,91AE,91AF,91B5,91B4,91BA,8C55,9E7E,8DB8,8DEB,8E05,8E59,8E69,8DB5,8DBF,8DBC,8DBA,8DC4,8DD6,8DD7,8DDA,8DDE,8DCE,8DCF,8DDB,8DC6,8DEC,8DF7,8DF8,8DE3,8DF9,8DFB,8DE4,8E09,8DFD,8E14,8E1D,8E1F,8E2C,8E2E,8E23,8E2F,8E3A,8E40,8E39,8E35,8E3D,8E31,8E49,8E41,8E42,8E51,8E52,8E4A,8E70,8E76,8E7C,8E6F,8E74,8E85,8E8F,8E94,8E90,8E9C,8E9E,8C78,8C82,8C8A,8C85,8C98,8C94,659B,89D6,89DE,89DA,89DC,9BDC,9C1B,89E5,89EB,89EF,8A3E,8B26,9753,96E9,96F3,96EF,9706,9701,9708,970F,970E,972A,972D,9730,973E,9F80,9F83,9F85,9F86,9F87,9F88,9F89,9F8A,9F8C,9EFE,9F0B,9F0D,96B9,96BC,96BD,96CE,96D2,77BF,96E0,928E,92AE,92C8,933E,936A,93CA,938F,943E,946B,9C7F,9C82,9C85,9C86,9C87,9C88,7A23,9C8B,9C8E,9C90,9C91,9C92,9C94,9C95,9C9A,9C9B,9C9E,9C9F,9CA0,9CA1,9CA2,9CA3,9CA5,9CA6,9CA7,9CA8,9CA9,9CAB,9CAD,9CAE,9CB0,9CB1,9CB2,9CB3,9CB4,9CB5,9CB6,9CB7,9CBA,9CBB,9CBC,9CBD,9CC4,9CC5,9CC6,9CC7,9CCA,9CCB,9C3C,9C7B,9C7D,9C80,9C83,9C89,9C8C,9C8F,9C93,9C96,9C9D,9CAA,9CAC,9CAF,9CB9,9CBE,9CC8,9CD1,9CDA,9CE0,9CCC,9CCD,9CCE,9CCF,9CD0,9CD3,9CD4,9CD5,9CD7,9CD8,9CD9,9CDC,9CDD,9CDF,9CE2,977C,9785,9791,9792,9794,97AF,97AB,97A3,97B2,97B4,9AB1,9AB0,9AB7,9E58,9AB6,9ABA,9ABC,9AC1,9AC0,9AC5,9AC2,9ACB,9ACC,9AD1,9B45,9B43,9B47,9B49,9B48,9B4D,9B51,98E8,990D,992E,9955,9954,9ADF,9AE1,9AE6,9AEF,9AEB,9AFB,9AED,9AF9,9B08,9B0F,9B13,9B1F,9B23,9EBD,9EBE,7E3B,9E82,9E87,9E88,9E8B,9E92,93D6,9E9D,9E9F,9EDB,9EDC,9EDD,9EE0,9EDF,9EE2,9EE9,9EE7,9EE5,9EEA,9EEF,9F22,9F2C,9F2F,9F39,9F37,9F3D,9F3E,9F44,9CE3,9D22,E234,9D43,9D82,E292,9DA3,9DE2,E2F0,9E03,9E24,9E27,9E2E,9E30,9E34,9E3B,9E40,9E4D,9E50,9E52,9E56,9E59,9E5D,9E5F,9E65,9E6E,9E72,9E74,9E80,9E81,9E83,9E89,9E8C,9E94,9E9E,9EA0,9EA7,E34E,9EAB,9EB5,9EB9,9EBC,9EBF,9EC5,9ECA,9ED0,9ED2,9ED5,9ED9,9EDE,9EE1,9EE3,9EE6,9EE8,9EEB,9EF0,9EFA,9EFD,9EFF,9F06,9F0C,9F0F,9F11,9F14,9F18,9F1A,9F21,9F23,9F2D,9F30,E3AC,9F32,9F38,9F3A,9F3C,9F3F,9F45,9F52,9F79,9F81,9F8D,9F9C,9FA1,F92C,F979,F995,F9E7,F9F1,E40A,FA0C,FA11,FA13,FA18,FA1F,FA23,FA27,E815,E844,E468"}};var Palette={"yellow":"FFFF00FF","red":"FF0000FF","aqua":"00FFFFFF","fuchsia":"FF00FFFF","teal":"008080FF","lime":"00FF00FF","maroon":"800000FF","green":"008000FF","blue":"0000FFFF","purple":"800080FF","navy":"000080FF","olive":"808000FF","black":"000000FF","gray":"808080FF","silver":"C0C0C0FF","white":"FFFFFFFF"};var Aero={"sky":"6B74B8FC","twilight":"A80046AD","sea":"8032CDCD","leaf":"6614A600","lime":"6697D937","sun":"54FADC0E","pumpkin":"80FF9C00","ruby":"A8CE0F0F","fuchsia":"66FF0099","blush":"70FCC7F8","violet":"856E3BA1","lavender":"528D5A94","taupe":"6698844C","chocolate":"A84F1B1B","slate":"80555555","forst":"54FCFCFC"};window.isType=function(type,t){return Object.prototype.toString.call(t).match(/\[object (.*?)\]/)[1]===type;};window.isNull=function(t){return isType("Null",t);};window.isUndefined=function(t){return typeof t==="undefined";};window.isObject=function(t){return typeof t==="object";};window.isArray=function(t){return Array.isArray(t);};window.isString=function(t){return typeof t==="string";};window.isNumber=function(t){return typeof t==="number";};window.isUint8Array=function(t){return(typeof t==="object")&&!isNull(t)&&!isUndefined(t["BYTES_PER_ELEMENT"])&&(t["BYTES_PER_ELEMENT"]===1);};window.isInteger=function(t){return Math.round(t)===t;};window.isPositiveDecimal=function(t){var v=t.match(/^\d+$/);return(v!==null)&&(v>0);};window.lsLocal=function(t){var img=new Image();img.src="";return img.src.startsWith("file");};window.copyObject=function(o){if(isUndefined(o)||(o===null)){return o;}
if(o instanceof Float32Array){var r=new Float32Array(o.length);for(var i=0;i<o.length;i++){r[i]=o[i];}
return r;}
if(Array.isArray(o)){var r=[];for(var i=0;i<o.length;i++){r[i]=copyObject(o[i]);}
return r;}
if(o instanceof Object){var r={};for(var t in o){if(o.hasOwnProperty(t)){r[t]=copyObject(o[t]);}}
return r;}
return o;};window.mergeObject=function(o,t){var c=(arguments.length>1?arguments[1]:true);o=copyObject(o);for(var n in t){if(!isUndefined(t[n])){if(c){o[n]=copyObject(t[n]);}
else{o[n]=(!isUndefined(o[n])?o[n]:copyObject(t[n]));}}}
return o;};window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContex;navigator.requestMIDIAccess=navigator.requestMIDIAccess||navigator.webkitRequestMIDIAccess||navigator.mozRequestMIDIAccess||navigator.msRequestMIDIAccess;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;navigator.getGamepads=navigator.getGamepads||navigator.webkitGetGamepads||navigator.mozGetGamepads||navigator.msGetGamepads;Number.prototype.getPrecision=function(){return(this.toString().split(".")[1]||"").length;};Number.prototype.fAdd=function(v){var l=Math.max(this.getPrecision(),v.getPrecision());var d=Math.pow(10,l);return parseFloat(((this*d+v*d)/d).toFixed(l));};Number.prototype.fSub=function(v){return this.fAdd(-v);};Number.prototype.fMul=function(v){var l1=this.getPrecision();var l2=v.getPrecision();var d=Math.pow(10,l2+l1);return Number(this.toString().replace(".",""))*Number(v.toString().replace(".",""))/d;};Number.prototype.fDiv=function(v){var l1=this.getPrecision();var l2=v.getPrecision();var d=Math.pow(10,l2-l1);return Number(this.toString().replace(".",""))*d/Number(v.toString().replace(".",""));};Number.prototype.fSqu=function(){return this.fMul(this);};Number.prototype.limit=function(min,max){var r=this;min=parseFloat(min);if(!isNaN(min)){r=(r<min?min:r);}
max=parseFloat(max);if(!isNaN(max)){r=(r>max?max:r);}
return r;};Number.prototype.attach=function(){var d=(arguments.length>0?arguments[0]:0);var r=this;if(d!=0){r=(r.fMul(d)|0).fDiv(d);}
return r;};Number.prototype.toAbbreviated=function(l){return Math.round(this*Math.pow(10,l))/Math.pow(10,l);};Number.prototype.toFormated=function(l){return this.toAbbreviated(l).toFixed(l);};Number.prototype.toAccurated=function(){var l=(arguments.length>0?arguments[0]:12);var v=this;for(var i=l-2;i>1;i--){var vf=v.toFormated(i);if(v.toFormated(i+2)==vf){v=vf;}}
return v;};Number.prototype.toByteLength=function(){var l=(arguments.length>0?arguments[0]:0);var v=this;var m=["B","KB","MB","GB","TB","PB","EB","ZB","YB","DB","NB"];var n=0;while(n<m.length-1){if(v>1024){n+=1;v/=1024;}
else{break;}}
return v.toFixed(l)+m[n];};Number.prototype.isNear=function(c){var d=(arguments.length>1?arguments[1]:0.01);if(this==c){return true;}
if(c==0){return false;}
var a=Math.min(this,c);var b=Math.max(this,c);return a.fDiv(b)>=(1-d);};Number.prototype.near=function(c){var d=(arguments.length>1?arguments[1]:0.01);if(this.isNear(c,d)){return c;}
else{return this;}};Number.prototype.isClose=function(c){var d=(arguments.length>1?arguments[1]:3);return Math.abs(this-c)<=d;};Number.prototype.close=function(c){var d=(arguments.length>1?arguments[1]:3);if(this.isClose(c,d)){return c;}
else{return this;}};Number.prototype.fromBase=function(t,d){var r=0;var t=t.toUpperCase();var m=(function(){switch(d){case 16:return"0123456789ABCDEF";break;case 36:return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";break;}
return"";})();var n=1;for(var i=0;i<t.length;i++){var v=m.indexOf(t[t.length-i-1]);if(v!=-1){r+=v*n;n*=m.length;}
else{return NaN;}}
return r;};Number.prototype.toBase=function(d){var r="";var t=this;var m=(function(){switch(d){case 16:return"0123456789ABCDEF";break;case 36:return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";break;}
return"";})();while(t>0){var v=t%d;r=m[v]+r;t=t/d|0;}
return r.padStart(2,"0");};Number.prototype.getFlag=function(s){var l=(arguments.length>1?arguments[1]:1);var e=s+l;var m=0;for(var i=s;i<e;i++){m+=1<<i;}
return(this&m)>>s;};Number.prototype.mergeLong=function(t){return(this-(this.getFlag(0x3F)?0x100000000:0))*0x100000000+t;};String.prototype.toLowerCase=function(){var n=(arguments.length>0?arguments[0]:this.length);n=(n<0?0:n);var v=this.split("");for(var i=0;i<n;i++){var c=v[i].charCodeAt();if((c>0x40)&&(c<0x5B)){v[i]=String.fromCharCode(c+0x20);}}
return v.join("");};String.prototype.toUpperCase=function(){var n=(arguments.length>0?arguments[0]:this.length);n=(n<0?0:n);var v=this.split("");for(var i=0;i<n;i++){var c=v[i].charCodeAt();if((c>0x60)&&(c<0x7B)){v[i]=String.fromCharCode(c-0x20);}}
return v.join("");};String.prototype.splice=function(s,n){var c=(arguments.length>2?arguments[2]:"");var r=[];r.push(this.slice(0,s));r.push(c);r.push(this.slice(s+n));return r.join("");};String.prototype.extract=function(f1,f2){var s=(arguments.length>2?arguments[2]:0);var l1=this.indexOf(f1,s);if(l1==-1){return"";}
var l2=this.indexOf(f2,l1+f1.length);if(l2==-1){return"";}
return this.slice(l1+f1.length,l2);};String.prototype.trimLeft=function(){var c=(arguments.length>0?arguments[0]:" ");var n=0;while(this.slice(n,n+c.length)==c){n+=c.length;}
return this.slice(n,this.length+1);};String.prototype.trimRight=function(){var c=(arguments.length>0?arguments[0]:" ");var n=this.length;while(this.slice(n-c.length,n)==c){n-=c.length;}
return this.slice(0,n);};String.prototype.reverse=function(){return this.split("").reverse().join("");};String.prototype.splitEvery=function(n){var r=[];for(var i=0;i<this.length;i++){r.push(this.slice(i,i+n));i+=n-1;}
return r;};String.prototype.insertEvery=function(n,c){return this.splitEvery(n).join(c);};String.prototype.isHex=function(){var h=this.toUpperCase();var s="0123456789ABCDEF";for(var i=0;i<this.length;i++){if(s.indexOf(h[i])==-1){return false;}}
return true;};String.prototype.isBase64=function(){return(this.replace(/[A-Za-z0-9+/=]/g,"")?false:true);};String.prototype.isDataUrl=function(){if(this==""){return false;}
var d=this.split(",");if(d.length!=2){return false;}
var h=d[0].split(":");if(h.length!=2){return false;}
if(h[0].toLowerCase()!="data"){return false;}
var t=h[1].split(";");if(t.length!=2){return false;}
if(t[1].toLowerCase()!="base64"){return false;}
var l=t[0].indexOf("/");if(l==-1){return false;}
if(!d[1].isBase64()){return false;}
return true;};String.prototype.fromHtml=function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&quot;/g,'"');};String.prototype.toHtml=function(){return this.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/"/g,"&quot;");};String.prototype.fromXml=function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"');};String.prototype.toXml=function(){return this.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;");};String.prototype.toDir=function(){return this.replace(/\\/g,"/");};String.prototype.toDirWin=function(){return this.replace(/\//g,"\\");};String.prototype.toMIME=function(){switch(this){case"bms":case"bme":case"bml":case"pms":case"dtx":case"msd":case"sm":case"sma":case"ssc":case"dwi":case"ksf":case"ucs":case"dance":case"tja":case"osu":case"vox":case"ksh":case"mde":case"txt":case"mc":case"c2s":case"aff":case"drb":case"mst":case"hex":case"base64":return"text/plain";break;case"json":return"text/json";break;case"xml":return"text/xml";break;case"html":return"text/html";break;case"vos":case"ssq":case"sdf":case"pt":case"imd":case"s3v":case"dz":case"cpk":case"acb":case"acf":case"awb":case"adx":case"hca":case"xsb":case"xwb":case"2dx":case"ojm":case"bin":return"application/octet-binary";break;case"zip":case"apk":case"ipa":case"osz":case"mcz":return"application/zip";break;case"wav":case"ogg":case"mp3":case"wma":case"aac":case"ape":case"flac":case"adx":case"hca":return"audio/"+this;break;case"bmp":case"jpg":case"gif":case"png":return"image/"+this;break;default:return"application/octet-stream";break;}};Array.prototype.adds=function(t){for(var i=0;i<t.length;i++){if(this.indexOf(t[i])==-1){this.push(t[i]);}}
return this;};Array.prototype.add=function(){this.adds(arguments);return this;};Array.prototype.writes=function(t){var s=(arguments.length>1?arguments[1]:this.length);if(isUndefined(t.length)||!isObject(t)){t=[t];}
if(t.length==0){return this;}
if(s<0){s=0;}
for(var i=0;i<t.length;i++){this[s+i]=t[i];}
return this;};Array.prototype.write=function(t){var s=(arguments.length>1?arguments[1]:this.length);this.writes([t],s);return this;};Array.prototype.inserts=function(t){var s=(arguments.length>1?arguments[1]:this.length);if(isUndefined(t)||!isObject(t)){t=[t];}
if(t.length==0){return this;}
if(s<0){s=0;}
var a=[];for(var i=s;i<this.length;i++){a.push(this[i]);}
this.splice(s);this.writes(t);this.writes(a);return this;};Array.prototype.insert=function(t){var s=(arguments.length>1?arguments[1]:this.length);this.inserts([t],s);return this;};Array.prototype.replace=function(c,r){for(var i=0;i<this.length;i++){if(this[i]==c){this[i]=r;}}
return this;};Array.prototype.average=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length-s);var e=s+l;e=(e>this.length?this.length:e);var s=0;var n=0;for(var i=s;i<e;i++){var v=parseInt(this[i])||0;s+=v;n+=1;}
return s/n;};Array.prototype.unrepeat=function(){var r=[];var h=[];for(var i=0,e;(e=this[i])!=null;i++){if(!h[e]){r.push(e);h[e]=true;}}
return r;};Array.prototype.majority=function(){if(this.length==0){return undefined;}
var u=this.unrepeat();if(u.length==1){return u[0];}
var c=[];for(var i=0;i<u.length;i++){c[i]=0;for(var j=0;j<this.length;j++){if(this[j]==u[i]){c[i]+=1;}}}
var m=c[0];var n=0;for(var i=1;i<c.length;i++){if(c[i]>m){m=c[i];n=i;}}
return u[n];};Array.prototype.equal=function(t){return(this.length==t.length)&&this.every(function(e,i){return e===t[i];});};Array.prototype.top=function(l){var t=this[l];this.splice(l,1);this.unshift(t);return this;};Uint8Array.prototype.find=function(t){var s=(arguments.length>1?arguments[1]:0);var buffer=this;if(buffer.length<t.length){return-1;}
for(var i=s;i<buffer.length;i++){var isMatch=(function(){for(var j=0;j<t.length;j++){if(buffer[i+j]!=t[j]){return false;}}
return true;})();if(isMatch){return i;}}
return-1;};Uint8Array.prototype.startsWith=function(t){return this.find(t,0)==0;};Uint8Array.prototype.endsWith=function(t){return(this.length-t.length>=0)&&(this.find(t,this.length-t.length)==this.length-t.length);};Uint8Array.prototype.pad=function(l){var c=(arguments.length>1?arguments[1]:0);var b=(arguments.length>2?arguments[2]:true);if(l<=this.length){return this;}
if(isNaN(parseInt(c))){c=0;}
var a=new Uint8Array(l-this.length);for(var i=0;i<a.length;i++){a[i]=c;}
var r=new Uint8Array(this.length+a.length);if(b){r.set(a,0);r.set(this,a.length);}
else{r.set(this,0);r.set(a,this.length);}
return r;};Uint8Array.prototype.slice=function(s){var e=(arguments.length>1?arguments[1]:this.length);s=(s<0?0:s);e=(e>this.length?this.length:e);return new Uint8Array(this.buffer.slice(s,e));};Uint8Array.prototype.padding=function(n){var c=(arguments.length>1?arguments[1]:0);if(this.length%n!=0){return this.pad(Math.ceil(this.length/n)*n,c,false);}
else{return this;}};Uint8Array.prototype.paddingPKCS5=function(){var l=Math.ceil(this.length/8)*8;return this.pad(l,(l-this.length),false);};Uint8Array.prototype.unpaddingPKCS5=function(){return this.slice(0,this.length-this[this.length-1]);};Uint8Array.prototype.trimRight=function(){var c=(arguments.length>0?arguments[0]:0);var n=this.length;for(var i=0;i<this.length;i++){if(this[this.length-i-1]==c){n-=1;}
else{break;}}
return(n==this.length?this:this.slice(0,n));};Uint8Array.prototype.fromInt8=function(t){var r=new ArrayBuffer(1);new DataView(r,0,1).setInt8(0,t);return new Uint8Array(r);};Uint8Array.prototype.fromInt16=function(t){var e=(arguments.length>1?arguments[1]:LittleEndian);var r=new ArrayBuffer(2);new DataView(r,0,2).setInt16(0,t,e);return new Uint8Array(r);};Uint8Array.prototype.fromInt32=function(t){var e=(arguments.length>1?arguments[1]:LittleEndian);var r=new ArrayBuffer(4);new DataView(r,0,4).setInt32(0,t,e);return new Uint8Array(r);};Uint8Array.prototype.fromInt=function(l,t){var e=(arguments.length>2?arguments[2]:LittleEndian);switch(l){case 1:return this.fromInt8(t);break;case 2:return this.fromInt16(t,e);break;case 4:return this.fromInt32(t,e);break;}};Uint8Array.prototype.fromUint8=function(t){var r=new ArrayBuffer(1);new DataView(r,0,1).setUint8(0,t);return new Uint8Array(r);};Uint8Array.prototype.fromUint16=function(t){var e=(arguments.length>1?arguments[1]:LittleEndian);var r=new ArrayBuffer(2);new DataView(r,0,2).setUint16(0,t,e);return new Uint8Array(r);};Uint8Array.prototype.fromUint32=function(t){var e=(arguments.length>1?arguments[1]:LittleEndian);var r=new ArrayBuffer(4);new DataView(r,0,4).setUint32(0,t,e);return new Uint8Array(r);};Uint8Array.prototype.fromUint=function(l,t){var e=(arguments.length>2?arguments[2]:LittleEndian);switch(l){case 1:return this.fromUint8(t);break;case 2:return this.fromUint16(t,e);break;case 4:return this.fromUint32(t,e);break;}};Uint8Array.prototype.getFloat16=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
var mantissa=function(n){var v=0;switch(true){case(n>=1)&&(n<1024):var m=n<<13;var e=0;while((m&0x00800000)==0){e-=0x00800000;m<<=1;}
m&=~0x00800000;e+=0x38800000;v=m|e;break;case(n>=1024)&&(n<2048):v=0x38000000+((n-1024)<<13);break;}
return v;};var exponent=function(n){var v=0;switch(true){case(n>=1)&&(n<31):v=n<<23;break;case(n==31):v=0x47800000;break;case(n==32):v=0x80000000;break;case(n>=33)&&(n<63):v=0x80000000+((n-32)<<23);break;case(n==63):v=0xC7800000;break;}
return v;};var offset=function(n){var v=0;switch(true){case(n>=1)&&(n<64):v=(n==32?0:1024);break;}
return v;};var float32=new Float32Array(1);var int32=new Int32Array(float32.buffer);var b=new DataView(this.buffer,s,2).getInt16(0,e)
var m=b>>10;int32[0]=mantissa((b&0x3FF)+offset(m))+exponent(m);return float32[0].toAccurated();};Uint8Array.prototype.getFloat32=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,4).getFloat32(0,e).toAccurated();};Uint8Array.prototype.getFloat64=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,8).getFloat64(0,e).toAccurated();};Uint8Array.prototype.getFloat=function(l){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
switch(l){case 2:return this.getFloat16(s,e);break;case 4:return this.getFloat32(s,e);break;case 8:return this.getFloat64(s,e);break;}};Uint8Array.prototype.fromBits=function(t){var e=(arguments.length>1?arguments[1]:LittleEndian);var isAllArray=(function(){for(var i=0;i<t.length;i++){if(isUndefined(t[i].length)||!isObject(t[i])){return false;}}
return true;})();if(!isAllArray){t=[t];}
var l=0;for(var i=0;i<t.length;i++){l+=t[i].length;}
var r=new Uint8Array(Math.ceil(l/8));var w=0;for(var i=0;i<t.length;i++){for(var j=0;j<t[i].length;j++){r[w>>3]+=(t[i][j]||0)<<(e?w%8:7-w%8);w+=1;}}
return r;};Uint8Array.prototype.fromBase64=function(t){var format=(function(){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");var e=0
var n=t.length;while(true){n=t.lastIndexOf("=",n-1);if(n!=-1){e+=1;}
else{break;}}
if(e>2){t=t.slice(0,t.length-(e-2));}})();var z=0;if(t[t.length-1]=="="){z+=1;if(t[t.length-2]=="="){z+=1;}}
var r=new Uint8Array(t.length/4*3-z);var c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];var c1;var c2;var c3;var c4;var i=0;var j=0;while(i<t.length){do{c1=c[t.charCodeAt(i++)&0xFF];}while((i<t.length)&&(c1==-1));if(c1==-1){break;}
do{c2=c[t.charCodeAt(i++)&0xFF];}while((i<t.length)&&(c2==-1));if(c2==-1){break;}
r[j++]=((c1<<2)|((c2&0x30)>>4));do{c3=t.charCodeAt(i++)&0xFF;if(c3==0x3D){return r;}
c3=c[c3];}while((i<t.length)&&(c3==-1));if(c3==-1){break;}
r[j++]=(((c2&0x0F)<<4)|((c3&0x3C)>>2));do{c4=t.charCodeAt(i++)&0xFF;if(c4==0x3D){return r;}
c4=c[c4];}while((i<t.length)&&(c4==-1));if(c4==-1){break;}
r[j++]=(((c3&0x03)<<6)|c4);}
return r;};Uint8Array.prototype.fromHex=function(t){var format=(function(){t=t.replace(/[^A-Fa-f0-9]/g,"").replace(/(\s|\r|\n)/g,"").toUpperCase();if(t==""){return new Uint8Array(0);}
if(t.length%2!=0){t+="0";}})();var r=new Uint8Array(t.length/2);for(var i=0;i<r.length;i++){r[i]=parseInt(t.slice(i*2,i*2+2),16);}
return r;};Uint8Array.prototype.fromText=function(t){var c=(arguments.length>1?arguments[1]:"");var e=(arguments.length>2?arguments[2]:LittleEndian);switch(c){case"ANSI":var a=[];for(var i=0;i<t.length;i++){var h=t.charCodeAt(i).toString(16).padStart(4,"0").toUpperCase();var l=Coding[c]["to"].indexOf(h);if(l!=-1){h=Coding[c]["from"].slice(l,l+4);}
else{if(h.slice(0,2)=="00"){h=h.slice(2,4);}}
a.push(h);}
return new Uint8Array().fromHex(a.join(""));break;case"":case"UTF-8":return new Uint8Array(unescape(encodeURIComponent(t)).split("").map(function(a){return a.charCodeAt();}));break;case"UCS-2":case"UTF-16":var a=[];var addHex=function(n,e){n=n&0xFFFF;var h=(n/0x100|0).toString(16).padStart(2,"0");var l=(n%0x100).toString(16).padStart(2,"0");a.push((e?l+h:h+l).toUpperCase());};addHex(0xFEFF,e);for(var i=0;i<t.length;i++){var u=t.codePointAt(i);if(u>0xFFFF){if(c=="UTF-16"){u-=0x10000;var uh=(u/0x400|0)+0xD800;var ul=(u%0x400)+0xDC00;addHex(uh,e);addHex(ul,e);}
else{addHex((u/0x10000)&0xFFFF,e);addHex(u&0xFFFF,e);}}
else{addHex(u&0xFFFF,e);}}
return new Uint8Array().fromHex(a.join(""));break;}};Uint8Array.prototype.setInt8=function(t){var s=(arguments.length>1?arguments[1]:0);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,1).setInt8(0,t);return this;};Uint8Array.prototype.setInt16=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,2).setInt16(0,t,e);return this;};Uint8Array.prototype.setInt32=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,4).setInt32(0,t,e);return this;};Uint8Array.prototype.setInt=function(l,t){var s=(arguments.length>2?arguments[2]:0);var e=(arguments.length>3?arguments[3]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
switch(l){case 1:this.setInt8(t,s);break;case 2:this.setInt16(t,s,e);break;case 4:this.setInt32(t,s,e);break;}
return this;};Uint8Array.prototype.setUint8=function(t){var s=(arguments.length>1?arguments[1]:0);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,1).setUint8(0,t);return this;};Uint8Array.prototype.setUint16=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,2).setUint16(0,t,e);return this;};Uint8Array.prototype.setUint32=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,4).setUint32(0,t,e);return this;};Uint8Array.prototype.setUint=function(l,t){var s=(arguments.length>2?arguments[2]:0);var e=(arguments.length>3?arguments[3]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
switch(l){case 1:this.setUint8(t,s);break;case 2:this.setUint16(t,s,e);break;case 4:this.setUint32(t,s,e);break;}
return this;};Uint8Array.prototype.setFloat16=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
var float32=new Float32Array(1);var int32=new Int32Array(float32.buffer);float32[0]=t;var x=int32[0];var b=(function(){var v=(x>>16)&0x8000;var m=(x>>12)&0x07FF;var e=(x>>23)&0xFF;if(e<103){return v;}
if(e>142){v|=0x7c00;v|=((e==0xFF)?0:1)&&(x&0x007fffff);return v;}
if(e<113){m|=0x0800;v|=(m>>(114-e))+((m>>(113-e))&1);return v;}
v|=((e-112)<<10)|(m>>1);v+=m&1;return v;})();new DataView(this.buffer,s,2).setInt16(0,b,e);};Uint8Array.prototype.setFloat32=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,4).setFloat32(0,t,e);return this;};Uint8Array.prototype.setFloat64=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return this;}
new DataView(this.buffer,s,8).setFloat64(0,t,e);return this;};Uint8Array.prototype.setFloat=function(l,t){var s=(arguments.length>2?arguments[2]:0);var e=(arguments.length>3?arguments[3]:LittleEndian);switch(l){case 2:return this.setFloat16(t,s,e);break;case 4:return this.setFloat32(t,s,e);break;case 8:return this.setFloat64(t,s,e);break;}};Uint8Array.prototype.setBit=function(n,t){var e=(arguments.length>2?arguments[2]:LittleEndian);if((n>=0)&&(n<this.length*8)){var v=1<<(e?n%8:7-n%8);if(t){this[n>>3]|=v;}
else{this[n>>3]&=~v;}}
return this;};Uint8Array.prototype.setBits=function(t){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s>=0)&&(s<this.length*8)){var l=Math.min(s+t.length,this.length*8)-s;for(var i=0;i<l;i++){this.setBit(s+i,t[i],e);}}
return this;};Uint8Array.prototype.setBase64=function(t){var s=(arguments.length>1?arguments[1]:0);if((s<0)||(s>this.length-1)){return this;}
this.set(new Uint8Array().fromBase64(t),s);return this;};Uint8Array.prototype.setHex=function(t){var s=(arguments.length>1?arguments[1]:0);if((s<0)||(s>this.length-1)){return this;}
this.set(new Uint8Array().fromHex(t),s);return this;};Uint8Array.prototype.setText=function(t){var s=(arguments.length>1?arguments[1]:0);var c=(arguments.length>2?arguments[2]:"");if((s<0)||(s>this.length-1)){return this;}
this.set(new Uint8Array().fromText(t,c),s);return this;};Uint8Array.prototype.getInt8=function(){var s=(arguments.length>0?arguments[0]:0);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,1).getInt8(0);};Uint8Array.prototype.getInt16=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,2).getInt16(0,e);};Uint8Array.prototype.getInt32=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,4).getInt32(0,e);};Uint8Array.prototype.getInt=function(l){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
switch(l){case 1:return this.getInt8(s);break;case 2:return this.getInt16(s,e);break;case 3:if(e){return this.getInt16(s,e)+this.getInt8(s+2)*0x10000;}
else{return this.getInt8(s)*0x10000+this.getInt16(s+1,e);}
break;case 4:return this.getInt32(s,e);break;case 8:if(e){return this.getInt32(s,e)+this.getInt32(s+4,e)*0x100000000;}
else{return this.getInt32(s,e)*0x100000000+this.getInt32(s+4,e);}
break;}
return 0;};Uint8Array.prototype.getUint8=function(){var s=(arguments.length>0?arguments[0]:0);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,1).getUint8(0);};Uint8Array.prototype.getUint16=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,2).getUint16(0,e);};Uint8Array.prototype.getUint32=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,4).getUint32(0,e);};Uint8Array.prototype.getUint=function(l){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
switch(l){case 1:return this.getUint8(s);break;case 2:return this.getUint16(s,e);break;case 3:if(e){return this.getUint16(s,e)+this.getUint8(s+2)*0x10000;}
else{return this.getUint8(s)*0x10000+this.getUint16(s+1,e);}
break;case 4:return this.getUint32(s,e);break;case 8:if(e){return this.getUint32(s,e)+this.getUint32(s+4,e)*0x100000000;}
else{return this.getUint32(s,e)*0x100000000+this.getUint32(s+4,e);}}
return 0;};Uint8Array.prototype.getFloat16=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
var mantissa=function(n){var v=0;switch(true){case(n>=1)&&(n<1024):var m=n<<13;var e=0;while((m&0x00800000)==0){e-=0x00800000;m<<=1;}
m&=~0x00800000;e+=0x38800000;v=m|e;break;case(n>=1024)&&(n<2048):v=0x38000000+((n-1024)<<13);break;}
return v;};var exponent=function(n){var v=0;switch(true){case(n>=1)&&(n<31):v=n<<23;break;case(n==31):v=0x47800000;break;case(n==32):v=0x80000000;break;case(n>=33)&&(n<63):v=0x80000000+((n-32)<<23);break;case(n==63):v=0xC7800000;break;}
return v;};var offset=function(n){var v=0;switch(true){case(n>=1)&&(n<64):v=(n==32?0:1024);break;}
return v;};var float32=new Float32Array(1);var int32=new Int32Array(float32.buffer);var b=new DataView(this.buffer,s,2).getInt16(0,e)
var m=b>>10;int32[0]=mantissa((b&0x3FF)+offset(m))+exponent(m);return float32[0];};Uint8Array.prototype.getFloat32=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,4).getFloat32(0,e);};Uint8Array.prototype.getFloat64=function(){var s=(arguments.length>0?arguments[0]:0);var e=(arguments.length>1?arguments[1]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
return new DataView(this.buffer,s,8).getFloat64(0,e);};Uint8Array.prototype.getFloat=function(l){var s=(arguments.length>1?arguments[1]:0);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length-1)){return 0;}
switch(l){case 2:return this.getFloat16(s,e);break;case 4:return this.getFloat32(s,e);break;case 8:return this.getFloat64(s,e);break;}
return 0;};Uint8Array.prototype.getBit=function(s){var e=(arguments.length>1?arguments[1]:LittleEndian);return(this[s>>3]||0)>>(e?s%8:7-s%8)&1;};Uint8Array.prototype.getBits=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length*8-s);var e=(arguments.length>2?arguments[2]:LittleEndian);if((s<0)||(s>this.length*8-1)){return new Uint8Array();}
l=Math.min(l,this.length*8-s);var r=new Uint8Array(l);for(var i=0;i<r.length;i++){r[i]=this.getBit(s+i,e);}
return r;};Uint8Array.prototype.getBase64=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length-s);if((s<0)||(s>this.length-1)){return"";}
l=Math.min(l,this.length-s);var r=[];var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var i=s;var e=s+l;while(i<e){var c1=this[i++]&0xFF;if(i==e){r.push(c.charAt(c1>>2));r.push(c.charAt((c1&0x03)<<4));r.push("==");break;}
var c2=this[i++];if(i==e){r.push(c.charAt(c1>>2));r.push(c.charAt(((c1&0x03)<<4)|((c2&0xF0)>>4)));r.push(c.charAt((c2&0x0F)<<2));r.push("=");break;}
var c3=this[i++];r.push(c.charAt(c1>>2));r.push(c.charAt(((c1&0x3)<<4)|((c2&0xF0)>>4)));r.push(c.charAt(((c2&0xF)<<2)|((c3&0xC0)>>6)));r.push(c.charAt(c3&0x3F));}
return r.join("");};Uint8Array.prototype.getHex=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length-s);var c=(arguments.length>2?arguments[2]:"");var b=(arguments.length>3?arguments[3]:true);if((s<0)||(s>this.length-1)){return"";}
l=Math.min(l,this.length-s);var r=[];var e=s+l;for(var i=s;i<e;i++){r.push((this.buffer[i]||this[i]).toString(16).padStart(2,"0"));}
r=r.join(c);if(b){r=r.toUpperCase();}
return r;};Uint8Array.prototype.getText=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length-s);var c=(arguments.length>2?arguments[2]:"");if((s<0)||(s>this.length-1)){return"";}
l=Math.min(l,this.length-s);while(l>0){if(this[s+l-1]==0){l-=1;}
else{break;}}
if(l==0){return"";}
var transCode=function(h,c){var e=(arguments.length>2?arguments[2]:LittleEndian);var r=[];switch(c){case"ANSI":for(var i=0;i<h.length;i++){var u=parseInt(h.slice(i,i+2),16);if(u<0x80){r.push(String.fromCharCode(u));i+=1;}
else{var t=h.slice(i,i+4).toUpperCase();var l=Coding[c]["from"].indexOf(t);u=parseInt((l!=-1?Coding[c]["to"].slice(l,l+4):t),16);r.push(String.fromCharCode(u));i+=3;}}
break;case"":case"UTF-8":try{return decodeURIComponent("%"+h.insertEvery(2,"%"));}
catch(c){return transCode(h,"ANSI");}
break;case"UCS-2":case"UTF-16":for(var i=0;i<h.length;i++){var u1=parseInt(h.slice(i,i+2),16);var u2=parseInt(h.slice(i+2,i+4),16)
var u=(e?u1+(u2<<8):(u1<<8)+u2);if((c=="UTF-16")&&(u>=0xD800)&&(u<=0xDBFF)){i+=4;var u3=parseInt(h.slice(i,i+2),16);var u4=parseInt(h.slice(i+2,i+4),16)
var ul=(e?u3+(u4<<8):(u3<<8)+u4);var uh=u;u=(uh-0xD800)*0x400+(ul-0xDC00)+0x10000;r.push(String.fromCodePoint(u));}
else{r.push(String.fromCharCode(u));}
i+=3;}
break;}
return r.join("");};var h=this.getHex(s,l);if(h.startsWith("EFBBBF")){return transCode(h.slice(6),"UTF-8");}
else if(h.startsWith("FFFE")){return transCode(h.slice(4),"UCS-2",true);}
else if(h.startsWith("FEFF")){return transCode(h.slice(4),"UCS-2",false);}
return transCode(h,c);};Uint8Array.prototype.getMD5=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length-s);if((s<0)||(s>this.length-1)){return"";}
l=Math.min(l,this.length-s);var Add=function(X,Y){var r=(X&0x3FFFFFFF)+(Y&0x3FFFFFFF);var X4=(X&0x40000000);var Y4=(Y&0x40000000);var X8=(X&0x80000000);var Y8=(Y&0x80000000);if(X4&Y4){return(r^0x80000000^X8^Y8);}
if(X4|Y4){if(r&0x40000000){return(r^0xC0000000^X8^Y8);}
else{return(r^0x40000000^X8^Y8);}}
else{return(r^X8^Y8);}};var Rotate=function(t,b){return(t<<b)|(t>>>(32-b));};var F=function(X,Y,Z){return(X&Y)|((~X)&Z);};var G=function(X,Y,Z){return(X&Z)|(Y&(~Z));};var H=function(X,Y,Z){return(X^Y^Z);};var I=function(X,Y,Z){return(Y^(X|(~Z)));};var FF=function(a,b,c,d,m,s,t){a=Add(a,Add(Add(F(b,c,d),m),t));return Add(Rotate(a,s),b);};var GG=function(a,b,c,d,m,s,t){a=Add(a,Add(Add(G(b,c,d),m),t));return Add(Rotate(a,s),b);};var HH=function(a,b,c,d,m,s,t){a=Add(a,Add(Add(H(b,c,d),m),t));return Add(Rotate(a,s),b);};var II=function(a,b,c,d,m,s,t){a=Add(a,Add(Add(I(b,c,d),m),t));return Add(Rotate(a,s),b);};var m=(function(t){var c;var p;var n=(((l+8)-((l+8)%64))/64+1)*16;var r=new Int32Array(n-1);var i=0;while(i<l){c=(i-(i%4))/4;p=(i%4)*8;r[c]=r[c]|(t[s+i]<<p);i++;}
c=(i-(i%4))/4;p=(i%4)*8;r[c]=r[c]|(0x80<<p);r[n-2]=l<<3;r[n-1]=l>>>29;return r;})(this);var A;var B;var C;var D;var a=0x67452301;var b=0xEFCDAB89;var c=0x98BADCFE;var d=0x10325476;for(var i=0;i<m.length;i+=16){A=a;B=b;C=c;D=d;a=FF(a,b,c,d,m[i+0],7,0xD76AA478);d=FF(d,a,b,c,m[i+1],12,0xE8C7B756);c=FF(c,d,a,b,m[i+2],17,0x242070DB);b=FF(b,c,d,a,m[i+3],22,0xC1BDCEEE);a=FF(a,b,c,d,m[i+4],7,0xF57C0FAF);d=FF(d,a,b,c,m[i+5],12,0x4787C62A);c=FF(c,d,a,b,m[i+6],17,0xA8304613);b=FF(b,c,d,a,m[i+7],22,0xFD469501);a=FF(a,b,c,d,m[i+8],7,0x698098D8);d=FF(d,a,b,c,m[i+9],12,0x8B44F7AF);c=FF(c,d,a,b,m[i+10],17,0xFFFF5BB1);b=FF(b,c,d,a,m[i+11],22,0x895CD7BE);a=FF(a,b,c,d,m[i+12],7,0x6B901122);d=FF(d,a,b,c,m[i+13],12,0xFD987193);c=FF(c,d,a,b,m[i+14],17,0xA679438E);b=FF(b,c,d,a,m[i+15],22,0x49B40821);a=GG(a,b,c,d,m[i+1],5,0xF61E2562);d=GG(d,a,b,c,m[i+6],9,0xC040B340);c=GG(c,d,a,b,m[i+11],14,0x265E5A51);b=GG(b,c,d,a,m[i+0],20,0xE9B6C7AA);a=GG(a,b,c,d,m[i+5],5,0xD62F105D);d=GG(d,a,b,c,m[i+10],9,0x2441453);c=GG(c,d,a,b,m[i+15],14,0xD8A1E681);b=GG(b,c,d,a,m[i+4],20,0xE7D3FBC8);a=GG(a,b,c,d,m[i+9],5,0x21E1CDE6);d=GG(d,a,b,c,m[i+14],9,0xC33707D6);c=GG(c,d,a,b,m[i+3],14,0xF4D50D87);b=GG(b,c,d,a,m[i+8],20,0x455A14ED);a=GG(a,b,c,d,m[i+13],5,0xA9E3E905);d=GG(d,a,b,c,m[i+2],9,0xFCEFA3F8);c=GG(c,d,a,b,m[i+7],14,0x676F02D9);b=GG(b,c,d,a,m[i+12],20,0x8D2A4C8A);a=HH(a,b,c,d,m[i+5],4,0xFFFA3942);d=HH(d,a,b,c,m[i+8],11,0x8771F681);c=HH(c,d,a,b,m[i+11],16,0x6D9D6122);b=HH(b,c,d,a,m[i+14],23,0xFDE5380C);a=HH(a,b,c,d,m[i+1],4,0xA4BEEA44);d=HH(d,a,b,c,m[i+4],11,0x4BDECFA9);c=HH(c,d,a,b,m[i+7],16,0xF6BB4B60);b=HH(b,c,d,a,m[i+10],23,0xBEBFBC70);a=HH(a,b,c,d,m[i+13],4,0x289B7EC6);d=HH(d,a,b,c,m[i+0],11,0xEAA127FA);c=HH(c,d,a,b,m[i+3],16,0xD4EF3085);b=HH(b,c,d,a,m[i+6],23,0x4881D05);a=HH(a,b,c,d,m[i+9],4,0xD9D4D039);d=HH(d,a,b,c,m[i+12],11,0xE6DB99E5);c=HH(c,d,a,b,m[i+15],16,0x1FA27CF8);b=HH(b,c,d,a,m[i+2],23,0xC4AC5665);a=II(a,b,c,d,m[i+0],6,0xF4292244);d=II(d,a,b,c,m[i+7],10,0x432AFF97);c=II(c,d,a,b,m[i+14],15,0xAB9423A7);b=II(b,c,d,a,m[i+5],21,0xFC93A039);a=II(a,b,c,d,m[i+12],6,0x655B59C3);d=II(d,a,b,c,m[i+3],10,0x8F0CCC92);c=II(c,d,a,b,m[i+10],15,0xFFEFF47D);b=II(b,c,d,a,m[i+1],21,0x85845DD1);a=II(a,b,c,d,m[i+8],6,0x6FA87E4F);d=II(d,a,b,c,m[i+15],10,0xFE2CE6E0);c=II(c,d,a,b,m[i+6],15,0xA3014314);b=II(b,c,d,a,m[i+13],21,0x4E0811A1);a=II(a,b,c,d,m[i+4],6,0xF7537E82);d=II(d,a,b,c,m[i+11],10,0xBD3AF235);c=II(c,d,a,b,m[i+2],15,0x2AD7D2BB);b=II(b,c,d,a,m[i+9],21,0xEB86D391);a=Add(a,A);b=Add(b,B);c=Add(c,C);d=Add(d,D);}
return new Uint8Array().fromInt32(a,true).getHex()+new Uint8Array().fromInt32(b,true).getHex()+new Uint8Array().fromInt32(c,true).getHex()+new Uint8Array().fromInt32(d,true).getHex();};Uint8Array.prototype.getSHA1=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length-s);if((s<0)||(s>this.length-1)){return"";}
l=Math.min(l,this.length-s);var Add=function(x,y){return((x&0x7FFFFFFF)+(y&0x7FFFFFFF))^(x&0x80000000)^(y&0x80000000);};var S=function(n,c){return(n<<c)|(n>>>(32-c));};var Ft=function(t,B,C,D){return(t<20?(B&C)|((~B)&D):(t<40?B^C^D:(t<60?(B&C)|(B&D)|(C&D):B^C^D)));};var Kt=function(t){return(t<20?0x5A827999:(t<40?0x6ED9EBA1:(t<60?0x8F1BBCDC:0xCA62C1D6)));};var SHA1=function(t){var W=new Array(80);var H0=0x67452301;var tL=0xEFCDAB89;var tD=0x98BADCFE;var tB=0x10325476;var H4=0xC3D2E1F0;for(var i=0;i<t.length;i+=16){var A=H0;var B=tL;var C=tD;var D=tB;var E=H4;for(var j=0;j<W.length;j++){if(j<16){W[j]=t[i+j]}
else{W[j]=S(W[j-3]^W[j-8]^W[j-14]^W[j-16],1)}
var v=Add(Add(S(A,5),Ft(j,B,C,D)),Add(Add(E,W[j]),Kt(j)));E=D;D=C;C=S(B,30);B=A;A=v;}
H0=Add(A,H0);tL=Add(B,tL);tD=Add(C,tD);tB=Add(D,tB);H4=Add(E,H4);}
return[H0,tL,tD,tB,H4];};var m=(function(t){var n=((l+8)>>6)+1;var r=new Uint32Array(n*16);for(var i=0;i<n*16;i++){r[i]=0;}
var j;for(var j=0;j<l;j++){r[j>>2]|=t[s+j]<<(24-(j&3)*8);}
r[j>>2]|=0x80<<(24-(j&3)*8);r[n*16-1]=l*8;return r;})(this);var r=SHA1(m);for(var i=0;i<r.length;i++){r[i]=new Uint8Array().fromInt32(r[i],false).getHex();}
return r.join("");};Uint8Array.prototype.getCRC32=function(){var s=(arguments.length>0?arguments[0]:0);var l=(arguments.length>1?arguments[1]:this.length-s);if((s<0)||(s>this.length-1)){return"00000000";}
l=Math.min(l,this.length-s);var t=(function(){var r=new Int32Array(256);var c;for(var i=0;i<256;i++){c=i;for(var j=0;j<8;j++){if(c&1){c=(c>>>1)^0xEDB88320;}
else{c=c>>>1;}}
r[i]=c;}
return r;})();var c=~0;for(var i=0;i<l;i++){c=(c>>>8)^t[c&0xFF^this[i+s]];}
return new Uint8Array().fromInt32(~c>>>0,false).getHex();};Uint8Array.prototype.cryptDES=function(c,k){var iv=(arguments.length>2?arguments[2]:new Uint8Array(8));k=(function(){var n=Math.ceil(k.length/8);var l=(n>3?3:n)*8;return k.padding(l);})();iv=iv.padding(8).slice(0,8);var PC1=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4];var PC2=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32];var L=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];var I=[58,50,42,34,26,18,10,2,60,52,44,36,28,20,12,4,62,54,46,38,30,22,14,6,64,56,48,40,32,24,16,8,57,49,41,33,25,17,9,1,59,51,43,35,27,19,11,3,61,53,45,37,29,21,13,5,63,55,47,39,31,23,15,7];var F=[40,8,48,16,56,24,64,32,39,7,47,15,55,23,63,31,38,6,46,14,54,22,62,30,37,5,45,13,53,21,61,29,36,4,44,12,52,20,60,28,35,3,43,11,51,19,59,27,34,2,42,10,50,18,58,26,33,1,41,9,49,17,57,25];var E=[32,1,2,3,4,5,4,5,6,7,8,9,8,9,10,11,12,13,12,13,14,15,16,17,16,17,18,19,20,21,20,21,22,23,24,25,24,25,26,27,28,29,28,29,30,31,32,1];var P=[16,7,20,21,29,12,28,17,1,15,23,26,5,18,31,10,2,8,24,14,32,27,3,9,19,13,30,6,22,11,4,25];var S=[[14,4,13,1,2,15,11,8,3,10,6,12,5,9,0,7,0,15,7,4,14,2,13,1,10,6,12,11,9,5,3,8,4,1,14,8,13,6,2,11,15,12,9,7,3,10,5,0,15,12,8,2,4,9,1,7,5,11,3,14,10,0,6,13],[15,1,8,14,6,11,3,4,9,7,2,13,12,0,5,10,3,13,4,7,15,2,8,14,12,0,1,10,6,9,11,5,0,14,7,11,10,4,13,1,5,8,12,6,9,3,2,15,13,8,10,1,3,15,4,2,11,6,7,12,0,5,14,9],[10,0,9,14,6,3,15,5,1,13,12,7,11,4,2,8,13,7,0,9,3,4,6,10,2,8,5,14,12,11,15,1,13,6,4,9,8,15,3,0,11,1,2,12,5,10,14,7,1,10,13,0,6,9,8,7,4,15,14,3,11,5,2,12],[7,13,14,3,0,6,9,10,1,2,8,5,11,12,4,15,13,8,11,5,6,15,0,3,4,7,2,12,1,10,14,9,10,6,9,0,12,11,7,13,15,1,3,14,5,2,8,4,3,15,0,6,10,1,13,8,9,4,5,11,12,7,2,14],[2,12,4,1,7,10,11,6,8,5,3,15,13,0,14,9,14,11,2,12,4,7,13,1,5,0,15,10,3,9,8,6,4,2,1,11,10,13,7,8,15,9,12,5,6,3,0,14,11,8,12,7,1,14,2,13,6,15,0,9,10,4,5,3],[12,1,10,15,9,2,6,8,0,13,3,4,14,7,5,11,10,15,4,2,7,12,9,5,6,1,13,14,0,11,3,8,9,14,15,5,2,8,12,3,7,0,4,10,1,13,11,6,4,3,2,12,9,5,15,10,11,14,1,7,6,0,8,13],[4,11,2,14,15,0,8,13,3,12,9,7,5,10,6,1,13,0,11,7,4,9,1,10,14,3,5,12,2,15,8,6,1,4,11,13,12,3,7,14,10,15,6,8,0,5,9,2,6,11,13,8,1,4,10,7,9,5,0,15,14,2,3,12],[13,2,8,4,6,15,11,1,10,9,3,14,5,0,12,7,1,15,13,8,10,3,7,4,12,5,6,11,0,14,9,2,7,11,4,1,9,12,14,2,0,6,10,13,15,3,5,8,2,1,14,7,4,10,8,13,15,12,9,0,3,5,6,11]];var Permute=function(t,s,p){for(var i=0;i<p.length;i++){t[i]=s[p[i]-1];}
return t;};var Xor=function(a,b){for(var i=0;i<a.length;i++){a[i]^=b[i];}
return a;}
var Sc=function(t){var Sn=function(t,n){n*=6;return t[n]*32+t[n+5]*16+t[n+1]*8+t[n+2]*4+t[n+3]*2+t[n+4];};var r=new Uint8Array(4);for(var i=0;i<4;i++){r[i]=S[i*2][Sn(t,i*2)]*16+S[i*2+1][Sn(t,(i*2+1))];}
return r;};var Fc=function(L,R,K){var t=new Uint8Array(32);for(var i=0;i<32;i++){t[i]=L[i];L[i]=R[i];}
var s=Sc(Xor(Permute(new Uint8Array(48),R,E),K));R=Xor(Permute(R,s.getBits(0,s.length*8,false),P),t);}
var SubKey=function(t){var CD=Permute(new Uint8Array(56),t,PC1);var r=[];for(var i=0;i<16;i++){for(var j=0;j<L[i];j++){var t=CD[0];for(var k=0;k<55;k++){CD[k]=CD[k+1];}
CD[55]=CD[27];CD[27]=t;}
r[i]=Permute(new Uint8Array(48),CD,PC2);}
return r;};var Crypt=function(c,d,k,iv){k=k.getBits(0,k.length*8,false);iv=iv.getBits(0,iv.length*8,false);var K=SubKey(k);var U=function(t){var t=Permute(new Uint8Array(64),t,I);var L=new Uint8Array(32);var R=new Uint8Array(32);for(var i=0;i<32;i++){L[i]=t[i];R[i]=t[i+32];}
if(c){for(var i=0;i<16;i++){Fc(L,R,K[i]);}}
else{for(var i=16;i>0;i--){Fc(L,R,K[i-1]);}}
for(var i=0;i<32;i++){t[i]=R[i];t[i+32]=L[i];}
return Permute(new Uint8Array(64),t,F);};var m=(function(){for(var i=0;i<iv.length;i++){if(iv[i]!=0){return true;}}
return false;})();for(var i=0;i<d.length/8;i++){var f=d.getBits(i*64,64,false);var v=f;var t;if(c){if(m){v=Xor(v,iv);}
v=U(v);t=v;if(m){iv=t;}}
else{v=U(v);if(m){v=Xor(v,iv);}
t=v;if(m){iv=f;}}
d.set(new Uint8Array().fromBits(t,false),i*8);}
return d;};var Des3=function(c,d,k,iv){if(k.length==8){d=Crypt(c,d,k,iv);}
else{var k1=(k.length>=8?k.slice(0,8):new Uint8Array(8));var k2=(k.length>=16?k.slice(8,16):k1);var k3=(k.length>=24?k.slice(16,24):k1);if(c){d=Crypt(true,d,k1,iv);d=Crypt(false,d,k2,iv);d=Crypt(true,d,k3,iv);}
else{d=Crypt(false,d,k3,iv);d=Crypt(true,d,k2,iv);d=Crypt(false,d,k1,iv);}}
return d;};return(c?Des3(c,this.paddingPKCS5(),k,iv):Des3(c,this,k,iv).unpaddingPKCS5());};Uint8Array.prototype.deflate=function(){var mode=(arguments.length>0?arguments[0]:-1);if(!this.length){return new Uint8Array();}
var buffer=this;var mO=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var mL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];var mD=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];var lzL=258;var lzD=32768;var lzs=4*1024;var ss=0xFFFF;var ws=32*1024;var r=[];var s=0;var e=0;var lz=[];var w=0;var tB;var tL;var tD;var huffman=function(a,l){var r=new Uint8Array(a.length);var reverse=function(freqs,limit){var r=new Uint8Array(freqs.length);var minCost=new Uint16Array(limit);var value=new Array(limit);var excess=(1<<limit)-freqs.length;var half=(1<<(limit-1));var flag=new Uint8Array(limit);var type=new Array(limit);var position=new Array(limit);var take=function(j){var x=type[j][position[j]];if(x==freqs.length){take(j+1);take(j+1);}
else{r[x]-=1;}
position[j]+=1;};minCost[limit-1]=freqs.length;for(var j=0;j<limit;j++){if(excess<half){flag[j]=0;}
else{flag[j]=1;excess-=half;}
excess<<=1;minCost[limit-2-j]=(minCost[limit-1-j]/2|0)+freqs.length;}
minCost[0]=flag[0];value[0]=new Array(minCost[0]);type[0]=new Array(minCost[0]);for(var j=1;j<limit;j++){if(minCost[j]>2*minCost[j-1]+flag[j]){minCost[j]=2*minCost[j-1]+flag[j];}
value[j]=new Array(minCost[j]);type[j]=new Array(minCost[j]);}
for(var i=0;i<freqs.length;i++){r[i]=limit;}
for(var k=0;k<minCost[limit-1];k++){value[limit-1][k]=freqs[k];type[limit-1][k]=k;}
for(var i=0;i<limit;i++){position[i]=0;}
if(flag[limit-1]==1){r[0]-=1;position[limit-1]+=1;}
for(var j=limit-2;j>-1;j--){var i=0;var weight=0;var next=position[j+1];for(var k=0;k<minCost[j];k++){weight=value[j+1][next]+value[j+1][next+1];if(weight>freqs[i]){value[j][k]=weight;type[j][k]=freqs.length;next+=2;}
else{value[j][k]=freqs[i];type[j][k]=i;i+=1;}}
position[j]=0;if(flag[j]==1){take(j);}}
return r;};var Heap=function(length){var buffer=new Uint16Array(length*2);var getParent=function(index){return((index-2)/4|0)*2;};var getChild=function(index){return index*2+2;};this.length=0;this.push=function(index,value){var current=this.length;buffer[this.length++]=value;buffer[this.length++]=index;while(current){var parent=getParent(current);var swap;if(buffer[current]>buffer[parent]){swap=buffer[current];buffer[current]=buffer[parent];buffer[parent]=swap;swap=buffer[current+1];buffer[current+1]=buffer[parent+1];buffer[parent+1]=swap;current=parent;}
else{break;}}
return this.length;};this.pop=function(){var value=buffer[0];var index=buffer[1];this.length-=2;buffer[0]=buffer[this.length];buffer[1]=buffer[this.length+1];var parent=0;while(true){var current=getChild(parent);var swap;if(current>=this.length){break;}
if((current+2<this.length)&&(buffer[current+2]>buffer[current])){current+=2;}
if(buffer[current]>buffer[parent]){swap=buffer[parent];buffer[parent]=buffer[current];buffer[current]=swap;swap=buffer[parent+1];buffer[parent+1]=buffer[current+1];buffer[current+1]=swap;}
else{break;}
parent=current;}
return{"index":index,"value":value,"length":this.length};};};var heap=new Heap(286*2);for(i=0;i<a.length;i++){if(a[i]){heap.push(i,a[i]);}}
var nodes=new Array(heap.length/2);var values=new Uint32Array(heap.length/2);if(nodes.length==1){r[heap.pop().index]=1;return r;}
for(var i=0;i<nodes.length;i++){nodes[i]=heap.pop();values[i]=nodes[i].value;}
var codeLength=reverse(values,l);for(var i=0;i<nodes.length;i++){r[nodes[i].index]=codeLength[i];}
return r;};var getTree=function(t){var v=[];var d=[];for(var i=0;i<t.length;i++){d[t[i]]=d[t[i]]||[];d[t[i]].push(i);}
var c=0;for(var i=1;i<d.length;i++){c<<=1;if(d[i]){for(var j=0;j<d[i].length;j++){v.push([i,c,d[i][j]]);c+=1;}}}
return v;};var getL=function(v){for(var i=1;i<mL.length;i++){if(v<mL[i]){return i-1;}}
return mL.length-1;};var getD=function(v){for(var i=1;i<mD.length;i++){if(v<mD[i]){return i-1;}}
return mD.length-1;};var writeInt=function(n,v){var e=(arguments.length>2?arguments[2]:LittleEndian);for(var i=0;i<n;i++){var j=w>>3;r[j]=r[j]||0;r[j]+=((v>>(e?i:n-1-i))%2)<<(w%8);w++;}};var writeCode=function(t,v){for(var i=0;i<t.length;i++){if(t[i][2]==v){writeInt(t[i][0],t[i][1],false);}}};var writeL=function(v){var n=getL(v);var c=(n/4|0)-1;c=(c<0?0:c);c=(c>5?0:c);writeCode(tL,n+256+1);writeInt(c,v-mL[n],true);};var writeD=function(v){var n=getD(v);var c=(n/2|0)-1;c=(c<0?0:c);writeCode(tD,n);writeInt(c,v-mD[n],true);};var writeData=function(d){for(var i=0;i<d.length;i++){if(d[i][1]){writeL(d[i][0]);writeD(d[i][1]);}
else{writeCode(tL,d[i][0]);}}};var writeChunk=function(h,m){switch(m){case 0:var s0=s;while(s0<e){var e0=Math.min(s0+0xFFFF,e);writeInt(1,(e0==e?h:0),true);writeInt(2,m,true);writeInt(8-(w%8||8),0,true);writeInt(16,e0-s0,true);writeInt(16,~(e0-s0)&0xFFFF,true);for(var i=s0;i<e0;i++){r.push(buffer[i]);}
w+=(e0-s0)*8;s0=e0;}
break;case 1:tL=(function(){var v=[];for(var i=0;i<286;i++){switch(true){case(i<144):v.push([8,i+48,i]);break;case(i<256):v.push([9,i+256,i]);break;case(i<280):v.push([7,i-256,i]);break;case(i<286):v.push([8,i-88,i]);break;}}
return v;})();tD=(function(){var v=[];for(var i=0;i<30;i++){v.push([5,i,i]);}
return v;})();writeInt(1,h,true);writeInt(2,m,true);writeData(lz);break;case 2:var cL=(function(){var v=[];for(var i=0;i<lz.length;i++){var n=(lz[i][1]?getL(lz[i][0])+256+1:lz[i][0]);v[n]=(v[n]||0)+1;}
var h=huffman(v,15);tL=getTree(h);return h;})();var cD=(function(){var v=[];for(var i=0;i<lz.length;i++){var n=(lz[i][1]?getD(lz[i][1]):lz[i][1]);v[n]=(v[n]||0)+1;}
var h=huffman(v,7);tD=getTree(h);return h;})();var sq=(function(){var v=[];var encode=function(c){var record=function(s,min,max){while(n>=min){var c=(n>=max?max:n);v.push(s);v.push(c-min);n-=c;}};for(var i=0;i<c.length;i++){var n=1;while((i+1<c.length)&&(c[i+1]==c[i])){n+=1;i+=1;}
if(c[i]||(n<3)){v.push(c[i]);n-=1;}
if(c[i]){record(16,3,6);}
else{record(18,11,138);record(17,3,6);}
while(n>0){v.push(c[i]);n-=1;}}};encode(cL);encode(cD);return v;})();var cB=(function(){var v=[];for(var i=0;i<19;i++){v[i]=v[i]||0;}
for(var i=0;i<sq.length;i++){v[sq[i]]+=1;switch(sq[i]){case 16:case 17:case 18:i+=1;break;}}
var h=huffman(v,7);tB=getTree(h);for(var i=0;i<mO.length;i++){v[i]=h[mO[i]];}
while(v.length&&(v[v.length-1]==0)){v.pop();}
return v;})();writeInt(1,h,true);writeInt(2,m,true);writeInt(5,cL.length-256-1,true);writeInt(5,cD.length-1,true);writeInt(4,cB.length-4,true);for(var i=0;i<cB.length;i++){writeInt(3,cB[i],true);}
for(var i=0;i<sq.length;i++){writeCode(tB,sq[i]);switch(sq[i]){case 16:writeInt(2,sq[++i],true);break;case 17:writeInt(3,sq[++i],true);break;case 18:writeInt(7,sq[++i],true);break;}}
writeData(lz);break;}};while(s<buffer.length){if(mode!=0){lz=(function(){var v=[];e=buffer.length;var table=[];var ms=[];var match=function(p){var m=[buffer[p],0];if(p+2<e){var h=buffer[p]+","+buffer[p+1]+","+buffer[p+2];table[h]=table[h]||[];table[h].push(p);for(var i=table[h].length-2;i>-1;i--){var l=table[h][i];var n=0;while((p+n<e)&&(buffer[l+n]==buffer[p+n])&&(n<lzL)){n+=1;}
if((n>=3)&&(!m[1]||(n>=m[0]))){m=[n,p-l];}}}
return m;};for(var i=s;i<e;i++){ms=[match(i)];while(ms[0][1]){if(v.length+ms[0][0]+1>=lzs){ms.push([256,0]);}
else{for(var j=1;j<ms[0][0];j++){var m=match(i+j);if(m[1]){if(m[0]>ms[0][0]){if(j>=3){m[0]-=ms[0][0]-j;}
else{ms[0]=[buffer[i],0];}}
else{m=[buffer[i+j],0];}}
ms.push(m);if(m[1]){break;}}}
if(!ms[0][1]){i+=ms.length-1;var t=ms.pop();v.writes(ms);ms=[t];}
else{i+=ms[0][0]-1;ms=[ms[0]];break;}}
v.push(ms[0]);if(v.length+1==lzs){e=i+1;break;}}
v.push([256,0]);return v;})();}
else{e=Math.min(s+ss,buffer.length);}
var h=(e==buffer.length?1:0);switch(mode){case 0:case 1:case 2:break;default:mode=(function(){var nL=0;var nC=0;for(var i=0;i<lz.length;i++){if(lz[i][1]){nL+=lz[i][0];nC+=1;}}
return(32+(nL-nC)*8<lzL+nC*12?0:2);})();break;}
writeChunk(h,mode);s=e;}
return new Uint8Array(r);};Uint8Array.prototype.inflate=function(){if(!this.length){return new Uint8Array();}
var buffer=this;var r=[];var w=0;var p=0;var mO=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var mL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];var mD=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];var getTree=function(t){var v=[];var d=[];for(var i=0;i<t.length;i++){d[t[i]]=d[t[i]]||[];d[t[i]].push(i);}
var c=0;for(var i=1;i<d.length;i++){c<<=1;if(d[i]){for(var j=0;j<d[i].length;j++){v.push([i,c,d[i][j]]);c+=1;}}}
return v;};var readInt=function(n){var v=0;for(var i=0;i<n;i++){v+=buffer.getBit(p+i,true)<<i;}
p+=n;return v;};var readCode=function(t){var v=0;var n=0;for(var i=0;i<t.length;i++){while(n<t[i][0]){v<<=1;v+=buffer.getBit(p+n,true);n+=1;}
if((n==t[i][0])&&(v==t[i][1])){p+=t[i][0];return t[i][2];}}
var v=0;var n=0;var o={};for(var i=0;i<t.length;i++){while(n<t[i][0]){v<<=1;v+=buffer.getBit(p+n,true);n+=1;o[n]=v;}
if(o[t[i][0]]==t[i][1]){p+=t[i][0];return t[i][2];}}};var readC=function(l){var v=[];var c=0;while(v.length<l){var s=readCode(tB);switch(s){case 16:var n=readInt(2)+3;for(var i=0;i<n;i++){v.push(c);}
break;case 17:var n=readInt(3)+3;for(var i=0;i<n;i++){v.push(0);}
break;case 18:var n=readInt(7)+11;for(var i=0;i<n;i++){v.push(0);}
break;default:c=s;v.push(c);break;}}
return v;};var readL=function(n){var c=(n/4|0)-1;c=(c<0?0:c);c=(c>5?0:c);return mL[n]+readInt(c);};var readD=function(n){var c=(n/2|0)-1;c=(c<0?0:c);return mD[n]+readInt(c);};var readData=function(){var e=buffer.length*8;while(p<e){var s=readCode(tL);if(s<256){r[w++]=s;}
else if(s>256){var l=readL(s-256-1);var d=readD(readCode(tD));for(var i=0;i<l;i++){r[w++]=r[w-1-d];}}
else if(s==256){break;}}};while(true){var h=readInt(1);var m=readInt(2);switch(m){case 0:p+=8-(p%8||8);var l=readInt(16);var nl=readInt(16);var a=buffer.slice(p/8,p/8+l);for(var i=0;i<a.length;i++){r[w++]=a[i];}
p+=l*8;break;case 1:var tL=(function(){var v=[];for(var i=0;i<286;i++){switch(true){case(i<144):v.push([8,i+48,i]);break;case(i<256):v.push([9,i+256,i]);break;case(i<280):v.push([7,i-256,i]);break;case(i<286):v.push([8,i-88,i]);break;}}
return v;})();var tD=(function(){var v=[];for(var i=0;i<30;i++){v.push([5,i,i]);}
return v;})();readData();break;case 2:var lL=readInt(5)+256+1;var lD=readInt(5)+1;var lB=readInt(4)+4;var cB=(function(){var v=[];var d=[];for(var i=0;i<lB;i++){d.push(readInt(3));}
for(var i=lB;i<19;i++){d.push(0);}
for(var i=0;i<mO.length;i++){v[mO[i]]=d[i];}
return v;})();var tB=getTree(cB);var cL=readC(lL);var tL=getTree(cL);var cD=readC(lD);var tD=getTree(cD);readData();break;}
if(h){break;}}
return new Uint8Array(r);};Uint8Array.prototype.unserializeXml=function(){var readNodes=function(n){var v={};n=n||[];for(var i=0;i<n.length;i++){var attributes=readNodes(n[i]["attributes"]);var children=readNodes(n[i]["children"]);var textContent=(children?undefined:n[i]["textContent"]);var name=n[i]["nodeName"];var value={};if(attributes){value["attributes"]=attributes;}
if(children){value["children"]=children;}
if(textContent){value["textContent"]=textContent;}
if(Object.keys(value).length){if(v[name]){if(!isArray(v[name])){v[name]=[v[name]];}
v[name].push(value);}
else{v[name]=value;}}}
return Object.keys(v).length?v:undefined;};var xml=new DOMParser().parseFromString(this.getText(),"text/xml");return readNodes(xml.children);};Uint8Array.prototype.packageWav=function(f,t){var buffer=this;var bw=new BufferWriter();switch(t){case"PCM":bw.writeText("RIFF");bw.writeInt(4,36+buffer.length,true);bw.writeText("WAVE");bw.writeText("fmt ");bw.writeInt(4,0x10,true);bw.writeInt(2,f["formatTag"],true);bw.writeInt(2,f["channelCount"],true);bw.writeInt(4,f["samplesPerSec"],true);bw.writeInt(4,f["avgBytesPerSec"],true);bw.writeInt(2,f["blockAlign"],true);bw.writeInt(2,f["bitsPerSample"],true);break;case"XMA":var packetNum=Math.ceil(buffer.length/f["blockAlign"]);bw.writeText("RIFF");bw.writeInt(4,46+packetNum*4+buffer.length,true);bw.writeText("XWMA");bw.writeText("fmt ");bw.writeInt(4,0x12,true);bw.writeInt(2,f["formatTag"],true);bw.writeInt(2,f["channelCount"],true);bw.writeInt(4,f["samplesPerSec"],true);bw.writeInt(4,f["avgBytesPerSec"],true);bw.writeInt(2,f["blockAlign"],true);bw.writeInt(2,f["bitsPerSample"],true);bw.writeInt(2,0x00,true);var allBlocks=Math.ceil(f["duration"]/4096);var avgBlocksPerPacket=allBlocks/packetNum;var spareBlocks=allBlocks-(avgBlocksPerPacket*packetNum);var accumulated=0;bw.writeText("dpds");bw.writeInt(4,packetNum*4,true);for(var j=0;i<packetNum;j++){accumulated+=avgBlocksPerPacket*4096;if(spareBlocks>0){accumulated+=4096;spareBlocks--;}
bw.writeInt(4,accumulated,true);}
break;case"ADPCM":bw.writeText("RIFF");bw.writeInt(4,82+buffer.length,true);bw.writeText("WAVE");bw.writeText("fmt ");bw.writeInt(4,0x32,true);bw.writeInt(2,f["formatTag"],true);bw.writeInt(2,f["channelCount"],true);bw.writeInt(4,f["samplesPerSec"],true);bw.writeInt(4,f["avgBytesPerSec"],true);bw.writeInt(2,f["blockAlign"],true);bw.writeInt(2,f["bitsPerSample"],true);bw.writeInt(2,0x20,true);bw.writeInt(2,f["blockAlign"]*2/f["channelCount"]-12,true);var coeff=[0x00000100,0xFF000200,0x00000000,0x004000C0,0x000000F0,0xFF3001CC,0xFF180188];bw.writeInt(2,coeff.length,true);for(var i=0;i<coeff.length;i++){bw.writeInt(4,coeff[i],true);}
bw.writeText("fact");bw.writeInt(4,0x04,true);bw.writeInt(4,(f["blockAlign"]-(7*f["channelCount"]))*8/f["bitsPerSample"]/f["blockAlign"]/f["channelCount"]*buffer.length,true);break;}
bw.writeText("data");bw.writeInt(4,buffer.length,true);bw.writeBytes(buffer);return bw.toBuffer();};Float32Array.prototype.transformFourier=function(s,p){var l=1<<p;var o=(arguments.length>2?arguments[2]:new Uint8Array(l/2));var buffer=this;var x=(function(){var v=new Float32Array(l);var b=function(n){return buffer[n]||0;};v[0]=b(s);var c=l>>1;var i=1;var r=0;var h=0;do{r+=c;v[i]=b(s+r);v[r]=b(s+i);i++;h=l;while(h=h>>1,!((r^=h)&h)){}
if(r>=i){v[i]=b(s+r);v[r]=b(s+i);v[l-1-i]=b(s+l-1-r);v[l-1-r]=b(s+l-1-i);}
i++;}while(i<c)
v[l-1]=b(s+l-1);return v;})();var st1;for(var ix=0,id=4;ix<l;id*=4){for(var i0=ix;i0<l;i0+=id){st1=x[i0]-x[i0+1];x[i0]+=x[i0+1];x[i0+1]=st1;}
ix=(id-1)*2;}
var nn=l>>1;var n2=2,n4,n8;var i1,i2,i3,i4,i5,i6,i7,i8;var t1,t2,t3,t4;var e;var a;var cc1,ss1,cc3,ss3;while(nn=nn>>1){ix=0;n2=n2<<1;id=n2<<1;n4=n2>>2;n8=n2>>3;do{if(n4!=1){for(var i0=ix;i0<l;i0+=id){i1=i0;i2=i1+n4;i3=i2+n4;i4=i3+n4;t1=x[i3]+x[i4];x[i4]-=x[i3];x[i3]=x[i1]-t1;x[i1]+=t1;i1+=n8;i2+=n8;i3+=n8;i4+=n8;t1=x[i3]+x[i4];t2=x[i3]-x[i4];t1*=Math.SQRT1_2*-1;t2*=Math.SQRT1_2;st1=x[i2];x[i4]=t1+st1;x[i3]=t1-st1;x[i2]=x[i1]-t2;x[i1]+=t2;}}
else{for(var i0=ix;i0<l;i0+=id){i1=i0;i2=i1+n4;i3=i2+n4;i4=i3+n4;t1=x[i3]+x[i4];x[i4]-=x[i3];x[i3]=x[i1]-t1;x[i1]+=t1;}}
ix=(id<<1)-n2;id=id<<2;}while(ix<l)
e=Math.PI*2/n2;for(var j=1;j<n8;j++){a=j*e;ss1=Math.sin(a);cc1=Math.cos(a);cc3=(cc1*cc1-0.75)*cc1*4;ss3=(0.75-ss1*ss1)*ss1*4;ix=0;id=n2<<1;do{for(var i0=ix;i0<l;i0+=id){i1=i0+j;i2=i1+n4;i3=i2+n4;i4=i3+n4;i5=i0+n4-j;i6=i5+n4;i7=i6+n4;i8=i7+n4;t2=x[i7]*cc1-x[i3]*ss1
t1=x[i7]*ss1+x[i3]*cc1;t4=x[i8]*cc3-x[i4]*ss3;t3=x[i8]*ss3+x[i4]*cc3;st1=t2-t4;t2+=t4;t4=st1;x[i8]=t2+x[i6];x[i3]=t2-x[i6];st1=t3-t1;t1+=t3;t3=st1;x[i4]=t3+x[i2];x[i7]=t3-x[i2];x[i6]=x[i1]-t1;x[i1]+=t1;x[i2]=t4+x[i5];x[i5]-=t4;}
ix=(id<<1)-n2;id=id<<2;}while(ix<l)}}
var i=l>>1;var rval;var ival;var mag;while(--i){rval=x[i];ival=x[l-i-1];mag=2/l*Math.sqrt(rval*rval+ival*ival);o[i]=mag;}
o[0]=Math.abs(2/l*x[0]);return o;};Date.prototype.fromDos=function(dos){this.setTime(new Date(((dos>>25)&0x7F)+1980,((dos>>21)&0x0F)-1,(dos>>16)&0x1F,(dos>>11)&0x1F,(dos>>5)&0x3F,(dos&0x1F)*2,0).getTime());return this;};Date.prototype.toDos=function(){return(((this.getFullYear()-1980)&0x7F)<<25)|(((this.getMonth()+1)&0x0F)<<21)|((this.getDate()&0x1F)<<16)|((this.getHours()&0x3F)<<11)|((this.getMinutes()&0x1F)<<5)|(this.getSeconds()/2);};Date.prototype.format=function(){var m=(arguments.length>0?arguments[0]:"datetime");var r=[];if(m.indexOf("date")!=-1){r.push(this.getFullYear().toString().padStart(4,"0")+"."+(this.getMonth()+1).toString().padStart(2,"0")+"."+this.getDate().toString().padStart(2,"0"));}
if(m.indexOf("time")!=-1){r.push(this.getHours().toString().padStart(2,"0")+":"+this.getMinutes().toString().padStart(2,"0")+":"+this.getSeconds().toString().padStart(2,"0"));}
return r.join(" ");};Math.getPythagorean=function(){switch(arguments.length){case 2:var d1=arguments[0];var d2=arguments[1];return Math.hypot(d1,d2);break;case 4:var x1=arguments[0];var y1=arguments[1];var x2=arguments[2];var y2=arguments[3];return Math.hypot(x1-x2,y1-y2);break;}};Math.getPointsLength=function(p){var v=0;for(var i=1;i<p.length;i++){var t=0;var n=0;while((p[i].length>n)&&(p[i-1].length>n)){t=t.fAdd(p[i][n].fSub(p[i-1][n]).fSqu());n+=1;}
v=v.fAdd(Math.sqrt(t));}
return v;};Math.isPointInLine=function(l1,l2,p){if(((l1[0]==p[0])&&(l1[1]==p[1]))||((l2[0]==p[0])&&(l2[1]==p[1]))){return true;}
if((l1[0].fSub(l2[0]).fDiv(l1[1].fSub(l2[1]))==l1[0].fSub(p[0]).fDiv(l1[1].fSub(p[1])))&&(p[0]>=Math.min(l1[0],l2[0]))&&(p[0]<=Math.max(l1[0],l2[0]))&&(p[1]>=Math.min(l1[1],l2[1]))&&(p[1]<=Math.max(l1[1],l2[1]))){return true;}
return false;};Math.getLineIntersect=function(a,b,c,d){if(Math.isPointInLine(a,b,c)){return c;}
if(Math.isPointInLine(a,b,d)){return d;}
if(Math.isPointInLine(c,d,a)){return a;}
if(Math.isPointInLine(c,d,b)){return b;}};Math.isLineIntersect=function(a,b,c,d){return(Math.getLineIntersect(a,b,c,d)?true:false);};Math.getLineCross=function(a,b,c,d){if(Math.isLineIntersect(a,b,c,d)){return false;}
var abc=a[0].fSub(c[0]).fMul(b[1].fSub(c[1])).fSub(a[1].fSub(c[1]).fMul(b[0].fSub(c[0])));var abd=a[0].fSub(d[0]).fMul(b[1].fSub(d[1])).fSub(a[1].fSub(d[1]).fMul(b[0].fSub(d[0])));var cda=c[0].fSub(a[0]).fMul(d[1].fSub(a[1])).fSub(c[1].fSub(a[1]).fMul(d[0].fSub(a[0])));var cdb=c[0].fSub(b[0]).fMul(d[1].fSub(b[1])).fSub(c[1].fSub(b[1]).fMul(d[0].fSub(b[0])));if((abc.fMul(abd)<0)&&(cda.fMul(cdb)<0)){var t=cda.fMul(abd.fSub(abc));return[a[0].fAdd(b[0].fSub(a[0]).fMul(t)),a[1].fAdd(b[1].fSub(a[1]).fMul(t))];}};Math.isLineCross=function(a,b,c,d){return(Math.getLineCross(a,b,c,d)?true:false);};function FileInfo(path){var buffer=(arguments.length>1?arguments[1]:new Uint8Array());path=path||"0";path=(typeof path=="string"?path:path.toString());var filename=path.slice(path.lastIndexOf("/")+1);var name=(function(){var v=filename;var ld=v.lastIndexOf(".");if(ld!=-1){v=v.slice(0,ld);}
return v;})();var nameFact=(function(){var de=(arguments.length>0?arguments[0]:true);var dc=(arguments.length>1?arguments[1]:true);var db=(arguments.length>2?arguments[2]:true);var dp=(arguments.length>3?arguments[3]:true);var v=name;if(!v.length){return v;}
if(de){var l=v.length;while(l!=-1){v=v.slice(0,l);l=v.lastIndexOf(".");}}
if(dc){var m=[" - 副本"," - Copy"];while(true){var l=-1;var i=-1;for(var i=0;i<m.length;i++){l=v.lastIndexOf(m[i]);if(l!=-1){break;}}
if((l!=-1)&&(l==v.length-m[i].length)){v=v.slice(0,l);}
else{break;}}}
if(db){while(true){var m1="(";var m2=")";var l1=v.lastIndexOf(m1);var l2=v.lastIndexOf(m2);if((l1!=-1)&&(l2!=-1)&&(l1<l2)&&(l2==v.length-m2.length)&&isPositiveDecimal(v.slice(l1+1,l2))){v=v.slice(0,l1).trim();}
else{break;}}}
if(dp){while(true){var m1="[";var m2="]";var l1=v.lastIndexOf(m1);var l2=v.lastIndexOf(m2);if((l1!=-1)&&(l2!=-1)&&(l1<l2)&&(l2==v.length-m2.length)){v=v.slice(0,l1).trim();}
else{break;}}}
return v;})();var extension=(function(){var v=[];var s=filename.length;while(s){var l=filename.lastIndexOf(".",s-1);if(l!=-1){v.push(filename.slice(l+1,s).toLowerCase());s=l;}
else{break;}}
if(!v.length){v.push("");}
return v;})();var directory="";var type=extension[0];var version="";var text="";var json="";if(buffer.length){switch(type){case"xml":text=buffer.getText();if(text.isBase64()){type="ydsd";}
else{json=buffer.unserializeXml();var keys=Object.keys(json);switch(true){case keys.indexOf("html")!=-1:type="";break;case keys.indexOf("beats")!=-1:type="yddr";break;case keys.indexOf("CTimeStream")!=-1:type="mde";break;case keys.indexOf("CMap")!=-1:type="dynamix";break;case keys.indexOf("Level")!=-1:type="qqx5";break;default:type="bin";break;}}
break;case"txt":text=buffer.getText();switch(true){case text.startsWith("NAME\t"):type="cytus";break;case text.startsWith("VERSION 2"):type="cytus";version="version2";break;case text.startsWith("{"):type="cytus2";break;case text.startsWith("")||text.startsWith("*")||text.startsWith("#"):type="bangdream";break;case text.startsWith("BPM\t"):type="musync";break;case text.isBase64():type="musync";version="encrypt";break;}
break;case"json":text=buffer.getText();json=JSON.parse(text);switch(true){case(json["speed"]||json["notes"]||json["links"]?true:false):type="deemo";break;case(json["signature"]||json["version"]||json["tempo"]||json["tracks"]?true:false):type="imd";break;}
break;case"bin":var t=(function(){var rm=["errno_main_client","mrock.active_client","mrock.androidbuy_client","mrock.area_client","mrock.characterproperty_client","mrock.character_client","mrock.floornode_client","mrock.floorreward_client","mrock.floor_client","mrock.innerpublicnotify_client","mrock.innerrace_client","mrock.luckyturntablereward_client","mrock.luckyturntabletypeshow_client","mrock.marketact_client","mrock.missionfloor_client","mrock.mission_client","mrock.scorebuy_client","mrock.scoreexchange_client","mrock.surviveact_client","mrock.sysparam_client","mrock.teamlevel_client","mrock.thingbuy_client","mrock.timelimitcharacter_client","mrock_buynew_client","mrock_buy_client","mrock_dailyactive_client","mrock_ELO_client","mrock_FloorELO_client","mrock_guildactivity_client","mrock_guildarea_client","mrock_guild_song_client","mrock_levelunlocksong_client","mrock_level_client","mrock_luckyitem_client","mrock_Map_client","mrock_match_client","mrock_match_division_client","mrock_medal_client","mrock_noble_client","mrock_noble_gift_client","mrock_papasong_client","mrock_purchase_client","mrock_questconfig_client","mrock_recharge_android_client","mrock_recharge_ios_client","mrock_room_client","mrock_rpreward_client","mrock_scoreexchange_client","mrock_share_client","mrock_songlevel_client","mrock_SongPkg_client","mrock_song_client","mrock_song_client_android","mrock_starmall_exchange_client","mrock_SysParam_client","mrock_txt_client"];var rmwx=["activityconvertitem_info_c","ad_info_c","assistantitem_info_c","dailychallengeaward_info_c","framepic_info_c","freediamond_info_c","gameskin_info_c","instrumentlist_info_c","instrumentmission_info_c","instrumentskinlist_info_c","instrumentstar_info_c","itemlist_info_c","localization_info_c","playerexplist_info_c","questlist_info_c","rankingrm_info_c","settingtype_info_c","share_info_c","shopandroid_info_c","songfilterrm_info_c","songlistrm_info_c","soundeffect_info_c","stagepassdesc_info_c","stagerm_info_c","stageskip_info_c","story_info_c","strings_info_c","systemtiprm_info_c","tabledatas"];for(var i=0;i<rm.length;i++){if(filename.startsWith(rm[i])){return"rm";}}
for(var i=0;i<rmwx.length;i++){if(filename.startsWith(rmwx[i])){if(rmwx[i]=="tabledatas"){version="set";}
return"rmwx";}}})();if(t){type=t;}
break;}}
var nameCore=nameFact;var suffixImd="";var suffixMde="";var suffixDynamix="";var suffixBangdream="";var suffixMusync="";var getDirectory=function(){var v="";var l=path.lastIndexOf("/");if(l!=-1){v=path.slice(0,l);}
v+="/";return v;};this.setParam=function(){var param=(arguments.length>0?arguments[0]:{});var index=(arguments.length>1?arguments[1]:0);var key=(param["key"]?param["key"]:getSelected("selectTransKey",index)||4);var ds_imd=["_ez","_nm","_hd"];var ds_mde=["_Papa_Easy","_Papa_Normal","_Papa_Hard"];var ds_dynamix=["_B","_N","_H","_M","_G","_T"];var ds_bangdream=["_easy","_normal","_hard","_expert","_command"];var ds_musync=["_easy","_hard","_in"];var t=nameFact;if(type=="musync"){var l=t.lastIndexOf("_encrypt");if(l!=-1){t=t.slice(0,l);}}
if(type=="dynamix"){if(t.startsWith("_map_")){t=t.slice("_map_".length);}}
if(type=="qqx5"){var m=["idol","crescent","pinball","classic","bubble"];for(var i=0;i<m.length;i++){var s=m[i]+"_";while(t.startsWith(s)){t=t.slice(s.length);}}}
var d=(function(){var m=[ds_imd,ds_mde,ds_dynamix,ds_bangdream,ds_musync];for(var i=0;i<m.length;i++){for(var j=0;j<m[i].length;j++){if(t.slice(t.length-m[i][j].length,t.length)==m[i][j]){t=t.slice(0,t.length-m[i][j].length);return j;}}}
return 0;})();key=key||(function(){var l=t.lastIndexOf("_");if((l!=-1)&&(t.lastIndexOf("k")==t.length-1)){var n=t.slice(l+1,t.length-1);if(isPositiveDecimal(n)){n=parseInt(n);t=t.slice(0,l);return n;}}
return key;})();if(type=="imd"){if(t[t.length-1]=="k"){var l=t.lastIndexOf("_");if(l!=-1){var k=parseInt(t.slice(l+1,t.length-1));if(!isNaN(k)){t=t.slice(0,l);}}}}
nameCore=t;suffixImd="_"+key+"k"+(ds_imd[d]||ds_imd[ds_imd.length-1]);suffixMde=(ds_mde[d]||ds_mde[ds_mde.length-1]);suffixDynamix=(ds_dynamix[d]||ds_dynamix[ds_dynamix.length-1]);suffixBangdream=(ds_bangdream[d]||ds_bangdream[ds_bangdream.length-1]);suffixMusync=(ds_musync[d]||ds_musync[ds_musync.length-1]);return this;};this.buffer=buffer;this.path=path;this.filename=filename;this.name=name;this.nameFact=nameFact;this.extension=extension;Object.defineProperty(this,"directory",{"get":function(){directory=directory||getDirectory();return directory;}});Object.defineProperty(this,"type",{"get":function(){return type;}});Object.defineProperty(this,"version",{"get":function(){return version;}});Object.defineProperty(this,"text",{"get":function(){return text;}});Object.defineProperty(this,"json",{"get":function(){return json;}});Object.defineProperty(this,"nameCore",{"get":function(){return nameCore;}});Object.defineProperty(this,"suffixImd",{"get":function(){return suffixImd;}});Object.defineProperty(this,"suffixMde",{"get":function(){return suffixMde;}});Object.defineProperty(this,"suffixDynamix",{"get":function(){return suffixDynamix;}});Object.defineProperty(this,"suffixBangdream",{"get":function(){return suffixBangdream;}});Object.defineProperty(this,"suffixMusync",{"get":function(){return suffixMusync;}});this.setParam();}
function BufferWriter(){var buffer=(arguments.length>0?arguments[0]:new Uint8Array());var array=[];var fromBuffer=function(buffer){array=Array.from(buffer);};var writeBytes=function(t){array.writes(t);return this;};var writeInt=function(n,t,e){writeBytes(new Uint8Array().fromInt(n,t,e));return this;};var writeUint=function(n,t,e){writeBytes(new Uint8Array().fromUint(n,t,e));return this;};var writeFloat=function(n,t,e){writeBytes(new Uint8Array().fromFloat(n,t,e));return this;};var writeText=function(t){var e=(arguments.length>1?arguments[1]:"UTF-8");writeBytes(new Uint8Array().fromText(t,e));return this;};this.writeBytes=writeBytes;this.writeInt=writeInt;this.writeUint=writeUint;this.writeFloat=writeFloat;this.writeText=writeText;this.fromBuffer=fromBuffer;this.toBuffer=function(){return new Uint8Array(array);};Object.defineProperty(this,"length",{"get":function(){return array.length;}});(function(){if(buffer.length){fromBuffer(buffer);}})();}
function Zip(){var buffer=(arguments.length>0?arguments[0]:new Uint8Array());var empty={"path":"","compressedBuffer":new Uint8Array(),"uncompressedBuffer":new Uint8Array(),"datetime":new Date(0),"crc32":"00000000","method":0};var list=[];var indexOf=function(path){for(var i=0;i<list.length;i++){if(list[i]["path"]==path){return i;}}
return-1;};var getFolders=function(path){var r=[];var s=0;while(true){var l=path.indexOf("/",s);if(l>0){r.push((r.length?r[r.length-1]:"")+path.slice(s,l+1));s=l;}
s+=1;if(l==-1){break;}}
return r;};var add=function(file){if(file["path"]){while(file["path"][0]=="/"){file["path"]=file["path"].slice(1);}}
var n=-1;if(file["path"]){var l=indexOf(file["path"]);if(l!=-1){n=l;list[l]["path"]=(file["path"]?file["path"]:list[l]["path"]);list[l]["folders"]=getFolders(list[l]["path"]);list[l]["compressedBuffer"]=(file["compressedBuffer"]?file["compressedBuffer"]:list[l]["compressedBuffer"]||empty["compressedBuffer"]);list[l]["uncompressedBuffer"]=(file["uncompressedBuffer"]?file["uncompressedBuffer"]:list[l]["uncompressedBuffer"]||empty["uncompressedBuffer"]);list[l]["datetime"]=(file["datetime"]?file["datetime"]:list[l]["datetime"]);list[l]["crc32"]=(file["crc32"]?file["crc32"]:list[l]["crc32"]||empty["crc32"]);list[l]["method"]=(file["method"]?file["method"]:(!isUndefined(list[l]["method"])?list[l]["method"]:8));}
else{n=list.length;list.push({"path":file["path"],"folders":getFolders(file["path"]),"compressedBuffer":file["compressedBuffer"]||empty["compressedBuffer"],"uncompressedBuffer":file["uncompressedBuffer"]||empty["uncompressedBuffer"],"datetime":file["datetime"],"crc32":file["crc32"]||empty["crc32"],"method":(!isUndefined(file["method"])?file["method"]:8)});}}
for(var i=0;i<list[n]["folders"].length;i++){var l=indexOf(list[n]["folders"][i]);if(l==-1){list.push({"path":list[n]["folders"][i],"folders":getFolders(list[n]["folders"][i]),"compressedBuffer":empty["compressedBuffer"],"uncompressedBuffer":empty["uncompressedBuffer"],"datetime":list[n]["datetime"],"crc32":empty["crc32"],"method":empty["method"]});}}};var remove=function(path){var l=indexOf(path);if(l!=-1){list.spilce(l,1);}};var sort=function(){var s=function(a,b){var sa=a["path"].split("/");var sb=b["path"].split("/");var l=Math.min(sa.length,sb.length);for(var i=0;i<l;i++){if(!sa[i]||((i<sa.length-1)&&(i==sb.length-1))){return-1;}
else if(!sb[i]||((i==sa.length-1)&&(i<sb.length-1))){return 1;}
else{if(sa[i]!=sb[i]){return sa[i]-sb[i];}}}};list=list.sort(s);};var compress=function(index){var m=(arguments.length>1?arguments[1]:-1);if(m==0){list[index]["method"]=0;}
var r=new Uint8Array();switch(list[index]["method"]){case 0:r=list[index]["uncompressedBuffer"];break;case 8:r=list[index]["uncompressedBuffer"].deflate(m);break;}
if(r.length>list[index]["uncompressedBuffer"].length){list[index]["method"]=0;r=list[index]["uncompressedBuffer"];}
return r;};var uncompress=function(index){var r=new Uint8Array();switch(list[index]["method"]){case 0:r=list[index]["compressedBuffer"];break;case 8:r=list[index]["compressedBuffer"].inflate();break;}
return r;};this.addFiles=function(files){for(var i=0;i<files.length;i++){add(files[i]);}
return this;};this.addFile=function(file){this.addFiles([file]);return this;};this.removeFiles=function(paths){for(var i=0;i<paths.length;i++){remove(paths[i]);}
return this;};this.removeFile=function(path){this.removeFiles([path]);return this;};this.sort=function(){sort();return this;};this.getFileInfo=function(path,field){var m=(arguments.length>2?arguments[2]:-1);var l=indexOf(path);if(l!=-1){switch(field){case"compressedBuffer":list[l]["compressedBuffer"]=(list[l]["compressedBuffer"].length?list[l]["compressedBuffer"]:compress(l,m));break;case"uncompressedBuffer":list[l]["uncompressedBuffer"]=(list[l]["uncompressedBuffer"].length?list[l]["uncompressedBuffer"]:uncompress(l));break;}}
return(list[l]||empty)[field];};this.getList=function(){return list;};this.fromZip=function(buffer){var files=[];var p=0;var t=0;var getMethod=function(m){switch(m){case 0:return"store";break;case 1:return"shrunk";break;case 2:return"expand1";break;case 3:return"expand2";break;case 4:return"expand3";break;case 5:return"expand4";break;case 6:return"implode";break;case 7:return"tokenize";break;case 8:return"deflate";break;case 9:return"deflate64";break;case 10:return"PKWARE DCL";break;case 12:return"BZIP2";break;case 14:return"LZMA";break;case 18:return"IBM TERSE";break;case 19:return"IBM LZ77";break;case 97:return"WavPack";break;case 98:return"PPMd";break;}
return"unknown";};var readInt=function(n){var r=buffer.getInt(n,p,true);p+=n;return r;};var readText=function(n){var e=(arguments.length>1?arguments[1]:"ANSI");var r=buffer.getText(p,n,e);p+=n;return r;};var readHeader=function(){while(p+3<buffer.length){if((buffer[p]==0x50)&&(buffer[p+1]==0x4B)){var v=readInt(4);switch(v){case 0x04034B50:case 0x08074B50:case 0x08064B50:case 0x02014B50:case 0x05054B50:case 0x06064B50:case 0x07064B50:case 0x06054B50:case 0x30304B50:return v;break;}
p-=2;}
else{p+=1;}}
return 0;};var readDateTime=function(){var dos=readInt(4);if(dos){return new Date().fromDos(dos);}};var readCRC32=function(){return new Uint8Array(4).setInt32(readInt(4),0,false).getHex();};var readExtra=function(n){var r=[];var e=p+n;while(p<e){var m=readInt(2);switch(m){case 0x7075:var size=readInt(2);var version=readInt(1);var crc32=readInt(4);var path=readText(size-5,"UTF-8");r["path"]=path;break;case 0x6375:var size=readInt(2);var version=readInt(1);var crc32=readInt(4);var comment=readText(size-5,"UTF-8");r["comment"]=comment;break;default:p=e;break;}}
return r;};while(true){var header=readHeader();switch(header){case 0x04034B50:var eVersion=readInt(2);var flag=readInt(2);var method=readInt(2);if((method!=0)&&(method!=8)){alert("目前不支持压缩方法"+method+"-"+getMethod(method)+"。");return;}
var datetime=readDateTime();var crc32=readCRC32();var cSize=readInt(4);var uSize=readInt(4);var nLength=readInt(2);var eLength=readInt(2);var path=readText(nLength,"ANSI");var extra=readExtra(eLength);if(flag>>3&1){t=p;}
files.push({"path":path,"compressedBuffer":buffer.slice(p,p+cSize),"datetime":datetime,"crc32":crc32,"method":method});p+=cSize;break;case 0x08074B50:var crc32=readCRC32();var cSize=readInt(4);var uSize=readInt(4);if(t){files[files.length-1]["compressedBuffer"]=buffer.slice(t,t+cSize);files[files.length-1]["crc32"]=crc32;t=0;}
break;case 0x08064B50:var eLength=readInt(4);var extra=readExtra(eLength);break;case 0x02014B50:var mVersion=readInt(2);var eVersion=readInt(2);var flag=readInt(2);var method=readInt(2);var datetime=readDateTime();var crc32=readCRC32();var cSize=readInt(4);var uSize=readInt(4);var nLength=readInt(2);var eLength=readInt(2);var cLength=readInt(2);var sNumber=readInt(2);var iAttributes=readInt(2);var eAttributes=readInt(4);var offset=readInt(4);var path=readText(nLength,"ANSI");var extra=readExtra(eLength);var comment=readText(cLength,"ANSI");break;case 0x05054B50:var sLength=readInt(2);var signature=readText(sLength,"ANSI");break;case 0x06064B50:var eSize=readInt(8);var mVersion=readInt(2);var eVersion=readInt(2);var cNumber=readInt(4);var sNumber=readInt(4);var cCount=readInt(8);var tCount=readInt(8);var size=readInt(8);var offset=readInt(8);var e=p+eSize-44;while(p<e){var id=readInt(2);var length=readInt(4);var value=readText(length,"ANSI");}
break;case 0x07064B50:var sNumber=readInt(4);var offset=readInt(8);var tCount=readInt(4);break;case 0x06054B50:var cNumber=readInt(2);var sNumber=readInt(2);var cCount=readInt(2);var tCount=readInt(2);var size=readInt(4);var offset=readInt(4);var cLength=readInt(2);var comment=readText(cLength,"ANSI");break;case 0x30304B50:break;}
if(header==0){break;}}
list=[];this.addFiles(files);return this;};this.toZip=function(){var m=(arguments.length>0?arguments[0]:-1);for(var i=0;i<list.length;i++){list[i]["compressedBuffer"]=(list[i]["compressedBuffer"].length?list[i]["compressedBuffer"]:compress(i,m));list[i]["uncompressedBuffer"]=(list[i]["uncompressedBuffer"].length?list[i]["uncompressedBuffer"]:uncompress(i));list[i]["crc32"]=(list[i]["crc32"]!=empty["crc32"]?list[i]["crc32"]:list[i]["uncompressedBuffer"].getCRC32());}
var bw=new BufferWriter();var writeBytes=function(t){bw.writeBytes(t);};var writeInt=function(l,t){bw.writeInt(l,t,true);};var writeDateTime=function(t){writeInt(4,(t?t.toDos():0));};var writeCRC32=function(t){writeBytes(new Uint8Array().fromHex(t.splitEvery(2).reverse().join("")));};var offsetLocalFile=[];var crc32=[];var writeLocalFile=(function(){var header=0x04034B50;var flag=0x0000;for(var i=0;i<list.length;i++){offsetLocalFile[i]=bw.length;crc32[i]=list[i]["uncompressedBuffer"].getCRC32();writeInt(4,header);writeInt(2,(list[i]["path"].endsWith("/")||!list[i]["uncompressedBuffer"].length?0x000A:0x0014));writeInt(2,flag);writeInt(2,(list[i]["path"].endsWith("/")||!list[i]["uncompressedBuffer"].length?0x0000:list[i]["method"]));writeDateTime(list[i]["datetime"]);writeCRC32(crc32[i]);writeInt(4,list[i]["compressedBuffer"].length);writeInt(4,list[i]["uncompressedBuffer"].length);var name=new Uint8Array().fromText(list[i]["path"],"ANSI");var extra=new Uint8Array().fromText("","ANSI");writeInt(2,name.length);writeInt(2,extra.length);writeBytes(name);writeBytes(extra);writeBytes(list[i]["compressedBuffer"]);}})();var offsetCentralDirectory=bw.length;var writeCentralDirectory=(function(){var header=0x02014B50;var mVersion=0x001F;var flag=0x0000;var sNumber=0x0000;var iAttributes=0x0000;for(var i=0;i<list.length;i++){writeInt(4,header);writeInt(2,mVersion);writeInt(2,(list[i]["path"].endsWith("/")||!list[i]["uncompressedBuffer"].length?0x000A:0x0014));writeInt(2,flag);writeInt(2,(list[i]["path"].endsWith("/")||!list[i]["uncompressedBuffer"].length?0x0000:list[i]["method"]));writeDateTime(list[i]["datetime"]);writeCRC32(crc32[i]);writeInt(4,list[i]["compressedBuffer"].length);writeInt(4,list[i]["uncompressedBuffer"].length);var name=new Uint8Array().fromText(list[i]["path"],"ANSI");var extra=new Uint8Array().fromText("","ANSI");var comment=new Uint8Array().fromText("","ANSI");writeInt(2,name.length);writeInt(2,extra.length);writeInt(2,comment.length);writeInt(2,sNumber);writeInt(2,iAttributes);writeInt(4,(list[i]["path"].endsWith("/")?0x00000010:0x00000020));writeInt(4,offsetLocalFile[i]);writeBytes(name);writeBytes(extra);writeBytes(comment);}})();var sizeCentralDirectory=bw.length-offsetCentralDirectory;var writeEndOfCentralDirectory=(function(){var header=0x06054B50;var cNumber=0x0000;var sNumber=0x0000;var cCount=list.length;var tCount=list.length;var size=sizeCentralDirectory;var offset=offsetCentralDirectory;var comment="";writeInt(4,header);writeInt(2,cNumber);writeInt(2,sNumber);writeInt(2,cCount);writeInt(2,tCount);writeInt(4,size);writeInt(4,offset);var comment=new Uint8Array().fromText("","ANSI");writeInt(2,comment.length);writeBytes(comment);})();return bw.toBuffer();};if(buffer.length){this.fromZip(buffer);}}
function Matrix(){var accurate=function(m){var v=[];for(var i=0;i<m.length;i++){if(m[i].length){v[i]=[];for(var j=0;j<m[i].length;j++){v[i][j]=m[i][j].toAccurated();}}
else{v[i]=m[i].toAccurated();}}
return v;};var initialize=function(){var v=[];var a=[];var d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];switch(arguments.length){case 1:if(isString(arguments[0])){a=arguments[0].split(",");for(var i=0;i<a.length;i++){a[i]=parseFloat(a[i]);}}
else if(arguments[0].length){a.writes(arguments[0]);}
break;case 4:for(var i=0;i<4;i++){if((arguments[i].length)&&(arguments[i].length>3)){a=d;break;}
for(var j=0;j<4;j++){a[i*4+j]=arguments[i][j];}}
break;default:a.writes(arguments);break;}
switch(a.length){case 6:a=[a[0],a[1],d[2],d[3],a[2],a[3],d[6],d[7],d[8],d[9],d[10],d[11],a[4],a[5],d[14],d[15]];break;case 9:a=[a[0],a[1],d[2],d[3],a[3],a[4],d[6],d[7],d[8],d[9],d[10],d[11],a[6],a[7],d[14],d[15]];break;case 16:break;default:a=[];break;}
for(var i=0;i<16;i++){a[i]=a[i]||d[i];}
for(var i=0;i<4;i++){v[i]=[];for(var j=0;j<4;j++){v[i][j]=a[i*4+j];}}
return accurate(v);};var matrix=initialize.apply(null,arguments);var transform={};var sin=function(a){return Math.sin(a.fDiv(180).fMul(Math.PI));};var asin=function(a){return Math.asin(a.fDiv(180).fMul(Math.PI));};var cos=function(a){return Math.cos(a.fDiv(180).fMul(Math.PI));};var acos=function(a){return Math.acos(a.fDiv(180).fMul(Math.PI));};var tan=function(a){return Math.tan(a.fDiv(180).fMul(Math.PI));};var mask={"identity":0x00,"translate":0x01,"scale":0x02,"affine":0x04,"perspective":0x08,"all":0x0F,"unknown":0x80};var getType=function(){var v=0;var m=matrix;if((m[0][3]!=0)||(m[1][3]!=0)||(m[2][3]!=0)||(m[3][3]!=1)){return mask["translate"]|mask["scale"]|mask["affine"]|mask["perspective"];}
if((m[3][0]!=0)||(m[3][1]!=0)||(m[3][2]!=0)){v|=mask["translate"];}
if((m[0][0]!=1)||(m[1][1]!=1)||(m[2][2]!=1)){v|=mask["scale"];}
if((m[1][0]!=0)||(m[0][1]!=0)||(m[0][2]!=0)||(m[2][0]!=0)||(m[1][2]!=0)||(m[2][1]!=0)){v|=mask["affine"];}
return v;};var isIdentity=function(){return getType()==mask["identity"];};var isTranslate=function(){return!(getType()&~mask["translate"]);};var isScaleTranslate=function(){return!(getType()&~(mask["scale"]|mask["translate"]));};var multiply=function(m,m2){var v=[];if(isIdentity()){v=m2;}
else{v=initialize();for(var i=0;i<4;i++){for(var j=0;j<4;j++){var t=0;for(var k=0;k<4;k++){t=t.fAdd(m[k][j].fMul(m2[i][k]));}
v[i][j]=t;}}}
return accurate(v);};var perspective=function(m,v){var m2=initialize();m2[0][3]=v[0];m2[1][3]=v[1];m2[2][3]=v[2];m2[3][3]=v[3];return multiply(m,m2);};var translate=function(m,v){var m2=initialize();m2[3][0]=v[0];m2[3][1]=v[1];m2[3][2]=v[2];return multiply(m,m2);};var scale=function(m,v){var m2=initialize();m2[0][0]=v[0];m2[1][1]=v[1];m2[2][2]=v[2];return multiply(m,m2);};var rotate=function(m,v){var m2=initialize();var x=v[0];var y=v[1];var z=v[2];var w=v[3];m2[0][0]=(1).fSub((2).fMul(y.fMul(y).fAdd(z.fMul(z))));m2[1][0]=(2).fMul(x.fMul(y).fSub(z.fMul(w)));m2[2][0]=(2).fMul(x.fMul(z).fAdd(y.fMul(w)));m2[0][1]=(2).fMul(x.fMul(y).fAdd(z.fMul(w)));m2[1][1]=(1).fSub((2).fMul(x.fMul(x).fAdd(z.fMul(z))));m2[2][1]=(2).fMul(y.fMul(z).fSub(x.fMul(w)));m2[0][2]=(2).fMul(x.fMul(z).fSub(y.fMul(w)));m2[1][2]=(2).fMul(y.fMul(z).fAdd(x.fMul(w)));m2[2][2]=(1).fSub((2).fMul(x.fMul(x).fAdd(y.fMul(y))));return multiply(m,m2);};var skew=function(m,v){var r=clone(m);var m2=initialize();if(v[2]){m2[2][1]=v[2];r=multiply(r,m2);}
if(v[1]){m2[2][1]=0;m2[2][0]=v[1];r=multiply(r,m2);}
if(v[0]){m2[2][0]=0;m2[1][0]=v[0];r=multiply(r,m2);}
return r;};var length=function(v){v[3]=v[3]||0;return Math.hypot(v[0],v[1],v[2],v[3]);};var normalize=function(m){var l=length(m);if(l==0){return[0,0,0];}
else{return[m[0].fDiv(l),m[1].fDiv(l),m[2].fDiv(l)];}};var clone=function(m){return[[m[0][0],m[0][1],m[0][2],m[0][3]],[m[1][0],m[1][1],m[1][2],m[1][3]],[m[2][0],m[2][1],m[2][2],m[2][3]],[m[3][0],m[3][1],m[3][2],m[3][3]]];};var determinant=function(m){if(isIdentity()){return 1;}
if(isScaleTranslate()){return m[0][0].fMul(m[1][1]).fMul(m[2][2]).fMul(m[3][3]);}
var a00=m[0][0];var a01=m[0][1];var a02=m[0][2];var a03=m[0][3];var a10=m[1][0];var a11=m[1][1];var a12=m[1][2];var a13=m[1][3];var a20=m[2][0];var a21=m[2][1];var a22=m[2][2];var a23=m[2][3];var a30=m[3][0];var a31=m[3][1];var a32=m[3][2];var a33=m[3][3];var b00=a00.fMul(a11).fSub(a01.fMul(a10));var b01=a00.fMul(a12).fSub(a02.fMul(a10));var b02=a00.fMul(a13).fSub(a03.fMul(a10));var b03=a01.fMul(a12).fSub(a02.fMul(a11));var b04=a01.fMul(a13).fSub(a03.fMul(a11));var b05=a02.fMul(a13).fSub(a03.fMul(a12));var b06=a20.fMul(a31).fSub(a21.fMul(a30));var b07=a20.fMul(a32).fSub(a22.fMul(a30));var b08=a20.fMul(a33).fSub(a23.fMul(a30));var b09=a21.fMul(a32).fSub(a22.fMul(a31));var b10=a21.fMul(a33).fSub(a23.fMul(a31));var b11=a22.fMul(a33).fSub(a23.fMul(a32));return b00.fMul(b11).fSub(b01.fMul(b10)).fAdd(b02.fMul(b09)).fAdd(b03.fMul(b08)).fSub(b04.fMul(b07)).fAdd(b05.fMul(b06));};var invert=function(m){var a00=m[0][0];var a01=m[0][1];var a02=m[0][2];var a03=m[0][3];var a10=m[1][0];var a11=m[1][1];var a12=m[1][2];var a13=m[1][3];var a20=m[2][0];var a21=m[2][1];var a22=m[2][2];var a23=m[2][3];var a30=m[3][0];var a31=m[3][1];var a32=m[3][2];var a33=m[3][3];var b00=a00.fMul(a11).fSub(a01.fMul(a10));var b01=a00.fMul(a12).fSub(a02.fMul(a10));var b02=a00.fMul(a13).fSub(a03.fMul(a10));var b03=a01.fMul(a12).fSub(a02.fMul(a11));var b04=a01.fMul(a13).fSub(a03.fMul(a11));var b05=a02.fMul(a13).fSub(a03.fMul(a12));var b06=a20.fMul(a31).fSub(a21.fMul(a30));var b07=a20.fMul(a32).fSub(a22.fMul(a30));var b08=a20.fMul(a33).fSub(a23.fMul(a30));var b09=a21.fMul(a32).fSub(a22.fMul(a31));var b10=a21.fMul(a33).fSub(a23.fMul(a31));var b11=a22.fMul(a33).fSub(a23.fMul(a32));var det=b00.fMul(b11).fSub(b01.fMul(b10)).fAdd(b02.fMul(b09)).fAdd(b03.fMul(b08)).fSub(b04.fMul(b07)).fAdd(b05.fMul(b06));if((det==0)||!isFinite(det)){return false;}
var invdet=(1).fDiv(det);b00=b00.fMul(invdet);b01=b01.fMul(invdet);b02=b02.fMul(invdet);b03=b03.fMul(invdet);b04=b04.fMul(invdet);b05=b05.fMul(invdet);b06=b06.fMul(invdet);b07=b07.fMul(invdet);b08=b08.fMul(invdet);b09=b09.fMul(invdet);b10=b10.fMul(invdet);b11=b11.fMul(invdet);return[[a11.fMul(b11).fSub(a12.fMul(b10)).fAdd(a13.fMul(b09)),a02.fMul(b10).fSub(a01.fMul(b11)).fSub(a03.fMul(b09)),a31.fMul(b05).fSub(a32.fMul(b04)).fAdd(a33.fMul(b03)),a22.fMul(b04).fSub(a21.fMul(b05)).fSub(a23.fMul(b03))],[a12.fMul(b08).fSub(a10.fMul(b11)).fSub(a13.fMul(b07)),a00.fMul(b11).fSub(a02.fMul(b08)).fAdd(a03.fMul(b07)),a32.fMul(b02).fSub(a30.fMul(b05)).fSub(a33.fMul(b01)),a20.fMul(b05).fSub(a22.fMul(b02)).fAdd(a23.fMul(b01))],[a10.fMul(b10).fSub(a11.fMul(b08)).fAdd(a13.fMul(b06)),a01.fMul(b08).fSub(a00.fMul(b10)).fSub(a03.fMul(b06)),a30.fMul(b04).fSub(a31.fMul(b02)).fAdd(a33.fMul(b00)),a21.fMul(b02).fSub(a20.fMul(b04)).fSub(a23.fMul(b00))],[a11.fMul(b07).fSub(a10.fMul(b09)).fSub(a12.fMul(b06)),a00.fMul(b09).fSub(a01.fMul(b07)).fAdd(a02.fMul(b06)),a31.fMul(b01).fSub(a30.fMul(b03)).fSub(a32.fMul(b00)),a20.fMul(b03).fSub(a21.fMul(b01)).fAdd(a22.fMul(b00))]];};var transpose=function(m){return[[m[0][0],m[1][0],m[2][0],m[3][0]],[m[0][1],m[1][1],m[2][1],m[3][1]],[m[0][2],m[1][2],m[2][2],m[3][2]],[m[0][3],m[1][3],m[2][3],m[3][3]]];};var map=function(v,m){var r=[];for(var i=0;i<4;i++){var t=0;for(var j=0;j<4;j++){t=t.fAdd(m[j][i].fMul(v[j]));}
r[i]=t;}
return r;};var dot=function(v,v2){if((v.length==3)&&(v2.length==3)){return v[0].fMul(v2[0]).fAdd(v[1].fMul(v2[1])).fAdd(v[2].fMul(v2[2]));}
if((v.length==4)&&(v2.length==4)){return v[0].fMul(v2[0]).fAdd(v[1].fMul(v2[1])).fAdd(v[2].fMul(v2[2])).fAdd(v[3].fMul(v2[3]));}};var combine=function(v,v2,scale1,scale2){var r=[];if((v.length==3)&&(v2.length==3)){for(var i=0;i<3;i++){r[i]=v[i].fMul(scale1).fAdd(v2[i].fMul(scale2));}}
if((v.length==4)&&(v2.length==4)){for(var i=0;i<4;i++){r[i]=v[i].fMul(scale1).fAdd(v2[i].fMul(scale2));}}
return r;};var cross=function(v,v2){return[v[1].fMul(v2[2]).fSub(v[2].fMul(v2[1])),v[2].fMul(v2[0]).fSub(v[0].fMul(v2[2])),v[0].fMul(v2[1]).fSub(v[1].fMul(v2[0]))];};var getTransform=function(m){var matrix=(function(){if(m[3][3]==0){return false;}
var v=initialize();for(var i=0;i<4;i++){for(var j=0;j<4;j++){v[i][j]=m[i][j].fDiv(m[3][3]);}}
return accurate(v);})();if(!matrix){return false;}
var pm=(function(){var v=clone(matrix);for(var i=0;i<3;i++){v[i][3]=0;}
v[3][3]=1;return v;})();var perspective=(function(){if(matrix[0][3]!=0||matrix[1][3]!=0||matrix[2][3]!=0){var ipm=invert(pm);if(!ipm){return false;}
return map([matrix[0][3],matrix[1][3],matrix[2][3],matrix[3][3]],transpose(ipm));}
else{return[0,0,0,1];}})();var translate=(function(){var v=[];for(var i=0;i<3;i++){v[i]=matrix[3][i];}
return v;})();var row=(function(){var v=[];for(var i=0;i<3;i++){v[i]=[matrix[i][0],matrix[i][1],matrix[i][2]];}
return v;})();var skew=[];var scale=[];scale[0]=length(row[0]);row[0]=normalize(row[0]);skew[0]=dot(row[0],row[1]);row[1]=combine(row[1],row[0],1,(0).fSub(skew[0]));scale[1]=length(row[1]);row[1]=normalize(row[1]);skew[0]=skew[0].fDiv(scale[1]);skew[1]=dot(row[0],row[2]);row[2]=combine(row[2],row[0],1,(0).fSub(skew[1]));skew[2]=dot(row[1],row[2]);row[2]=combine(row[2],row[1],1,(0).fSub(skew[2]));scale[2]=length(row[2]);row[2]=normalize(row[2]);skew[1]=skew[1].fDiv(scale[2]);skew[2]=skew[2].fDiv(scale[2]);if(dot(row[0],cross(row[1],row[2]))<0){for(var i=0;i<3;i++){scale[i]=scale[i].fMul(-1);for(var j=0;j<3;j++){row[i][j]=row[i][j].fMul(-1);}}}
var quaternion=(function(){var v=[(0.5).fMul(Math.sqrt(Math.max((1).fAdd(row[0][0]).fSub(row[1][1]).fSub(row[2][2]),0))),(0.5).fMul(Math.sqrt(Math.max((1).fSub(row[0][0]).fAdd(row[1][1]).fSub(row[2][2]),0))),(0.5).fMul(Math.sqrt(Math.max((1).fSub(row[0][0]).fSub(row[1][1]).fAdd(row[2][2]),0))),(0.5).fMul(Math.sqrt(Math.max((1).fAdd(row[0][0]).fAdd(row[1][1]).fAdd(row[2][2]),0)))];if(row[2][1]>row[1][2]){v[0]=(0).fSub(v[0]);}
if(row[0][2]>row[2][0]){v[1]=(0).fSub(v[1]);}
if(row[1][0]>row[0][1]){v[2]=(0).fSub(v[2]);}
return v;})();return{"perspective":accurate(perspective),"translate":accurate(translate),"scale":accurate(scale),"skew":accurate(skew),"quaternion":accurate(quaternion)};};var lerp=function(v,v2,delta){var scale1=delta;var scale2=(1).fSub(delta);return combine(v2,v,scale1,scale2);};var slerp=function(v,v2,delta){var scale1=1;var product=dot(v,v2);product=Math.min(Math.max(product,-1),1);if(product<0){product=(0).fSub(product);scale1=-1;}
if(Math.abs(product.fSub(1))<1e-5){return v;}
var theta=Math.acos(product);var w=Math.sin(delta.fMul(theta)).fDiv(Math.sqrt((1).fSub(product.fSqu())));scale1=scale1.fMul(Math.cos(delta.fMul(theta)).fSub(product.fMul(w)));var scale2=w;return combine(v2,v,scale1,scale2);};var interpolate=function(m,m2,delta){if(delta===0){return m;}
if(delta===1){return m2;}
var t=getTransform(initialize(m));var t2=getTransform(initialize(m2));var r=clone(matrix);r=perspective(r,lerp(t["perspective"],t2["perspective"],delta));r=translate(r,lerp(t["translate"],t2["translate"],delta));r=scale(r,lerp(t["scale"],t2["scale"],delta));r=skew(r,lerp(t["skew"],t2["skew"],delta));r=quaternion(r,lerp(t["quaternion"],t2["quaternion"],delta));return r;};this.setMatrix3d=function(){matrix=multiply(matrix,initialize.apply(null,arguments));transform=undefined;return this;};this.setMatrix=function(a,b,c,d,e,f){matrix=multiply(matrix,initialize(a,b,c,d,e,f));transform=undefined;return this;};this.setPerspective3d=function(px,py,pz,r){this.setMatrix3d(1,0,0,px,0,1,0,py,0,0,1,pz,0,0,0,r);return this;};this.setPerspective=function(d){if(d!=0){this.setPerspective3d(0,0,(-1).fDiv(d),1);}
return this;};this.setTranslate3d=function(tx,ty,tz){this.setMatrix3d(1,0,0,0,0,1,0,0,0,0,1,0,tx,ty,tz,1);return this;};this.setTranslate=function(tx){var ty=(arguments.length>1?arguments[1]:0);this.setTranslate3d(tx,ty,0);return this;};this.setTranslateX=function(tx){this.setTranslate(tx,0);return this;};this.setTranslateY=function(ty){this.setTranslate(0,ty);return this;};this.setTranslateZ=function(tz){this.setTranslate3d(0,0,tz);return this;};this.setScale3d=function(sx,sy,sz){this.setMatrix3d(sx,0,0,0,0,sy,0,0,0,0,sz,0,0,0,0,1);return this;};this.setScale=function(sx){var sy=(arguments.length>1?arguments[1]:sx);this.setScale3d(sx,sy,1);return this;};this.setScaleX=function(sx){this.setScale(sx,1);return this;};this.setScaleY=function(sy){this.setScale(1,sy);return this;};this.setScaleZ=function(sz){this.setScale3d(1,1,sz);return this;};this.setRotate3d=function(x,y,z,a){var ah=a.fDiv(2);var sc=sin(ah).fMul(cos(ah));var sq=sin(ah).fMul(sin(ah));this.setMatrix3d((1).fSub((2).fMul((y.fMul(y).fAdd(z.fMul(z))).fMul(sq))),(2).fMul(x.fMul(y).fMul(sq).fAdd(z.fMul(sc))),(2).fMul(x.fMul(z).fMul(sq).fSub(y.fMul(sc))),0,(2).fMul(x.fMul(y).fMul(sq).fSub(z.fMul(sc))),(1).fSub((2).fMul((x.fMul(x).fAdd(z.fMul(z))).fMul(sq))),(2).fMul(y.fMul(z).fMul(sq).fAdd(x.fMul(sc))),0,(2).fMul(x.fMul(z).fMul(sq).fAdd(y.fMul(sc))),(2).fMul(y.fMul(z).fMul(sq).fSub(x.fMul(sc))),(1).fSub((2).fMul((x.fMul(x).fAdd(y.fMul(y))).fMul(sq))),0,0,0,0,1);return this;};this.setRotate=function(a){var x=(arguments.length>1?arguments[1]:0);var y=(arguments.length>2?arguments[2]:0);this.setRotate3d(x,y,1,a);return this;};this.setRotateX=function(a){this.setRotate3d(1,0,0,a);return this;};this.setRotateY=function(a){this.setRotate3d(0,1,0,a);return this;};this.setRotateZ=function(a){this.setRotate3d(0,0,1,a);return this;};this.setSkew3d=function(ax,ay,az){this.setMatrix3d(1,0,0,0,ax,1,0,0,ay,az,1,0,0,0,0,1);return this;};this.setSkew=function(ax){var ay=(arguments.length>1?arguments[1]:0);this.setMatrix3d(1,tan(ay),0,0,tan(ax),1,0,0,0,0,1,0,0,0,0,1);return this;};this.setSkewX=function(ax){this.setSkew(ax,0);return this;};this.setSkewY=function(ay){this.setSkew(0,ay);return this;};this.getMatrix3d=function(){var m=matrix;return[m[0][0],m[0][1],m[0][2],m[0][3],m[1][0],m[1][1],m[1][2],m[1][3],m[2][0],m[2][1],m[2][2],m[2][3],m[3][0],m[3][1],m[3][2],m[3][3]];};this.getMatrix=function(){var m=matrix;return[m[0][0],m[0][1],m[1][0],m[1][1],m[3][0],m[3][1]];};this.getPerspective=function(){transform=transform||getTransform(matrix);return transform["perspective"];};this.getTranslate=function(){transform=transform||getTransform(matrix);return transform["translate"];};this.getScale=function(){transform=transform||getTransform(matrix);return transform["scale"];};this.getSkew=function(){transform=transform||getTransform(matrix);return transform["skew"];};this.getQuaternion=function(){transform=transform||getTransform(matrix);return transform["quaternion"];};}
var LittleEndian=(function(){var b=new ArrayBuffer(2);new DataView(b).setInt16(0,1,true);return new Int16Array(b)[0]==1;})();var Runtime=(function(){var img=new Image();img.src="";return img.src.split(":")[0];})();var SupportAudio=["wav","ogg","mp3","aac","m4a","m4r"];var SupportImage=["bmp","jpg","gif","png"];var SupportZip=["zip","apk","ipa","osz","mcz"];var SupportAPI=function(n){switch(n){case"File":return!isUndefined(window.Blob&&window.File&&window.FileList&&window.FileReader&&window.URL);break;case"TypedArrays":return!isUndefined(window.ArrayBuffer&&window.Int8Array&&window.Int16Array&&window.Int32Array&&window.Uint8Array&&window.Uint8ClampedArray&&window.Uint16Array&&window.Uint32Array&&window.Float32Array&&window.Float64Array&&window.DataView);break;case"Canvas":return!isUndefined(document.createElement("canvas")&&document.createElement("canvas").getContext("2d")&&document.createElement("canvas").getContext("2d").drawImage);break;case"Audio":return!isUndefined(window.AudioContext);break;case"MIDI":return!isUndefined(navigator.requestMIDIAccess);break;case"UserMedia":return!isUndefined(navigator.getUserMedia);break;case"Gamepads":return!isUndefined(navigator.getGamepads);break;}};var IncludeAgent=function(n){switch(n){case"MSIE":case"Mozilla":case"Chrome":case"AppleWebKit":case"Safari":case"Mobile Safari":case"UCBrowser":case"MQQBrowser":case"QQ":case"MicroMessenger":return((" "+navigator.userAgent).indexOf(" "+n+"/")!=-1);break;}};function getChecked(t){var c=(typeof t=="string"?document.getElementById(t):t);if(c){return c.checked;}}
function setChecked(t,v){var c=(typeof t=="string"?document.getElementById(t):t);if(c){c.checked=v;}}
function getSelected(t){var l=(arguments.length>1?arguments[1]:-1);if(l!=-1){var n=(t.startsWith("select")?t.slice(6):t);document.getElementsByName(n).forEach(function(a){var i=a.index;if(i==l){return a.options[a.selectedIndex].value;}});}
else{var s=(typeof t=="string"?document.getElementById(t):t);if(s&&s.options&&s.options[s.selectedIndex]){return s.options[s.selectedIndex].value;}}}
function setSelected(t,v){var s=(typeof t=="string"?document.getElementById(t):t);if(s&&s.options){for(var i=0;i<s.options.length;i++){if(s.options[i].value==v){s.options[i].selected=true;return true;}}}
return false;}
function getSelectedIndex(t){var s=(typeof t=="string"?document.getElementById(t):t);if(s&&s.options){return s.selectedIndex;}}
function setSelectedIndex(t,v){var s=(typeof t=="string"?document.getElementById(t):t);if(s&&s.options){if(s.options[i].length>v){s.options[v].selected=true;return true;}}
return false;}
function getImgType(buffer){switch(buffer[0]){case 0x42:return"bmp";break;case 0xFF:return"jpeg";break;case 0x47:return"gif";break;case 0x89:return"png";break;}}
function getImgSrc(buffer){if(buffer.length==0){return"";}
var type=getImgType(buffer);if((type=="bmp")&&(buffer.getInt16(28,true)==32)){var offset=buffer.getInt32(10,true);var width=buffer.getInt32(18,true);var height=buffer.getInt32(22,true);var cvs=document.createElement("canvas");cvs.width=width;cvs.height=height;var ctx=cvs.getContext("2d");var d=ctx.getImageData(0,0,cvs.width,cvs.height);var p=offset;for(var y=height-1;y>-1;y--){for(var x=0;x<width;x++){var n=(y*width+x)*4;d.data[n+2]=buffer[p];d.data[n+1]=buffer[p+1];d.data[n]=buffer[p+2];d.data[n+3]=buffer[p+3];p+=4;}}
ctx.putImageData(d,0,0);return cvs.toDataURL("image/png");}
else{return"data:image/"+(type=="jpeg"?"jpg":type)+";base64,"+buffer.getBase64();}}
function getImgSize(buffer){if(buffer.length==0){return"0×0";}
var img=document.createElement("img");img.src=getImgSrc(buffer);return img.width.toString()+"×"+img.height.toString();}
function getFontSize(f){var r=0;var a=f.split(" ");for(var i=0;i<a.length;i++){if((a[i].length>2)&&(a[i].slice(a[i].length-2,a[i].length)=="px")){var s;try{s=parseInt(a[i].slice(0,a[i].length-2),10);if(isNaN(s)){s=0;}}catch(e){s=0;}
if(s!=0){r=s;break;}}}
return r;}
function setFontSize(f,n){var a=f.split(" ");for(var i=0;i<a.length;i++){if((a[i].length>2)&&(a[i].slice(a[i].length-2,a[i].length)=="px")){a[i]=n.toString()+"px";break;}}
return a.join(" ");}
function MillisecondToTime(t){var ms=Math.round(t);var m=ms/60000|0;ms-=m*60000;var s=ms/1000|0;ms-=s*1000;return m.toString()+":"+s.toString().padStart(2,"0")+"."+ms.toString();}
function CheckValue(t){var d=(arguments.length>1?arguments[1]:undefined);return(isUndefined(t)?d:t);}
function CheckNumber(t){var d=(arguments.length>1?arguments[1]:undefined);return(isNaN(t)?d:t);}
function SortNumber(a,b){var na=parseFloat(a);var nb=parseFloat(b);if(isNaN(na)||isNaN(nb)){na=a;nb=b;}
return na-nb;}
function SortNumbers(a,b){var r=0;var l=0;while(r==0){if((a.length>l)&&(b.length>l)){if(!isUndefined(a[l])&&!isUndefined(b[l])){var na=parseFloat(a[l]);var nb=parseFloat(b[l]);if((!isNaN(na))&&(!isNaN(nb))){if(na==nb){l+=1;}
else{return na-nb;}}
else{return a[l]-b[l];}}
else{return 1;}}
else{return a.length-b.length;}}
return r;}
window.Module={"src":{"wave":"","ai":""},"data":{"wave":{"pvtFromFft":function(pcm){var v=[];return v;}},"ai":{"noteFromPvt":function(pvt){var v=[];return v;}}},"set":function(module,key){if(this["src"][module]){localStorage["module_"+module+"_key"]=key;}},"load":function(module,name){if(!this["data"][module][name]){if(this["src"][module]){var key=localStorage["module_"+module+"_key"]||"0000000000000000";key=key.padEnd(16,"0").splitEvery(8);try{this["data"][module]=new Function("return "+new Uint8Array().fromBase64(this["src"][module]).cryptDES(false,new Uint8Array().fromText(key[0]),new Uint8Array().fromText(key[1])).getText())();}
catch(e){this["data"][module]={};}}}
return this["data"][module][name];}};</script><script type="text/javascript">"use strict";function Mst(fileInfo){var buffer=fileInfo.buffer;var ext=fileInfo.extension[0];var isValid=false;var Stutas;var File;var Raw;var Semi;var Index;var Buffer={};var Text={};var reset=function(){var m=(arguments.length>0?arguments[0]:"all");switch(m){case"preview":Text["pngbms"]={};Text["pngtja"]={};Text["pngosu"]={};Text["pngimd"]={};Text["pngmc"]={};Text["pngaff"]={};Text["pngtxt"]={};Text["htmlbms"]={};Text["htmltja"]={};Text["htmlosu"]={};Text["htmlimd"]={};Text["htmlmc"]={};Text["htmlaff"]={};Text["htmltxt"]={};break;case"all":isValid=false;Stutas={};Semi=getSemi();Index=0;Buffer["bmsbms"]={};Buffer["bmsbme"]={};Buffer["bmsbml"]={};Buffer["bmspms"]={};Buffer["dtx"]={};Buffer["dtxdrum"]={};Buffer["dtxguitar"]={};Buffer["dtxbass"]={};Buffer["dtxdrumguitar"]={};Buffer["dtxdrumbass"]={};Buffer["dtxguitarbass"]={};Buffer["dtxdrumguitarbass"]={};Buffer["msd"]={};Buffer["smsm"]={};Buffer["smsma"]={};Buffer["smssc"]={};Buffer["dwi"]={};Buffer["ksf"]={};Buffer["ucs"]={};Buffer["dance"]={};Buffer["tjataiko"]={};Buffer["tjajube"]={};Buffer["osuosu"]=[];Buffer["osutaiko"]=[];Buffer["osuctb"]=[];Buffer["osumania"]=[];Buffer["xmlyddr"]=[];Buffer["xmlydsd"]=[];Buffer["xmlmde"]=[];Buffer["xmldynamix"]=[];Buffer["xmlqqx5idol"]=[];Buffer["xmlqqx5crescent"]=[];Buffer["xmlqqx5pinball"]=[];Buffer["xmlqqx5classic"]=[];Buffer["xmlqqx5bubble"]=[];Buffer["vox"]=[];Buffer["ksh"]=[];Buffer["imd"]=[];Buffer["mde"]=[];Buffer["txtcytus"]=[];Buffer["txtcytusversion2"]=[];Buffer["txtcytus2"]=[];Buffer["txtbangdream"]=[];Buffer["txtmusync"]=[];Buffer["txtmusyncencrypt"]=[];Buffer["jsondeemo"]=[];Buffer["jsonimd"]=[];Buffer["mckey"]=[];Buffer["mcstep"]=[];Buffer["mcdj"]=[];Buffer["mccatch"]=[];Buffer["mcpad"]=[];Buffer["mctaiko"]=[];Buffer["mcring"]=[];Buffer["mcslide"]=[];Buffer["c2s"]=[];Buffer["aff"]=[];Buffer["drb"]=[];Buffer["mst"]={};Text["bmsbms"]={};Text["bmsbme"]={};Text["bmsbml"]={};Text["bmspms"]={};Text["dtx"]={};Text["dtxdrum"]={};Text["dtxguitar"]={};Text["dtxbass"]={};Text["dtxdrumguitar"]={};Text["dtxdrumbass"]={};Text["dtxguitarbass"]={};Text["dtxdrumguitarbass"]={};Text["msd"]={};Text["smsm"]={};Text["smsma"]={};Text["smssc"]={};Text["dwi"]={};Text["ksf"]={};Text["ucs"]={};Text["dance"]={};Text["tjataiko"]={};Text["tjajube"]={};Text["osuosu"]=[];Text["osutaiko"]=[];Text["osuctb"]=[];Text["osumania"]=[];Text["xmlyddr"]=[];Text["xmlydsd"]=[];Text["xmlmde"]=[];Text["xmldynamix"]=[];Text["xmlqqx5idol"]=[];Text["xmlqqx5crescent"]=[];Text["xmlqqx5pinball"]=[];Text["xmlqqx5classic"]=[];Text["xmlqqx5bubble"]=[];Text["vox"]=[];Text["ksh"]=[];Text["imd"]=[];Text["mde"]=[];Text["txtcytus"]=[];Text["txtcytusversion2"]=[];Text["txtcytus2"]=[];Text["txtbangdream"]=[];Text["txtmusync"]=[];Text["txtmusyncencrypt"]=[];Text["jsondeemo"]=[];Text["jsonimd"]=[];Text["mckey"]=[];Text["mcstep"]=[];Text["mcdj"]=[];Text["mccatch"]=[];Text["mcpad"]=[];Text["mctaiko"]=[];Text["mcring"]=[];Text["mcslide"]=[];Text["c2s"]=[];Text["aff"]=[];Text["drb"]=[];Text["mst"]={};Text["pngbms"]={};Text["pngtja"]={};Text["pngosu"]={};Text["pngimd"]={};Text["pngmc"]={};Text["pngaff"]={};Text["pngtxt"]={};Text["htmlbms"]={};Text["htmltja"]={};Text["htmlosu"]={};Text["htmlimd"]={};Text["htmlmc"]={};Text["htmlaff"]={};Text["htmltxt"]={};break;}};var syncFileList=function(){File=[];for(var index=0;index<Raw["file"].length;index++){File.push({"path":Raw["file"][index]["path"],"buffer":new Uint8Array().fromBase64(Raw["file"][index]["base64"])});}
var list=[];for(var index=0;index<File.length;index++){list[index]={"path":File[index]["path"]};}
SetFileList("selectMstList",list);};var checkInfo=function(){var v=[];var f=new FileInfo(File[Index]["path"]);v.push("path: "+f.directory);v.push("name: "+f.name);v.push("type: "+f.extension[0]);v.push("byte: "+File[Index]["buffer"].length+" ("+File[Index]["buffer"].length.toByteLength(2)+")");return v.join("\r\n");};var newItem=function(mode){var r={};switch(mode){case"when":r["b"]=0;r["n"]=0;r["t"]=0;break;case"where":r["x"]=-1;r["y"]=-1;r["z"]=-1;break;case"link":r["b"]=-1;r["c"]=-1;r["a"]=-1;break;case"size":r["w"]=-1;r["h"]=-1;r["d"]=-1;break;case"vector":r["when"]=newItem("when");r["where"]=newItem("where");break;case"line":r["vector"]=[newItem("vector")];r["clockwise"]="";r["follow"]="";r["combo"]=0;r["type"]="";r["curve"]="";r["name"]="";r["degree"]=0;break;case"flag":r["appear"]=newItem("where");r["degree"]=0;r["style"]="";r["size"]=newItem("size");r["catch"]="";r["flick"]="";r["chain"]="";r["click"]="";r["auto"]="";r["invisible"]="";r["invalid"]="";r["fake"]="";r["secret"]="";r["damage"]=0;r["parallel"]="";r["colorSkip"]=0;r["fever"]="";r["skill"]="";r["ex"]="";break;case"argb":r["a"]=-1;r["r"]=-1;r["g"]=-1;r["b"]=-1;break;case"beat":r["when"]=newItem("when");r["bpm"]=125;r["bpn"]=4;r["dpb"]=192;r["fpn"]=1;r["lpn"]=4;break;case"note":r["when"]=newItem("when");r["where"]=newItem("where");r["link"]=newItem("link");r["line"]=newItem("line");r["flag"]=newItem("flag");r["trigger"]=[];break;case"effect":r["when"]=newItem("when");r["kind"]="";r["while"]="";r["what"]="";r["path"]="";r["spriteID"]=-1;r["text"]="";r["where"]=newItem("where");r["where2"]=newItem("where");r["clip"]=newItem("where");r["clip2"]=newItem("where");r["backColor"]=newItem("argb");r["foreColor"]=newItem("argb");r["size"]=newItem("size");r["angle"]=0;r["opacity"]=1;r["volume"]=1;r["panner"]=0;r["pitch"]=60;r["offset"]=0;r["duration"]=0;r["rate"]=0;r["interval"]=0;r["speed"]=1;r["frame"]=0;r["loop"]=0;r["repeat"]=0;r["playback"]=0;r["fix"]=false;r["sampleSet"]="normal";r["sampleSound"]="";r["sampleIndex"]=0;r["comment"]="";r["parameter"]={};r["addition"]={};r["flag"]={};r["change"]=[];break;case"status":r["when"]=newItem("when");r["name"]="";r["value"]=undefined;r["value2"]=undefined;break;case"transform":r["when"]=newItem("when");r["reset"]=false;r["translateX"]=0;r["translateY"]=0;r["translateZ"]=0;r["scaleX"]=1;r["scaleY"]=1;r["scaleZ"]=1;r["rotateX"]=0;r["rotateY"]=0;r["rotateZ"]=0;r["skewX"]=0;r["skewY"]=0;r["skewZ"]=0;r["perspective"]=0;r["duration"]=0;r["easing"]="";break;case"info":r["min"]={"when":newItem("when")};r["max"]={"when":newItem("when")};r["length"]={"when":newItem("when")};r["start"]={"when":newItem("when")};r["bpm"]=125;r["bpn"]=4;r["key"]=0;r["name"]="";r["comment"]="";r["bpmBase"]=0;r["playMode"]="";r["player"]=0;r["difficulty"]="";r["level"]=0;r["rank"]=0;r["defExRank"]=0;r["volWav"]=1;r["cdda"]=0;r["stageFile"]="";r["banner"]="";r["background"]="";r["videoFile"]="";r["videoFps"]=15;r["videoColors"]=16;r["videoDelay"]=0;r["movie"]="";r["midFile"]="";r["charFile"]="";r["pathWav"]="";r["materialsWav"]="";r["materialsBmp"]="";r["email"]="";r["url"]="";r["magnification"]="";r["message"]="";r["previewImage"]="";r["resultImage"]="";r["levelDrum"]=0;r["levelGuitar"]=0;r["levelBass"]=0;r["chipPalette"]="";r["chartVersion"]="";r["chartName"]="";r["chartDescription"]="";r["chartStyle"]="";r["radarValues"]="";r["meterType"]="";r["credit"]="";r["previewId"]="";r["cover"]="";r["discImage"]="";r["cdImage"]="";r["cdTitle"]="";r["lyricsPath"]="";r["preview"]="";r["instrumentTrack"]="";r["sampleStart"]="";r["sampleLength"]="";r["selectable"]="";r["attacks"]="";r["displayTitle"]="";r["displayArtist"]="";r["displayBpm"]="";r["randSeed"]="";r["randStart"]="";r["randFolder"]="";r["randList"]="";r["course"]=0;r["side"]=2;r["balloon"]=[];r["bgmVolumn"]=1;r["seVolumn"]=1;r["previewStart"]=0;r["life"]=0;r["scoreInit"]=0;r["scoreDiff"]=0;r["scoreMode"]=1;r["countdown"]=0;r["stackLeniency"]=0.7
r["letterboxInBreaks"]=0;r["widescreenStoryboard"]=0;r["storyFireInFront"]=0;r["specialStyle"]=0;r["epilepsyWarning"]=0;r["useSkinSprites"]=0;r["editorBookmarks"]=0;r["bookmarks"]=[];r["distanceSpacing"]=1
r["beatDivisor"]=2;r["gridSize"]=4;r["timelineZoom"]=1;r["beatmapID"]=0;r["beatmapSetID"]=-1;r["hpDrainRate"]=5;r["circleSize"]=5;r["overallDifficulty"]=5;r["approachRate"]=5;r["sliderMultiplier"]=1.4;r["sliderTickRate"]=1;r["colorBack"]=undefined;r["colorGroup"]=[];r["titleImage"]="";r["artistImage"]="";r["changeSeVolumn"]=true;r["seGain"]=0.5;r["seType"]="";r["seOffset"]=0;r["previewDuration"]=0;r["id"]="";r["speed"]="";r["interval"]="";r["testDivide"]="";r["testSpeed"]="";r["testSave"]="";r["testLock"]="";r["testEditMode"]="";r["backgroundType"]="";r["layerType"]="";r["icon"]="";r["noteFactoryPrepare"]="";r["defaultStartTunnel"]="";r["defaultWeatherUIB"]="";r["defaultCurtainUIC"]="";r["defaultChiefClimax"]="";break;case"file":r["path"]="";r["base64"]="";break;}
return r;};var beatFromNote=function(data,note){var d=(arguments.length>2?arguments[2]:0);note=CheckNumber(note);if(isUndefined(note)){return undefined;}
if(isNaN(note)){return NaN;}
var r=0;var zeroStart=false;if(zeroStart){if(note<0){var data=(function(){var v={"beat":[]};for(var i=0;i<data["beat"].length;i++){if(data["beat"][i]["when"]["n"]<=0){v["beat"].push(copyObject(data["beat"][i]));}
else{if(!v["beat"].length){v["beat"].push(mergeObject(data["beat"][i],{"when":{"b":0,"n":0,"t":0}}));}
else if(v["beat"][v["beat"].length-1]["when"]["n"]<0){v["beat"].push(mergeObject(v["beat"][v["beat"].length-1],{"when":{"b":0,"n":0,"t":0}}));}
break;}}
return v;})();for(var i=data["beat"].length-1;i>-1;i--){var u=data["beat"][i]["bpn"];if(data["beat"].length==1){r=r.fAdd(note.fMul(u));break;}
else if((i-1>-1)&&(note<=data["beat"][i-1]["when"]["n"])){r=r.fAdd(data["beat"][i-1]["when"]["n"].fSub(data["beat"][i]["when"]["n"]).fMul(u));}
else{r=r.fAdd(note.fSub(data["beat"][i]["when"]["n"]).fMul(u));break;}}}
else{var data=(function(){var v={"beat":[]};for(var i=data["beat"].length-1;i>-1;i--){if(data["beat"][i]["when"]["n"]>=0){v["beat"].unshift(copyObject(data["beat"][i]));}
else{if(!v["beat"].length){v["beat"].push(mergeObject(data["beat"][i],{"when":{"b":0,"n":0,"t":0}}));}
else if(v["beat"][0]["when"]["n"]>0){v["beat"].unshift(mergeObject(data["beat"][i],{"when":{"b":0,"n":0,"t":0}}));}
break;}}
return v;})();for(var i=0;i<data["beat"].length;i++){var u=data["beat"][i]["bpn"];if(data["beat"].length==1){r=r.fAdd(note.fMul(u));break;}
else if((i+1<data["beat"].length)&&(data["beat"][i+1]["when"]["n"]<=note)){r=r.fAdd(data["beat"][i+1]["when"]["n"].fSub(data["beat"][i]["when"]["n"]).fMul(u));}
else{r=r.fAdd(note.fSub(data["beat"][i]["when"]["n"]).fMul(u));break;}}}}
else{r=(data["beat"].length&&data["beat"][0]&&data["beat"][0]["when"]&&data["beat"][0]["when"]["b"]?data["beat"][0]["when"]["b"]:r);for(var i=0;i<data["beat"].length;i++){var u=data["beat"][i]["bpn"];if((i+1<data["beat"].length)&&(note>=data["beat"][i+1]["when"]["n"])){r=(!isUndefined(data["beat"][i+1]["when"]["b"])?data["beat"][i+1]["when"]["b"]:r.fAdd(data["beat"][i+1]["when"]["n"].fSub(data["beat"][i]["when"]["n"]).fMul(u)));}
else{r=r.fAdd(note.fSub(data["beat"][i]["when"]["n"]).fMul(u));break;}}}
return r.attach(d).toAbbreviated(6).toAccurated();};var noteFromBeat=function(data,beat){var d=(arguments.length>2?arguments[2]:0*4);beat=CheckNumber(beat);if(isUndefined(beat)){return undefined;}
if(isNaN(beat)){return NaN;}
var r=0;var zeroStart=false;if(zeroStart){if(beat<0){var data=(function(){var v={"beat":[]};for(var i=0;i<data["beat"].length;i++){if(data["beat"][i]["when"]["b"]<=0){v["beat"].push(copyObject(data["beat"][i]));}
else{if(!v["beat"].length){v["beat"].push(mergeObject(data["beat"][i],{"when":{"b":0,"n":0,"t":0}}));}
else if(v["beat"][v["beat"].length-1]["when"]["b"]<0){v["beat"].push(mergeObject(v["beat"][v["beat"].length-1],{"when":{"b":0,"n":0,"t":0}}));}
break;}}
return v;})();for(var i=data["beat"].length-1;i>-1;i--){var u=data["beat"][i]["bpn"];if(data["beat"].length==1){r=r.fAdd(beat.fDiv(u));break;}
else if((i-1>-1)&&(beat<=data["beat"][i-1]["when"]["b"])){r=r.fAdd(data["beat"][i-1]["when"]["b"].fSub(data["beat"][i]["when"]["b"]).fDiv(u));}
else{r=r.fAdd(beat.fSub(data["beat"][i]["when"]["b"]).fDiv(u));break;}}}
else{var data=(function(){var v={"beat":[]};for(var i=data["beat"].length-1;i>-1;i--){if(data["beat"][i]["when"]["b"]>=0){v["beat"].unshift(copyObject(data["beat"][i]));}
else{if(!v["beat"].length){v["beat"].push(mergeObject(data["beat"][i],{"when":{"b":0,"n":0,"t":0}}));}
else if(v["beat"][0]["when"]["b"]>0){v["beat"].unshift(mergeObject(data["beat"][i],{"when":{"b":0,"n":0,"t":0}}));}
break;}}
return v;})();for(var i=0;i<data["beat"].length;i++){var u=data["beat"][i]["bpn"];if(data["beat"].length==1){r=r.fAdd(beat.fDiv(u));break;}
else if((i+1<data["beat"].length)&&(data["beat"][i+1]["when"]["b"]<=beat)){r=r.fAdd(data["beat"][i+1]["when"]["b"].fSub(data["beat"][i]["when"]["b"]).fDiv(u));}
else{r=r.fAdd(beat.fSub(data["beat"][i]["when"]["b"]).fDiv(u));break;}}}}
else{r=(data["beat"].length&&data["beat"][0]&&data["beat"][0]["when"]&&data["beat"][0]["when"]["n"]?data["beat"][0]["when"]["n"]:r);for(var i=0;i<data["beat"].length;i++){var u=data["beat"][i]["bpn"];if((i+1<data["beat"].length)&&(beat>=data["beat"][i+1]["when"]["b"])){r=(!isUndefined(data["beat"][i+1]["when"]["n"])?data["beat"][i+1]["when"]["n"]:r.fAdd(data["beat"][i+1]["when"]["b"].fSub(data["beat"][i]["when"]["b"]).fDiv(u)));}
else{r=r.fAdd(beat.fSub(data["beat"][i]["when"]["b"]).fDiv(u));break;}}}
return r.attach(d).toAbbreviated(6).toAccurated();};var beatFromTime=function(data,time){var d=(arguments.length>2?arguments[2]:0);time=CheckNumber(time);if(isUndefined(time)){return undefined;}
if(isNaN(time)){return NaN;}
var r=0;var zeroStart=false;if(zeroStart){if(time<0){var data=(function(){var v={"beat":[]};for(var i=0;i<data["beat"].length;i++){if(data["beat"][i]["when"]["t"]<=0){v["beat"].push(copyObject(data["beat"][i]));}
else{if(!v["beat"].length){v["beat"].push(mergeObject(data["beat"][i],{"when":{"b":0,"n":0,"t":0}}));}
else if(v["beat"][v["beat"].length-1]["when"]["t"]<0){v["beat"].push(mergeObject(v["beat"][v["beat"].length-1],{"when":{"b":0,"n":0,"t":0}}));}
break;}}
return v;})();for(var i=data["beat"].length-1;i>-1;i--){var u=(60000).fDiv(data["beat"][i]["bpm"]);if(data["beat"].length==1){r=r.fAdd(time.fDiv(u));break;}
else if((i-1>-1)&&(time<=data["beat"][i-1]["when"]["t"])){r=r.fAdd(data["beat"][i-1]["when"]["t"].fSub(data["beat"][i]["when"]["t"]).fDiv(u));}
else{r=r.fAdd(time.fSub(data["beat"][i]["when"]["t"]).fDiv(u));break;}}}
else{var data=(function(){var v={"beat":[]};for(var i=data["beat"].length-1;i>-1;i--){if(data["beat"][i]["when"]["t"]>=0){v["beat"].unshift(copyObject(data["beat"][i]));}
else{if(!v["beat"].length){v["beat"].push(mergeObject(data["beat"][i],{"when":{"b":0,"n":0,"t":0}}));}
else if(v["beat"][0]["when"]["t"]>0){v["beat"].unshift(mergeObject(data["beat"][i],{"when":{"b":0,"n":0,"t":0}}));}
break;}}
return v;})();for(var i=0;i<data["beat"].length;i++){var u=(60000).fDiv(data["beat"][i]["bpm"]);if(data["beat"].length==1){r=r.fAdd(time.fDiv(u));break;}
else if((i+1<data["beat"].length)&&(data["beat"][i+1]["when"]["t"]<=time)){r=r.fAdd(data["beat"][i+1]["when"]["t"].fSub(data["beat"][i]["when"]["t"]).fDiv(u));}
else{r=r.fAdd(time.fSub(data["beat"][i]["when"]["t"]).fDiv(u));break;}}}}
else{r=(data["beat"].length&&data["beat"][0]&&data["beat"][0]["when"]&&data["beat"][0]["when"]["b"]?data["beat"][0]["when"]["b"]:r);for(var i=0;i<data["beat"].length;i++){var u=(60000).fDiv(data["beat"][i]["bpm"]);if((i+1<data["beat"].length)&&(time>=data["beat"][i+1]["when"]["t"])){r=(!isUndefined(data["beat"][i+1]["when"]["b"])?data["beat"][i+1]["when"]["b"]:r.fAdd(data["beat"][i+1]["when"]["t"].fSub(data["beat"][i]["when"]["t"]).fDiv(u)));}
else{r=r.fAdd(time.fSub(data["beat"][i]["when"]["t"]).fDiv(u));break;}}}
return r.attach(d).toAbbreviated(6).toAccurated();};var timeFromBeat=function(data,beat){beat=CheckNumber(beat);if(isUndefined(beat)){return undefined;}
if(isNaN(beat)){return NaN;}
var r=0;var zeroStart=false;if(zeroStart){if(beat<0){var data=(function(){var v={"beat":[]};for(var i=0;i<data["beat"].length;i++){if(data["beat"][i]["when"]["b"]<=0){v["beat"].push(copyObject(data["beat"][i]));}
else{if(!v["beat"].length){v["beat"].push(mergeObject(data["beat"][i],{"when":{"b":0,"n":0,"t":0}}));}
else if(v["beat"][v["beat"].length-1]["when"]["b"]<0){v["beat"].push(mergeObject(v["beat"][v["beat"].length-1],{"when":{"b":0,"n":0,"t":0}}));}
break;}}
return v;})();for(var i=data["beat"].length-1;i>-1;i--){var u=(60000).fDiv(data["beat"][i]["bpm"]);if(data["beat"].length==1){r=r.fAdd(beat.fMul(u));break;}
else if((i-1>-1)&&(beat<=data["beat"][i-1]["when"]["b"])){r=r.fAdd(data["beat"][i-1]["when"]["b"].fSub(data["beat"][i]["when"]["b"]).fMul(u));}
else{r=r.fAdd(beat.fSub(data["beat"][i]["when"]["b"]).fMul(u));break;}}}
else{var data=(function(){var v={"beat":[]};for(var i=data["beat"].length-1;i>-1;i--){if(data["beat"][i]["when"]["b"]>=0){v["beat"].unshift(copyObject(data["beat"][i]));}
else{if(!v["beat"].length){v["beat"].push(mergeObject(data["beat"][i],{"when":{"b":0,"n":0,"t":0}}));}
else if(v["beat"][0]["when"]["b"]>0){v["beat"].unshift(mergeObject(data["beat"][i],{"when":{"b":0,"n":0,"t":0}}));}
break;}}
return v;})();for(var i=0;i<data["beat"].length;i++){var u=(60000).fDiv(data["beat"][i]["bpm"]);if(data["beat"].length==1){r=r.fAdd(beat.fMul(u));break;}
else if((i+1<data["beat"].length)&&(data["beat"][i+1]["when"]["b"]<=beat)){r=r.fAdd(data["beat"][i+1]["when"]["b"].fSub(data["beat"][i]["when"]["b"]).fMul(u));}
else{r=r.fAdd(beat.fSub(data["beat"][i]["when"]["b"]).fMul(u));break;}}}}
else{r=(data["beat"].length&&data["beat"][0]&&data["beat"][0]["when"]&&data["beat"][0]["when"]["t"]?data["beat"][0]["when"]["t"]:r);for(var i=0;i<data["beat"].length;i++){var u=(60000).fDiv(data["beat"][i]["bpm"]);if((i+1<data["beat"].length)&&(beat>=data["beat"][i+1]["when"]["b"])){r=(!isUndefined(data["beat"][i+1]["when"]["t"])?data["beat"][i+1]["when"]["t"]:r.fAdd(data["beat"][i+1]["when"]["b"].fSub(data["beat"][i]["when"]["b"]).fMul(u)));}
else{r=r.fAdd(beat.fSub(data["beat"][i]["when"]["b"]).fMul(u));break;}}}
return r.toAbbreviated(6).toAccurated();};var noteFromTime=function(data,time){return noteFromBeat(data,beatFromTime(data,time)).toAbbreviated(6).toAccurated();};var timeFromNote=function(data,note){return timeFromBeat(data,beatFromNote(data,note)).toAbbreviated(6).toAccurated();};var axisFromNote=function(data,note){note=note%1;return(note<0.5?note:(1).fSub(note).fMul(0.999)).fMul(2);};var indexFromCurrent=function(note,current){if(current>-1){for(var i=0;i<note.length;i++){if(note[i]["link"]["c"]==current){return i;}}}
return-1;};var bpmFromBeat=function(beat,type){beat=beat||[];var max=(arguments.length>2?arguments[2]:(function(){var v=0;for(var i=0;i<beat.length;i++){v=(v<beat[i]["when"][type]?beat[i]["when"][type]:v)}
return v;})());var list={};for(var i=0;i<beat.length;i++){var bpm=beat[i]["bpm"];var d=(i<beat.length-1?beat[i+1]["when"][type]:max).fSub(beat[i]["when"][type]);if(list[bpm]){list[bpm]+=d;}
else{list[bpm]=d;}}
var v=0;var l=0;for(var bpm in list){if(list[bpm]>l){v=parseFloat(bpm);l=list[bpm];}}
return v;};var getFileIndex=function(name){if(Raw["file"]){for(var i=0;i<Raw["file"].length;i++){if(Raw["file"][i]["path"]==name){return i;}}}
return-1;};var getBeat=function(data,time){for(var i=0;i<data["beat"].length;i++){if((!i||(data["beat"][i]["when"]["t"]<=time))&&((i+1>=data["beat"].length)||(data["beat"][i+1]["when"]["t"]>time))){return data["beat"][i];}}};var getMainBpm=function(data){var bpm=125;var v=[];var add=function(bpm,d){for(var i=0;i<v.length;i++){if(v[i][0]==bpm){v[i][1]=v[i][1].fAdd(d);return;}}
v.push([bpm,d]);};for(var i=0;i<data["beat"].length;i++){add(data["beat"][i]["bpm"],(i+1<data["beat"].length?data["beat"][i+1]["when"]["b"].fSub(data["beat"][i]["when"]["b"]):data["info"]["max"]["when"]["b"].fSub(data["beat"][i]["when"]["b"])));}
var d=0;for(var i=0;i<v.length;i++){if(d<v[i][1]){d=v[i][1];bpm=v[i][0];}}
return bpm.toAbbreviated(6).toAccurated();};var getMainBpn=function(data){var bpn=4;var v=[];var add=function(bpn,d){for(var i=0;i<v.length;i++){if(v[i][0]==bpn){v[i][1]=v[i][1].fAdd(d);return;}}
v.push([bpn,d]);};for(var i=0;i<data["beat"].length;i++){add(data["beat"][i]["bpn"],(i+1<data["beat"].length?data["beat"][i+1]["when"]["b"].fSub(data["beat"][i]["when"]["b"]):data["info"]["max"]["when"]["b"].fSub(data["beat"][i]["when"]["b"])));}
var d=0;for(var i=0;i<v.length;i++){if(d<v[i][1]){d=v[i][1];bpn=v[i][0];}}
return bpn.toAbbreviated(6).toAccurated();};var getEffectIndex=function(data,kind){var v=-1;if(data){var t;for(var i=0;i<data["effect"].length;i++){if(((kind=="")||(data["effect"][i]["kind"]==kind))&&(data["effect"][i]["while"]=="")&&data["effect"][i]["path"]){if(isUndefined(t)){t=data["effect"][i]["when"]["t"].fAdd(data["effect"][i]["offset"]);v=i;}
if(t>data["effect"][i]["when"]["t"].fAdd(data["effect"][i]["offset"])){t=data["effect"][i]["when"]["t"].fAdd(data["effect"][i]["offset"]);v=i;}}}}
return v;};var getEffectInfo=function(data,kind,item){var l=getEffectIndex(data,kind);switch(item){case"offset":return(data&&(l!=-1)?data["effect"][l]["when"]["t"].fAdd(data["effect"][l]["offset"]):newItem("when")["t"]);case"name":return(data&&(l!=-1)?data["effect"][l]["path"]:newItem("info")["name"]);}};var classifyNote=function(note){var r={"tab":[],"hold":[],"slide":[],"drag":[],"all":[]};var d=copyObject(note);for(var i=0;i<d.length;i++){if(indexFromCurrent(note,d[i]["link"]["b"])==-1){var t=[];var n=i;while(true){if(d[n]["link"]["c"]==-1){break;}
t.push(copyObject(d[n]));d[n]["link"]["c"]=-1;if(d[n]["link"]["a"]==-1){break;}
var a=indexFromCurrent(note,d[n]["link"]["a"]);if(a!=-1){n=a;}
else{var l=(function(){for(var j=0;j<d.length;j++){if((d[j]["link"]["c"]!=-1)&&(indexFromCurrent(note,d[j]["link"]["b"])==-1)&&(d[j]["when"]["b"]==d[n]["when"]["b"])&&(d[j]["where"]["x"]==d[n]["where"]["x"])&&(d[j]["where"]["y"]==d[n]["where"]["y"])&&(d[j]["where"]["z"]==d[n]["where"]["z"])&&(d[j]["flag"]["parallel"]==d[n]["flag"]["parallel"])&&((d[j]["flag"]["auto"]&&d[n]["flag"]["auto"])||(!d[j]["flag"]["auto"]&&!d[n]["flag"]["auto"]))&&((d[j]["flag"]["invisible"]&&d[n]["flag"]["invisible"])||(!d[j]["flag"]["invisible"]&&!d[n]["flag"]["invisible"]))&&((d[j]["flag"]["invalid"]&&d[n]["flag"]["invalid"])||(!d[j]["flag"]["invalid"]&&!d[n]["flag"]["invalid"]))&&((d[j]["flag"]["fake"]&&d[n]["flag"]["fake"])||(!d[j]["flag"]["fake"]&&!d[n]["flag"]["fake"]))&&(indexFromCurrent(note,d[j]["link"]["a"])!=-1)){return j;}}
return-1;})();if(l!=-1){d[l]["link"]["c"]=-1;var na=indexFromCurrent(note,d[l]["link"]["a"]);if(na!=-1){n=na;d[n]["link"]["b"]=t[t.length-1]["link"]["c"];t[t.length-1]["link"]["a"]=n;}}
else{break;}}}
if(t.length>0){switch(t.length){case 1:r["tab"].push(t);break;case 2:if(t[0]["when"]["b"]==t[1]["when"]["b"]){r["slide"].push(t);}
else{if((t[0]["where"]["x"]==t[1]["where"]["x"])&&(t[0]["where"]["y"]==t[1]["where"]["y"])&&(t[0]["where"]["z"]==t[1]["where"]["z"])){r["hold"].push(t);}
else{r["drag"].push(t);}}
break;default:r["drag"].push(t);break;}
r["all"].push(t);}}}
var s=function(a,b){if(!isUndefined(a[0]["when"])&&!isUndefined(b[0]["when"])){if(!isUndefined(a[0]["when"]["b"])&&!isUndefined(b[0]["when"]["b"])&&(a[0]["when"]["b"]!=b[0]["when"]["b"])){return a[0]["when"]["b"]-b[0]["when"]["b"];}
else if(!isUndefined(a[0]["when"]["n"])&&!isUndefined(b[0]["when"]["n"])&&(a[0]["when"]["n"]!=b[0]["when"]["n"])){return a[0]["when"]["n"]-b[0]["when"]["n"];}
else if(!isUndefined(a[0]["when"]["t"])&&!isUndefined(b[0]["when"]["t"])&&(a[0]["when"]["t"]!=b[0]["when"]["t"])){return a[0]["when"]["t"]-b[0]["when"]["t"];}}
if(!isUndefined(a[0]["where"])&&!isUndefined(b[0]["where"])){if(!isUndefined(a[0]["where"]["xt"])&&!isUndefined(b[0]["where"]["xt"])&&(a[0]["where"]["xt"]!=b[0]["where"]["xt"])){return a[0]["where"]["xt"]-b[0]["where"]["xt"];}
if(!isUndefined(a[0]["where"]["yt"])&&!isUndefined(b[0]["where"]["yt"])&&(a[0]["where"]["yt"]!=b[0]["where"]["yt"])){return a[0]["where"]["yt"]-b[0]["where"]["yt"];}
if(!isUndefined(a[0]["where"]["zt"])&&!isUndefined(b[0]["where"]["zt"])&&(a[0]["where"]["zt"]!=b[0]["where"]["zt"])){return a[0]["where"]["zt"]-b[0]["where"]["zt"];}
else if(!isUndefined(a[0]["where"]["x"])&&!isUndefined(b[0]["where"]["x"])&&(a[0]["where"]["x"]!=b[0]["where"]["x"])){return a[0]["where"]["x"]-b[0]["where"]["x"];}
else if(!isUndefined(a[0]["where"]["y"])&&!isUndefined(b[0]["where"]["y"])&&(a[0]["where"]["y"]!=b[0]["where"]["y"])){return a[0]["where"]["y"]-b[0]["where"]["y"];}
else if(!isUndefined(a[0]["where"]["z"])&&!isUndefined(b[0]["where"]["z"])&&(a[0]["where"]["z"]!=b[0]["where"]["z"])){return a[0]["where"]["z"]-b[0]["where"]["z"];}}
return a.length-b.length;};r["tab"]=r["tab"].sort(s);r["hold"]=r["hold"].sort(s);r["slide"]=r["slide"].sort(s);r["drag"]=r["drag"].sort(s);r["all"]=r["all"].sort(s);var p=0;var reIndex=function(a){for(var i=0;i<a.length;i++){for(var j=0;j<a[i].length;j++){a[i][j]["link"]["c"]=p+j;a[i][j]["link"]["b"]=(j!=0?a[i][j]["link"]["c"]-1:-1);a[i][j]["link"]["a"]=(j!=a[i].length-1?a[i][j]["link"]["c"]+1:-1);}
p+=a[i].length;}
return a;};p=0;r["all"]=reIndex(r["all"]);return r;};var fillItem=function(index,data,item,mode){var current=(arguments.length>4?arguments[4]:-1);switch(mode){case"when":item=item||{};var beat=newItem("beat");item["b"]=(!isUndefined(item["b"])?item["b"]:beatFromNote(data,item["n"])||beatFromTime(data,item["t"])||beat[mode]["b"]||0).attach(MstOptions["CorrectTime"][index]);item["n"]=(!isUndefined(item["n"])?item["n"]:noteFromBeat(data,item["b"]));item["t"]=(!isUndefined(item["t"])?item["t"]:timeFromBeat(data,item["b"]));break;case"where":item=item||{};var note=newItem("note");item["x"]=(!isUndefined(item["x"])&&(item["x"]>=0)&&(item["x"]<1)?item["x"]:note[mode]["x"]);item["y"]=(!isUndefined(item["y"])&&(item["y"]>=0)&&(item["y"]<1)?item["y"]:note[mode]["y"]);item["z"]=(!isUndefined(item["z"])&&(item["z"]>=0)&&(item["z"]<1)?item["z"]:note[mode]["z"]);break;case"clip":item=item||{};var note=newItem("note");item["x"]=(!isUndefined(item["x"])?item["x"]:note["where"]["x"]);item["y"]=(!isUndefined(item["y"])?item["y"]:note["where"]["y"]);item["z"]=(!isUndefined(item["z"])?item["z"]:note["where"]["z"]);break;case"link":item=item||{};var note=newItem("note");item["b"]=(!isUndefined(item["b"])?item["b"]:note[mode]["b"]);item["c"]=(!isUndefined(item["c"])?item["c"]:current);item["a"]=(!isUndefined(item["a"])?item["a"]:note[mode]["a"]);break;case"size":item=item||{};var note=newItem("note");item["w"]=(!isUndefined(item["w"])?item["w"]:note["flag"][mode]["w"]);item["h"]=(!isUndefined(item["h"])?item["h"]:note["flag"][mode]["h"]);item["d"]=(!isUndefined(item["d"])?item["d"]:note["flag"][mode]["d"]);break;case"vector":item=item||[];for(var i=0;i<item.length;i++){item[i]["when"]=fillItem(index,data,item[i]["when"],"when");item[i]["where"]=fillItem(index,data,item[i]["where"],"clip");}
break;case"line":item=item||{};var note=newItem("note");item["vector"]=fillItem(index,data,item["vector"],"vector");item["clockwise"]=item["clockwise"]||note[mode]["clockwise"];item["follow"]=item["follow"]||note[mode]["follow"];item["combo"]=item["combo"]||note[mode]["combo"];item["type"]=item["type"]||note[mode]["type"];item["curve"]=item["curve"]||note[mode]["curve"];item["name"]=item["name"]||note[mode]["name"];item["degree"]=item["degree"]||note[mode]["degree"];break;case"flag":item=item||{};var note=newItem("note");item["appear"]=fillItem(index,data,item["appear"],"where");item["degree"]=item["degree"]||note[mode]["degree"];item["style"]=item["style"]||note[mode]["style"];item["size"]=fillItem(index,data,item["size"],"size");item["catch"]=item["catch"]||note[mode]["catch"];item["flick"]=item["flick"]||note[mode]["flick"];item["chain"]=item["chain"]||note[mode]["chain"];item["click"]=item["click"]||note[mode]["click"];item["auto"]=item["auto"]||note[mode]["auto"];item["invisible"]=item["invisible"]||note[mode]["invisible"];item["invalid"]=item["invalid"]||note[mode]["invalid"];item["fake"]=item["fake"]||note[mode]["fake"];item["secret"]=item["secret"]||note[mode]["secret"];item["damage"]=item["damage"]||note[mode]["damage"];item["parallel"]=item["parallel"]||note[mode]["parallel"];item["colorSkip"]=item["colorSkip"]||note[mode]["colorSkip"];item["fever"]=item["fever"]||note[mode]["fever"];item["skill"]=item["skill"]||note[mode]["skill"];item["ex"]=item["ex"]||note[mode]["ex"];break;case"argb":var argb=newItem("argb");item=item||{};item["a"]=(!isUndefined(item["a"])&&(item["a"]>=0)&&(item["a"]<=255)?item["a"]:argb["a"]);item["r"]=(!isUndefined(item["r"])&&(item["r"]>=0)&&(item["r"]<=255)?item["r"]:argb["r"]);item["g"]=(!isUndefined(item["g"])&&(item["g"]>=0)&&(item["g"]<=255)?item["g"]:argb["g"]);item["b"]=(!isUndefined(item["b"])&&(item["b"]>=0)&&(item["b"]<=255)?item["b"]:argb["b"]);break;case"change":item=item||[];for(var i=0;i<item.length;i++){item[i]["easing"]=item[i]["easing"]||"";item[i]["when"]=fillItem(index,data,item[i]["when"],"when");item[i]["when2"]=fillItem(index,data,item[i]["when2"],"when");item[i]["value"]=item[i]["value"]||{};item[i]["value2"]=item[i]["value2"]||{};}
break;case"beat":item=item||[];for(var i=0;i<item.length;i++){item[i]["when"]=fillItem(index,data,item[i]["when"],"when");}
break;case"note":item=item||[];for(var i=0;i<item.length;i++){item[i]["when"]=fillItem(index,data,item[i]["when"],"when");item[i]["where"]=fillItem(index,data,item[i]["where"],"where");item[i]["link"]=fillItem(index,data,item[i]["link"],"link",i);item[i]["line"]=fillItem(index,data,item[i]["line"],"line");item[i]["flag"]=fillItem(index,data,item[i]["flag"],"flag");item[i]["trigger"]=fillItem(index,data,item[i]["trigger"],"effect",false);}
break;case"effect":item=item||[];var effect=newItem("effect");for(var i=0;i<item.length;i++){if(current){item[i]["when"]=fillItem(index,data,item[i]["when"],"when");}
item[i]["kind"]=item[i]["kind"]||effect["kind"];item[i]["while"]=item[i]["while"]||effect["while"];item[i]["what"]=item[i]["what"]||effect["what"];item[i]["path"]=(item[i]["path"]||effect["path"]).toDir();item[i]["spriteID"]=item[i]["spriteID"]||effect["spriteID"];item[i]["text"]=item[i]["text"]||effect["text"];item[i]["where"]=fillItem(index,data,item[i]["where"],"where");item[i]["where2"]=fillItem(index,data,item[i]["where2"],"where");item[i]["clip"]=fillItem(index,data,item[i]["clip"],"clip");item[i]["clip2"]=fillItem(index,data,item[i]["clip2"],"clip");item[i]["backColor"]=fillItem(index,data,item[i]["backColor"],"argb");item[i]["foreColor"]=fillItem(index,data,item[i]["foreColor"],"argb");item[i]["size"]=fillItem(index,data,item[i]["size"],"size");item[i]["angle"]=item[i]["angle"]||effect["angle"];item[i]["opacity"]=item[i]["opacity"]||effect["opacity"];item[i]["volume"]=(!isUndefined(item[i]["volume"])?item[i]["volume"]:effect["volume"]);item[i]["panner"]=(!isUndefined(item[i]["panner"])?item[i]["panner"]:effect["panner"]);item[i]["pitch"]=(!isUndefined(item[i]["pitch"])?item[i]["pitch"]:effect["pitch"]);item[i]["offset"]=(!isUndefined(item[i]["offset"])?item[i]["offset"]:effect["offset"]);item[i]["duration"]=(!isUndefined(item[i]["duration"])?item[i]["duration"]:effect["duration"]);item[i]["rate"]=(!isUndefined(item[i]["rate"])?item[i]["rate"]:effect["rate"]);item[i]["interval"]=(!isUndefined(item[i]["interval"])?item[i]["interval"]:effect["interval"]);item[i]["speed"]=(!isUndefined(item[i]["speed"])?item[i]["speed"]:effect["speed"]);item[i]["frame"]=(!isUndefined(item[i]["frame"])?item[i]["frame"]:effect["frame"]);item[i]["loop"]=(!isUndefined(item[i]["loop"])?item[i]["loop"]:effect["loop"]);item[i]["repeat"]=(!isUndefined(item[i]["repeat"])?item[i]["repeat"]:effect["repeat"]);item[i]["playback"]=(!isUndefined(item[i]["playback"])?item[i]["playback"]:effect["playback"]);item[i]["fix"]=item[i]["fix"]||effect["fix"];item[i]["sampleSet"]=item[i]["sampleSet"]||effect["sampleSet"];item[i]["sampleSound"]=item[i]["sampleSound"]||effect["sampleSound"];item[i]["sampleIndex"]=(!isUndefined(item[i]["sampleIndex"])?item[i]["sampleIndex"]:effect["sampleIndex"]);item[i]["comment"]=item[i]["comment"]||effect["comment"];item[i]["parameter"]=item[i]["parameter"]||effect["parameter"];item[i]["addition"]=item[i]["addition"]||effect["addition"];item[i]["flag"]=item[i]["flag"]||effect["flag"];item[i]["change"]=fillItem(index,data,item[i]["change"],"change");}
break;case"status":item=item||[];var status=newItem("status");for(var i=0;i<item.length;i++){item[i]["when"]=fillItem(index,data,item[i]["when"],"when");item[i]["name"]=item[i]["name"]||status["name"];item[i]["value"]=(isUndefined(item[i]["value"])?status["value"]:item[i]["value"]);item[i]["value2"]=(isUndefined(item[i]["value2"])?status["value2"]:item[i]["value2"]);}
break;case"transform":item=item||[];var transform=newItem("transform");for(var i=0;i<item.length;i++){item[i]["when"]=fillItem(index,data,item[i]["when"],"when");item[i]["reset"]=item[i]["reset"]||transform["reset"];item[i]["translateX"]=item[i]["translateX"]||transform["translateX"];item[i]["translateY"]=item[i]["translateY"]||transform["translateY"];item[i]["translateZ"]=item[i]["translateZ"]||transform["translateZ"];item[i]["scaleX"]=item[i]["scaleX"]||transform["scaleX"];item[i]["scaleY"]=item[i]["scaleY"]||transform["scaleY"];item[i]["scaleZ"]=item[i]["scaleZ"]||transform["scaleZ"];item[i]["rotateX"]=item[i]["rotateX"]||transform["rotateX"];item[i]["rotateY"]=item[i]["rotateY"]||transform["rotateY"];item[i]["rotateZ"]=item[i]["rotateZ"]||transform["rotateZ"];item[i]["skewX"]=item[i]["skewX"]||transform["skewX"];item[i]["skewY"]=item[i]["skewY"]||transform["skewY"];item[i]["skewZ"]=item[i]["skewZ"]||transform["skewZ"];item[i]["perspective"]=item[i]["perspective"]||transform["perspective"];item[i]["duration"]=item[i]["duration"]||transform["duration"];item[i]["easing"]=item[i]["easing"]||transform["easing"];}
break;case"info":item=item||{};var info=newItem("info");item["min"]=item["min"]||{};item["min"]["when"]=fillItem(index,data,item["min"]["when"],"when");item["start"]=item["start"]||{};item["start"]["when"]=(function(){var t=getEffectInfo(data,"audio","offset");var b=beatFromTime(data,t);var n=noteFromBeat(data,b);return fillItem(index,data,{"b":b,"n":n,"t":t},"when");})();item["length"]=(function(){item["length"]=item["length"]||{};item["length"]["when"]=item["length"]["when"]||{};if(isUndefined(item["length"]["when"]["b"])||isUndefined(item["length"]["when"]["n"])||isUndefined(item["length"]["when"]["t"])){var beat=(!isUndefined(item["length"]["when"]["b"])?item["length"]["when"]["b"]:(!isUndefined(item["length"]["when"]["n"])?beatFromNote(data,item["length"]["when"]["n"]):beatFromTime(data,item["length"]["when"]["t"])));var note=noteFromBeat(data,beat);var time=timeFromBeat(data,beat);return{"when":{"b":beat,"n":note,"t":time}};}})();item["min"]=(function(){var note=(item["min"]&&item["min"]["when"]?item["min"]["when"]["n"]:0);for(var i=0;i<data["beat"].length;i++){if(note>data["beat"][i]["when"]["n"]){note=data["beat"][i]["when"]["n"];}}
for(var i=0;i<data["note"].length;i++){if(note>data["note"][i]["when"]["n"]){note=data["note"][i]["when"]["n"];}}
for(var i=0;i<data["effect"].length;i++){if(note>data["effect"][i]["when"]["n"]){note=data["effect"][i]["when"]["n"];}}
for(var i=0;i<data["status"].length;i++){if(note>data["status"][i]["when"]["n"]){note=data["status"][i]["when"]["n"];}}
for(var i=0;i<data["transform"].length;i++){if(note>data["transform"][i]["when"]["n"]){note=data["transform"][i]["when"]["n"];}}
for(var i=0;i<data["transformed"].length;i++){if(note>data["transformed"][i]["when"]["n"]){note=data["transformed"][i]["when"]["n"];}}
note=Math.floor(note>item["start"]["when"]["n"]?item["start"]["when"]["n"]:note);var beat=beatFromNote(data,note);var time=timeFromBeat(data,beat);if(data["beat"][0]["when"]["t"]>time){data["beat"][0]["when"]={"b":beat,"n":note,"t":time};}
return{"when":{"b":beat,"n":note,"t":time}};})();item["max"]=(function(){var note=(item["max"]&&item["max"]["when"]&&!isUndefined(item["max"]["when"]["n"])?item["max"]["when"]["n"]:0);for(var i=0;i<data["beat"].length;i++){if(note<data["beat"][i]["when"]["n"]){note=data["beat"][i]["when"]["n"];}}
for(var i=0;i<data["note"].length;i++){if(note<data["note"][i]["when"]["n"]){note=data["note"][i]["when"]["n"];}}
for(var i=0;i<data["effect"].length;i++){if(note<data["effect"][i]["when"]["n"]){note=data["effect"][i]["when"]["n"];}}
for(var i=0;i<data["status"].length;i++){if(note<data["status"][i]["when"]["n"]){note=data["status"][i]["when"]["n"];}}
for(var i=0;i<data["transform"].length;i++){if(note<data["transform"][i]["when"]["n"]){note=data["transform"][i]["when"]["n"];}}
for(var i=0;i<data["transformed"].length;i++){if(note<data["transformed"][i]["when"]["n"]){note=data["transformed"][i]["when"]["n"];}}
item["length"]=item["length"]||{};item["length"]["when"]=item["length"]["when"]||{};var length=item["length"]["when"]["n"]||0;note=(note<length?length:note);note=Math.ceil(note);note=(note%2?note+1:note)||1;var beat=beatFromNote(data,note);var time=timeFromBeat(data,beat);if(isUndefined(item["length"]["when"]["t"])){item["length"]={"when":{"b":beat,"n":note,"t":time}};}
return{"when":{"b":beat,"n":note,"t":time}};})();item["bpm"]=getMainBpm(data);item["bpn"]=getMainBpn(data);item["key"]=CheckNumber(item["key"],MstOptions["TransKey"][index]);item["name"]=item["name"]||info["name"];item["comment"]=item["comment"]||info["comment"];item["bpmBase"]=item["bpmBase"]||info["bpmBase"];item["playMode"]=item["playMode"]||info["playMode"];item["player"]=item["player"]||info["player"];item["difficulty"]=item["difficulty"]||info["difficulty"];item["level"]=item["level"]||info["level"];item["rank"]=item["rank"]||info["rank"];item["defExRank"]=item["defExRank"]||info["defExRank"];item["volWav"]=item["volWav"]||info["volWav"];item["cdda"]=item["cdda"]||info["cdda"];item["stageFile"]=(item["stageFile"]||info["stageFile"]).toDir();item["banner"]=(item["banner"]||info["banner"]).toDir();item["background"]=(item["background"]||info["background"]).toDir();item["videoFile"]=(item["videoFile"]||info["videoFile"]).toDir();item["videoFps"]=item["videoFps"]||info["videoFps"];item["videoColors"]=item["videoColors"]||info["videoColors"];item["videoDelay"]=item["videoDelay"]||info["videoDelay"];item["movie"]=(item["movie"]||info["movie"]).toDir();item["midFile"]=(item["midFile"]||info["midFile"]).toDir();item["charFile"]=(item["charFile"]||info["charFile"]).toDir();item["pathWav"]=item["pathWav"]||info["pathWav"];item["materialsWav"]=(item["materialsWav"]||info["materialsWav"]).toDir();item["materialsBmp"]=(item["materialsBmp"]||info["materialsBmp"]).toDir();item["email"]=item["email"]||info["email"];item["url"]=item["url"]||info["url"];item["magnification"]=item["magnification"]||info["magnification"];item["message"]=item["message"]||info["message"];item["previewImage"]=(item["previewImage"]||info["previewImage"]).toDir();item["resultImage"]=(item["resultImage"]||info["resultImage"]).toDir();item["levelDrum"]=item["levelDrum"]||info["levelDrum"];item["levelGuitar"]=item["levelGuitar"]||info["levelGuitar"];item["levelBass"]=item["levelBass"]||info["levelBass"];item["chipPalette"]=item["chipPalette"]||info["chipPalette"];item["chartVersion"]=item["chartVersion"]||info["chartVersion"];item["chartName"]=item["chartName"]||info["chartName"];item["chartDescription"]=item["chartDescription"]||info["chartDescription"];item["chartStyle"]=item["chartStyle"]||info["chartStyle"];item["radarValues"]=item["radarValues"]||info["radarValues"];item["meterType"]=item["meterType"]||info["meterType"];item["credit"]=item["credit"]||info["credit"];item["previewId"]=item["previewId"]||info["previewId"];item["cover"]=(item["cover"]||info["cover"]).toDir();item["discImage"]=(item["discImage"]||info["discImage"]).toDir();item["cdImage"]=(item["cdImage"]||info["cdImage"]).toDir();item["cdTitle"]=item["cdTitle"]||info["cdTitle"];item["lyricsPath"]=item["lyricsPath"]||info["lyricsPath"];item["preview"]=(item["preview"]||info["preview"]).toDir();item["instrumentTrack"]=item["instrumentTrack"]||info["instrumentTrack"];item["sampleStart"]=item["sampleStart"]||info["sampleStart"];item["sampleLength"]=item["sampleLength"]||info["sampleLength"];item["selectable"]=item["selectable"]||info["selectable"];item["attacks"]=item["attacks"]||info["attacks"];item["displayTitle"]=item["displayTitle"]||info["displayTitle"];item["displayArtist"]=item["displayArtist"]||info["displayArtist"];item["displayBpm"]=item["displayBpm"]||info["displayBpm"];item["randSeed"]=item["randSeed"]||info["randSeed"];item["randStart"]=item["randStart"]||info["randStart"];item["randFolder"]=item["randFolder"]||info["randFolder"];item["randList"]=item["randList"]||info["randList"];item["course"]=item["course"]||info["course"];item["side"]=item["side"]||info["side"];item["balloon"]=item["balloon"]||info["balloon"];item["bgmVolumn"]=item["bgmVolumn"]||info["bgmVolumn"];item["seVolumn"]=item["seVolumn"]||info["seVolumn"];item["previewStart"]=item["previewStart"]||info["previewStart"];item["life"]=item["life"]||info["life"];item["scoreInit"]=item["scoreInit"]||info["scoreInit"];item["scoreDiff"]=item["scoreDiff"]||info["scoreDiff"];item["scoreMode"]=item["scoreMode"]||info["scoreMode"];item["countdown"]=item["countdown"]||info["countdown"];item["stackLeniency"]=item["stackLeniency"]||info["stackLeniency"];item["letterboxInBreaks"]=item["letterboxInBreaks"]||info["letterboxInBreaks"];item["widescreenStoryboard"]=item["widescreenStoryboard"]||info["widescreenStoryboard"];item["storyFireInFront"]=item["storyFireInFront"]||info["storyFireInFront"];item["specialStyle"]=item["specialStyle"]||info["specialStyle"];item["epilepsyWarning"]=item["epilepsyWarning"]||info["epilepsyWarning"];item["useSkinSprites"]=item["useSkinSprites"]||info["useSkinSprites"];item["editorBookmarks"]=item["editorBookmarks"]||info["editorBookmarks"];item["bookmarks"]=item["bookmarks"]||[];for(var i=0;i<item["bookmarks"].length;i++){item["bookmarks"][i]=item["bookmarks"][i]||"";}
item["distanceSpacing"]=item["distanceSpacing"]||info["distanceSpacing"];item["beatDivisor"]=item["beatDivisor"]||info["beatDivisor"];item["gridSize"]=item["gridSize"]||info["gridSize"];item["timelineZoom"]=item["timelineZoom"]||info["timelineZoom"];item["beatmapID"]=item["beatmapID"]||info["beatmapID"];item["beatmapSetID"]=item["beatmapSetID"]||info["beatmapSetID"];item["hpDrainRate"]=item["hpDrainRate"]||info["hpDrainRate"];item["circleSize"]=item["circleSize"]||info["circleSize"];item["overallDifficulty"]=item["overallDifficulty"]||info["overallDifficulty"];item["approachRate"]=item["approachRate"]||info["approachRate"];item["sliderMultiplier"]=item["sliderMultiplier"]||info["sliderMultiplier"];item["sliderTickRate"]=item["sliderTickRate"]||info["sliderTickRate"];item["colorBack"]=item["colorBack"]||info["colorBack"];item["colorGroup"]=item["colorGroup"]||[];for(var i=0;i<item["colorGroup"].length;i++){item["colorGroup"][i]["r"]=item["colorGroup"][i]["r"]||0;item["colorGroup"][i]["g"]=item["colorGroup"][i]["g"]||0;item["colorGroup"][i]["b"]=item["colorGroup"][i]["b"]||0;}
item["titleImage"]=item["titleImage"]||info["titleImage"];item["artistImage"]=item["artistImage"]||info["artistImage"];item["changeSeVolumn"]=item["changeSeVolumn"]||info["changeSeVolumn"];item["seGain"]=item["seGain"]||info["seGain"];item["seType"]=item["seType"]||info["seType"];item["seOffset"]=item["seOffset"]||info["seOffset"];item["previewDuration"]=item["previewDuration"]||info["previewDuration"];item["id"]=item["id"]||info["id"];item["speed"]=item["speed"]||info["speed"];item["interval"]=item["interval"]||info["interval"];item["testDivide"]=item["testDivide"]||info["testDivide"];item["testSpeed"]=item["testSpeed"]||info["testSpeed"];item["testSave"]=item["testSave"]||info["testSave"];item["testLock"]=item["testLock"]||info["testLock"];item["testEditMode"]=item["testEditMode"]||info["testEditMode"];item["backgroundType"]=item["backgroundType"]||info["backgroundType"];item["layerType"]=item["layerType"]||info["layerType"];item["icon"]=item["icon"]||info["icon"];item["noteFactoryPrepare"]=item["noteFactoryPrepare"]||info["noteFactoryPrepare"];item["defaultStartTunnel"]=item["defaultStartTunnel"]||info["defaultStartTunnel"];item["defaultWeatherUIB"]=item["defaultWeatherUIB"]||info["defaultWeatherUIB"];item["defaultCurtainUIC"]=item["defaultCurtainUIC"]||info["defaultCurtainUIC"];item["defaultChiefClimax"]=item["defaultChiefClimax"]||info["defaultChiefClimax"];break;}
return item;};var sortItem=function(item){var s=function(a,b){if(!isUndefined(a["when"]["b"])&&!isUndefined(b["when"]["b"])){return a["when"]["b"]-b["when"]["b"];}
else if(!isUndefined(a["when"]["n"])&&!isUndefined(b["when"]["n"])){return a["when"]["n"]-b["when"]["n"];}
else if(!isUndefined(a["when"]["t"])&&!isUndefined(b["when"]["t"])){return a["when"]["t"]-b["when"]["t"];}};return copyObject(item).sort(s);};var sortNote=function(note){var r=[];var a=classifyNote(note)["all"];for(var i=0;i<a.length;i++){r.writes(a[i]);}
return r;};var mergeData=function(dataList){var v=copyObject(dataList[0])||[];if(dataList.length<=1){return v;}
var m=["note","effect","status","transform","transformed"];for(var child=1;child<dataList.length;child++){for(var n=0;n<m.length;n++){for(var i=0;i<dataList[child][m[n]].length;i++){var d=copyObject(dataList[child][m[n]][i]);d["when"]["b"]=undefined;d["when"]["n"]=undefined;switch(m[n]){case"note":for(var j=0;j<d["line"]["vector"].length;j++){d["line"]["vector"][j]["when"]["b"]=undefined;d["line"]["vector"][j]["when"]["n"]=undefined;}
break;case"effect":for(var j=0;j<d["change"].length;j++){d["change"][j]["when"]["b"]=undefined;d["change"][j]["when"]["n"]=undefined;d["change"][j]["when2"]["b"]=undefined;d["change"][j]["when2"]["n"]=undefined;}
break;}
v[m[n]].push(d);}}}
return fillData(v,0);};var fillData=function(data,index){var beat=newItem("beat");data["effect"]=data["effect"]||[];if(!data["effect"].length){data["effect"]=[{"when":{"t":0},"kind":"audio","path":fileInfo.nameCore+".mp3"},{"when":{"t":0},"kind":"image","what":"back","path":fileInfo.nameCore+".png"}];}
data["note"]=data["note"]||[];if(!data["note"].length){var pvt=[];var pvtFromFft=Module.load("wave","pvtFromFft");for(var i=0;i<data["effect"].length;i++){var l=getFileIndex(data["effect"][i]["path"]);if((l!=-1)&&Raw["file"][l]["fft"]){Raw["file"][l]["pvt"]=Raw["file"][l]["pvt"]||(pvtFromFft?pvtFromFft(Raw["file"][l]["fft"]):[]);for(var j=0;j<Raw["file"][l]["pvt"].length;j++){pvt.push({"o":Raw["file"][l]["pvt"][j]["o"]+data["effect"][i]["when"]["t"],"d":Raw["file"][l]["pvt"][j]["d"],"c":Raw["file"][l]["pvt"][j]["c"],"p":Raw["file"][l]["pvt"][j]["p"],"v":Raw["file"][l]["pvt"][j]["v"],"t":Raw["file"][l]["pvt"][j]["t"]});}}}
var noteFromPvt=Module.load("ai","noteFromPvt");if(noteFromPvt){data["note"]=noteFromPvt(pvt);}}
data["beat"]=data["beat"]||[];if(!data["beat"].length){data["beat"]=(function(){var v=[];var times=[];var bpms=[];if(data["note"]){for(var i=0;i<data["note"].length;i++){data["note"][i]["when"]["t"]=CheckNumber(data["note"][i]["when"]["t"]);if(!isUndefined(data["note"][i]["when"]["t"])){times.push(data["note"][i]["when"]["t"]);}}}
if(!times.length){times.push(480);}
times=times.unrepeat().sort(SortNumber);for(var i=0;i<times.length-1;i++){var b=(60000).fDiv(times[i+1].fSub(times[i]));while(b<100){b=b.fMul(2);}
while(b>=200){b=b.fDiv(2);}
bpms[i]=Math.round(b);}
var bpm=beat["bpm"];for(var i=0;i<times.length-4;i++){if(!bpms[i].isClose(bpm,1)&&bpms[i+1].isClose(bpms[i],1)&&bpms[i+2].isClose(bpms[i],1)){var time=(function(){if(!i){return times[i];}
var t0=timeFromNote({"beat":v},noteFromTime({"beat":v},times[i-1])|0);var t1=times[i];for(var j=t0;j<=t1;j++){var d=t1.fSub(j).fDiv(60000).fMul(times[i-1]).fMul(12).toAccurated();if((d|0)==d){return j;}
j+=(240000).fDiv(times[i-1])-1;}})();if(!isUndefined(time)){bpm=bpms[i];v.push({"when":{"b":beatFromTime({"beat":v},time),"n":noteFromTime({"beat":v},time),"t":time},"bpm":bpm,"bpn":4});}}}
if(v.length==0){v.push(bpms.length?{"when":{"b":0,"n":0,"t":0},"bpm":bpms.majority()}:beat);}
v[0]["when"]["t"]=(function(){if(data["note"].length){var t=data["note"][0]["when"]["t"];var u=60000/v[0]["bpm"];while(t>0){t-=u;if(t.toAccurated()==0){t=t.toAccurated();break;}}
return t;}
return 0;})();return v;})();}
for(var i=0;i<data["beat"].length;i++){data["beat"][i]["when"]=data["beat"][i]["when"]||{"b":0,"n":0,"t":0};}
for(var i=0;i<data["beat"].length;i++){var bpm=(i?data["beat"][i-1]["bpm"]:beat["bpm"]);var bpn=(i?data["beat"][i-1]["bpn"]:beat["bpn"]);var dpb=(i?data["beat"][i-1]["dpb"]:beat["dpb"]);var fpn=(i?data["beat"][i-1]["fpn"]:beat["fpn"]);var lpn=(i?data["beat"][i-1]["lpn"]:beat["lpn"]);data["beat"][i]["bpm"]=CheckNumber(data["beat"][i]["bpm"],bpm);data["beat"][i]["bpm"]=(isUndefined(data["beat"][i]["bpm"])?bpm:data["beat"][i]["bpm"]);data["beat"][i]["bpn"]=CheckNumber(data["beat"][i]["bpn"],bpn);data["beat"][i]["bpn"]=(isUndefined(data["beat"][i]["bpn"])?bpn:data["beat"][i]["bpn"]);data["beat"][i]["dpb"]=CheckNumber(data["beat"][i]["dpb"],dpb);data["beat"][i]["dpb"]=(isUndefined(data["beat"][i]["dpb"])?dpb:data["beat"][i]["dpb"]);data["beat"][i]["fpn"]=CheckNumber(data["beat"][i]["fpn"],fpn);data["beat"][i]["lpn"]=CheckNumber(data["beat"][i]["lpn"],lpn);data["beat"][i]["lpn"]=(isUndefined(data["beat"][i]["lpn"])?lpn:data["beat"][i]["lpn"]);}
for(var i=0;i<data["beat"].length;i++){var bpm=(i?data["beat"][i-1]["bpm"]:beat["bpm"]);var bpn=(i?data["beat"][i-1]["bpn"]:beat["bpn"]);if(data["beat"][i]["bpn"]==0){data["beat"][i]["fpn"]=0;data["beat"][i]["bpn"]=bpn;}
if(data["beat"][i]["bpm"]==0){data["beat"][i]["fpn"]=0;data["beat"][i]["bpm"]=bpm;}
if(data["beat"][i]["bpn"]<0){data["beat"][i]["bpn"]=-data["beat"][i]["bpn"];data["beat"][i]["bpm"]=-data["beat"][i]["bpm"];}
if(data["beat"][i]["bpm"]<0){data["beat"][i]["fpn"]=(data["beat"][i]["fpn"]).fMul(data["beat"][i]["bpm"]).fDiv(bpm).toAbbreviated(6).toAccurated();data["beat"][i]["bpm"]=bpm;}}
data["beat"]=fillItem(index,data,data["beat"],"beat");data["beat"]=sortItem(data["beat"]);for(var i=1;i<data["beat"].length;i++){if(data["beat"][i]["when"]["b"]==data["beat"][i-1]["when"]["b"]){data["beat"].splice(i-1,1);i-=1;}}
data["beat"]=sortItem(data["beat"]);for(var i=1;i<data["beat"].length;i++){if((data["beat"][i]["bpm"]==data["beat"][i-1]["bpm"])&&(data["beat"][i]["bpn"]==data["beat"][i-1]["bpn"])&&(data["beat"][i]["dpb"]==data["beat"][i-1]["dpb"])&&(data["beat"][i]["fpn"]==data["beat"][i-1]["fpn"])&&(data["beat"][i]["lpn"]==data["beat"][i-1]["lpn"])){data["beat"].splice(i,1);i-=1;}}
data["note"]=fillItem(index,data,data["note"],"note");for(var i=0;i<data["note"].length;i++){data["note"][i]["link"]["b"]=(function(){var b=indexFromCurrent(data["note"],data["note"][i]["link"]["b"]);if(b!=-1){var a=indexFromCurrent(data["note"],data["note"][b]["link"]["a"]);if(a!=-1){return data["note"][i]["link"]["b"];}
else{return-1;}}
else{return-1;}})();data["note"][i]["link"]["a"]=(function(){var b=indexFromCurrent(data["note"],data["note"][i]["link"]["a"]);if(b!=-1){var a=indexFromCurrent(data["note"],data["note"][b]["link"]["b"]);if(a!=-1){return data["note"][i]["link"]["a"];}
else{return-1;}}
else{return-1;}})();}
for(var i=0;i<data["note"].length;i++){if(data["note"][i]["link"]["b"]==-1){var n=i;while(true){var a=data["note"][n]["link"]["a"];if(a!=-1){n=a;var m=["auto","invisible","invalid","fake","secret","damage","parallel","colorSkip","fever","skill","ex"];for(var j=0;j<m.length;j++){data["note"][n]["flag"][m[i]]=(isUndefined(data["note"][n]["flag"][m[i]])?data["note"][i]["flag"][m[i]]:data["note"][n]["flag"][m[i]]);}}
else{break;}}}}
data["note"]=sortNote(data["note"]);data["effect"]=fillItem(index,data,data["effect"],"effect");data["effect"]=sortItem(data["effect"]);data["status"]=fillItem(index,data,data["status"],"status");data["status"]=sortItem(data["status"]);data["transform"]=fillItem(index,data,data["transform"],"transform");data["transform"]=sortItem(data["transform"]);data["transformed"]=fillItem(index,data,data["transformed"],"transform");data["transformed"]=sortItem(data["transformed"]);data["info"]=fillItem(index,data,data["info"],"info");data=toData(data,"TransKey",{"TransKey":data["info"]["key"]});return data;};var fixData=function(data,mode){var param=(arguments.length>2?arguments[2]:{});if(!data){return;}
var r=data;switch(mode){case"OffsetByTime":var offset=param["OffsetByTime"];if(!isUndefined(offset)&&(offset!=0)){for(var i=0;i<r["beat"].length;i++){r["beat"][i]["when"]["t"]=r["beat"][i]["when"]["t"].fAdd(offset);}
for(var i=0;i<r["note"].length;i++){r["note"][i]["when"]["t"]=r["note"][i]["when"]["t"].fAdd(offset);if(r["note"][i]["line"]&&r["note"][i]["line"]["vector"]){for(var j=0;j<r["note"][i]["line"]["vector"].length;j++){r["note"][i]["line"]["vector"][j]["when"]["t"]=r["note"][i]["line"]["vector"][j]["when"]["t"].fAdd(offset);}}}
for(var i=0;i<r["effect"].length;i++){r["effect"][i]["when"]["t"]=r["effect"][i]["when"]["t"].fAdd(offset);}
for(var i=0;i<r["status"].length;i++){r["status"][i]["when"]["t"]=r["status"][i]["when"]["t"].fAdd(offset);}
for(var i=0;i<r["transform"].length;i++){r["transform"][i]["when"]["t"]=r["transform"][i]["when"]["t"].fAdd(offset);}
for(var i=0;i<r["transformed"].length;i++){r["transformed"][i]["when"]["t"]=r["transformed"][i]["when"]["t"].fAdd(offset);}
if(r["info"]["min"]){r["info"]["min"]["when"]["t"]=r["info"]["min"]["when"]["t"].fAdd(offset);}
if(r["info"]["max"]){r["info"]["max"]["when"]["t"]=r["info"]["max"]["when"]["t"].fAdd(offset);}
if(r["info"]["length"]){r["info"]["length"]["when"]["t"]=r["info"]["length"]["when"]["t"].fAdd(offset);}
if(r["info"]["start"]){r["info"]["start"]["when"]["t"]=r["info"]["start"]["when"]["t"].fAdd(offset);}}
break;case"FlowWithBpm":var bpm=param["FlowWithBpm"];for(var i=0;i<r["beat"].length;i++){(r["beat"][i]["fpn"]=!isUndefined(r["beat"][i]["fpn"])?r["beat"][i]["fpn"]:1);}
for(var i=r["beat"].length-2;i>0;i--){var b=(function(){if(!isUndefined(r["beat"][i+1]["when"]["t"])&&!isUndefined(r["beat"][i]["when"]["t"])){return r["beat"][i+1]["when"]["t"].fSub(r["beat"][i]["when"]["t"]).fDiv((60000).fDiv(r["beat"][i]["bpm"]))}
else if(!isUndefined(r["beat"][i+1]["when"]["b"])&&!isUndefined(r["beat"][i]["when"]["b"])){return r["beat"][i+1]["when"]["b"].fSub(r["beat"][i]["when"]["b"]);}
else if(!isUndefined(r["beat"][i+1]["when"]["n"])&&!isUndefined(r["beat"][i]["when"]["n"])){return r["beat"][i+1]["when"]["n"].fSub(r["beat"][i]["when"]["n"]).fMul(r["beat"][i]["bpn"]||4);}
else{return 0;}})();if((r["beat"][i]["bpm"]<=0)||(b<r["beat"][i]["bpn"]||4)||(Math.round(r["beat"][i]["bpm"].fDiv(bpm).fMul(768))==r["beat"][i]["bpm"].fDiv(bpm).fMul(768).toAbbreviated(6).toAccurated())){r["beat"][i]["fpn"]=r["beat"][i]["bpm"].fDiv(bpm);r["beat"][i]["bpm"]=bpm;}}
break;case"BeatFromTime":var clearBeat=param["BeatFromTime"];if(clearBeat){for(var i=0;i<r["beat"].length;i++){r["beat"][i]["when"]["b"]=undefined;}}
for(var i=0;i<r["beat"].length;i++){r["beat"][i]["when"]["b"]=beatFromTime(r,r["beat"][i]["when"]["t"]);}
for(var i=0;i<r["note"].length;i++){r["note"][i]["when"]["b"]=beatFromTime(r,r["note"][i]["when"]["t"]);if(r["note"][i]["line"]&&r["note"][i]["line"]["vector"]){for(var j=0;j<r["note"][i]["line"]["vector"].length;j++){r["note"][i]["line"]["vector"][j]["when"]["b"]=beatFromTime(r,r["note"][i]["line"]["vector"][j]["when"]["t"]);}}}
for(var i=0;i<r["effect"].length;i++){r["effect"][i]["when"]["b"]=beatFromTime(r,r["effect"][i]["when"]["t"]);}
for(var i=0;i<r["status"].length;i++){r["status"][i]["when"]["b"]=beatFromTime(r,r["status"][i]["when"]["t"]);}
for(var i=0;i<r["transform"].length;i++){r["transform"][i]["when"]["b"]=beatFromTime(r,r["transform"][i]["when"]["t"]);}
for(var i=0;i<r["transformed"].length;i++){r["transformed"][i]["when"]["b"]=beatFromTime(r,r["transformed"][i]["when"]["t"]);}
if(r["info"]["min"]){r["info"]["min"]["when"]["b"]=beatFromTime(r,r["info"]["min"]["when"]["t"]);}
if(r["info"]["max"]){r["info"]["max"]["when"]["b"]=beatFromTime(r,r["info"]["max"]["when"]["t"]);}
if(r["info"]["length"]){r["info"]["length"]["when"]["b"]=beatFromTime(r,r["info"]["length"]["when"]["t"]);}
if(r["info"]["start"]){r["info"]["start"]["when"]["b"]=beatFromTime(r,r["info"]["start"]["when"]["t"]);}
break;case"NoteFromBeat":var clearNote=param["NoteFromBeat"];if(clearNote){for(var i=0;i<r["beat"].length;i++){r["beat"][i]["when"]["n"]=undefined;}}
for(var i=0;i<r["beat"].length;i++){r["beat"][i]["when"]["n"]=noteFromBeat(r,r["beat"][i]["when"]["b"]);}
for(var i=0;i<r["note"].length;i++){r["note"][i]["when"]["n"]=noteFromBeat(r,r["note"][i]["when"]["b"]);if(r["note"][i]["line"]&&r["note"][i]["line"]["vector"]){for(var j=0;j<r["note"][i]["line"]["vector"].length;j++){r["note"][i]["line"]["vector"][j]["when"]["n"]=noteFromBeat(r,r["note"][i]["line"]["vector"][j]["when"]["b"]);}}}
for(var i=0;i<r["effect"].length;i++){r["effect"][i]["when"]["n"]=noteFromBeat(r,r["effect"][i]["when"]["b"]);}
for(var i=0;i<r["status"].length;i++){r["status"][i]["when"]["n"]=noteFromBeat(r,r["status"][i]["when"]["b"]);}
for(var i=0;i<r["transform"].length;i++){r["transform"][i]["when"]["n"]=noteFromBeat(r,r["transform"][i]["when"]["b"]);}
for(var i=0;i<r["transformed"].length;i++){r["transformed"][i]["when"]["n"]=noteFromBeat(r,r["transformed"][i]["when"]["b"]);}
if(r["info"]["min"]){r["info"]["min"]["when"]["n"]=noteFromBeat(r,r["info"]["min"]["when"]["b"]);}
if(r["info"]["max"]){r["info"]["max"]["when"]["n"]=Math.ceil(noteFromBeat(r,r["info"]["max"]["when"]["b"]));r["info"]["max"]["when"]["b"]=beatFromNote(r,r["info"]["max"]["when"]["n"]);r["info"]["max"]["when"]["t"]=timeFromBeat(r,r["info"]["max"]["when"]["b"]);}
if(r["info"]["length"]){r["info"]["length"]["when"]["n"]=noteFromBeat(r,r["info"]["length"]["when"]["b"]);}
if(r["info"]["start"]){r["info"]["start"]["when"]["n"]=noteFromBeat(r,r["info"]["start"]["when"]["b"]);}
break;}
return r;};var toData=function(data,mode,options){if(!data){return;}
options=options||{};var r=copyObject(data);var getLinkTracks=function(t,k){var v=[];var d=k/2|0;for(var i=1;i<d+1;i++){if(t-i>=0){v.push(t-i);}
if(t+i<=k-1){v.push(t+i);}}
return v;};var canLink=function(a,b,u1,u2){var d=(arguments.length>4?arguments[4]:"undefined");for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
var p=(function(){for(var j=0;j<u1.length;j++){if(i==u1[j]){return true;}
if((r["note"][i]["link"]["a"]!=-1)&&(r["note"][i]["link"]["a"]==u1[j])){return true;}}
for(var j=0;j<u2.length;j++){if(i==u2[j]){return true;}
if((r["note"][i]["link"]["a"]!=-1)&&(r["note"][i]["link"]["a"]==u2[j])){return true;}}
return false;})();if(p){continue;}
var c=(function(){if(r["note"][i]["link"]["a"]!=-1){return Math.isLineCross(a,b,[r["note"][i]["where"]["xt"],r["note"][i]["when"]["b"]],[r["note"][r["note"][i]["link"]["a"]]["where"]["xt"],r["note"][r["note"][i]["link"]["a"]]["when"]["b"]]);}
else{return Math.isLineCross(a,b,[r["note"][i]["where"]["xt"],r["note"][i]["when"]["b"]],[r["note"][i]["where"]["xt"],r["note"][i]["when"]["b"]]);}})();switch(d){case"true":if(c==true){return false;}
break;case"false":if(c==false){return false;}
break;case"undefined":if(!isUndefined(c)){return false;}
break;}}
return true;};switch(mode){case"BpmUnified":var bpm=(!isUndefined(options["BpmUnified"])?options["BpmUnified"]:getMainBpm(r));var offset=(r["beat"].length?timeFromBeat({"beat":r["beat"]},0):0);var beat=newItem("beat");r["beat"]=[{"when":{"b":0,"n":0,"t":offset},"bpm":bpm,"bpn":beat["bpn"],"dpb":beat["dpb"],"fpn":beat["fpn"],"lpn":beat["lpn"]}];r=fixData(r,"BeatFromTime",{"BeatFromTime":true});r=fixData(r,"NoteFromBeat",{"NoteFromBeat":true});r["info"]["bpm"]=bpm;break;case"BpnUnified":var bpn=(!isUndefined(options["BpnUnified"])?options["BpnUnified"]:getMainBpn(r));for(var i=0;i<r["beat"].length;i++){r["beat"][i]["bpn"]=bpn;}
r=fixData(r,"NoteFromBeat",{"NoteFromBeat":true});r["info"]["bpn"]=bpn;break;case"BpmAllBase16":for(var i=0;i<r["beat"].length;i++){if(!isInteger(r["beat"][i]["bpm"])){r["beat"][i]["bpm"]=(isInteger(r["beat"][i]["bpm"])&&(r["beat"][i]["bpm"]>0)&&(r["beat"][i]["bpm"]<256)?r["beat"][i]["bpm"]:(i?r["beat"][i-1]["bpm"]:newItem("beat")["bpm"]));}}
r=fixData(r,"BeatFromTime",{"BeatFromTime":true});r=fixData(r,"NoteFromBeat",{"NoteFromBeat":true});break;case"BpnByNote":var isChange=false;var c=-1;for(var i=0;i<r["beat"].length;i++){if(isInteger(r["beat"][i]["when"]["n"])){c=i;}
else{var n=Math.ceil(r["beat"][i]["when"]["n"]);while(i<r["beat"].length){if(r["beat"][i]["when"]["n"]<n){r["beat"][i]={"when":{"t":r["beat"][i]["when"]["t"]},"bpm":r["beat"][i]["bpm"].fDiv(r["beat"][i]["bpn"]).fMul(r["beat"][c]["bpn"]).toAbbreviated(6).toAccurated(),"bpn":r["beat"][c]["bpn"].toAbbreviated(6).toAccurated(),"dpb":r["beat"][i]["dpb"].toAbbreviated(6).toAccurated(),"fpn":r["beat"][i]["fpn"].toAbbreviated(6).toAccurated(),"lpn":r["beat"][i]["lpn"].toAbbreviated(6).toAccurated()};isChange=true;i+=1;}
else{i-=1;break;}}}}
if(isChange){r=fixData(r,"BeatFromTime",{"BeatFromTime":true});r=fixData(r,"NoteFromBeat",{"NoteFromBeat":true});}
break;case"FlowWithNote":if(options["FlowWithNote"]&&options["FlowWithNote"].length){for(var n=0;n<options["FlowWithNote"].length;n++){var start=options["FlowWithNote"][n]["start"];var fpn=options["FlowWithNote"][n]["fpn"];var duration=options["FlowWithNote"][n]["duration"];var end=start.fAdd(duration);var f=fpn;if(!isUndefined(start)&&!isUndefined(fpn)&&!isUndefined(duration)&&(duration>0)){for(var i=0;i<r["beat"].length;i++){if(r["beat"][i]["when"]["n"]<start){f=r["beat"][i]["fpn"];}
else if(r["beat"][i]["when"]["n"]>=start){if(r["beat"][i]["when"]["n"]==start){f=r["beat"][i]["fpn"];r["beat"][i]["fpn"]=fpn;}
else if(r["beat"][i]["when"]["n"]>start){var l=(i==0?i:i-1);r["beat"].insert({"when":{"n":start},"bpm":r["beat"][l]["bpm"],"bpn":r["beat"][l]["bpn"],"fpn":fpn},i);}
for(var j=i+1;j<r["beat"].length;j++){if(r["beat"][j]["when"]["n"]<end){f=r["beat"][j]["fpn"];r["beat"][j]["fpn"]=fpn;if(j==r["beat"].length-1){r["beat"].push({"when":{"n":end},"bpm":r["beat"][j]["bpm"],"bpn":r["beat"][j]["bpn"],"fpn":f});}}
else{if(r["beat"][j]["when"]["n"]>end){var l=(j==0?j:j-1);r["beat"].insert({"when":{"n":end},"bpm":r["beat"][l]["bpm"],"bpn":r["beat"][l]["bpn"],"fpn":f},j);}
break;}}
break;}}}}
for(var i=1;i<r["beat"].length;i++){if((r["beat"][i]["bpm"]==r["beat"][i-1]["bpm"])&&(r["beat"][i]["bpn"]==r["beat"][i-1]["bpn"])&&(r["beat"][i]["fpn"]==r["beat"][i-1]["fpn"])){r["beat"].splice(i,1);i-=1;}}}
break;case"OffsetWhen":var offset=options["OffsetWhen"];if(!isUndefined(offset)&&(offset!=0)){r=fixData(r,"OffsetByTime",{"OffsetByTime":offset});r=fixData(r,"BeatFromTime",{"BeatFromTime":true});r=fixData(r,"NoteFromBeat",{"NoteFromBeat":true});if(r["info"]["min"]){r["info"]["min"]["when"]["n"]=Math.floor(r["info"]["min"]["when"]["n"]);r["info"]["min"]["when"]["b"]=beatFromNote(r,r["info"]["min"]["when"]["n"]);r["info"]["min"]["when"]["t"]=timeFromBeat(r,r["info"]["min"]["when"]["b"]);}
if(r["info"]["max"]){r["info"]["max"]["when"]["n"]=Math.ceil(r["info"]["max"]["when"]["n"]);r["info"]["max"]["when"]["b"]=beatFromNote(r,r["info"]["max"]["when"]["n"]);r["info"]["max"]["when"]["t"]=timeFromBeat(r,r["info"]["max"]["when"]["b"]);}}
break;case"TranslateWhen":var offset=options["TranslateWhen"];if(!isUndefined(offset)&&(offset!=0)){r=fixData(r,"OffsetByTime",{"OffsetByTime":offset});if((0).fSub(offset)<r["beat"][0]["when"]["t"]){var u=(60000).fDiv(data["beat"][0]["bpm"]).fMul(data["beat"][0]["bpn"]);var n=Math.ceil(offset.fDiv(u));var b=n.fMul(data["beat"][0]["bpn"]);var t=n.fMul(u);r["beat"][0]["when"]["t"]=r["beat"][0]["when"]["t"].fAdd(t);for(var i=1;i<r["beat"].length;i++){r["beat"][i]["when"]["b"]=r["beat"][i]["when"]["b"].fAdd(b);r["beat"][i]["when"]["n"]=r["beat"][i]["when"]["n"].fAdd(n);}
for(var i=0;i<r["note"].length;i++){r["note"][i]["when"]["b"]=r["note"][i]["when"]["b"].fAdd(b);r["note"][i]["when"]["n"]=r["note"][i]["when"]["n"].fAdd(n);if(r["note"][i]["line"]&&r["note"][i]["line"]["vector"]){for(var j=0;j<r["note"][i]["line"]["vector"].length;j++){r["note"][i]["line"]["vector"][j]["when"]["b"]=r["note"][i]["line"]["vector"][j]["when"]["b"].fAdd(b);r["note"][i]["line"]["vector"][j]["when"]["n"]=r["note"][i]["line"]["vector"][j]["when"]["n"].fAdd(n);}}}
for(var i=0;i<r["effect"].length;i++){r["effect"][i]["when"]["b"]=r["effect"][i]["when"]["b"].fAdd(b);r["effect"][i]["when"]["n"]=r["effect"][i]["when"]["n"].fAdd(n);}
for(var i=0;i<r["status"].length;i++){r["status"][i]["when"]["b"]=r["status"][i]["when"]["b"].fAdd(b);r["status"][i]["when"]["n"]=r["status"][i]["when"]["n"].fAdd(n);}
for(var i=0;i<r["transform"].length;i++){r["transform"][i]["when"]["b"]=r["transform"][i]["when"]["b"].fAdd(b);r["transform"][i]["when"]["n"]=r["transform"][i]["when"]["n"].fAdd(n);}
for(var i=0;i<r["transformed"].length;i++){r["transformed"][i]["when"]["b"]=r["transformed"][i]["when"]["b"].fAdd(b);r["transformed"][i]["when"]["n"]=r["transformed"][i]["when"]["n"].fAdd(n);}
if(r["info"]["min"]){r["info"]["min"]["when"]["t"]=r["info"]["min"]["when"]["t"].fAdd(t);}
if(r["info"]["max"]){r["info"]["max"]["when"]["b"]=r["info"]["max"]["when"]["b"].fAdd(b);r["info"]["max"]["when"]["n"]=r["info"]["max"]["when"]["n"].fAdd(n);}
if(r["info"]["length"]){r["info"]["length"]["when"]["b"]=r["info"]["length"]["when"]["b"].fAdd(b);r["info"]["length"]["when"]["n"]=r["info"]["length"]["when"]["n"].fAdd(n);}
if(r["info"]["start"]){r["info"]["start"]["when"]["b"]=r["info"]["start"]["when"]["b"].fAdd(b);r["info"]["start"]["when"]["n"]=r["info"]["start"]["when"]["n"].fAdd(n);}}
r=toData(r,"CorrectTime",{"CorrectTime":192});}
break;case"CorrectTime":var correctTime=options["CorrectTime"];if(!isUndefined(correctTime)){for(var i=0;i<r["beat"].length;i++){r["beat"][i]["when"]["b"]=r["beat"][i]["when"]["b"].attach(correctTime);r["beat"][i]["when"]["n"]=noteFromBeat(r,r["beat"][i]["when"]["b"],correctTime);r["beat"][i]["when"]["t"]=timeFromBeat(r,r["beat"][i]["when"]["b"],correctTime);}
for(var i=0;i<r["note"].length;i++){r["note"][i]["when"]["b"]=r["note"][i]["when"]["b"].attach(correctTime);r["note"][i]["when"]["n"]=noteFromBeat(r,r["note"][i]["when"]["b"],correctTime);r["note"][i]["when"]["t"]=timeFromBeat(r,r["note"][i]["when"]["b"],correctTime);if(r["note"][i]["line"]&&r["note"][i]["line"]["vector"]){for(var j=0;j<r["note"][i]["line"]["vector"].length;j++){r["note"][i]["line"]["vector"][j]["when"]["b"]=r["note"][i]["line"]["vector"][j]["when"]["b"].attach(correctTime);r["note"][i]["line"]["vector"][j]["when"]["n"]=noteFromBeat(r,r["note"][i]["line"]["vector"][j]["when"]["b"],correctTime);r["note"][i]["line"]["vector"][j]["when"]["t"]=timeFromBeat(r,r["note"][i]["line"]["vector"][j]["when"]["b"],correctTime);}}}
for(var i=0;i<r["effect"].length;i++){r["effect"][i]["when"]["b"]=r["effect"][i]["when"]["b"].attach(correctTime);r["effect"][i]["when"]["n"]=noteFromBeat(r,r["effect"][i]["when"]["b"],correctTime);r["effect"][i]["when"]["t"]=timeFromBeat(r,r["effect"][i]["when"]["b"],correctTime);}
for(var i=0;i<r["status"].length;i++){r["status"][i]["when"]["b"]=r["status"][i]["when"]["b"].attach(correctTime);r["status"][i]["when"]["n"]=noteFromBeat(r,r["status"][i]["when"]["b"],correctTime);r["status"][i]["when"]["t"]=timeFromBeat(r,r["status"][i]["when"]["b"],correctTime);}
for(var i=0;i<r["transform"].length;i++){r["transform"][i]["when"]["b"]=r["transform"][i]["when"]["b"].attach(correctTime);r["transform"][i]["when"]["n"]=noteFromBeat(r,r["transform"][i]["when"]["b"],correctTime);r["transform"][i]["when"]["t"]=timeFromBeat(r,r["transform"][i]["when"]["b"],correctTime);}
for(var i=0;i<r["transformed"].length;i++){r["transformed"][i]["when"]["b"]=r["transformed"][i]["when"]["b"].attach(correctTime);r["transformed"][i]["when"]["n"]=noteFromBeat(r,r["transformed"][i]["when"]["b"],correctTime);r["transformed"][i]["when"]["t"]=timeFromBeat(r,r["transformed"][i]["when"]["b"],correctTime);}
if(r["info"]["min"]){r["info"]["min"]["when"]["b"]=r["info"]["min"]["when"]["b"].attach(correctTime);r["info"]["min"]["when"]["n"]=noteFromBeat(r,r["info"]["min"]["when"]["b"],correctTime);r["info"]["min"]["when"]["t"]=timeFromBeat(r,r["info"]["min"]["when"]["b"],correctTime);}
if(r["info"]["max"]){r["info"]["max"]["when"]["b"]=r["info"]["max"]["when"]["b"].attach(correctTime);r["info"]["max"]["when"]["n"]=noteFromBeat(r,r["info"]["max"]["when"]["b"],correctTime);r["info"]["max"]["when"]["t"]=timeFromBeat(r,r["info"]["max"]["when"]["b"],correctTime);}
if(r["info"]["length"]){r["info"]["length"]["when"]["b"]=r["info"]["length"]["when"]["b"].attach(correctTime);r["info"]["length"]["when"]["n"]=noteFromBeat(r,r["info"]["length"]["when"]["b"],correctTime);r["info"]["length"]["when"]["t"]=timeFromBeat(r,r["info"]["length"]["when"]["b"],correctTime);}
if(r["info"]["start"]){r["info"]["start"]["when"]["b"]=r["info"]["start"]["when"]["b"].attach(correctTime);r["info"]["start"]["when"]["n"]=noteFromBeat(r,r["info"]["start"]["when"]["b"],correctTime);r["info"]["start"]["when"]["t"]=timeFromBeat(r,r["info"]["start"]["when"]["b"],correctTime);}}
break;case"FormatValue":var formatItem=function(item,mode){switch(mode){case"when":item["b"]=item["b"].toAbbreviated(9).toAccurated();item["n"]=item["n"].toAbbreviated(9).toAccurated();item["t"]=item["t"].toAbbreviated(9).toAccurated();break;case"where":item["x"]=item["x"].toAbbreviated(9).toAccurated();item["y"]=item["y"].toAbbreviated(9).toAccurated();item["z"]=item["z"].toAbbreviated(9).toAccurated();break;case"clip":item["x"]=item["x"].toAbbreviated(9).toAccurated();item["y"]=item["y"].toAbbreviated(9).toAccurated();item["z"]=item["z"].toAbbreviated(9).toAccurated();break;case"vector":for(var i=0;i<item.length;i++){item[i]["when"]=formatItem(item[i]["when"],"when");item[i]["where"]=formatItem(item[i]["where"],"where");}
break;case"beat":for(var i=0;i<item.length;i++){item[i]["when"]=formatItem(item[i]["when"],"when");item[i]["bpm"]=item[i]["bpm"].toAbbreviated(9).toAccurated();item[i]["bpn"]=item[i]["bpn"].toAbbreviated(9).toAccurated();item[i]["dpb"]=item[i]["dpb"].toAbbreviated(9).toAccurated();item[i]["fpn"]=item[i]["fpn"].toAbbreviated(9).toAccurated();item[i]["lpn"]=item[i]["lpn"].toAbbreviated(9).toAccurated();}
break;case"note":for(var i=0;i<item.length;i++){item[i]["when"]=formatItem(item[i]["when"],"when");item[i]["where"]=formatItem(item[i]["where"],"where");item[i]["line"]["vector"]=formatItem(item[i]["line"]["vector"],"vector");}
break;case"effect":for(var i=0;i<item.length;i++){item[i]["when"]=formatItem(item[i]["when"],"when");item[i]["where"]=formatItem(item[i]["where"],"where");item[i]["where2"]=formatItem(item[i]["where2"],"where");item[i]["clip"]=formatItem(item[i]["clip"],"clip");item[i]["clip2"]=formatItem(item[i]["clip2"],"clip");}
break;case"status":for(var i=0;i<item.length;i++){item[i]["when"]=formatItem(item[i]["when"],"when");}
break;case"transform":for(var i=0;i<item.length;i++){item[i]["when"]=formatItem(item[i]["when"],"when");}
break;case"info":item["min"]["when"]=formatItem(item["min"]["when"],"when");item["max"]["when"]=formatItem(item["max"]["when"],"when");item["length"]["when"]=formatItem(item["length"]["when"],"when");item["start"]["when"]=formatItem(item["start"]["when"],"when");item["sliderMultiplier"]=item["sliderMultiplier"].toAbbreviated(9).toAccurated();break;}
return item;};r["beat"]=formatItem(r["beat"],"beat");r["note"]=formatItem(r["note"],"note");r["effect"]=formatItem(r["effect"],"effect");r["status"]=formatItem(r["status"],"status");r["transform"]=formatItem(r["transform"],"transform");r["transformed"]=formatItem(r["transformed"],"transform");r["info"]=formatItem(r["info"],"info");break;case"TransKey":r["info"]["key"]=options["TransKey"];var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var m=["x","y","z"];for(var i=0;i<r["note"].length;i++){for(var j=0;j<m.length;j++){if(r["note"][i]["where"][m[j]]!=-1){r["note"][i]["where"][m[j]+"t"]=xToTrack(r["note"][i]["where"][m[j]],r["info"]["key"]);r["note"][i]["where"][m[j]+"p"]=r["note"][i]["where"][m[j]].fMul(options["TransKey"]).fSub(r["note"][i]["where"][m[j]+"t"]);}}}
break;case"ChangeFlow":for(var i=0;i<r["beat"].length;i++){r["beat"][i]["fpn"]=r["beat"][i]["fpn"].fMul(options["ChangeFlow"]);}
r=fixData(r,"BeatFromTime",{"BeatFromTime":true});r=fixData(r,"NoteFromBeat",{"NoteFromBeat":true});break;case"ChangeSpeed":var changeSpeed=options["ChangeSpeed"];if(!isUndefined(changeSpeed)){for(var i=0;i<r["beat"].length;i++){r["beat"][i]["when"]["t"]=r["beat"][i]["when"]["t"].fDiv(changeSpeed);r["beat"][i]["bpm"]=r["beat"][i]["bpm"].fMul(changeSpeed);}
for(var i=0;i<r["note"].length;i++){r["note"][i]["when"]["t"]=r["note"][i]["when"]["t"].fDiv(changeSpeed);}
for(var i=0;i<r["effect"].length;i++){r["effect"][i]["when"]["t"]=r["effect"][i]["when"]["t"].fDiv(changeSpeed);r["effect"][i]["offset"]=r["effect"][i]["offset"].fDiv(changeSpeed);r["effect"][i]["duration"]=r["effect"][i]["duration"].fDiv(changeSpeed);}
for(var i=0;i<r["status"].length;i++){r["status"][i]["when"]["t"]=r["status"][i]["when"]["t"].fDiv(changeSpeed);if(r["status"][i]["name"]=="warp"){r["status"][i]["value"]=r["status"][i]["value"].fMul(changeSpeed);}}
for(var i=0;i<r["transform"].length;i++){r["transform"][i]["when"]["t"]=r["transform"][i]["when"]["t"].fDiv(changeSpeed);r["transform"][i]["when"]["t"]=r["transform"][i]["duration"].fDiv(changeSpeed);}
for(var i=0;i<r["transformed"].length;i++){r["transformed"][i]["when"]["t"]=r["transformed"][i]["when"]["t"].fDiv(changeSpeed);r["transformed"][i]["when"]["t"]=r["transformed"][i]["duration"].fDiv(changeSpeed);}
if(r["info"]&&r["info"]["length"]&&r["info"]["length"]["when"]&&r["info"]["length"]["when"]["t"]){r["info"]["length"]["when"]["t"]=r["info"]["length"]["when"]["t"].fDiv(changeSpeed);}
if(r["info"]&&r["info"]["start"]&&r["info"]["start"]["when"]&&r["info"]["start"]["when"]["t"]){r["info"]["start"]["when"]["t"]=r["info"]["start"]["when"]["t"].fDiv(changeSpeed);}
r=fixData(r,"BeatFromTime",{"BeatFromTime":true});r=fixData(r,"NoteFromBeat",{"NoteFromBeat":true});}
break;case"MirrorTrack":var m=["x","y","z"];for(var i=0;i<r["note"].length;i++){for(var j=0;j<m.length;j++){if(!isUndefined(r["note"][i]["where"][m[j]+"t"])){r["note"][i]["where"][m[j]+"t"]=(r["info"]["key"]-1).fSub(r["note"][i]["where"][m[j]+"t"]);}
if(!isUndefined(r["note"][i]["where"][m[j]+"p"])){r["note"][i]["where"][m[j]+"p"]=(1).fSub(r["note"][i]["where"][m[j]+"p"]);}
if(r["note"][i]["where"][m[j]]!=-1){r["note"][i]["where"][m[j]]=(1).fSub(r["note"][i]["where"][m[j]]);}}}
break;case"RandomTrack":var tracks=(function(){var v=[];for(var i=0;i<r["info"]["key"];i++){v.push(i);}
return v;})();var newTracks=(function(){var v=[];for(var i=0;i<r["info"]["key"];i++){var n=tracks.length.fMul(Math.random())|0;v.push(tracks[n]);tracks.splice(n,1);}
return v;})();var m=["x","y","z"];for(var i=0;i<r["note"].length;i++){for(var j=0;j<m.length;j++){if(!isUndefined(r["note"][i]["where"][m[j]+"t"])){r["note"][i]["where"][m[j]+"t"]=newTracks[r["note"][i]["where"][m[j]+"t"]];}
if((r["note"][i]["where"][m[j]]!=-1)&&!isUndefined(r["note"][i]["where"][m[j]+"t"])&&!isUndefined(r["note"][i]["where"][m[j]+"p"])){r["note"][i]["where"][m[j]]=r["note"][i]["where"][m[j]+"t"].fAdd(r["note"][i]["where"][m[j]+"p"]).fDiv(r["info"]["key"]);}}}
break;case"RandomNote":var tracks=(function(){var v=[];for(var i=0;i<r["info"]["key"];i++){v.push(i);}
return v;})();var newTrack=function(){return tracks[tracks.length.fMul(Math.random())|0];};var m=["x","y","z"];for(var i=0;i<r["note"].length;i++){for(var j=0;j<m.length;j++){if(!isUndefined(r["note"][i]["where"][m[j]+"t"])){r["note"][i]["where"][m[j]+"t"]=newTrack();}
if(!isUndefined(r["note"][i]["where"][m[j]+"p"])){r["note"][i]["where"][m[j]+"p"]=Math.random();}
if((r["note"][i]["where"][m[j]]!=-1)&&!isUndefined(r["note"][i]["where"][m[j]+"t"])&&!isUndefined(r["note"][i]["where"][m[j]+"p"])){r["note"][i]["where"][m[j]]=r["note"][i]["where"][m[j]+"t"].fAdd(r["note"][i]["where"][m[j]+"p"]).fDiv(r["info"]["key"]);}}}
break;case"TrackCheck":if(options["TrackCheck"]){var tracks=[];var table=[];for(var i=0;i<options["TrackCheck"].length;i++){if(!isUndefined(options["TrackCheck"][i]["track"])&&(options["TrackCheck"][i]["track"]==options["TransKey"])){break;}
if(options["TrackCheck"][i]["checked"]){tracks.push(i);}
if(!isUndefined(options["TrackCheck"][i]["track"])){table[options["TrackCheck"][i]["track"]]=i;}}
var m=["x","y","z"];for(var i=0;i<r["note"].length;i++){for(var j=0;j<m.length;j++){if(!isUndefined(r["note"][i]["where"][m[j]+"t"])){r["note"][i]["where"][m[j]+"t"]=table[r["note"][i]["where"][m[j]+"t"]];}}}
for(var i=0;i<r["note"].length;i++){for(var j=0;j<m.length;j++){if(r["note"][i]["link"]["c"]==-1){continue;}
if(!isUndefined(r["note"][i]["where"][m[j]+"t"])&&!options["TrackCheck"][r["note"][i]["where"][m[j]+"t"]]["checked"]){var b=r["note"][i]["link"]["b"];if(b!=-1){r["note"][b]["link"]["a"]=-1;}
var a=r["note"][i]["link"]["a"];if(a!=-1){r["note"][a]["link"]["b"]=-1;}
r["note"][i]["link"]["c"]=-1;}}}
for(var i=0;i<r["note"].length;i++){for(var j=0;j<m.length;j++){if(r["note"][i]["link"]["c"]==-1){continue;}
if(!isUndefined(r["note"][i]["where"][m[j]+"t"])&&!isUndefined(r["note"][i]["where"][m[j]+"p"])){r["note"][i]["where"][m[j]]=tracks.indexOf(r["note"][i]["where"][m[j]+"t"]).fAdd(r["note"][i]["where"][m[j]+"p"]).fDiv(tracks.length);}}}
r["info"]["key"]=tracks.length;r["note"]=sortNote(r["note"]);}
break;case"XAxisRemove":for(var i=0;i<r["note"].length;i++){r["note"][i]["where"]["x"]=-1;}
break;case"YAxisRemove":for(var i=0;i<r["note"].length;i++){r["note"][i]["where"]["y"]=-1;}
break;case"ZAxisRemove":for(var i=0;i<r["note"].length;i++){r["note"][i]["where"]["z"]=-1;}
break;case"XAxisExtend":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["where"]["x"]==-1){r["note"][i]["where"]["x"]=axisFromNote(r,r["note"][i]["when"]["n"].fAdd((r["note"][i]["when"]["n"]%4).fDiv(4)));}}
break;case"YAxisExtend":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["where"]["y"]==-1){r["note"][i]["where"]["y"]=axisFromNote(r,r["note"][i]["when"]["n"]);}}
break;case"ZAxisExtend":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["where"]["z"]==-1){r["note"][i]["where"]["z"]=axisFromNote(r,r["note"][i]["when"]["n"].fSub((r["note"][i]["when"]["n"]%4).fDiv(4)));}}
break;case"InvisibleKeyRemove":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
if(r["note"][i]["flag"]["invisible"]){r["note"][i]["link"]["c"]=-1;}}
r["note"]=sortNote(r["note"]);break;case"InvalidKeyRemove":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
if(r["note"][i]["flag"]["invalid"]){r["note"][i]["link"]["c"]=-1;}}
r["note"]=sortNote(r["note"]);break;case"FakeKeyRemove":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
if(r["note"][i]["flag"]["fake"]){r["note"][i]["link"]["c"]=-1;}}
r["note"]=sortNote(r["note"]);break;case"DamageKeyRemove":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
if(r["note"][i]["flag"]["damage"]){r["note"][i]["link"]["c"]=-1;}}
r["note"]=sortNote(r["note"]);break;case"FlowRemove":for(var i=0;i<r["beat"].length;i++){r["beat"][i]["fpn"]=1;}
break;case"TransformRemove":r["transform"]=[];r["transformed"]=[];break;case"NoFlowBackward":var fpn=newItem("beat")["fpn"];for(var i=0;i<r["beat"].length;i++){if(r["beat"][i]["fpn"]<0){r["beat"][i]["fpn"]=(i?r["beat"][i-1]["fpn"]:fpn);}}
for(var i=1;i<r["beat"].length;i++){if((r["beat"][i]["bpm"]==r["beat"][i-1]["bpm"])&&(r["beat"][i]["bpn"]==r["beat"][i-1]["bpn"])&&(r["beat"][i]["dpb"]==r["beat"][i-1]["dpb"])&&(r["beat"][i]["fpn"]==r["beat"][i-1]["fpn"])&&(r["beat"][i]["lpn"]==r["beat"][i-1]["lpn"])){r["beat"].splice(i,1);i-=1;}}
break;case"NoFlowStop":var fpn=newItem("beat")["fpn"];for(var i=0;i<r["beat"].length;i++){if(r["beat"][i]["fpn"]==0){r["beat"][i]["fpn"]=(i?r["beat"][i-1]["fpn"]:fpn);}}
for(var i=1;i<r["beat"].length;i++){if((r["beat"][i]["bpm"]==r["beat"][i-1]["bpm"])&&(r["beat"][i]["bpn"]==r["beat"][i-1]["bpn"])&&(r["beat"][i]["dpb"]==r["beat"][i-1]["dpb"])&&(r["beat"][i]["fpn"]==r["beat"][i-1]["fpn"])&&(r["beat"][i]["lpn"]==r["beat"][i-1]["lpn"])){r["beat"].splice(i,1);i-=1;}}
break;case"NoFlowChange":var fpn=(!isUndefined(options["NoFlowChange"])?options["NoFlowChange"]:newItem("beat")["fpn"]);var isChange=false;var bpm=Math.floor(999/r["info"]["bpm"])*r["info"]["bpm"];for(var i=0;i<r["beat"].length;i++){if((r["beat"][i]["fpn"]>0)&&(r["beat"][i]["fpn"]!=fpn)){r["beat"][i]["bpm"]=r["beat"][i]["bpm"].fMul(r["beat"][i]["fpn"]).fDiv(fpn).toAbbreviated(6).toAccurated();r["beat"][i]["bpm"]=(r["beat"][i]["bpm"]>bpm?bpm:r["beat"][i]["bpm"]);r["beat"][i]["fpn"]=fpn;isChange=true;}}
for(var i=1;i<r["beat"].length;i++){if((r["beat"][i]["bpm"]==r["beat"][i-1]["bpm"])&&(r["beat"][i]["bpn"]==r["beat"][i-1]["bpn"])&&(r["beat"][i]["dpb"]==r["beat"][i-1]["dpb"])&&(r["beat"][i]["fpn"]==r["beat"][i-1]["fpn"])&&(r["beat"][i]["lpn"]==r["beat"][i-1]["lpn"])){r["beat"].splice(i,1);i-=1;}}
if(isChange){r=fixData(r,"BeatFromTime",{"BeatFromTime":true});r=fixData(r,"NoteFromBeat",{"NoteFromBeat":true});r["info"]["bpm"]=getMainBpm(r);}
break;case"LinkSingle":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
if((r["note"][i]["link"]["b"]==-1)&&(r["note"][i]["link"]["a"]==-1)){var n=i;var u=[];while(true){u.push(n);var l=(function(){var w=getLinkTracks(r["note"][n]["where"]["xt"],r["info"]["key"]);var a=(function(){var v=[];var t=[];for(var j=0;j<r["note"].length;j++){if((r["note"][j]["link"]["b"]==-1)&&(r["note"][j]["link"]["a"]==-1)){if((w.indexOf(r["note"][j]["where"]["xt"])!=-1)&&(r["note"][j]["when"]["b"].fSub(r["note"][n]["when"]["b"])>0)&&(r["note"][j]["when"]["b"].fSub(r["note"][n]["when"]["b"])<2)){t.push([r["note"][j]["when"]["b"],r["note"][j]["where"]["xt"],j]);}}}
var s=function(a,b){if(a[0]!=b[0]){return a[0]-b[0];}
else{return w.indexOf(a[1])-w.indexOf(b[1]);}}
t=t.sort(s);for(var j=0;j<t.length;j++){v.push(t[j][2]);}
return v;})();for(var j=0;j<a.length;j++){if(canLink([r["note"][n]["where"]["xt"],r["note"][n]["when"]["b"]],[r["note"][n]["where"]["xt"],r["note"][a[j]]["when"]["b"]],u,[a[j]])&&canLink([r["note"][n]["where"]["xt"],r["note"][a[j]]["when"]["b"]],[r["note"][a[j]]["where"]["xt"],r["note"][a[j]]["when"]["b"]],u,[a[j]])){return a[j];}}
return-1;})();if(l!=-1){r["note"].push(mergeObject(newItem("note"),{"when":r["note"][l]["when"],"where":r["note"][n]["where"],"link":{"b":r["note"][n]["link"]["c"],"c":r["note"][r["note"].length-1]["link"]["c"]+1,"a":r["note"][l]["link"]["c"]}},true));r["note"][l]["link"]["b"]=r["note"][r["note"].length-1]["link"]["c"];r["note"][n]["link"]["a"]=r["note"][r["note"].length-1]["link"]["c"];n=l;u.push(r["note"][r["note"].length-1]["link"]["c"]);}
else{break;}}}}
r["note"]=sortNote(r["note"]);break;case"LinkLong":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
if((r["note"][i]["link"]["a"]==-1)&&(r["note"][i]["link"]["b"]!=-1)&&(r["note"][r["note"][i]["link"]["b"]]["when"]["b"]!=r["note"][i]["when"]["b"])){var l=(function(){var w=getLinkTracks(r["note"][i]["where"]["xt"],r["info"]["key"]);var a=(function(){var v=[];var t=[];for(var j=0;j<r["note"].length;j++){if((r["note"][j]["link"]["b"]==-1)&&(r["note"][j]["link"]["a"]!=-1)&&(r["note"][r["note"][j]["link"]["a"]]["when"]["b"]!=r["note"][j]["when"]["b"])){if((w.indexOf(r["note"][j]["where"]["xt"])!=-1)&&(r["note"][j]["when"]["b"]==r["note"][i]["when"]["b"])){t.push([r["note"][j]["where"]["xt"],j]);}}}
var s=function(a,b){return w.indexOf(a[0])-w.indexOf(b[0]);}
t=t.sort(s);for(var j=0;j<t.length;j++){v.push(t[j][1]);}
return v;})();for(var j=0;j<a.length;j++){if(canLink([r["note"][i]["where"]["xt"],r["note"][i]["when"]["b"]],[r["note"][a[j]]["where"]["xt"],r["note"][a[j]]["when"]["b"]],[],[[r["note"][i]["link"]["b"]],i,a[j],[r["note"][a[j]]["link"]["a"]]])){return a[j];}}
return-1;})();if(l!=-1){r["note"][i]["link"]["a"]=r["note"][l]["link"]["c"];r["note"][l]["link"]["b"]=r["note"][i]["link"]["c"];}}}
r["note"]=sortNote(r["note"]);break;case"LinkSlide":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
if((r["note"][i]["link"]["b"]==-1)&&(r["note"][i]["link"]["a"]==-1)){var l=(function(){var w=getLinkTracks(r["note"][i]["where"]["xt"],r["info"]["key"]);var b=(function(){var v=[];var t=[];for(var j=0;j<r["note"].length;j++){if((r["note"][j]["link"]["a"]==-1)&&(r["note"][j]["link"]["b"]!=-1)&&(r["note"][r["note"][j]["link"]["b"]]["when"]["b"]!=r["note"][j]["when"]["b"])){if((w.indexOf(r["note"][j]["where"]["xt"])!=-1)&&(r["note"][j]["when"]["b"]==r["note"][i]["when"]["b"])){t.push([r["note"][j]["where"]["xt"],j]);}}}
var s=function(a,b){return w.indexOf(a[0])-w.indexOf(b[0]);}
t=t.sort(s);for(var j=0;j<t.length;j++){v.push(t[j][1]);}
return v;})();for(var j=0;j<b.length;j++){if(canLink([r["note"][i]["where"]["xt"],r["note"][i]["when"]["b"]],[r["note"][b[j]]["where"]["xt"],r["note"][b[j]]["when"]["b"]],[],[r["note"][b[j]]["link"]["b"],b[j],i])){return b[j];}}
var a=(function(){var v=[];var t=[];for(var j=0;j<r["note"].length;j++){if((r["note"][j]["link"]["b"]==-1)&&(r["note"][j]["link"]["a"]!=-1)&&(r["note"][r["note"][j]["link"]["a"]]["when"]["b"]!=r["note"][j]["when"]["b"])){if((w.indexOf(r["note"][j]["where"]["xt"])!=-1)&&(r["note"][j]["when"]["b"]==r["note"][i]["when"]["b"])){t.push([r["note"][j]["where"]["xt"],j]);}}}
var s=function(a,b){return w.indexOf(a[0])-w.indexOf(b[0]);}
t=t.sort(s);for(var j=0;j<t.length;j++){v.push(t[j][1]);}
return v;})();for(var j=0;j<a.length;j++){if(canLink([r["note"][i]["where"]["xt"],r["note"][i]["when"]["b"]],[r["note"][a[j]]["where"]["xt"],r["note"][a[j]]["when"]["b"]],[],[i,a[j],[r["note"][a[j]]["link"]["a"]]])){return a[j];}}
return-1;})();if(l!=-1){if(r["note"][l]["link"]["b"]==-1){r["note"][i]["link"]["a"]=r["note"][l]["link"]["c"];r["note"][l]["link"]["b"]=r["note"][i]["link"]["c"];}
else if(r["note"][l]["link"]["a"]==-1){r["note"][i]["link"]["b"]=r["note"][l]["link"]["c"];r["note"][l]["link"]["a"]=r["note"][i]["link"]["c"];}}}}
r["note"]=sortNote(r["note"]);break;case"TransOblique":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
var b=r["note"][i]["link"]["b"];var a=r["note"][i]["link"]["a"];if((b!=-1)&&(a!=-1)){if((r["note"][b]["where"]["x"]==r["note"][i]["where"]["x"])&&(r["note"][b]["when"]["b"]!=r["note"][i]["when"]["b"])){if((r["note"][i]["where"]["x"]!=r["note"][a]["where"]["x"])&&(r["note"][i]["when"]["b"]==r["note"][a]["when"]["b"])){r["note"][b]["link"]["a"]=r["note"][a]["link"]["c"];r["note"][a]["link"]["b"]=r["note"][b]["link"]["c"];r["note"][i]["link"]["c"]=-1;}}}}
r["note"]=sortNote(r["note"]);break;case"NoOblique":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
var b=r["note"][i]["link"]["b"];if((b!=-1)&&(r["note"][b]["link"]["c"]!=-1)){if(r["note"][b]["where"]["xt"]!=r["note"][i]["where"]["xt"]){if(r["note"][b]["when"]["b"]!=r["note"][i]["when"]["b"]){var a=r["note"][i]["link"]["a"];if((a!=-1)&&(r["note"][a]["link"]["c"]!=-1)&&(r["note"][a]["when"]["b"]!=r["note"][i]["when"]["b"])&&(r["note"][a]["where"]["xt"]==r["note"][b]["where"]["xt"])){r["note"][b]["link"]["a"]=r["note"][a]["link"]["c"];r["note"][a]["link"]["b"]=r["note"][b]["link"]["c"];r["note"][i]["link"]["c"]=-1;}
else{r["note"].push(mergeObject(newItem("note"),{"when":r["note"][i]["when"],"where":r["note"][b]["where"],"link":{"b":r["note"][b]["link"]["c"],"c":r["note"][r["note"].length-1]["link"]["c"]+1,"a":r["note"][i]["link"]["c"]}},true));r["note"][b]["link"]["a"]=r["note"][r["note"].length-1]["link"]["c"];r["note"][i]["link"]["b"]=r["note"][r["note"].length-1]["link"]["c"];}}}}}
r["note"]=sortNote(r["note"]);break;case"NoSlide":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
var b=r["note"][i]["link"]["b"];if(b!=-1){if(r["note"][b]["where"]["xt"]!=r["note"][i]["where"]["xt"]){if(r["note"][b]["when"]["b"]==r["note"][i]["when"]["b"]){r["note"][b]["link"]["a"]=-1;r["note"][i]["link"]["b"]=-1;}}}}
r["note"]=sortNote(r["note"]);break;case"NoLong":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
var b=r["note"][i]["link"]["b"];if((b!=-1)&&(r["note"][b]["when"]["b"]!=r["note"][i]["when"]["b"])){if(r["note"][b]["where"]["xt"]==r["note"][i]["where"]["xt"]){if(r["note"][i]["link"]["a"]!=-1){r["note"][i]["link"]["b"]=-1;}
else{r["note"][i]["link"]["c"]=-1;}}
else{r["note"].push(mergeObject(newItem("note"),{"when":r["note"][i]["when"],"where":r["note"][b]["where"],"link":{"b":-1,"c":r["note"][r["note"].length-1]["link"]["c"]+1,"a":r["note"][i]["link"]["c"]}},true));r["note"][i]["link"]["b"]=r["note"][r["note"].length-1]["link"]["c"];}
r["note"][b]["link"]["a"]=-1;}}
r["note"]=sortNote(r["note"]);break;case"NoSingle":for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
if((r["note"][i]["link"]["b"]==-1)&&(r["note"][i]["link"]["a"]==-1)){r["note"][i]["link"]["c"]=-1;}}
r["note"]=sortNote(r["note"]);break;case"XTrackNoIntersect":case"YTrackNoIntersect":case"ZTrackNoIntersect":case"XAxisNoCross":case"YAxisNoCross":case"ZAxisNoCross":var bans=(function(){var list=[];var whenMultiply=24;var whereMultiply=1024;var key=r["info"]["key"];var widthHalf=(whereMultiply/key/2)|0;var type=(function(){var m=["NoIntersect","NoCross"];for(var i=0;i<m.length;i++){if(mode.indexOf(m[i])!=-1){return m[i];}}
return"";})();var track=(function(){var m=["XTrack","YTrack","ZTrack"];for(var i=0;i<m.length;i++){if(mode.indexOf(m[i])!=-1){return m[i][0].toLowerCase();}}
return"";})();var axis=(function(){var m=["XAxis","YAxis","ZAxis"];for(var i=0;i<m.length;i++){if(mode.indexOf(m[i])!=-1){return m[i][0].toLowerCase();}}
return"";})();var dict=track||axis;if(type&&dict){var hash=[];var ban=function(a,b,c,d){switch(type){case"NoIntersect":return Math.isLineIntersect(a,b,c,d);break;case"NoCross":if((a[0]==b[0])&&(a[1]==b[1])){a[0]-=widthHalf;b[0]+=widthHalf;}
if((c[0]==d[0])&&(c[1]==d[1])){c[0]-=widthHalf;d[0]+=widthHalf;}
a[0]=a[0].limit(0,whereMultiply);b[0]=b[0].limit(0,whereMultiply);c[0]=c[0].limit(0,whereMultiply);d[0]=d[0].limit(0,whereMultiply);return Math.isLineCross(a,b,c,d);break;}};var copy=(function(){var v=[];for(var i=0;i<r["note"].length;i++){var where=(function(){var v={};switch(type){case"NoIntersect":v["x"]=(r["note"][i]["where"]["xt"]!=-1?r["note"][i]["where"]["xt"]:r["note"][i]["where"]["xt"]);v["y"]=(r["note"][i]["where"]["yt"]!=-1?r["note"][i]["where"]["yt"]:r["note"][i]["where"]["yt"]);v["z"]=(r["note"][i]["where"]["zt"]!=-1?r["note"][i]["where"]["zt"]:r["note"][i]["where"]["zt"]);break;case"NoCross":v["x"]=(r["note"][i]["where"]["x"]!=-1?(r["note"][i]["where"]["x"]*whereMultiply)|0:r["note"][i]["where"]["x"]);v["y"]=(r["note"][i]["where"]["y"]!=-1?(r["note"][i]["where"]["y"]*whereMultiply)|0:r["note"][i]["where"]["y"]);v["z"]=(r["note"][i]["where"]["z"]!=-1?(r["note"][i]["where"]["z"]*whereMultiply)|0:r["note"][i]["where"]["z"]);break;}
return v;})();v.push({"when":{"b":(r["note"][i]["when"]["b"].fMul(whenMultiply))|0},"where":where,"link":{"b":r["note"][i]["link"]["b"],"c":r["note"][i]["link"]["c"],"a":r["note"][i]["link"]["a"]}});}
return v;})();for(var i=0;i<copy.length;i++){for(var j=i+1;j<copy.length;j++){var j2=(copy[j]["link"]["a"]!=-1?copy[j]["link"]["a"]:j);var i2=(copy[i]["link"]["a"]!=-1?copy[i]["link"]["a"]:i);if(j==i2){continue;}
var u=0.25*whenMultiply;if((copy[j]["when"]["b"]>copy[i2]["when"]["b"]+u)&&(copy[j]["link"]["b"]==-1)){break;}
var a=[copy[i]["where"][dict],copy[i]["when"]["b"]];var b=[copy[i2]["where"][dict],copy[i2]["when"]["b"]];var c=[copy[j]["where"][dict],copy[j]["when"]["b"]];var d=[copy[j2]["where"][dict],copy[j2]["when"]["b"]];if((a[0]!=-1)&&(b[0]!=-1)&&(c[0]!=-1)&&(d[0]!=-1)){if(a[1].isClose(c[1],u)){a[1]=c[1];}
if(b[1].isClose(c[1],u)){b[1]=c[1];}
if(a[1].isClose(d[1],u)){a[1]=d[1];}
if(b[1].isClose(d[1],u)){b[1]=d[1];}
if(ban(a,b,c,d)){hash[i]=hash[i]||[];hash[i].push(j);hash[j]=hash[j]||[];hash[j].push(i);}}}}
for(var i=hash.length-1;i>-1;i--){while(hash[i]&&hash[i].length){var l=(function(){var max=(function(){var v=hash[i].length;for(var j=0;j<hash[i].length;j++){v=(v>hash[hash[i][j]].length?v:hash[hash[i][j]].length);}
return v;})();var a=[];if(hash[i].length==max){a.push(i);}
for(var j=0;j<hash[i].length;j++){if(hash[hash[i][j]].length==max){a.push(hash[i][j]);}}
var min=(function(){var v=(copy[a[0]]["link"]["a"]!=-1?copy[copy[a[0]]["link"]["a"]]["when"]["b"]:copy[a[0]]["when"]["b"])-copy[a[0]]["when"]["b"];for(var j=0;j<a.length;j++){var d=(copy[a[j]]["link"]["a"]!=-1?copy[copy[a[j]]["link"]["a"]]["when"]["b"]:copy[a[j]]["when"]["b"])-copy[a[j]]["when"]["b"];v=(v<d?v:d);}
return v;})();for(var j=a.length-1;j>-1;j--){if((copy[a[j]]["link"]["a"]!=-1?copy[copy[a[j]]["link"]["a"]]["when"]["b"]:copy[a[j]]["when"]["b"])-copy[a[j]]["when"]["b"]==min){return a[j];}}})();list.push(l);for(var j=0;j<hash[l].length;j++){hash[hash[l][j]].splice(hash[hash[l][j]].indexOf(l),1);}
hash[l]=[];}}}
return list;})();if(bans.length){for(var i=0;i<bans.length;i++){r["note"][bans[i]]["link"]["c"]=-1;}
r["note"]=sortNote(r["note"]);}
break;case"EquilongDrag":r=toData(r,"TransOblique");var c=classifyNote(r["note"]);var d=(function(){var v=[];for(var i=0;i<c["drag"].length;i++){var t=[];var ut=0;var ul=0;for(var j=1;j<c["drag"][i].length;j++){var ct=c["drag"][i][j]["when"]["t"].fSub(c["drag"][i][j-1]["when"]["t"]);var cl=Math.getPointsLength([[c["drag"][i][j]["where"]["x"],c["drag"][i][j]["where"]["y"],c["drag"][i][j]["where"]["z"]],[c["drag"][i][j-1]["where"]["x"],c["drag"][i][j-1]["where"]["y"],c["drag"][i][j-1]["where"]["z"]]]);if(ct!=0){if(ct.isClose(ut)&&cl.isNear(ul)){t.push(copyObject(c["drag"][i][j]));}
else{ut=ct;ul=cl;if(t.length>0){v.push(t);}
t=[copyObject(c["drag"][i][j-1]),copyObject(c["drag"][i][j])];}}
if(j==c["drag"][i].length-1){if(t.length>0){v.push(t);}}}}
for(var i=0;i<v.length;i++){v[i][0]["link"]["b"]=-1;v[i][v[i].length-1]["link"]["a"]=-1;}
return v;})();var n=(function(){var v=[];var t=[].concat(c["tab"],c["hold"],c["slide"],d);for(var i=0;i<t.length;i++){v.writes(t[i]);}
return v;})();r["note"]=sortNote(n);break;case"CatchBase":r=toData(r,"TransOblique");for(var i=r["note"].length-1;i>-1;i--){if(r["note"][i]["link"]["c"]==-1){continue;}
var a=r["note"][i]["link"]["a"];if(a!=-1){for(var j=r["note"].length-1;j>-1;j--){if(r["note"][j]["link"]["c"]==-1){continue;}
if((r["note"][j]["link"]["b"]==-1)&&(r["note"][j]["link"]["a"]==-1)){if((r["note"][j]["when"]["b"]>=r["note"][i]["when"]["b"])&&(r["note"][j]["when"]["b"]<=r["note"][a]["when"]["b"])){if(r["note"][j]["when"]["b"]==r["note"][i]["when"]["b"]){var b=r["note"][i]["link"]["b"];if(b!=-1){r["note"][b]["link"]["a"]=-1;}
r["note"][i]["link"]["b"]=-1;r["note"][a]["link"]["b"]=-1;if(r["note"][a]["link"]["a"]==-1){r["note"][a]["link"]["c"]=-1;}
r["note"][i]["link"]["a"]=-1;r["note"][i]["link"]["c"]=-1;}
else if(r["note"][j]["when"]["b"]==r["note"][a]["when"]["b"]){r["note"][i]["link"]["a"]=-1;r["note"][a]["link"]["b"]=-1;var a2=r["note"][a]["link"]["a"];if(a2!=-1){r["note"][a2]["link"]["b"]=-1;if(r["note"][a2]["link"]["a"]==-1){r["note"][a2]["link"]["c"]=-1;}}
r["note"][a]["link"]["a"]=-1;r["note"][a]["link"]["c"]=-1;}
else{r["note"][a]["link"]["b"]=-1;if(r["note"][a]["link"]["a"]==-1){r["note"][a]["link"]["c"]=-1;}
r["note"][i]["link"]["a"]=-1;}
break;}}}}}
for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
var a=r["note"][i]["link"]["a"];if((r["note"][i]["link"]["b"]==-1)&&(a!=-1)&&(r["note"][a]["link"]["a"]==-1)&&(r["note"][i]["where"]["x"]==r["note"][a]["where"]["x"])){for(var j=a+1;j<r["note"].length;j++){if(r["note"][j]["link"]["c"]==-1){continue;}
var a2=r["note"][j]["link"]["a"];if((a2!=-1)&&(((r["note"][j]["when"]["b"]>=r["note"][i]["when"]["b"])&&(r["note"][j]["when"]["b"]<=r["note"][a]["when"]["b"]))||((r["note"][a2]["when"]["b"]>=r["note"][i]["when"]["b"])&&(r["note"][a2]["when"]["b"]<=r["note"][a]["when"]["b"])))){r["note"][i]["link"]["a"]=-1;r["note"][i]["link"]["c"]=-1;r["note"][a]["link"]["b"]=-1;r["note"][a]["link"]["c"]=-1;}}}}
for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
var a=r["note"][i]["link"]["a"];if(a!=-1){for(var j=a+1;j<r["note"].length;j++){if(r["note"][j]["link"]["c"]==-1){continue;}
var a2=r["note"][j]["link"]["a"];if(a2!=-1){if((r["note"][j]["when"]["b"]>=r["note"][i]["when"]["b"])&&(r["note"][j]["when"]["b"]<=r["note"][a]["when"]["b"])){r["note"][j]["link"]["a"]=-1;r["note"][j]["link"]["c"]=-1;r["note"][a2]["link"]["b"]=-1;}}}}}
for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
if((r["note"][i]["link"]["b"]==-1)&&(r["note"][i]["link"]["a"]==-1)){var s={"x":0,"y":0,"z":0};var c={"x":0,"y":0,"z":0};var add=function(w){var m=["x","y","z"];for(var k=0;k<m.length;k++){if(w[m[k]]!=-1){s[m[k]]+=w[m[k]];c[m[k]]+=1;}}};add(r["note"][i]["where"]);for(var j=i+1;j<r["note"].length;j++){if(r["note"][j]["link"]["c"]==-1){continue;}
if((r["note"][j]["link"]["b"]==-1)&&(r["note"][j]["link"]["a"]==-1)&&(r["note"][j]["when"]["b"]==r["note"][i]["when"]["b"])){add(r["note"][j]["where"]);r["note"][j]["link"]["c"]=-1;}}
r["note"][i]["where"]={"x":(c["x"]?s["x"]/c["x"]:-1),"y":(c["y"]?s["y"]/c["y"]:-1),"z":(c["y"]?s["y"]/c["y"]:-1)};}}
r["note"]=sortNote(r["note"]);r=toData(r,"EquilongDrag");break;case"TaikoBase":r=toData(r,"NoSlide");for(var i=r["note"].length-1;i>-1;i--){if(r["note"][i]["link"]["c"]==-1){continue;}
var a=r["note"][i]["link"]["a"];if((r["note"][i]["link"]["b"]==-1)&&(a!=-1)){for(var j=r["note"].length-1;j>-1;j--){if(r["note"][j]["link"]["c"]==-1){continue;}
if((r["note"][j]["link"]["b"]==-1)&&(r["note"][j]["link"]["a"]==-1)){if((r["note"][j]["when"]["b"]>=r["note"][i]["when"]["b"])&&(r["note"][j]["when"]["b"]<=r["note"][a]["when"]["b"])){r["note"][i]["link"]["a"]=-1;r["note"][a]["link"]["b"]=-1;r["note"][a]["link"]["c"]=-1;break;}}}}}
for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
var a=r["note"][i]["link"]["a"];if((r["note"][i]["link"]["b"]==-1)&&(a!=-1)){for(var j=i+1;j<r["note"].length;j++){if(r["note"][j]["link"]["c"]==-1){continue;}
var a2=r["note"][j]["link"]["a"];if((r["note"][j]["link"]["b"]==-1)&&(a2!=-1)){if((r["note"][j]["when"]["b"]>=r["note"][i]["when"]["b"])&&(r["note"][j]["when"]["b"]<=r["note"][a]["when"]["b"])){if(r["note"][a2]["when"]["b"]>r["note"][a]["when"]["b"]){r["note"][a]["when"]["b"]=r["note"][a2]["when"]["b"];r["note"][a]["when"]["n"]=r["note"][a2]["when"]["n"];r["note"][a]["when"]["t"]=r["note"][a2]["when"]["t"];}
r["note"][j]["link"]["a"]=-1;r["note"][j]["link"]["c"]=-1;r["note"][a2]["link"]["b"]=-1;r["note"][a2]["link"]["c"]=-1;}}}}}
for(var i=0;i<r["note"].length;i++){if(r["note"][i]["link"]["c"]==-1){continue;}
var a=r["note"][i]["link"]["a"];if((r["note"][i]["link"]["b"]==-1)&&(a!=-1)){if(r["note"][a]["when"]["b"]-r["note"][i]["when"]["b"]<0.25){r["note"][i]["link"]["a"]=-1;r["note"][a]["link"]["b"]=-1;r["note"][a]["link"]["c"]=-1;}}}
r["note"]=sortNote(r["note"]);break;}
return r;};var extData=function(data,index){if(MstOptions["XAxisRemove"][index]){data=toData(data,"XAxisRemove");}
if(MstOptions["YAxisRemove"][index]){data=toData(data,"YAxisRemove");}
if(MstOptions["ZAxisRemove"][index]){data=toData(data,"ZAxisRemove");}
if(MstOptions["XAxisExtend"][index]){data=toData(data,"XAxisExtend");}
if(MstOptions["YAxisExtend"][index]){data=toData(data,"YAxisExtend");}
if(MstOptions["ZAxisExtend"][index]){data=toData(data,"ZAxisExtend");}
if(MstOptions["InvisibleKeyRemove"][index]){data=toData(data,"InvisibleKeyRemove");}
if(MstOptions["InvalidKeyRemove"][index]){data=toData(data,"InvalidKeyRemove");}
if(MstOptions["FakeKeyRemove"][index]){data=toData(data,"FakeKeyRemove");}
if(MstOptions["DamageKeyRemove"][index]){data=toData(data,"DamageKeyRemove");}
if(MstOptions["FlowRemove"][index]){data=toData(data,"FlowRemove");}
if(MstOptions["TransformRemove"][index]){data=toData(data,"TransformRemove");}
data=toData(data,"TransKey",{"TransKey":MstOptions["TransKey"][index]});if(MstOptions["ChangeFlow"][index]!=1){data=toData(data,"ChangeFlow",{"ChangeFlow":MstOptions["ChangeFlow"][index]});}
if(MstOptions["ChangeSpeed"][index]!=1){data=toData(data,"ChangeSpeed",{"ChangeSpeed":MstOptions["ChangeSpeed"][index]});}
if(MstOptions["MirrorTrack"][index]){data=toData(data,"MirrorTrack");}
if(MstOptions["RandomTrack"][index]){data=toData(data,"RandomTrack");}
if(MstOptions["RandomNote"][index]){data=toData(data,"RandomNote");}
data["info"]["length"]=(function(){data["info"]["length"]=data["info"]["length"]||{};data["info"]["length"]["when"]=data["info"]["length"]["when"]||{};if(isUndefined(data["info"]["length"]["when"]["b"])||isUndefined(data["info"]["length"]["when"]["n"])||isUndefined(data["info"]["length"]["when"]["t"])){var beat=(!isUndefined(data["info"]["length"]["when"]["b"])?data["info"]["length"]["when"]["b"]:(!isUndefined(data["info"]["length"]["when"]["n"])?beatFromNote(data,data["info"]["length"]["when"]["n"]):beatFromTime(data,data["info"]["length"]["when"]["t"])));var note=noteFromBeat(data,beat);var time=timeFromBeat(data,beat);return{"when":{"b":beat,"n":note,"t":time}};}})();data["info"]["min"]=(function(){var note=(data["info"]["min"]&&data["info"]["min"]["when"]?data["info"]["min"]["when"]["n"]:0);for(var i=0;i<data["beat"].length;i++){if(note>data["beat"][i]["when"]["n"]){note=data["beat"][i]["when"]["n"];}}
for(var i=0;i<data["note"].length;i++){if(note>data["note"][i]["when"]["n"]){note=data["note"][i]["when"]["n"];}}
for(var i=0;i<data["effect"].length;i++){if(note>data["effect"][i]["when"]["n"]){note=data["effect"][i]["when"]["n"];}}
for(var i=0;i<data["status"].length;i++){if(note>data["status"][i]["when"]["n"]){note=data["status"][i]["when"]["n"];}}
for(var i=0;i<data["transform"].length;i++){if(note>data["transform"][i]["when"]["n"]){note=data["transform"][i]["when"]["n"];}}
for(var i=0;i<data["transformed"].length;i++){if(note>data["transformed"][i]["when"]["n"]){note=data["transformed"][i]["when"]["n"];}}
note=Math.floor(note>data["info"]["start"]["when"]["n"]?data["info"]["start"]["when"]["n"]:note);var beat=beatFromNote(data,note);var time=timeFromBeat(data,beat);if(data["beat"][0]["when"]["t"]>time){data["beat"][0]["when"]={"b":beat,"n":note,"t":time};}
return{"when":{"b":beat,"n":note,"t":time}};})();data["info"]["max"]=(function(){var note=(data["info"]["max"]&&data["info"]["max"]["when"]&&!isUndefined(data["info"]["max"]["when"]["n"])?data["info"]["max"]["when"]["n"]:0);for(var i=0;i<data["beat"].length;i++){if(note<data["beat"][i]["when"]["n"]){note=data["beat"][i]["when"]["n"];}}
for(var i=0;i<data["note"].length;i++){if(note<data["note"][i]["when"]["n"]){note=data["note"][i]["when"]["n"];}}
for(var i=0;i<data["effect"].length;i++){if(note<data["effect"][i]["when"]["n"]){note=data["effect"][i]["when"]["n"];}}
for(var i=0;i<data["status"].length;i++){if(note<data["status"][i]["when"]["n"]){note=data["status"][i]["when"]["n"];}}
for(var i=0;i<data["transform"].length;i++){if(note<data["transform"][i]["when"]["n"]){note=data["transform"][i]["when"]["n"];}}
for(var i=0;i<data["transformed"].length;i++){if(note<data["transformed"][i]["when"]["n"]){note=data["transformed"][i]["when"]["n"];}}
data["info"]["length"]=data["info"]["length"]||{};data["info"]["length"]["when"]=data["info"]["length"]["when"]||{};var length=data["info"]["length"]["when"]["n"]||0;note=(note<length?length:note);note=Math.ceil(note);note=(note%2?note+1:note)||1;var beat=beatFromNote(data,note);var time=timeFromBeat(data,beat);if(isUndefined(data["info"]["length"]["when"]["t"])){data["info"]["length"]={"when":{"b":beat,"n":note,"t":time}};}
return{"when":{"b":beat,"n":note,"t":time}};})();data["info"]["bpm"]=getMainBpm(data);data["info"]["bpn"]=getMainBpn(data);data=toData(data,"TrackCheck",{"TransKey":MstOptions["TransKey"][index],"TrackCheck":MstOptions["TrackCheck"][index]});if(MstOptions["NoFlowBackward"][index]){data=toData(data,"NoFlowBackward");}
if(MstOptions["NoFlowStop"][index]){data=toData(data,"NoFlowStop");}
if(MstOptions["LinkSingle"][index]){data=toData(data,"LinkSingle");}
if(MstOptions["LinkLong"][index]){data=toData(data,"LinkLong");}
if(MstOptions["LinkSlide"][index]){data=toData(data,"LinkSlide");}
if(MstOptions["TransOblique"][index]){data=toData(data,"TransOblique");}
if(MstOptions["NoOblique"][index]){data=toData(data,"NoOblique");}
if(MstOptions["NoSlide"][index]){data=toData(data,"NoSlide");}
if(MstOptions["NoLong"][index]){data=toData(data,"NoLong");}
if(MstOptions["NoSingle"][index]){data=toData(data,"NoSingle");}
data=toData(data,"FormatValue");return data;};var repairData=function(data,index){if(MstOptions["XTrackNoIntersect"][index]){data=toData(data,"XTrackNoIntersect");}
if(MstOptions["YTrackNoIntersect"][index]){data=toData(data,"YTrackNoIntersect");}
if(MstOptions["ZTrackNoIntersect"][index]){data=toData(data,"ZTrackNoIntersect");}
if(MstOptions["XAxisNoCross"][index]){data=toData(data,"XAxisNoCross");}
if(MstOptions["YAxisNoCross"][index]){data=toData(data,"YAxisNoCross");}
if(MstOptions["ZAxisNoCross"][index]){data=toData(data,"ZAxisNoCross");}
return data;};var toDraw=function(index,type){var r={};if(!Semi["draw"][index][type]){switch(type){case"bms":Text["bmsbms"][index]=Text["bmsbms"][index]||toText([index],"bms","bms");break;case"tja":Text["tjataiko"][index]=Text["tjataiko"][index]||toText([index],"tja","taiko");break;case"osu":Text["osumania"][index]=Text["osumania"][index]||toText([index],"osu","mania");break;case"imd":Text["imd"][index]=Text["imd"][index]||toText([index],"imd");break;case"mc":Text["mckey"][index]=Text["mckey"][index]||toText([index],"mc","key");break;case"aff":Text["aff"][index]=Text["aff"][index]||toText([index],"aff");break;case"txt":Text["txtbangdream"][index]=Text["txtbangdream"][index]||toText([index],"txt","bangdream");break;}}
for(var child=0;child<Semi["draw"][index][type]["list"].length;child++){for(var i=0;i<Semi["draw"][index][type]["list"][child]["noteData"].length;i++){Semi["draw"][index][type]["list"][child]["noteData"][i]["when2"]=Semi["draw"][index][type]["list"][child]["noteData"][i]["when2"]||{"b":Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["b"],"n":Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["n"],"t":Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"]};Semi["draw"][index][type]["list"][child]["noteData"][i]["where2"]=Semi["draw"][index][type]["list"][child]["noteData"][i]["where2"]||{"x":Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"]};Semi["draw"][index][type]["list"][child]["noteData"][i]["flag"]=Semi["draw"][index][type]["list"][child]["noteData"][i]["flag"]||{};}}
var noteData=(function(){var v=[];for(var child=0;child<Semi["draw"][index][type]["list"].length;child++){for(var i=0;i<Semi["draw"][index][type]["list"][child]["noteData"].length;i++){v.push(mergeObject(Semi["draw"][index][type]["list"][child]["noteData"][i],{"child":child},true));}}
return v;})();var determineData=(function(){var v=[];for(var child=0;child<Semi["draw"][index][type]["list"].length;child++){for(var i=0;i<Semi["draw"][index][type]["list"][child]["noteData"].length;i++){if(Semi["draw"][index][type]["list"][child]["noteData"][i]["flag"]&&(Semi["draw"][index][type]["list"][child]["noteData"][i]["flag"]["invalid"]||Semi["draw"][index][type]["list"][child]["noteData"][i]["flag"]["fake"]||Semi["draw"][index][type]["list"][child]["noteData"][i]["flag"]["damage"])){continue;}
switch(Semi["draw"][index][type]["list"][child]["noteData"][i]["action"]){case 0x00:v.push([Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"],1,Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"],child]);break;case 0x01:v.push([Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"],2,Semi["draw"][index][type]["list"][child]["noteData"][i]["where2"]["x"],child]);break;case 0x61:break;case 0x21:switch(type){case"aff":case"txt":v.push([Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"],1,Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"],child]);}
break;case 0xA1:v.push([Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"],2,Semi["draw"][index][type]["list"][child]["noteData"][i]["where2"]["x"],child]);break;case 0x02:case 0x62:case 0x22:case 0xA2:switch(type){case"txt":v.push([Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"],1,Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"],child]);break;default:var d=[];var t=[];var dt=Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"];var db=beatFromTime(Semi["draw"][index][type]["list"][child]["data"],dt,0);var pt=1;var affNew=(function(){if((type=="aff")&&(Semi["draw"][index][type]["list"][child]["noteData"][i]["action"]==0x22)){for(var j=0;j<Semi["draw"][index][type]["list"][child]["noteData"].length;j++){if((j!=i)&&(Semi["draw"][index][type]["list"][child]["noteData"][j]["action"]==0x22)&&!Semi["draw"][index][type]["list"][child]["noteData"][j]["flag"]["invalid"]&&!Semi["draw"][index][type]["list"][child]["noteData"][j]["flag"]["fake"]&&((((Semi["draw"][index][type]["list"][child]["noteData"][j]["when"]["t"]<Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"])&&(Semi["draw"][index][type]["list"][child]["noteData"][j]["when2"]["t"]>=Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"]))||((Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"].fSub(Semi["draw"][index][type]["list"][child]["noteData"][j]["when2"]["t"])>=0)&&(Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"].fSub(Semi["draw"][index][type]["list"][child]["noteData"][j]["when2"]["t"])<10)))&&(Math.abs(Semi["draw"][index][type]["list"][child]["noteData"][j]["where2"]["x"].fSub(Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"]))<0.1)&&(Semi["draw"][index][type]["list"][child]["noteData"][j]["where2"]["y"]==Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["y"]))){return false;}}}
return true;})();switch(type){case"aff":if(!affNew&&(Semi["draw"][index][type]["list"][child]["noteData"][i]["when2"]["t"]>Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"])){d.push([dt+1,(Semi["draw"][index][type]["list"][child]["noteData"][i]["action"]==0x22?2:1),Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"]]);}
pt=(function(){var beat=getBeat(Semi["draw"][index][type]["list"][child]["data"],dt);var bpm=beat["bpm"].fMul(beat["fpn"]).toAbbreviated(6).toAccurated();return Math.abs((bpm>255?60000/bpm:(bpm==0?0:60000/bpm/2)));})();break;default:d.push([dt,((Semi["draw"][index][type]["list"][child]["noteData"][i]["action"]==0x22)||(Semi["draw"][index][type]["list"][child]["noteData"][i]["action"]==0xA2)?2:1),Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"]]);break;}
while(true){switch(type){case"bms":db=db.fAdd(1/4);dt=timeFromBeat(Semi["draw"][index][type]["list"][child]["data"],db);break;case"tja":dt=Semi["draw"][index][type]["list"][child]["noteData"][i]["when2"]["t"].fAdd(1);break;case"osu":dt=dt.fAdd(100);break;case"imd":pt=(function(){for(var j=0;j<Semi["draw"][index][type]["list"][child]["data"]["beat"].length;j++){if((dt>=Semi["draw"][index][type]["list"][child]["data"]["beat"][j]["when"]["t"])&&(((j<Semi["draw"][index][type]["list"][child]["data"]["beat"].length-1)&&(dt<Semi["draw"][index][type]["list"][child]["data"]["beat"][j+1]["when"]["t"]))||(j>=Semi["draw"][index][type]["list"][child]["data"]["beat"].length-1))){return Math.abs((60000).fDiv(Semi["draw"][index][type]["list"][child]["data"]["beat"][j]["bpm"]).fDiv(Semi["draw"][index][type]["list"][child]["data"]["beat"][j]["fpn"])|0);}}
return 120;})();dt=dt.fAdd(pt);break;case"mc":db=db.fAdd(222/768);dt=timeFromBeat(Semi["draw"][index][type]["list"][child]["data"],db);break;case"aff":dt=dt.fAdd(pt);break;}
if(dt.toAbbreviated(6).toAccurated()<=Semi["draw"][index][type]["list"][child]["noteData"][i]["when2"]["t"]){t.push(dt.toAbbreviated(6).toAccurated());}
else{break;}
if(!pt){break;}}
switch(type){case"aff":for(var j=0;j<t.length-1;j++){var t0=(j?t[j-1]:Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"]);d.push([t0.fAdd(t[j].fSub(t0).fDiv(2)),1,Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"]]);}
if(!d.length&&(Semi["draw"][index][type]["list"][child]["noteData"][i]["when2"]["t"]>Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"])){d.push([Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"].fAdd(1),1,Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"]]);}
break;default:for(var j=0;j<t.length;j++){d.push([t[j],1,Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"]]);}
break;}
for(var j=0;j<d.length;j++){switch(Semi["draw"][index][type]["list"][child]["noteData"][i]["action"]){case 0x62:case 0x22:switch(type){case"imd":if((i!=Semi["draw"][index][type]["list"][child]["noteData"].length-1)&&((Semi["draw"][index][type]["list"][child]["noteData"][i]["action"]==0x62)||(Semi["draw"][index][type]["list"][child]["noteData"][i]["action"]==0x22))&&((Semi["draw"][index][type]["list"][child]["noteData"][i+1]["action"]==0x21)||(Semi["draw"][index][type]["list"][child]["noteData"][i+1]["action"]==0xA1))&&(Semi["draw"][index][type]["list"][child]["noteData"][i+1]["where"]["x"]!=Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"])&&(Semi["draw"][index][type]["list"][child]["noteData"][i]["when2"]["t"].fSub(Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"])!=0)){if(Semi["draw"][index][type]["list"][child]["noteData"][i]["when2"]["t"]>Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"]){d[j][2]=d[j][2].fAdd(d[j][0].fSub(Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"]).fDiv(Semi["draw"][index][type]["list"][child]["noteData"][i]["when2"]["t"].fSub(Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"])).fMul(Semi["draw"][index][type]["list"][child]["noteData"][i+1]["where"]["x"].fSub(Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"])));}}
break;case"aff":if(Semi["draw"][index][type]["list"][child]["noteData"][i]["when2"]["t"]>Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"]){var rt=d[j][0].fSub(Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"]).fDiv(Semi["draw"][index][type]["list"][child]["noteData"][i]["when2"]["t"].fSub(Semi["draw"][index][type]["list"][child]["noteData"][i]["when"]["t"]));switch(Semi["draw"][index][type]["list"][child]["noteData"][i]["line"]["curve"]){case"arcaea_si":case"arcaea_siso":case"arcaea_sisi":d[j][2]=(1).fSub(rt).fMul((1).fSub(rt)).fMul(Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"]).fAdd((1).fSub(rt).fMul(rt).fMul(2).fMul(Semi["draw"][index][type]["list"][child]["noteData"][i]["where2"]["x"])).fAdd(rt.fMul(rt).fMul(Semi["draw"][index][type]["list"][child]["noteData"][i]["where2"]["x"]));break;case"arcaea_so":case"arcaea_soso":case"arcaea_sosi":d[j][2]=(1).fSub(rt).fMul((1).fSub(rt)).fMul(Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"]).fAdd((1).fSub(rt).fMul(rt).fMul(2).fMul(Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"])).fAdd(rt.fMul(rt).fMul(Semi["draw"][index][type]["list"][child]["noteData"][i]["where2"]["x"]));break;case"arcaea_b":d[j][2]=(1).fSub(rt).fMul((1).fSub(rt)).fMul((1).fSub(rt)).fMul(Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"]).fAdd((1).fSub(rt).fMul((1).fSub(rt)).fMul(rt).fMul(3).fMul(Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"])).fAdd((1).fSub(rt).fMul(rt).fMul(rt).fMul(3).fMul(Semi["draw"][index][type]["list"][child]["noteData"][i]["where2"]["x"])).fAdd(rt.fMul(rt).fMul(rt).fMul(Semi["draw"][index][type]["list"][child]["noteData"][i]["where2"]["x"]));break;default:d[j][2]=d[j][2].fAdd(rt.fMul(Semi["draw"][index][type]["list"][child]["noteData"][i]["where2"]["x"].fSub(Semi["draw"][index][type]["list"][child]["noteData"][i]["where"]["x"])));break;}}
break;}
break;}
v.push([Math.round(d[j][0]),d[j][1],d[j][2],child]);}
break;}
break;}}}
return v.sort(SortNumbers);})();r["list"]=(function(){var l=[];for(var child=0;child<Semi["draw"][index][type]["list"].length;child++){var d={};d["data"]=Semi["draw"][index][type]["list"][child]["data"];d["noteData"]=Semi["draw"][index][type]["list"][child]["noteData"];d["unflowAera"]=(function(){var v=[];for(var i=0;i<d["data"]["beat"].length;i++){if(d["data"]["beat"][i]["fpn"]<=0){v.push({"when":d["data"]["beat"][i]["when"],"when2":(i<d["data"]["beat"].length-1?d["data"]["beat"][i+1]["when"]:d["data"]["info"]["max"]["when"]),"bpm":d["data"]["beat"][i]["bpm"],"bpn":d["data"]["beat"][i]["bpn"],"fpn":d["data"]["beat"][i]["fpn"],"lpn":d["data"]["beat"][i]["lpn"]});}}
return v;})();d["beatLines"]=(function(){var v={};v["w"]=[];v["h"]=[];v["q"]=[];var min=d["data"]["info"]["min"]["when"]["b"].toAbbreviated(6).toAccurated();var max=d["data"]["info"]["max"]["when"]["b"].toAbbreviated(6).toAccurated();for(var b=min;b<max;b++){var w=b;v["w"].push({"when":{"b":w,"n":noteFromBeat(d["data"],w),"t":timeFromBeat(d["data"],w)}});var q=b.fAdd(0.25);if(q>max){break;}
v["q"].push({"when":{"b":q,"n":noteFromBeat(d["data"],q),"t":timeFromBeat(d["data"],q)}});var h=b.fAdd(0.5);if(h>max){break;}
v["h"].push({"when":{"b":h,"n":noteFromBeat(d["data"],h),"t":timeFromBeat(d["data"],h)}});var q=b.fAdd(0.75);if(q>max){break;}
v["q"].push({"when":{"b":q,"n":noteFromBeat(d["data"],q),"t":timeFromBeat(d["data"],q)}});}
v["w"].push({"when":d["data"]["info"]["max"]["when"]});return v;})();d["noteLines"]=(function(){var v=[];var min=d["data"]["info"]["min"]["when"]["n"].toAbbreviated(6).toAccurated();var max=d["data"]["info"]["max"]["when"]["n"].toAbbreviated(6).toAccurated();for(var n=min;n<max;n++){var b=beatFromNote(d["data"],n);var t=timeFromBeat(d["data"],b);v.push({"when":{"b":b,"n":n,"t":t}});}
return v;})();d["determineLines"]=(function(){var v=[];for(var i=0;i<determineData.length;i++){if(determineData[i][3]==child){v.push(determineData[i][0]);}}
v=v.unrepeat();for(var i=0;i<v.length;i++){var t=v[i];var b=beatFromTime(d["data"],t);var n=noteFromBeat(d["data"],b);v[i]={"when":{"b":b,"n":n,"t":t}};}
return v;})();d["comboPoints"]=(function(){var v=[];for(var i=0;i<determineData.length;i++){if(determineData[i][3]==child){var t=determineData[i][0];var b=beatFromTime(d["data"],t);var n=noteFromBeat(d["data"],b);v.push({"when":{"b":b,"n":n,"t":t},"where":{"x":determineData[i][2]},"combo":i+1});}}
return v;})();d["action"]=(function(){var v=0;for(var i=0;i<Semi["draw"][index][type]["list"][child]["noteData"].length;i++){v+=(Semi["draw"][index][type]["list"][child]["noteData"][i]["flag"]&&(Semi["draw"][index][type]["list"][child]["noteData"][i]["flag"]["invisible"])||Semi["draw"][index][type]["list"][child]["noteData"][i]["flag"]["invalid"]||Semi["draw"][index][type]["list"][child]["noteData"][i]["flag"]["fake"]?0:1);}
return v;})();l.push(d);}
return l;})();r["action"]=(function(){var v=0;for(var child=0;child<r["list"].length;child++){v+=r["list"][child]["action"];}
return v;})();r["combo"]=(function(){var v=0;for(var child=0;child<r["list"].length;child++){v+=r["list"][child]["comboPoints"].length;}
return v;})();r["score"]=(function(){var v=0;switch(type){case"bms":v=200000;break;case"tja":var n=0;for(var i=0;i<noteData.length;i++){switch(noteData[i]["flag"]["style"]){case"taiko_don":case"taiko_katsu":v+=2660;break;case"taiko_don_large":case"taiko_katsu_large":v+=5320;break;case"taiko_chain":v+=Math.round(noteData[i]["when2"]["t"].fSub(noteData[i]["when"]["t"]).fDiv(200/3).fAdd(1))*100;break;case"taiko_chain_large":v+=Math.round(noteData[i]["when2"]["t"].fSub(noteData[i]["when"]["t"]).fDiv(200/3).fAdd(1))*150;break;case"taiko_balloon":case"taiko_potato":v+=(r["list"][noteData[i]["child"]]["data"]["info"]["balloon"][n]-1)*300;v+=5000;n+=1;break;}}
break;case"osu":v=1000000;break;case"imd":var c=r["combo"];if(c>=100){v+=(c-100)*600;c=100;}
if(c>=50){v+=(c-50)*466;c=50;}
if(c>=20){v+=(c-20)*332;c=20;}
v+=c*200;break;case"mc":v=r["action"]*1400;break;case"aff":v=10000000+r["combo"];break;case"txt":break;}
return v;})();r["density"]=(function(){var v=0;var d=[];var getLong=function(t){return(t.fDiv(120)|0)/4;};var getSlide=function(t){return Math.abs(t);};var indexOf=function(t){for(var i=0;i<d.length;i++){if(d[i][0]==t){return i;}}
return-1;};var addData=function(t,v){var l=indexOf(t);if(l!=-1){d[l][1]=d[l][1].fAdd(v);}
else{d.push([t,v]);}};for(var i=0;i<noteData.length;i++){if(noteData[i]["flag"]&&noteData[i]["flag"]["invalid"]&&noteData[i]["flag"]["fake"]){continue;}
switch(noteData[i]["action"]){case 0x00:addData(noteData[i]["when"]["t"],1);break;case 0x01:addData(noteData[i]["when"]["t"],getSlide(noteData[i]["where2"]["x"].fSub(noteData[i]["where"]["x"]).fAdd(2)));break;case 0x61:case 0x21:case 0xA1:addData(noteData[i]["when"]["t"],getSlide(noteData[i]["where2"]["x"].fSub(noteData[i]["where"]["x"]).fAdd(1)));break;case 0x02:case 0x62:case 0x22:case 0xA2:addData(noteData[i]["when"]["t"],getLong(noteData[i]["when2"]["t"].fSub(noteData[i]["when"]["t"]).fAdd(1)));break;}}
d=d.sort(SortNumbers);for(var i=1;i<d.length;i++){v=v.fAdd(d[i][1].fDiv(d[i][0].fSub(d[i-1][0])).fMul(120));}
return Math.sqrt(v.fDiv(16));})();r["quantity"]=(function(){var v=0;for(var i=0;i<noteData.length;i++){if(noteData[i]["flag"]&&noteData[i]["flag"]["invalid"]&&noteData[i]["flag"]["fake"]){continue;}
switch(noteData[i]["action"]){case 0x00:v=v.fAdd(1);break;case 0x01:v=v.fAdd(Math.abs(noteData[i]["where2"]["x"].fSub(noteData[i]["where"]["x"]).fAdd(2)));break;case 0x61:case 0xA1:v=v.fAdd(Math.abs(noteData[i]["where2"]["x"].fSub(noteData[i]["where"]["x"]).fAdd(1)));break;case 0x21:if(type=="aff"){v=v.fAdd(1);}
else{v=v.fAdd(Math.abs(noteData[i]["where2"]["x"].fSub(noteData[i]["where"]["x"])));}
break;case 0x02:case 0x62:case 0x22:case 0xA2:v=v.fAdd(noteData[i]["when2"]["t"].fSub(noteData[i]["when"]["t"]).fDiv(120).fAdd(1)|0);break;}}
return Math.sqrt(v.fDiv(16));})();r["noteStyle"]=function(x,key,action,flag){var v={};flag=flag||{};flag["damage"]=flag["damage"]||0;flag["style"]=flag["style"]||"";var track=x.fMul(key).fSub(0.5)|0;var m=[];switch(type){case"bms":var cg="#8C8C8C";var cb="#0000BA";if(flag["damage"]){cg="#FF0000";cb="#FF0000";}
m=[[cb],[cg,cg],[cg,cb,cg],[cg,cb,cb,cg],[cg,cb,cg,cb,cg],[cg,cb,cg,cg,cb,cg],[cg,cb,cg,cb,cg,cb,cg],[cg,cb,cg,cb,cb,cg,cb,cg],[cg,cb,cg,cb,cg,cb,cg,cb,cg]];break;case"tja":switch(action){case 0x00:switch(flag["style"]){case"taiko_don":v={"style":"#F34423","size":1};break;case"taiko_katsu":v={"style":"#2CAAFF","size":1};break;case"taiko_don_large":v={"style":"#F34423","size":1.5};break;case"taiko_katsu_large":v={"style":"#2CAAFF","size":1.5};break;}
break;case 0x02:switch(flag["style"]){case"taiko_chain":v={"style":"#F8AC00","size":1,"style2":"#F8AC00","size2":1};break;case"taiko_chain_large":v={"style":"#F8AC00","size":1.5,"style2":"#F8AC00","size2":1.5};break;case"taiko_balloon":v={"style":"#F34423","size":1,"style2":"#F03C23","size2":1};break;case"taiko_potato":v={"style":"#F8AC00","size":1.5,"style2":"#E7296B","size2":1.5};break;break;}}
break;case"osu":var cy="#EBCD00";var cw="#D2BAD2";var cp="#C86096";m=[[cy],[cw,cw],[cw,cy,cw],[cw,cp,cp,cw],[cw,cp,cy,cp,cw],[cw,cp,cw,cw,cp,cw],[cw,cp,cw,cy,cw,cp,cw],[cw,cp,cw,cp,cp,cw,cp,cw],[cw,cp,cw,cp,cy,cp,cw,cp,cw]];break;case"imd":switch(action){case 0x00:v={"style":"#0000FF"};break;default:v={"style":"#00FF00"};break;}
break;case"mc":var cy="#FFDC92";var cw="#CACACA";var cp="#FF9292";m=[[cy],[cw,cw],[cw,cy,cw],[cw,cp,cp,cw],[cw,cp,cw,cp,cw],[cw,cp,cw,cw,cp,cw],[cw,cp,cw,cy,cw,cp,cw],[cw,cp,cp,cw,cw,cp,cp,cw],[cw,cp,cw,cp,cy,cp,cw,cp,cw],[cw,cp,cw,cp,cw,cp,cw,cp,cw,cp]];break;case"aff":switch(action){case 0x00:v={"style":"#7FBFBF"};break;case 0x02:v={"style":"#7FBFBF"};break;case 0x21:switch(flag["style"]){case"":v={"style":"#007FFF7F"};break;case"arcaea_shadow":v={"style":"#DFDFDF7F"};break;}
break;case 0x22:switch(flag["style"]){case"arcaea_0":v={"style":"#00DFDF7F"};break;case"arcaea_1":v={"style":"#DF00DF7F"};break;case"arcaea_2":v={"style":"#00DF007F"};break;case"arcaea_dark":v={"style":"#7F7F7F7F"};break;case"arcaea_shadow":v={"style":"#DFDFDF7F"};break;default:v={"style":"#00DF007F"};break;}
break;}
break;case"txt":if(flag["link"]){v={"style":"#FFFFFF"};}
else{switch(action){case 0x21:v={"style":"#FF00FF"};break;default:if(flag["skill"]){v={"style":"#FFFF00"};}
else{if(action==0x00){v={"style":(flag["inLine"]?"#00FFFF":"#7F7F7F")};}
else{v={"style":"#00FF00"};}}
break;}}
break;}
v["style"]=v["style"]||(function(){var k=[];var n=Math.ceil(key/m.length);var u=Math.floor(key/n);for(var i=0;i<n;i++){k[i]=u;}
var o=key-u*n;var c=0;while(o>0){k[c]+=1;c+=1;o-=1;}
for(var i=0;i<n;i++){if(track>k[i]){track-=k[i];}
else{return m[k[i]-1][track];}}})();v=(function(){v=v||{};v["style"]=v["style"]||"#000000";v["style2"]=v["style2"]||v["style"];v["size"]=v["size"]||1;v["size2"]=v["size2"]||v["size"];return v;})();return v;};r["valid"]=true;return r;};var toPng=function(indexes,type){var single=(arguments.length>2?arguments[2]:true);var options=MstOptions;var drawAlpha=0.618;var scaleX=(single?1:parseFloat(options["DrawScaleX"]));var scaleY=(single?0:parseFloat(options["DrawScaleY"]));var frameX=128;var frameY=64;var paddingTop=128*scaleX;var paddingBottom=64*scaleX;var paddingLeft=Math.max((options["DrawTime"]?64*scaleX:0)+(options["DrawBeat"]?64*scaleX:0)+(options["DrawNote"]?64*scaleX:0),64*scaleX);var paddingRight=Math.max((options["DrawTime"]?64*scaleX:0)+(options["DrawBeat"]?64*scaleX:0)+(options["DrawNote"]?64*scaleX:0),64*scaleX);var indexList=(function(){var v=[];for(var n=0;n<indexes.length;n++){if(indexes[n]<Semi["data"].length){v.push(indexes[n]);}}
return v;})();var maxTime=(function(){var v=0;for(var n=0;n<indexList.length;n++){var index=indexList[n];Semi["draw"][index]=Semi["draw"][index]||[];Semi["draw"][index][type]=(Semi["draw"][index][type]&&Semi["draw"][index][type]["valid"]?Semi["draw"][index][type]:toDraw(index,type));var draw=Semi["draw"][index][type];for(var child=0;child<draw["list"].length;child++){var t=draw["list"][child]["data"]["info"]["max"]["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]);v=(v<t?t:v);}}
return v;})();var speedRate=Math.ceil(maxTime.fDiv(32767-paddingTop-paddingBottom));var splitHeight=paddingTop+Math.round(maxTime.fDiv(speedRate))+paddingBottom;if(scaleY!=0){speedRate=2400/scaleX/frameX/scaleX/scaleY;}
else{scaleY=(2400/scaleX/frameX/scaleX).fDiv(speedRate);}
var coreHeight=Math.round(maxTime.fDiv(speedRate));var wholeHeight=paddingTop+coreHeight+paddingBottom;var splitCount=Math.ceil(wholeHeight/splitHeight);var touchNoteStyle="#0000FF";var holdNoteStyle="#00FF00";var arrowStyle="#00FF00";var turnPointStyle=["#00FF00","#00FF00","#00FF00"];var bangBaseStyle="#FFFFFF";var backgroundStyle="#FFFFFF";var frameStokeWidth=scaleX;var frameStokeStyle="#000000";var trackLineWidth=scaleX.fMul(0.24);var trackLineStyle="#00FFFF3F";var beatLineWidth=scaleX.fMul(0.24);var beatLineStyle="#000000";var noteLineWidth=scaleX.fMul(0.24);var noteLineStyle="#7F7F7F";var beatWidth=scaleX.fMul(0.96);var beatStyle="#007F00";var effectWidth=scaleX.fMul(0.96);var effectStyle="#7F7F00";var statusWidth=scaleX.fMul(0.96);var statusStyle="#007F7F";var transformWidth=scaleX.fMul(0.96);var transformStyle="#7F007F";var startLineWidth=scaleX.fMul(0.24);var startLineStyle="#0000FF";var lengthLineWidth=scaleX.fMul(0.24);var lengthLineStyle="#FF00FF";var stopAeraStyle="#BFBFBF";var determineLineWidth=scaleX.fMul(0.24);var determineLineStyle="#FF00FF";var determinePointStyle=["#FFCCCC","#FF6666","#FF0000"];var determineTextStyle="#FF00FF";var textStyle="#000000";var textSize=12;var textFont="Consolas"
var textFamily=textSize.toString()+"px "+textFont;var boldTextFont="bold 14px Consolas";var effectList=(function(){var v={};for(var n=0;n<indexList.length;n++){var index=indexList[n];for(var i=0;i<Semi["data"][index][0]["effect"].length;i++){if((Semi["data"][index][0]["effect"][i]["kind"]=="audio")&&(Semi["data"][index][0]["effect"][i]["while"]=="")&&Semi["data"][index][0]["effect"][i]["path"]){var offset=Semi["data"][index][0]["effect"][i]["when"]["t"].fSub(Semi["data"][index][0]["info"]["min"]["when"]["t"])|0;var path=Semi["data"][index][0]["effect"][i]["path"];var volume=Semi["data"][index][0]["effect"][i]["volume"];v[offset+"|"+path]={"offset":offset,"path":path,"volume":volume};}}
for(var i=0;i<Semi["data"][index][0]["note"].length;i++){for(var j=0;j<Semi["data"][index][0]["note"][i]["trigger"].length;j++){if((Semi["data"][index][0]["note"][i]["trigger"][j]["kind"]=="audio")&&(Semi["data"][index][0]["note"][i]["trigger"][j]["while"]=="")&&Semi["data"][index][0]["note"][i]["trigger"][j]["path"]){var offset=Semi["data"][index][0]["note"][i]["when"]["t"].fSub(Semi["data"][index][0]["info"]["min"]["when"]["t"])|0;var path=Semi["data"][index][0]["note"][i]["trigger"][j]["path"];var volume=Semi["data"][index][0]["note"][i]["trigger"][j]["volume"];v[offset+"|"+path]={"offset":offset,"path":path,"volume":volume};}}}}
return v;})();var audioList={};var playList=[];for(var n in effectList){var l=getFileIndex(effectList[n]["path"]);if((l!=-1)&&(SupportAudio.indexOf(new FileInfo(effectList[n]["path"]).extension[0])!=-1)){if(Raw["file"][l]["pcm"]["channelData"].length){audioList[effectList[n]["path"]]=audioList[effectList[n]["path"]]||{"src":"data:audio/"+(new FileInfo(effectList[n]["path"]).extension[0]||"wav")+";base64,"+Raw["file"][l]["base64"],"duration":Math.ceil(Raw["file"][l]["pcm"]["channelData"][0].length/Raw["file"][l]["pcm"]["sampleRate"]*1000)};playList.push({"offset":effectList[n]["offset"],"path":effectList[n]["path"],"volume":effectList[n]["volume"]});}}}
playList=playList.sort(function(a,b){return a["offset"]-b["offset"];});var setIndex=function(p,o){audioList[p]["offsets"]=audioList[p]["offsets"]||[];for(var i=0;i<audioList[p]["offsets"].length;i++){var isContain=(function(){for(var j=0;j<audioList[p]["offsets"][i].length;j++){if((audioList[p]["offsets"][i][j]<o)&&(audioList[p]["offsets"][i][j]+audioList[p]["duration"]>o)){return true;}}
return false;})();if(!isContain){audioList[p]["offsets"][i].push(o);return i;}}
audioList[p]["offsets"].push([o]);return audioList[p]["offsets"].length-1;};playList.forEach(function(a){a["index"]=setIndex(a["path"],a["offset"]);});var aeroStyle=(function(){var v=[];for(var s in Aero){v.push(Aero[s]);}
return v;})();var channelMax=(function(){var v=0;for(var i=0;i<playList.length;i++){var l=getFileIndex(playList[i]["path"]);if(l!=-1){if(v<Raw["file"][l]["pcm"]["channelData"].length){v=Raw["file"][l]["pcm"]["channelData"].length;}}}
return v;})();var channelDraw=Math.ceil(channelMax/2)*2;var pcmWidth=frameX;var fftWidth=frameX;var varWidth=frameX;var waveLineWidth=scaleX.fMul(0.24);var isSameAudio=(function(){var list=[];for(var n=0;n<indexList.length;n++){var index=indexList[n];for(var i=0;i<Semi["data"][index][0]["effect"].length;i++){if((Semi["data"][index][0]["effect"][i]["kind"]=="audio")&&(Semi["data"][index][0]["effect"][i]["while"]=="")&&Semi["data"][index][0]["effect"][i]["path"]){list.push(Semi["data"][index][0]["effect"][i]["path"]);break;}}}
for(var i=1;i<list.length;i++){if(list[i]!=list[0]){return false;}}
return true;})();var isDrawLeft=isSameAudio&&channelDraw;var isDrawRight=isSameAudio&&channelDraw;var map=(function(){var v={};var c=0;var left=0;var set=function(t,w){v[t]={"index":c++,"width":w,"left":left};left+=w;};set("fL",(options["DrawFrequencyDomain"]&&isDrawLeft?channelDraw/2*fftWidth:0));set("tL",(options["DrawTimeDomain"]&&isDrawLeft?channelDraw/2*pcmWidth:0));for(var n=0;n<indexList.length;n++){var index=indexList[n];var draw=Semi["draw"][index][type];var key=(draw["list"][0]["data"]?draw["list"][0]["data"]["info"]["key"]:newItem("info")["key"]);var coreWidth=(key==0?1:Math.ceil(key/10))*frameX*scaleX;var wholeWidth=paddingLeft+coreWidth+paddingRight;var totalWidth=wholeWidth*draw["list"].length;set("k"+index,totalWidth);}
set("tR",(options["DrawTimeDomain"]&&isDrawRight?channelDraw/2*pcmWidth:0));set("fR",(options["DrawFrequencyDomain"]&&isDrawRight?channelDraw/2*fftWidth:0));return v;})();var cvs=[];var ctx=[];for(var i=0;i<splitCount;i++){cvs[i]=document.createElement("canvas");cvs[i].width=(function(){var v=0;for(var m in map){v+=map[m]["width"];}
return v;})();cvs[i].height=(i!=splitCount-1?splitHeight:(wholeHeight==splitHeight?wholeHeight:wholeHeight%splitHeight));ctx[i]=cvs[i].getContext("2d");ctx[i].globalAlpha=drawAlpha;}
for(var n=0;n<indexList.length;n++){var index=indexList[n];var draw=Semi["draw"][index][type];var key=(draw["list"][0]["data"]?draw["list"][0]["data"]["info"]["key"]:newItem("info")["key"]);var coreWidth=(key==0?1:Math.ceil(key/10))*frameX*scaleX;var wholeWidth=paddingLeft+coreWidth+paddingRight;var totalWidth=wholeWidth*draw["list"].length;var noteWidth=Math.round((coreWidth/key).fMul(key<7?(105-5*key).fDiv(100):0.85));var noteHeight=Math.round(key<7?coreWidth/16:noteWidth/2);var drumWidth=coreWidth/8;var bangWidth=Math.round(coreWidth/key);var bangHeight=bangWidth/8;var linkHeight=noteHeight/8;var strokeWidth=noteHeight/2;var turnPointRadius=noteHeight/3;var determinePointRadius=noteHeight.fDiv(4);var childLeft=0;var drawRect=function(x1,y1,x2,y2,s){var i1=0;var i2=0;if(y1>y2){i1=y2.fDiv(splitHeight)|0;i2=y1.fDiv(splitHeight)|0;}
else{i1=y1.fDiv(splitHeight)|0;i2=y2.fDiv(splitHeight)|0;}
i1=(i1<0?0:i1);i2=(i2>splitCount-1?splitCount-1:i2);for(var i=i1;i<i2+1;i++){ctx[i].fillStyle=s;ctx[i].fillRect(map["k"+index]["left"]+Math.round(x1),Math.round(y1.fSub(splitHeight*i)),Math.round(x2.fSub(x1)),Math.round(y2.fSub(y1)));}};var drawFrame=function(x1,y1,x2,y2,s,w){var i1=0;var i2=0;if(y1>y2){i1=y2.fDiv(splitHeight)|0;i2=y1.fDiv(splitHeight)|0;}
else{i1=y1.fDiv(splitHeight)|0;i2=y2.fDiv(splitHeight)|0;}
i1=(i1<0?0:i1);i2=(i2>splitCount-1?splitCount-1:i2);for(var i=i1;i<i2+1;i++){ctx[i].strokeWidth=w;ctx[i].strokeStyle=s;ctx[i].strokeRect(map["k"+index]["left"]+Math.round(x1),Math.round(y1.fSub(splitHeight*i)),Math.round(x2.fSub(x1)),Math.round(y2.fSub(y1)));}};var drawCircle=function(x,y,r,d,s){var w=(arguments.length>5?arguments[5]:0);var i1=y.fSub(r).fDiv(splitHeight)|0;var i2=y.fAdd(r).fDiv(splitHeight)|0;i1=(i1<0?0:i1);i2=(i2>splitCount-1?splitCount-1:i2);for(var i=i1;i<i2+1;i++){ctx[i].beginPath();ctx[i].ellipse(map["k"+index]["left"]+Math.round(x),Math.round(y.fSub(splitHeight*i)),r,r*d,0,0,Math.PI.fMul(2));if(w){ctx[i].lineWidth=w;ctx[i].strokeStyle=s;ctx[i].stroke();}
else{ctx[i].fillStyle=s;ctx[i].fill();}}};var drawDiamond=function(x,y,r,d,s){var w=(arguments.length>5?arguments[5]:0);var i1=y.fSub(r).fDiv(splitHeight)|0;var i2=y.fAdd(r).fDiv(splitHeight)|0;i1=(i1<0?0:i1);i2=(i2>splitCount-1?splitCount-1:i2);for(var i=i1;i<i2+1;i++){ctx[i].beginPath();ctx[i].moveTo(map["k"+index]["left"]+x-r,y);ctx[i].lineTo(map["k"+index]["left"]+x,y+r*d);ctx[i].lineTo(map["k"+index]["left"]+x+r,y);ctx[i].lineTo(map["k"+index]["left"]+x,y-r*d);ctx[i].closePath();if(w){ctx[i].lineWidth=w;ctx[i].strokeStyle=s;ctx[i].stroke();}
else{ctx[i].fillStyle=s;ctx[i].fill();}}};var drawLine=function(x1,y1,x2,y2,s,w,t){var i1=0;var i2=0;if(y1>y2){i1=y2.fDiv(splitHeight)|0;i2=y1.fDiv(splitHeight)|0;}
else if(y1<y2){i1=y1.fDiv(splitHeight)|0;i2=y2.fDiv(splitHeight)|0;}
else{i1=y1.fSub(w.fDiv(2)).fDiv(splitHeight)|0;i2=y1.fAdd(w.fDiv(2)).fDiv(splitHeight)|0;}
i1=(i1<0?0:i1);i2=(i2>splitCount-1?splitCount-1:i2);for(var i=i1;i<i2+1;i++){ctx[i].beginPath();switch(t){case"dot_2":case"dot_4":var d=parseInt(t.replace("dot_",""));var n=Math.ceil(Math.getPythagorean(x1.fSub(x2),y1.fSub(y2))*d/40);var x=Math.min(x1,x2);var xs=Math.abs(x1.fSub(x2))/(n*2+1);var y=Math.min(y1,y2);var ys=Math.abs(y1.fSub(y2))/(n*2+1);for(var j=0;j<n+1;j++){ctx[i].moveTo(map["k"+index]["left"]+Math.round(x),Math.round(y.fSub(splitHeight*i)));x=x.fAdd(xs);y=y.fAdd(ys);ctx[i].lineTo(map["k"+index]["left"]+Math.round(x),Math.round(y.fSub(splitHeight*i)));x=x.fAdd(xs);y=y.fAdd(ys);}
break;case"":case"arcaea_s":ctx[i].moveTo(map["k"+index]["left"]+Math.round(x1),Math.round(y1.fSub(splitHeight*i)));ctx[i].lineTo(map["k"+index]["left"]+Math.round(x2),Math.round(y2.fSub(splitHeight*i)));break;case"arcaea_si":case"arcaea_siso":case"arcaea_sisi":ctx[i].moveTo(map["k"+index]["left"]+Math.round(x1),Math.round(y1.fSub(splitHeight*i)));ctx[i].quadraticCurveTo(map["k"+index]["left"]+Math.round(x2),Math.round(y1.fAdd(y2.fSub(y1).fDiv(2)).fSub(splitHeight*i)),map["k"+index]["left"]+Math.round(x2),Math.round(y2.fSub(splitHeight*i)));break;case"arcaea_so":case"arcaea_soso":case"arcaea_sosi":ctx[i].moveTo(map["k"+index]["left"]+Math.round(x1),Math.round(y1.fSub(splitHeight*i)));ctx[i].quadraticCurveTo(map["k"+index]["left"]+Math.round(x1),Math.round(y1.fAdd(y2.fSub(y1).fDiv(2)).fSub(splitHeight*i)),map["k"+index]["left"]+Math.round(x2),Math.round(y2.fSub(splitHeight*i)));break;case"arcaea_b":ctx[i].moveTo(map["k"+index]["left"]+Math.round(x1),Math.round(y1.fSub(splitHeight*i)));ctx[i].bezierCurveTo(map["k"+index]["left"]+Math.round(x1),Math.round(y1.fAdd(y2.fSub(y1).fDiv(3)).fSub(splitHeight*i)),map["k"+index]["left"]+Math.round(x2),Math.round(y1.fAdd(y2.fSub(y1).fDiv(3/2)).fSub(splitHeight*i)),map["k"+index]["left"]+Math.round(x2),Math.round(y2.fSub(splitHeight*i)));break;}
ctx[i].lineWidth=w;ctx[i].strokeStyle=s;ctx[i].stroke();}};var drawPoint=function(x,y,r,s){var i1=y.fSub(r).fDiv(splitHeight)|0;var i2=y.fAdd(r).fDiv(splitHeight)|0;i1=(i1<0?0:i1);i2=(i2>splitCount-1?splitCount-1:i2);for(var i=i1;i<i2+1;i++){ctx[i].beginPath();ctx[i].arc(map["k"+index]["left"]+Math.round(x),Math.round(y.fSub(splitHeight*i)),r,0,Math.PI.fMul(2));var cs=ctx[i].createRadialGradient(map["k"+index]["left"]+Math.round(x),Math.round(y.fSub(splitHeight*i)),r/8,map["k"+index]["left"]+Math.round(x),Math.round(y.fSub(splitHeight*i)),r);for(var j=0;j<s.length;j++){cs.addColorStop(j/s.length,s[j]);}
ctx[i].fillStyle=cs;ctx[i].fill();}};var drawText=function(x,y,t,s,f,a){var w=(arguments.length>6?arguments[6]:undefined);var n=getFontSize(f)*scaleX;var i1=y.fSub(n).fDiv(splitHeight)|0;var i2=y.fAdd(n).fDiv(splitHeight)|0;i1=(i1<0?0:i1);i2=(i2>splitCount-1?splitCount-1:i2);for(var i=i1;i<i2+1;i++){ctx[i].fillStyle=s;ctx[i].font=setFontSize(f,n);ctx[i].textAlign=a;ctx[i].fillText(t,map["k"+index]["left"]+Math.round(x),Math.round(y.fSub(splitHeight*i)),w);}};var drawNote=function(a,x,y){var y2=(arguments.length>3?arguments[3]:y);var s=(arguments.length>4?arguments[4]:undefined);var i1=y2.fSub(noteHeight/2).fDiv(splitHeight)|0;var i2=y.fAdd(noteHeight/2).fDiv(splitHeight)|0;i1=(i1<0?0:i1);i2=(i2>splitCount-1?splitCount-1:i2);if(!s){switch(a){case 0x00:s={"style":touchNoteStyle,"size":1};break;default:s={"style":holdNoteStyle,"size":1};break;}}
for(var i=i1;i<i2+1;i++){ctx[i].fillStyle=s["style"];ctx[i].fillRect(map["k"+index]["left"]+Math.round(x.fSub(noteWidth/2*s["size"])),Math.round(y2.fSub(splitHeight*i).fSub(noteHeight/2*s["size"])),noteWidth*s["size"],(noteHeight*s["size"]).fAdd(y).fSub(y2));}};var drawArrow=function(m,x,y,d,s){var w=(arguments.length>5?arguments[5]:0);var i1=y.fSub(strokeWidth).fDiv(splitHeight)|0;var i2=y.fAdd(strokeWidth).fDiv(splitHeight)|0;i1=(i1<0?0:i1);i2=(i2>splitCount-1?splitCount-1:i2);for(var i=i1;i<i2+1;i++){ctx[i].beginPath();switch(m){case"left":ctx[i].moveTo(map["k"+index]["left"]+Math.round(x.fAdd(strokeWidth.fMul(0.5))),Math.round(y.fSub(splitHeight*i).fAdd(strokeWidth)));ctx[i].lineTo(map["k"+index]["left"]+Math.round(x.fAdd(strokeWidth.fMul(0.5)).fSub(strokeWidth.fMul(d))),Math.round(y.fSub(splitHeight*i)));ctx[i].lineTo(map["k"+index]["left"]+Math.round(x.fAdd(strokeWidth.fMul(0.5))),Math.round(y.fSub(splitHeight*i).fSub(strokeWidth)));break;case"right":ctx[i].moveTo(map["k"+index]["left"]+Math.round(x.fSub(strokeWidth.fMul(0.5))),Math.round(y.fSub(splitHeight*i).fAdd(strokeWidth)));ctx[i].lineTo(map["k"+index]["left"]+Math.round(x.fSub(strokeWidth.fMul(0.5)).fAdd(strokeWidth.fMul(d))),Math.round(y.fSub(splitHeight*i)));ctx[i].lineTo(map["k"+index]["left"]+Math.round(x.fSub(strokeWidth.fMul(0.5))),Math.round(y.fSub(splitHeight*i).fSub(strokeWidth)));break;case"up":ctx[i].moveTo(map["k"+index]["left"]+Math.round(x.fAdd(strokeWidth)),Math.round(y.fSub(splitHeight*i).fAdd(strokeWidth.fMul(0.5))));ctx[i].lineTo(map["k"+index]["left"]+Math.round(x),Math.round(y.fSub(splitHeight*i).fAdd(strokeWidth.fMul(0.5)).fSub(strokeWidth.fMul(d))));ctx[i].lineTo(map["k"+index]["left"]+Math.round(x.fSub(strokeWidth)),Math.round(y.fSub(splitHeight*i).fAdd(strokeWidth.fMul(0.5))));break;case"down":ctx[i].moveTo(map["k"+index]["left"]+Math.round(x.fAdd(strokeWidth)),Math.round(y.fSub(splitHeight*i).fSub(strokeWidth.fMul(0.5))));ctx[i].lineTo(map["k"+index]["left"]+Math.round(x),Math.round(y.fSub(splitHeight*i).fSub(strokeWidth.fMul(0.5)).fAdd(strokeWidth.fMul(d))));ctx[i].lineTo(map["k"+index]["left"]+Math.round(x.fSub(strokeWidth)),Math.round(y.fSub(splitHeight*i).fSub(strokeWidth.fMul(0.5))));break;}
if(w){ctx[i].lineWidth=w;ctx[i].strokeStyle=s;ctx[i].stroke();}
else{ctx[i].closePath();ctx[i].fillStyle=s;ctx[i].fill();}}};var drawTime=function(x,y,d,s,f,a){var n=(options["DrawTime"]?1:0)+(options["DrawBeat"]?1:0)+(options["DrawNote"]?1:0);switch(a){case"left":if(options["DrawNote"]){drawText(x,y,d["n"].toFormated(4).toString(),s,f,a);}
if(options["DrawBeat"]){drawText(x.fAdd(options["DrawNote"]?paddingLeft/n:0),y,d["b"].toFormated(2).toString(),s,f,a);}
if(options["DrawTime"]){drawText(x.fAdd(options["DrawNote"]?paddingLeft/n:0).fAdd(options["DrawBeat"]?paddingLeft/n:0),y,d["t"].toFormated(0).toString(),s,f,a);}
break;case"right":if(options["DrawNote"]){drawText(x,y,d["n"].toFormated(4).toString(),s,f,a);}
if(options["DrawBeat"]){drawText(x.fSub(options["DrawNote"]?paddingLeft/n:0),y,d["b"].toFormated(2).toString(),s,f,a);}
if(options["DrawTime"]){drawText(x.fSub(options["DrawNote"]?paddingLeft/n:0).fSub(options["DrawBeat"]?paddingLeft/n:0),y,d["t"].toFormated(0).toString(),s,f,a);}
break;}}
var drawStroke=function(x1,y1,x2,y2){var w=(arguments.length>4?arguments[4]:strokeWidth);var s=(arguments.length>5?arguments[5]:undefined);var t=(arguments.length>6?arguments[6]:"");s=s||{};s["style2"]=s["style2"]||holdNoteStyle;s["size2"]=s["size2"]||1;drawLine(x1,y1,x2,y2,s["style2"],w*s["size2"],t);};var drawTurn=function(x,y){drawPoint(x,y,turnPointRadius,turnPointStyle);};var drawDrum=function(x,y,s){drawCircle(x,y,drumWidth*s["size"],1,s["style"]);};var drawChain=function(x1,y1,x2,y2,s){drawStroke(x1,y1,x2,y2,drumWidth*2,s);};var drawBang=function(m,x,y,s){switch(m){case"line":drawLine(x-bangWidth/2,y,x+bangWidth/2,y,s["style"],bangHeight,"");break;case"circle":drawCircle(x,y,bangWidth/4,0.5,bangBaseStyle);drawCircle(x,y,bangWidth/4+bangHeight*3,0.5,bangBaseStyle,bangHeight);drawCircle(x,y,bangWidth/4+bangHeight,0.5,s["style"],bangHeight);drawBang("line",x,y,s);break;case"diamond":drawDiamond(x,y,bangWidth/4,0.5,bangBaseStyle);drawDiamond(x,y,bangWidth/4+bangHeight*3,0.5,bangBaseStyle,bangHeight);drawDiamond(x,y,bangWidth/4+bangHeight,0.5,s["style"],bangHeight);drawArrow("up",x,y-bangHeight*3,0.8,s["style"],bangHeight);drawArrow("up",x,y-bangHeight*5,0.8,s["style"],bangHeight);drawBang("line",x,y,s);break;}};var drawKey=function(noteData){var step=(arguments.length>1?arguments[1]:0);var action=noteData["action"];var time=noteData["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]);var xPos=noteData["where"]["x"];var xPos2=noteData["where2"]["x"];var yPos=noteData["where"]["y"];var yPos2=noteData["where2"]["y"];var x=coreWidth.fMul(xPos).fAdd(paddingLeft);var x2=coreWidth.fMul(xPos2).fAdd(paddingLeft);var y=wholeHeight-time.fDiv(speedRate).fAdd(paddingBottom);var xd=xPos2.fSub(xPos);var td=noteData["when2"]["t"].fSub(noteData["when"]["t"]);var y2=y.fSub(td.fDiv(speedRate));switch(step){case 0:switch(type){case"aff":switch(action){case 0x00:for(var i=0;i<draw["list"][child]["noteData"].length;i++){if((draw["list"][child]["noteData"][i]["action"]==0x21)&&(draw["list"][child]["noteData"][i]["when"]["t"]==noteData["when"]["t"])){drawLine(childLeft+x,y,childLeft+coreWidth.fMul(draw["list"][child]["noteData"][i]["where"]["x"]).fAdd(paddingLeft),wholeHeight-draw["list"][child]["noteData"][i]["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom)-draw["list"][child]["noteData"][i]["where2"]["y"].fMul(frameY),draw["noteStyle"](xPos,key,action,{"damage":noteData["flag"]["damage"]})["style"],linkHeight,"");}}
break;}
break;case"txt":switch(action){case 0x00:case 0x62:case 0x21:case 0xA2:for(var i=0;i<draw["list"][child]["noteData"].length;i++){if(!draw["list"][child]["noteData"][i]["linked"]&&((draw["list"][child]["noteData"][i]["action"]==0x00)||(draw["list"][child]["noteData"][i]["action"]==0x62)||(draw["list"][child]["noteData"][i]["action"]==0x21))&&(draw["list"][child]["noteData"][i]["when"]["t"]==noteData["when"]["t"])&&(draw["list"][child]["noteData"][i]["where"]["x"]!=noteData["where"]["x"])){draw["list"][child]["noteData"][i]["linked"]=true;drawLine(childLeft+x,y,childLeft+coreWidth.fMul(draw["list"][child]["noteData"][i]["where"]["x"]).fAdd(paddingLeft),wholeHeight-draw["list"][child]["noteData"][i]["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom),draw["noteStyle"](xPos,key,action,{"link":true})["style"],linkHeight,"");}}
break;}
break;}
switch(action){case 0x00:switch(type){case"bms":case"osu":case"imd":case"mc":case"aff":drawNote(action,childLeft+x,y,y,draw["noteStyle"](xPos,key,action,{"damage":noteData["flag"]["damage"]}));break;case"tja":drawDrum(childLeft+x,y,draw["noteStyle"](xPos,key,action,{"style":noteData["flag"]["style"]}));break;case"txt":drawBang("circle",childLeft+x,y,draw["noteStyle"](xPos,key,action,{"skill":noteData["flag"]["skill"],"inLine":noteData["when"]["b"]%0.5==0}));break;}
break;case 0x01:if(xd<0){drawStroke(childLeft+coreWidth.fMul(xPos2).fAdd(paddingLeft).fAdd(strokeWidth.fDiv(2)),y,childLeft+x.fSub(noteWidth/2),y);}
else if(xd>0){drawStroke(childLeft+x.fAdd(noteWidth/2),y,childLeft+coreWidth.fMul(xPos2).fAdd(paddingLeft).fSub(strokeWidth.fDiv(2)),y);}
drawNote(action,childLeft+x,y);drawArrow((xd<0?"left":"right"),childLeft+coreWidth.fMul(xPos2).fAdd(paddingLeft),y,2,arrowStyle);break;case 0x02:switch(type){case"bms":case"osu":case"mc":case"aff":drawNote(action,childLeft+x,y,y2,draw["noteStyle"](xPos,key,action,{"damage":noteData["flag"]["damage"]}));break;case"tja":var s=draw["noteStyle"](xPos,key,action,{"style":noteData["flag"]["style"]});drawChain(childLeft+x,y,childLeft+x,y2,s);drawDrum(childLeft+x,y,s);break;case"imd":drawStroke(childLeft+x,y,childLeft+x,y2);drawStroke(childLeft+x.fSub(strokeWidth),y2,childLeft+x.fAdd(strokeWidth),y2);drawNote(action,childLeft+x,y);break;}
break;case 0x61:if(xd<0){drawStroke(childLeft+coreWidth.fMul(xPos2).fAdd(paddingLeft).fSub(strokeWidth.fDiv(2)),y,childLeft+x.fSub(noteWidth/2),y);}
else if(xd>0){drawStroke(childLeft+x.fAdd(noteWidth/2),y,childLeft+coreWidth.fMul(xPos2).fAdd(paddingLeft).fAdd(strokeWidth.fDiv(2)),y);}
drawNote(action,childLeft+x,y);drawTurn(childLeft+coreWidth.fMul(xPos2).fAdd(paddingLeft),y);break;case 0x62:switch(type){case"txt":drawStroke(childLeft+x,y,childLeft+x2,y2,noteWidth,draw["noteStyle"](xPos,key,action));drawBang("circle",childLeft+x,y,draw["noteStyle"](xPos,key,action,{"skill":noteData["flag"]["skill"]}));break;default:drawStroke(childLeft+x,y,childLeft+x2,y2);drawNote(action,childLeft+x,y);break;}
break;case 0x21:switch(type){case"imd":if(xd<0){drawStroke(childLeft+coreWidth.fMul(xPos2).fAdd(paddingLeft).fSub(strokeWidth.fDiv(2)),y,childLeft+x.fAdd(strokeWidth.fDiv(2)),y);}
else if(xd>0){drawStroke(childLeft+x.fSub(strokeWidth.fDiv(2)),y,childLeft+coreWidth.fMul(xPos2).fAdd(paddingLeft).fAdd(strokeWidth.fDiv(2)),y);}
drawTurn(childLeft+x,y);drawTurn(childLeft+coreWidth.fMul(xPos2).fAdd(paddingLeft),y);break;case"aff":drawNote(action,childLeft+x,y,y,draw["noteStyle"](xPos,key,action,{"style":"arcaea_shadow"}));break;case"txt":drawBang("diamond",childLeft+x,y,draw["noteStyle"](xPos,key,action,{"skill":noteData["flag"]["skill"]}));break;}
break;case 0x22:switch(type){case"imd":drawStroke(childLeft+x,y,childLeft+x2,y2);break;case"aff":if(!noteData["flag"]["invalid"]){drawStroke(childLeft+x,wholeHeight-time.fAdd(1).fDiv(speedRate).fAdd(paddingBottom),childLeft+x2,y2,noteWidth/2,draw["noteStyle"](xPos,key,action,{"style":"arcaea_shadow"}),noteData["line"]["curve"]);}
else{drawStroke(childLeft+x,wholeHeight-time.fAdd(1).fDiv(speedRate).fAdd(paddingBottom),childLeft+x2,y2,2,draw["noteStyle"](xPos,key,action,{"style":"arcaea_shadow"}),noteData["line"]["curve"]);}
break;case"txt":drawStroke(childLeft+x,y,childLeft+x2,y2,noteWidth,draw["noteStyle"](xPos,key,action));drawBang("line",childLeft+x,y,draw["noteStyle"](xPos,key,action,{"skill":noteData["flag"]["skill"]}));break;}
break;case 0xA1:if(xd<0){drawStroke(childLeft+coreWidth.fMul(xPos2).fAdd(paddingLeft).fAdd(strokeWidth.fDiv(2)),y,childLeft+x.fAdd(strokeWidth.fDiv(2)),y);}
else if(xd>0){drawStroke(childLeft+x.fSub(strokeWidth.fDiv(2)),y,childLeft+coreWidth.fMul(xPos2).fAdd(paddingLeft).fSub(strokeWidth.fDiv(2)),y);}
drawTurn(childLeft+x,y);drawArrow((xd<0?"left":"right"),childLeft+coreWidth.fMul(xPos2).fAdd(paddingLeft),y,2,arrowStyle);break;case 0xA2:switch(type){case"txt":drawBang("circle",childLeft+x,y,draw["noteStyle"](xPos,key,action,{"skill":noteData["flag"]["skill"]}));break;default:drawStroke(childLeft+x,y,childLeft+x,y2);drawStroke(childLeft+x.fSub(strokeWidth),y2,x.fAdd(strokeWidth),y2);break;}
break;}
break;case 1:switch(action){case 0x21:switch(type){case"aff":drawNote(action,childLeft+x,y.fSub(yPos.fMul(frameY)),y.fSub(yPos.fMul(frameY)),draw["noteStyle"](xPos,key,action,{}));break;}
break;case 0x22:switch(type){case"aff":if(!noteData["flag"]["invalid"]){drawStroke(childLeft+x,wholeHeight-time.fAdd(1).fDiv(speedRate).fAdd(paddingBottom)-yPos.fMul(frameY),childLeft+x2,y2.fSub(yPos2.fMul(frameY)),noteWidth/2,draw["noteStyle"](xPos,key,action,{"style":noteData["flag"]["parallel"]}),noteData["line"]["curve"]);}
else{drawStroke(childLeft+x,wholeHeight-time.fAdd(1).fDiv(speedRate).fAdd(paddingBottom)-yPos.fMul(frameY),childLeft+x2,y2.fSub(yPos2.fMul(frameY)),2,draw["noteStyle"](xPos,key,action,{"style":"arcaea_dark"}),noteData["line"]["curve"]);}
break;}
break;}
break;}};var drawBeat=function(beat){if(beat){var yd=Math.round(beat["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom));drawLine(childLeft+1,wholeHeight-yd,childLeft+wholeWidth-1,wholeHeight-yd,beatStyle,beatWidth,"");if(options["DrawTime"]||options["DrawBeat"]||options["DrawNote"]){drawTime(childLeft+wholeWidth+1,wholeHeight-1-yd,beat["when"],beatStyle,textFamily,"right");}
drawText(childLeft+coreWidth*0.5+paddingLeft,wholeHeight-1-yd,beat["bpm"].toAbbreviated(6)+" / "+beat["bpn"].toAbbreviated(6)+" / "+beat["dpb"].toAbbreviated(6)+" * "+beat["fpn"].toAbbreviated(6)+" | "+beat["lpn"].toAbbreviated(6),beatStyle,textFamily,"center",wholeWidth);}};var drawEffect=function(effect){if(effect&&(effect["kind"]=="audio")&&(effect["while"]=="")&&effect["path"]){var yd=Math.round(effect["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom));drawLine(childLeft+1,wholeHeight-yd,childLeft+wholeWidth-1,wholeHeight-yd,effectStyle,effectWidth,"");if(options["DrawTime"]||options["DrawBeat"]||options["DrawNote"]){drawTime(childLeft+wholeWidth+1,wholeHeight-1-yd,effect["when"],effectStyle,textFamily,"right");}
drawText(childLeft+coreWidth*0.5+paddingLeft,wholeHeight-1-yd,effect["path"],effectStyle,textFamily,"center",wholeWidth);}};var drawTrigger=function(noteData){if(noteData["trigger"]&&noteData["trigger"].length){var yd=Math.round(noteData["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom));for(var i=0;i<noteData["trigger"].length;i++){if((noteData["trigger"][i]["kind"]=="audio")&&(noteData["trigger"][i]["while"]=="")&&noteData["trigger"][i]["path"]){drawText(childLeft+coreWidth*noteData["where"]["x"]+paddingLeft,wholeHeight-yd+noteHeight/2,noteData["trigger"][i]["path"],effectStyle,textFamily,"center",wholeWidth-coreWidth*(1-Math.min(noteData["where"]["x"],1-noteData["where"]["x"])*2));}}}};var drawStatus=function(status){if(status&&status["name"]&&!isUndefined(status["value"])){var yd=Math.round(status["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom));drawLine(childLeft+1,wholeHeight-yd,childLeft+wholeWidth-1,wholeHeight-yd,statusStyle,statusWidth,"");if(options["DrawTime"]||options["DrawBeat"]||options["DrawNote"]){drawTime(childLeft+wholeWidth+1,wholeHeight-1-yd,status["when"],statusStyle,textFamily,"right");}
drawText(childLeft+coreWidth*0.5+paddingLeft,wholeHeight-1-yd,status["name"]+":"+status["value"]+(!isUndefined(status["value2"])?", "+status["value2"]:""),statusStyle,textFamily,"center",wholeWidth);}};var drawTransform=function(transform){if(transform){var yd=Math.round(transform["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom));drawLine(childLeft+1,wholeHeight-yd,childLeft+wholeWidth-1,wholeHeight-yd,transformStyle,transformWidth,"");if(options["DrawTime"]||options["DrawBeat"]||options["DrawNote"]){drawTime(childLeft+wholeWidth+1,wholeHeight-1-yd,transform["when"],transformStyle,textFamily,"right");}
var text=(function(){if(transform["reset"]){return"reset";}
else{var v=[];var t=newItem("transform");if(transform["translateX"]!=t["translateX"]){v.push("tX:"+transform["translateX"].toAbbreviated(6));}
if(transform["translateY"]!=t["translateY"]){v.push("tY:"+transform["translateY"].toAbbreviated(6));}
if(transform["translateZ"]!=t["translateZ"]){v.push("tZ:"+transform["translateZ"].toAbbreviated(6));}
if(transform["scaleX"]!=t["scaleX"]){v.push("sX:"+transform["scaleX"].toAbbreviated(6));}
if(transform["scaleY"]!=t["scaleY"]){v.push("sY:"+transform["scaleY"].toAbbreviated(6));}
if(transform["scaleZ"]!=t["scaleZ"]){v.push("sZ:"+transform["scaleZ"].toAbbreviated(6));}
if(transform["rotateX"]!=t["rotateX"]){v.push("rX:"+transform["rotateX"].toAbbreviated(6));}
if(transform["rotateY"]!=t["rotateY"]){v.push("rY:"+transform["rotateY"].toAbbreviated(6));}
if(transform["rotateZ"]!=t["rotateZ"]){v.push("rZ:"+transform["rotateZ"].toAbbreviated(6));}
if(transform["skewX"]!=t["skewX"]){v.push("kX:"+transform["skewX"].toAbbreviated(6));}
if(transform["skewY"]!=t["skewY"]){v.push("kY:"+transform["skewY"].toAbbreviated(6));}
if(transform["skewZ"]!=t["skewZ"]){v.push("kZ:"+transform["skewZ"].toAbbreviated(6));}
if(transform["perspective"]!=t["perspective"]){v.push("p:"+transform["perspective"].toAbbreviated(6));}
if(transform["easing"]!=t["easing"]){v.push("e:"+{"linear":"l","quadraticIn":"qi","quadraticOut":"qo"}[transform["easing"]]||"l");}
return v.join(",");}})();drawText(childLeft+coreWidth*0.5+paddingLeft,wholeHeight-1-yd,text,transformStyle,textFamily,"center",wholeWidth);}};var drawExist=function(t,e){var u=noteWidth/4;var x1=coreWidth.fMul(t.fDiv(key)).fAdd(paddingLeft);var x2=coreWidth.fMul(t.fAdd(1).fDiv(key)).fAdd(paddingLeft);var xd=x1.fAdd(x2).fDiv(2);x1=Math.round(xd.fSub(u/2));x2=Math.round(xd.fAdd(u/2));var y1=wholeHeight-1-maxTime.fDiv(speedRate).fAdd(paddingBottom);var y2=y1-u;if(e){drawCircle(childLeft+(x1+x2)/2,(y1+y2)/2-u,u/2-1,1,"#00FF00",u*2);}
else{var d=u*2/Math.SQRT2;drawLine(childLeft+x1+d,y1-d-u,childLeft+x2-d,y2+d-u,"#FF0000",u,"");drawLine(childLeft+x1+d,y2+d-u,childLeft+x2-d,y1-d-u,"#FF0000",u,"");}};for(var child=0;child<draw["list"].length;child++){if(options["DrawBackground"]){if(!child){drawRect(0,0,totalWidth,wholeHeight,backgroundStyle);}}
for(var i=0;i<draw["list"][child]["unflowAera"].length;i++){var style=(function(){var u=draw["list"][child]["unflowAera"][i]["bpm"].fDiv(4)|0;var v=parseInt(stopAeraStyle.slice(1),16);var r=v%256;v-=r*256*256;var g=v%256;v-=g*256;var b=v%256;v-=b;var f=Math.abs(draw["list"][child]["unflowAera"][i]["bpm"].fMul(draw["list"][child]["unflowAera"][i]["fpn"]).fDiv(4));if(f>u){f-=u;r=255;}
else{r+=(255-r).fMul(f.fDiv(u))|0;f=0;}
if(f>u){b=255;}
else{f=0;b+=(255-b).fMul(f.fDiv(u))|0;}
v="#"+new Uint8Array([r,g,b]).getHex();return v;})();drawRect(childLeft+1+paddingLeft,wholeHeight-draw["list"][child]["unflowAera"][i]["when2"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom),childLeft+wholeWidth-1-paddingLeft,wholeHeight-draw["list"][child]["unflowAera"][i]["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom),style);}
if(options["DrawTrack"]){if(!child){for(var c=0;c<draw["list"].length;c++){var cl=wholeWidth*c;for(var i=0;i<key+1;i++){var x=Math.round((coreWidth/key).fMul(i).fAdd(paddingLeft));drawFrame(cl+x,wholeHeight-paddingBottom,cl+x,paddingTop,trackLineStyle,trackLineWidth);}}}}
if(options["DrawFrame"]){if(!child){drawFrame(0,0,totalWidth,wholeHeight,frameStokeStyle,frameStokeWidth);}}
if(options["DrawStartEndLine"]){var drawStartLine=(function(){var yd=Math.round(draw["list"][child]["data"]["info"]["start"]["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom));drawLine(childLeft+1,wholeHeight-yd,childLeft+wholeWidth-1,wholeHeight-yd,startLineStyle,startLineWidth.fMul(2),"");if(options["DrawTime"]||options["DrawBeat"]||options["DrawNote"]){drawTime(childLeft+1,wholeHeight-1-yd,draw["list"][child]["data"]["info"]["start"]["when"],startLineStyle,textFamily,"left");}})();var drawLengthLine=(function(){var yd=Math.round(draw["list"][child]["data"]["info"]["length"]["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom));drawLine(childLeft+1,wholeHeight-yd,childLeft+wholeWidth-1,wholeHeight-yd,lengthLineStyle,lengthLineWidth.fMul(4),"");if(options["DrawTime"]||options["DrawBeat"]||options["DrawNote"]){drawTime(childLeft+1,wholeHeight-1-yd,draw["list"][child]["data"]["info"]["length"]["when"],lengthLineStyle,textFamily,"left");}})();}
if(options["DrawBeatline"]){for(var i=0;i<draw["list"][child]["beatLines"]["w"].length;i++){if((draw["list"][child]["beatLines"]["w"][i]["when"]["t"]!=draw["list"][child]["data"]["info"]["length"]["when"]["t"])&&(draw["list"][child]["beatLines"]["w"][i]["when"]["t"]!=draw["list"][child]["data"]["info"]["start"]["when"]["t"])){var yd=Math.round(draw["list"][child]["beatLines"]["w"][i]["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom));drawLine(childLeft+1,wholeHeight-yd,childLeft+wholeWidth-1,wholeHeight-yd,beatLineStyle,(i%4==0?beatLineWidth.fMul(2):beatLineWidth),"");if(options["DrawTime"]||options["DrawBeat"]||options["DrawNote"]){drawTime(childLeft+1,wholeHeight-1-yd,draw["list"][child]["beatLines"]["w"][i]["when"],beatLineStyle,textFamily,"left");}}}
for(var i=0;i<draw["list"][child]["beatLines"]["h"].length;i++){if((draw["list"][child]["beatLines"]["h"][i]["when"]["t"]!=draw["list"][child]["data"]["info"]["length"]["when"]["t"])&&(draw["list"][child]["beatLines"]["h"][i]["when"]["t"]!=draw["list"][child]["data"]["info"]["start"]["when"]["t"])){var yd=Math.round(draw["list"][child]["beatLines"]["h"][i]["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom));drawLine(childLeft+1,wholeHeight-yd,childLeft+wholeWidth-1,wholeHeight-yd,beatLineStyle,beatLineWidth,"dot_2");if(options["DrawTime"]||options["DrawBeat"]||options["DrawNote"]){drawTime(childLeft+1,wholeHeight-1-yd,draw["list"][child]["beatLines"]["h"][i]["when"],beatLineStyle,textFamily,"left");}}}
for(var i=0;i<draw["list"][child]["beatLines"]["q"].length;i++){if((draw["list"][child]["beatLines"]["q"][i]["when"]["t"]!=draw["list"][child]["data"]["info"]["length"]["when"]["t"])&&(draw["list"][child]["beatLines"]["q"][i]["when"]["t"]!=draw["list"][child]["data"]["info"]["start"]["when"]["t"])){var yd=Math.round(draw["list"][child]["beatLines"]["q"][i]["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom));drawLine(childLeft+1,wholeHeight-yd,childLeft+wholeWidth-1,wholeHeight-yd,beatLineStyle,beatLineWidth,"dot_4");if(options["DrawTime"]||options["DrawBeat"]||options["DrawNote"]){drawTime(childLeft+1,wholeHeight-1-yd,draw["list"][child]["beatLines"]["q"][i]["when"],beatLineStyle,textFamily,"left");}}}}
if(options["DrawNoteline"]){for(var i=0;i<draw["list"][child]["noteLines"].length;i++){if((draw["list"][child]["noteLines"][i]["when"]["t"]!=draw["list"][child]["data"]["info"]["length"]["when"]["t"])&&(draw["list"][child]["noteLines"][i]["when"]["t"]!=draw["list"][child]["data"]["info"]["start"]["when"]["t"])){var yd=Math.round(draw["list"][child]["noteLines"][i]["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom));drawLine(childLeft+1,wholeHeight-yd,childLeft+wholeWidth-1,wholeHeight-yd,noteLineStyle,noteLineWidth,"");if(options["DrawTime"]||options["DrawBeat"]||options["DrawNote"]){drawTime(childLeft+1,wholeHeight-1-yd,draw["list"][child]["noteLines"][i]["when"],beatLineStyle,textFamily,"left");}}}}
if(type=="aff"){var sortArc1=function(a,b){if((a["action"]!=0x22)||(b["action"]!=0x22)){return(a["when"]["t"]-b["when"]["t"])||(a["where"]["x"]-b["where"]["x"]);}
var ra=0;var rb=0;var p=Math.getLineCross([a["where"]["x"],a["when"]["t"]],[a["where2"]["x"],a["when2"]["t"]],[b["where"]["x"],b["when"]["t"]],[b["where2"]["x"],b["when2"]["t"]]);if(!isUndefined(p)){ra=(a["when2"]["t"]!=a["when"]["t"]?(p[1]-a["when"]["t"])/(a["when2"]["t"]-a["when"]["t"]):0);rb=(b["when2"]["t"]!=b["when"]["t"]?(p[1]-b["when"]["t"])/(b["when2"]["t"]-b["when"]["t"]):0);}
return(a["where"]["y"].fAdd((a["where2"]["y"].fSub(a["where"]["y"])).fMul(ra)))-(b["where"]["y"].fAdd((b["where2"]["y"].fSub(b["where"]["y"])).fMul(rb)));};var sortArc2=function(a,b){if((a["action"]!=0x22)||(b["action"]!=0x22)){return(a["when"]["t"]-b["when"]["t"])||(a["where"]["x"]-b["where"]["x"]);}
if(a["when"]["t"]>b["when2"]["t"]){return(a["where"]["y"]-b["where2"]["y"])||(a["where"]["y"]+a["where2"]["y"])-(b["where"]["y"]+b["where2"]["y"]);}
else if(a["when2"]["t"]<b["when"]["t"]){return(a["where2"]["y"]-b["where"]["y"])||(a["where"]["y"]+a["where2"]["y"])-(b["where"]["y"]+b["where2"]["y"]);}
return 0;};draw["list"][child]["noteData"]=draw["list"][child]["noteData"].sort(sortArc1).sort(sortArc2);}
for(var i=0;i<draw["list"][child]["noteData"].length;i++){drawKey(draw["list"][child]["noteData"][i],0);}
for(var i=0;i<draw["list"][child]["noteData"].length;i++){drawKey(draw["list"][child]["noteData"][i],1);}
if(options["DrawBeatData"]){for(var i=0;i<draw["list"][child]["data"]["beat"].length;i++){drawBeat(draw["list"][child]["data"]["beat"][i]);}}
if(options["DrawNoteDataCombo"]){for(var i=0;i<draw["list"][child]["comboPoints"].length;i++){var x=Math.round(coreWidth.fMul(draw["list"][child]["comboPoints"][i]["where"]["x"]).fAdd(paddingLeft));var y=Math.round(wholeHeight-draw["list"][child]["comboPoints"][i]["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom));drawPoint(childLeft+x,y,determinePointRadius,determinePointStyle);drawText(childLeft+x,y-noteHeight.fDiv(2),draw["list"][child]["comboPoints"][i]["combo"].toString(),determineTextStyle,textFamily,"center");}
for(var i=0;i<draw["list"][child]["determineLines"].length;i++){var yd=Math.round(draw["list"][child]["determineLines"][i]["when"]["t"].fSub(draw["list"][child]["data"]["info"]["min"]["when"]["t"]).fDiv(speedRate).fAdd(paddingBottom));drawLine(childLeft+1,wholeHeight-yd,childLeft+wholeWidth-1,wholeHeight-yd,determineLineStyle,determineLineWidth,"");if(options["DrawTime"]||options["DrawBeat"]||options["DrawNote"]){drawTime(childLeft+wholeWidth-1,wholeHeight-1-yd,draw["list"][child]["determineLines"][i]["when"],determineLineStyle,textFamily,"right");}}}
if(options["DrawEffectDataBGM"]){for(var i=0;i<draw["list"][child]["data"]["effect"].length;i++){drawEffect(draw["list"][child]["data"]["effect"][i]);}}
if(options["DrawEffectDataSE"]){for(var i=0;i<draw["list"][child]["noteData"].length;i++){drawTrigger(draw["list"][child]["noteData"][i]);}}
if(options["DrawStatusData"]){for(var i=0;i<draw["list"][child]["data"]["status"].length;i++){drawStatus(draw["list"][child]["data"]["status"][i]);}}
if(options["DrawTransformData"]){for(var i=0;i<draw["list"][child]["data"]["transform"].length;i++){drawTransform(draw["list"][child]["data"]["transform"][i]);}}
if(type!="tja"){var exist=(function(){var v=[];for(var i=0;i<draw["list"][child]["noteData"].length;i++){if(draw["list"][child]["noteData"][i]["where"]["x"]!=-1){v[draw["list"][child]["noteData"][i]["where"]["x"].fMul(key)|0]=true;}
if(draw["list"][child]["noteData"][i]["where2"]["x"]!=-1){v[draw["list"][child]["noteData"][i]["where2"]["x"].fMul(key)|0]=true;}}
return v;})();var noEmpty=(function(){for(var i=0;i<key;i++){if(!exist[i]){return false;}}
return true;})();if(!noEmpty){for(var i=0;i<key;i++){drawExist(i,exist[i]);}}}
var wL=wholeWidth/2-Math.round(coreWidth*0.618);var wR=wholeWidth/2+Math.round(coreWidth*0.124);drawText(childLeft+wL,89*scaleX,"时长："+MillisecondToTime(draw["list"][child]["data"]["info"]["length"]["when"]["t"]).toString(),textStyle,textFamily,"left");drawText(childLeft+wR,89*scaleX,"动作："+draw["list"][child]["action"].toString(),textStyle,textFamily,"left");drawText(childLeft+wL,106*scaleX,"拍速："+draw["list"][child]["data"]["info"]["bpm"].toString(),textStyle,textFamily,"left");drawText(childLeft+wR,106*scaleX,"节拍："+draw["list"][child]["data"]["info"]["max"]["when"]["b"].toAbbreviated(6).toAccurated().toString(),textStyle,textFamily,"left");childLeft+=wholeWidth;}
var drawInfo=(function(){var wL=totalWidth/2-Math.round(coreWidth*0.618);var wR=totalWidth/2+Math.round(coreWidth*0.124);drawText(totalWidth/2,18*scaleX,fileInfo.filename+(Semi["data"].length>1?" ("+(draw["list"][child]["data"]["info"]["name"]||index)+")":""),textStyle,boldTextFont,"center",wholeWidth);drawText(wL,38*scaleX,"连击："+draw["combo"].toString(),textStyle,textFamily,"left");drawText(wR,38*scaleX,"得分："+(draw["score"]?draw["score"].toString():""),textStyle,textFamily,"left");drawText(wL,55*scaleX,"速率："+scaleY.toFormated(3).toString(),textStyle,textFamily,"left");drawText(wR,55*scaleX,"键位："+key.toString(),textStyle,textFamily,"left");drawText(wL,72*scaleX,"密度："+draw["density"].toFormated(3).toString(),textStyle,textFamily,"left");drawText(wR,72*scaleX,"量级："+draw["quantity"].toFormated(3).toString(),textStyle,textFamily,"left");drawText(totalWidth/2,wholeHeight-48*scaleX,"Draw by rmstZ.html",textStyle,textFamily,"center");drawText(totalWidth/2,wholeHeight-30*scaleX,"on "+new Date().format(),textStyle,textFamily,"center");drawText(totalWidth/2,wholeHeight-10*scaleX,"Copyright © 心のsky Group",textStyle,boldTextFont,"center");})();}
var drawAudio=(function(){var imageData={"fL":[],"fR":[]};if(options["DrawFrequencyDomain"]){for(var i=0;i<splitCount;i++){if(map["fL"]["width"]){imageData["fL"][i]=ctx[i].getImageData(map["fL"]["left"],0,map["fL"]["width"],cvs[i].height);}
if(map["fL"]["width"]){imageData["fR"][i]=ctx[i].getImageData(map["fR"]["left"],0,map["fR"]["width"],cvs[i].height);}}}
var setPiexl=function(m,x,y,r,g,b,a){var i=y.fDiv(splitHeight)|0;i=(i<0?0:i);i=(i>splitCount-1?splitCount-1:i);var n=(Math.round(y.fSub(splitHeight.fMul(i)))*imageData[m][i].width+Math.round(x))*4;imageData[m][i].data[n]=r|0;imageData[m][i].data[n+1]=g|0;imageData[m][i].data[n+2]=b|0;imageData[m][i].data[n+3]=(255-(255-imageData[m][i].data[n+3])*(255-a)/255)|0;};var gauss=function(x,a,b,c){return a*Math.pow(Math.E,-((x-b)*(x-b))/(c*c*2));};var drawLink=function(m,x1,y1,x2,y2,s,w){var i1=0;var i2=0;if(y1>y2){i1=y2.fDiv(splitHeight)|0;i2=y1.fDiv(splitHeight)|0;}
else if(y1<y2){i1=y1.fDiv(splitHeight)|0;i2=y2.fDiv(splitHeight)|0;}
else{i1=y2.fSub(w.fDiv(2)).fDiv(splitHeight)|0;i2=y2.fAdd(w.fDiv(2)).fDiv(splitHeight)|0;}
i1=(i1<0?0:i1);i2=(i2>splitCount-1?splitCount-1:i2);for(var i=i1;i<i2+1;i++){ctx[i].beginPath();ctx[i].moveTo(map[m]["left"]+Math.round(x1),Math.round(y1.fSub(splitHeight.fMul(i))));ctx[i].lineTo(map[m]["left"]+Math.round(x2),Math.round(y2.fSub(splitHeight.fMul(i))));ctx[i].lineWidth=w;ctx[i].strokeStyle=s;ctx[i].stroke();}};for(var i=0;i<playList.length;i++){var l=getFileIndex(playList[i]["path"]);if(l!=-1){var rate=Raw["file"][l]["pcm"]["sampleRate"]/1000;var step=12;if(options["DrawTimeDomain"]){for(var c=0;c<Raw["file"][l]["pcm"]["channelData"].length;c++){for(var k=step;k<Raw["file"][l]["pcm"]["channelData"][c].length;k+=step){var s="#"+aeroStyle[Math.abs(Raw["file"][l]["pcm"]["channelData"][c][k]*playList[i]["volume"])*aeroStyle.length|0];if(c<channelDraw/2){if(isDrawLeft){drawLink("tL",((1-Raw["file"][l]["pcm"]["channelData"][c][k-step]*playList[i]["volume"])/2+c)*pcmWidth,wholeHeight-((k-step)/rate+playList[i]["offset"])/speedRate-paddingBottom,((1-Raw["file"][l]["pcm"]["channelData"][c][k]*playList[i]["volume"])/2+c)*pcmWidth,wholeHeight-(k/rate+playList[i]["offset"])/speedRate-paddingBottom,s,waveLineWidth);}}
else{if(isDrawRight){drawLink("tR",1+((1-Raw["file"][l]["pcm"]["channelData"][c][k-step]*playList[i]["volume"])/2+c-channelDraw/2)*pcmWidth,wholeHeight-((k-step)/rate+playList[i]["offset"])/speedRate-paddingBottom,1+((1-Raw["file"][l]["pcm"]["channelData"][c][k]*playList[i]["volume"])/2+c-channelDraw/2)*pcmWidth,wholeHeight-(k/rate+playList[i]["offset"])/speedRate-paddingBottom,s,waveLineWidth);}}}}}
if(options["DrawFrequencyDomain"]){for(var c=0;c<Raw["file"][l]["fft"]["channelData"].length;c++){var h=0;for(var t=0;t<Raw["file"][l]["fft"]["channelData"][c].length;t++){if(!h||(((t+playList[i]["offset"])/speedRate|0)==h)){var s=Raw["file"][l]["fft"]["channelData"][c][t].length;for(var w=0;w<fftWidth;w++){var j=w*s/fftWidth|0;var a=Raw["file"][l]["fft"]["channelData"][c][t][j]*playList[i]["volume"];if(a){if(c<channelDraw/2){if(isDrawLeft){setPiexl("fL",fftWidth-1-w,wholeHeight-h-paddingBottom,gauss(j,255,0,s/4),gauss(i,255,s/2,s/4),gauss(i,255,s,s/4),a);}}
else{if(isDrawRight){setPiexl("fR",w,wholeHeight-h-paddingBottom,gauss(j,255,0,s/4),gauss(i,255,s/2,s/4),gauss(i,255,s,s/4),a);}}}}
h=(!h?((t+playList[i]["offset"])/speedRate|0)+1:h+1);}}}}}}
if(options["DrawFrequencyDomain"]){for(var i=0;i<splitCount;i++){if(imageData["fL"][i]){for(var j=0;j<imageData["fL"][i].data;j+=4){imageData["fL"][i].data[j+3]*=drawAlpha;}
ctx[i].putImageData(imageData["fL"][i],map["fL"]["left"],0);}
if(imageData["fR"][i]){for(var j=0;j<imageData["fR"][i].data;j+=4){imageData["fR"][i].data[j+3]*=drawAlpha;}
ctx[i].putImageData(imageData["fR"][i],map["fR"]["left"],0);}}}})();var src=[];for(var i=0;i<splitCount;i++){src[i]=cvs[i].toDataURL("image/png");}
return(single?{"src":src}:{"src":src,"maxTime":maxTime,"width":cvs[0].width,"audioList":audioList,"playList":playList});};var getSemi=function(){Raw=Raw||{};Raw["meta"]=Raw["meta"]||{};Raw["data"]=Raw["data"]||[];Raw["file"]=Raw["file"]||[];var r={"meta":copyObject(Raw["meta"]),"data":copyObject(Raw["data"]),"file":[]};for(var i=0;i<Raw["file"].length;i++){r["file"][i]={"path":Raw["file"][i]["path"],"base64":Raw["file"][i]["base64"]};}
var fillValue=(function(){r["meta"]=r["meta"]||{};r["meta"]["title"]=r["meta"]["title"]||"";r["meta"]["titleTranslit"]=r["meta"]["titleTranslit"]||"";r["meta"]["subTitle"]=r["meta"]["subTitle"]||"";r["meta"]["subTitleTranslit"]=r["meta"]["subTitleTranslit"]||"";r["meta"]["orgTitle"]=r["meta"]["orgTitle"]||"";r["meta"]["artist"]=r["meta"]["artist"]||"";r["meta"]["artistTranslit"]=r["meta"]["artistTranslit"]||"";r["meta"]["subArtist"]=r["meta"]["subArtist"]||"";r["meta"]["orgArtist"]=r["meta"]["orgArtist"]||"";r["meta"]["genre"]=r["meta"]["genre"]||"";r["meta"]["description"]=r["meta"]["description"]||"";r["meta"]["id"]=r["meta"]["id"]||"";r["meta"]["tag"]=r["meta"]["tag"]||"";r["meta"]["author"]=r["meta"]["author"]||"";r["meta"]["creator"]=r["meta"]["creator"]||"";r["meta"]["editor"]=r["meta"]["editor"]||"";r["meta"]["mixer"]=r["meta"]["mixer"]||"";r["meta"]["effector"]=r["meta"]["effector"]||"";r["meta"]["illustrator"]=r["meta"]["illustrator"]||"";r["meta"]["version"]=r["meta"]["version"]||"";r["meta"]["source"]=r["meta"]["source"]||"";r["meta"]["orgSource"]=r["meta"]["orgSource"]||"";r["meta"]["datetime"]=r["meta"]["datetime"]||"";r["data"]=r["data"]||[];for(var index=0;index<r["data"].length;index++){r["data"][index]=r["data"][index]||[];for(var child=0;child<r["data"][index].length;child++){r["data"][index][child]=fillData(r["data"][index][child],index);}}
r["file"]=r["file"]||[];var file=newItem("file");for(var i=0;i<r["file"].length;i++){r["file"][i]["path"]=r["file"][i]["path"]||file["path"];r["file"][i]["base64"]=r["file"][i]["base64"]||file["base64"];}
r["draw"]=r["draw"]||[];})();if(r["data"].length==1){fileInfo.setParam({"key":r["data"][0][0]["info"]["key"]});}
syncFileList();Stutas["timeSemi"]=new Date();isValid=true;return r;};var preData=async function(){Raw=Raw||{};Raw["file"]=Raw["file"]||[];for(var i=0;i<Raw["file"].length;i++){if(SupportAudio.indexOf(new FileInfo(Raw["file"][i]["path"]).extension[0])!=-1){Raw["file"][i]["pcm"]=Raw["file"][i]["pcm"]||{};Raw["file"][i]["pcm"]["sampleRate"]=Raw["file"][i]["pcm"]["sampleRate"]||48000;Raw["file"][i]["pcm"]["channelData"]=Raw["file"][i]["pcm"]["channelData"]||[];if(!Raw["file"][i]["pcm"]["channelData"].length){var audioBuffer=new Uint8Array().fromBase64(Raw["file"][i]["base64"]);if(audioBuffer.length){try{await new AudioContext().decodeAudioData(audioBuffer.buffer,function(data){var channelData=[];for(var c=0;c<data.numberOfChannels;c++){channelData[c]=data.getChannelData(c);}
Raw["file"][i]["pcm"]["sampleRate"]=data.sampleRate;Raw["file"][i]["pcm"]["channelData"]=channelData;});}
catch(e){}}}
Raw["file"][i]["fft"]=Raw["file"][i]["fft"]||{};Raw["file"][i]["fft"]["pow"]=Raw["file"][i]["fft"]["pow"]||8;Raw["file"][i]["fft"]["interval"]=Raw["file"][i]["fft"]["interval"]||1;Raw["file"][i]["fft"]["channelData"]=Raw["file"][i]["fft"]["channelData"]||[];if(!Raw["file"][i]["fft"]["channelData"].length){var count=(1<<Raw["file"][i]["fft"]["pow"])/2;var rate=Raw["file"][i]["pcm"]["sampleRate"]/1000;var fd=new Float32Array(count);for(var c=0;c<Raw["file"][i]["pcm"]["channelData"].length;c++){Raw["file"][i]["fft"]["channelData"][c]=[];var length=Raw["file"][i]["pcm"]["channelData"][c].length/rate;var t=0;while(t<length){Raw["file"][i]["pcm"]["channelData"][c].transformFourier(t*rate|0,Raw["file"][i]["fft"]["pow"],fd);var d=new Uint8Array(fd.length);for(var j=0;j<d.length;j++){d[j]=fd[j]*256|0;}
Raw["file"][i]["fft"]["channelData"][c].push(d);t+=Raw["file"][i]["fft"]["interval"];}}}}}
Raw["data"]=Raw["data"]||[];for(var index=0;index<Raw["data"].length;index++){for(var child=0;child<Raw["data"][index].length;child++){if(Raw["data"][index]&&Raw["data"][index][child]&&Raw["data"][index][child]["effect"]){Raw["data"][index][child]["info"]=(function(){var r=Raw["data"][index][child]["info"]||{};r["length"]=r["length"]||{};r["length"]["when"]=r["length"]["when"]||{};if(!r["length"]["when"]["t"]){var length=(function(){var v=0;for(var i=0;i<Raw["data"][index][child]["effect"].length;i++){if((Raw["data"][index][child]["effect"][i]["kind"]=="audio")&&Raw["data"][index][child]["effect"][i]["path"]){var l=getFileIndex(Raw["data"][index][child]["effect"][i]["path"]);if((l!=-1)&&(Raw["file"][l]["pcm"])&&(Raw["file"][l]["pcm"]["sampleRate"])&&(Raw["file"][l]["pcm"]["channelData"])&&(Raw["file"][l]["pcm"]["channelData"].length)){for(var j=0;j<Raw["file"][l]["pcm"]["channelData"].length;j++){var t=Raw["file"][l]["pcm"]["channelData"][j].length/Raw["file"][l]["pcm"]["sampleRate"]*1000;if(v<t){v=t;}}}}}
return v;})();if(length!=0){r["length"]["when"]={"t":length};}}
return r;})();}}}
Semi=getSemi();};var setRaw=function(mst){Raw=mst;Raw["data"]=Raw["data"]||[];for(var index=0;index<Raw["data"].length;index++){for(var child=0;child<Raw["data"][index].length;child++){Raw["data"][index][child]["info"]=Raw["data"][index][child]["info"]||{};if(isUndefined(MstOptions["LockKey"])||MstOptions["LockKey"]){Raw["data"][index][child]["info"]["key"]=MstOptions["TransKey"][index];}
else{if(Raw["data"][index][child]["info"]["key"]){if(MstOptions["TransKey"][index]!=Raw["data"][index][child]["info"]["key"]){MstOptions["TransKey"][index]=Raw["data"][index][child]["info"]["key"];SetTransKey(index);}}
else{Raw["data"][index][child]["info"]["key"]=MstOptions["TransKey"][index];}}}}};var addRes=function(res){Raw["file"]=Raw["file"]||[];for(var i=0;i<res.length;i++){var l=(function(){for(var j=0;j<Raw["file"].length;j++){if(Raw["file"][j]["path"]==res[i]["path"]){return j;}}
return-1;})();if(l!=-1){Raw["file"][l]["base64"]=res[i]["base64"];Semi["file"][l]["base64"]=res[i]["base64"];}
else{Raw["file"].push({"path":res[i]["path"],"base64":res[i]["base64"]});Semi["file"].push({"path":res[i]["path"],"base64":res[i]["base64"]});}}
syncFileList();};var fromVosBuffer=function(buffer){var readUint=function(n){var e=(arguments.length>1?arguments[1]:LittleEndian);var r=buffer.getUint(n,p,e);p+=n;return r;};var readText=function(n){var r=buffer.getText(p,n);p+=n;return r;};var readBuffer=function(n){var r=buffer.slice(p,p+n);p+=n;return r;};var readDelta=function(){var r=0;while(true){var v=readUint(1);var f=(v&0x80)>>7;var d=v&0x7F;r*=0x80;r+=d;if(!f){break;}}
return r;};var setInstrument=function(c,s,i){if(i!=noteData[c]["instruments"][noteData[c]["instruments"].length-1]["instrument"]){if(s==noteData[c]["instruments"][noteData[c]["instruments"].length-1]["sequence"]){noteData[c]["instruments"][noteData[c]["instruments"].length-1]["instrument"]=i;}
else{noteData[c]["instruments"].push({"sequence":s,"instrument":i});}}};var getInstrument=function(c,s){for(var i=0;i<noteData[c]["instruments"].length;i++){if((s>=noteData[c]["instruments"][i]["sequence"])&&((i+1>=noteData[c]["instruments"].length)||(s<noteData[c]["instruments"][i+1]["sequence"]))){return noteData[c]["instruments"][i]["instrument"];}}
return 0;};var pitchToTrack=function(p){var s=p%12;s=(s>10?s+1:s);s=(s>3?s+1:s);return(s/2)|0;};var pitchToScale=function(p){return((p/12)|0).limit(0,11);};var p=0;var version=readUint(4,true);var segment={};var meta={};var info={"key":7};var dpb=768;var beatData=[];var noteData=[];var beat=[];var mid=[];var bmp=[];switch(buffer[4]){case 0x40:for(var i=0;i<3;i++){var o=readUint(4,true);var n=readText(4);p+=12;segment[n]=[o];}
segment["inf"][1]=segment["mid"][0];segment["mid"][1]=segment["EOF"][0];segment["EOF"][1]=segment["EOF"][0];break;case 0x0C:var m={"Vosctemp.trk":"trk","VOSCTEMP.mid":"mid","VOSCTEMP.BMP":"bmp"};while(p<buffer.length){var n=readText(readUint(4,true));var l=readUint(4,true);if(m[n]){segment[m[n]]=[p,p+l];}
p+=l;}
segment["EOF"]=[p,p];break;}
var readInf=(function(){if(segment["inf"]){p=segment["inf"][0];if(readText(4)=="VOS1"){p+=2;p+=64;var d=readText(readUint(1));}
else{p-=4;}
meta["title"]=readText(readUint(1));meta["artist"]=readText(readUint(1));info["comment"]=readText(readUint(1));meta["author"]=readText(readUint(1));meta["genre"]=["Pop","New Age","Techno","Rock","SoundTrack","Game&Anime","Jazz","CenturyEnd","Classical","Other"][readUint(1)];var genreEx=readUint(1);var lengthTime=readUint(4,true);info["length"]={"when":{"t":lengthTime}};info["level"]=readUint(1)+1;p+=1023;var countChannel=17;for(var i=0;i<countChannel;i++){var instrument=readUint(1);p+=2;var instrument2=readUint(1);var countNote=readUint(4,true);p+=14;var notes=[];for(var j=0;j<countNote;j++){var sequence=readUint(4,true);var duration=readUint(4,true);var channel=readUint(1)&0x0F;var pitch=readUint(1);var velocity=readUint(1);var key=readUint(1);var flag=readUint(1);var isUser=(key&0x80)>>7;var track=(key&0x70)>>4;var isLong=(flag&0x80)>>7;notes.push({"sequence":sequence,"duration":duration,"channel":channel,"pitch":pitch,"velocity":velocity,"isUser":isUser,"track":track,"isLong":isLong});}
noteData[i]={"instruments":[{"sequence":0,"instrument":instrument}],"notes":notes};}}})();var readTrk=(function(){if(segment["trk"]){p=segment["trk"][0];var signature=readText(6);meta["title"]=readText(readUint(2,true));meta["artist"]=readText(readUint(2,true));meta["comment"]=readText(readUint(2,true));meta["author"]=readText(readUint(2,true));meta["genre"]=readText(readUint(2,true));var can=readUint(1);var volume=readUint(1);var u1=readUint(1);var u2=readUint(2,true);var u3=readUint(2,true);var u4=readUint(2,true);var u5=readUint(2,true);var lengthBeat=readUint(4,true)/768;var lengthTime=readUint(4,true);info["length"]={"when":{"b":lengthBeat,"t":lengthTime}};p+=1024;var countChannel=readUint(4,true);var u6=readUint(4,true);for(var i=0;i<countChannel;i++){noteData[i]={"instruments":[{"sequence":0,"instrument":readUint(readUint(1))}]};}
var u7=readUint(1);info["level"]=readUint(1)+1;var mode=readText(readUint(2,true));var u8=readUint(4,true);for(var i=0;i<countChannel;i++){var countNote=readUint(4,true);var notes=[];for(var j=0;j<countNote;j++){p+=1;var sequence=readUint(4,true);var pitch=readUint(1);var channel=readUint(1);var velocity=readUint(1);var isAuto=readUint(1);var flag=readUint(1);var isLong=readUint(1);var duration=readUint(4,true);var isUser=(readUint(1)+1)%256;notes.push({"sequence":sequence,"duration":duration,"channel":channel,"pitch":pitch,"velocity":velocity,"isUser":isUser,"isLong":isLong});}
noteData[i]["notes"]=notes;}
if(signature=="VOS022"){p+=4;}
noteData[16]={"instruments":[{"sequence":0,"instrument":0}],"notes":[]};var countTrack=readUint(4,true);for(var i=0;i<countTrack;i++){var c=readUint(1);var n=readUint(4,true);noteData[c]["notes"][n]["track"]=readUint(1);noteData[16]["notes"].push(copyObject(noteData[c]["notes"][n]));}
if(signature=="VOS022"){var count5=readUint(4,true);p+=4;for(var i=0;i<count5;i++){var sequence=readUint(4,true);var type=readUint(1);var value=readUint(4,true);}}}})();noteData=(function(){var v=[];for(var i=0;i<16;i++){if(noteData[i]&&noteData[i]["notes"]&&noteData[i]["notes"].length){v[noteData[i]["notes"][0]["channel"]]=noteData[i];}}
for(var i=0;i<16;i++){v[i]=v[i]||{"instruments":[{"sequence":0,"instrument":0}],"notes":[]};}
v[16]=noteData[16];for(var i=0;i<v.length;i++){if(v[i]["notes"].length){var s=v[i]["notes"][0]["sequence"];for(var j=1;j<v[i]["instruments"].length;j++){if((v[i]["instruments"][j]["sequence"]<=s)&&(v[i]["instruments"][j-1]["sequence"]<s)){v[i]["instruments"].splice(j-1,1);j-=1;}}}}
return v;})();var readMid=(function(){if(segment["mid"]){p=segment["mid"][0];mid=buffer.slice(segment["mid"][0],segment["mid"][1]);var signature=readText(4);var offset=readUint(4,false);if(signature!="MThd"){return;}
var mode=readUint(2,false);var count=readUint(2,false);var division=readUint(2,false);var dType=(division&0x8000)>>15;var dValue=(dType?(0x80-((division&0x7F00)>>8))*division&0x00FF:division&0x7FFF);var readMTrk=function(){var signature=readText(4);var offset=readUint(4,false)+p;if(signature!="MTrk"){p=offset;return;}
var s=0;var e=0x00;var eof=false;var info={};var readEvent=function(){var event=readUint(1);if(event<0x80){event=e;p-=1;}
else{e=event;}
return event;};while(!eof){s+=readDelta();var event=readEvent();switch(event){case 0xF0:while(true){if(readUint(1)==0xF7){break;}}
break;case 0xF1:p+=1;break;case 0xF2:p+=2;break;case 0xF3:p+=1;break;case 0xF4:case 0xF5:case 0xF6:case 0xF7:case 0xF8:case 0xF9:case 0xFA:case 0xFB:case 0xFC:case 0xFD:case 0xFE:break;case 0xFF:switch(readUint(1)){case 0x00:info["sequenceNumber"]=readUint(readUint(1),false);break;case 0x01:info["textEvent"]=readText(readUint(1));break;case 0x02:info["copyrightNotice"]=readText(readUint(1));break;case 0x03:info["trackName"]=readText(readUint(1));break;case 0x04:info["instrumentName"]=readText(readUint(1));break;case 0x05:info["lyric"]=readText(readUint(1));break;case 0x06:info["marker"]=readText(readUint(1));break;case 0x07:info["cuePoint"]=readText(readUint(1));break;case 0x20:info["channelPrefix"]=readUint(readUint(1),false);break;case 0x51:var bpm=(60000000/readUint(readUint(1),false)).toAbbreviated(3).toAccurated();beatData.push([s,bpm,undefined]);break;case 0x54:var o=readUint(1)+p;var hr=readUint(1);var mn=readUint(1);var se=readUint(1);var fr=readUint(1);var ff=readUint(1);p=o;break;case 0x58:var o=readUint(1)+p;var bpn=(readUint(1)/(1<<readUint(1))).fMul(4);beatData.push([s,undefined,bpn]);var cpb=readUint(1);var cpb=1<<readUint(1);p=o;break;case 0x59:var o=readUint(1)+p;var sf=readUint(1);var mi=readUint(1);p=o;break;case 0x2F:var o=readUint(1)+p;p=o;eof=true;break;case 0x7F:info["sequenceSpecificMetaEvent"]=readBuffer(readUint(1));break;default:var o=readUint(1)+p;p=o;}
break;default:if((event>0x7F)&&(event<0xF0)){var f=(event&0xF0)>>4;var c=event&0x0F;switch(f){case 0x8:case 0x9:case 0xA:case 0xB:case 0xE:p+=2;break;case 0xC:setInstrument(c,s,readUint(1));break;case 0xD:p+=1;break;}}
else{eof=true;}
break;}}};for(var i=0;i<count;i++){readMTrk();}
beat=(function(){var v=[];var set=function(b,bpm,bpn){var l=(function(){for(var i=0;i<v.length;i++){if(v[i][0]==b){return i;}}
return-1;})();if(l!=-1){v[l][1]=(!isUndefined(bpm)?bpm:v[l][1]);v[l][2]=(!isUndefined(bpn)?bpn:v[l][2]);}
else{v.push([b,bpm,bpn]);}};beatData.unshift([0,125,4]);for(var i=0;i<beatData.length;i++){set.apply(null,beatData[i]);}
v=v.sort(function(a,b){return a[0]-b[0];});for(var i=0;i<v.length;i++){v[i][1]=(isUndefined(v[i][1])?(i?v[i-1][1]:125):v[i][1]);v[i][2]=(isUndefined(v[i][2])?(i?v[i-1][2]:4):v[i][2]);}
for(var i=0;i<v.length;i++){v[i]={"when":(dType?{"t":(v[i][0]/dValue).fMul(1000)}:{"b":v[i][0]/dValue}),"bpm":v[i][1],"bpn":v[i][2]};}
if(dType){for(var i=0;i<v.length;i++){v[i]["when"]["b"]=beatFromTime({"beat":v},v[i]["when"]["t"]);}}
return v;})();var trk=(function(){var r=[];var writeDelta=function(d){var t=d-delta;delta=d;var v=[];while(true){var m=t%0x80;t-=m;v.unshift(m);t/=0x80;if(t==0){break;}}
for(var i=0;i<v.length;i++){r[r.length-1].push(i==v.length-1?v[i]:v[i]+0x80);}};var writeEvent=function(e){if(e!=event){event=e;r[r.length-1].push(e);}};var writeData=function(){for(var i=0;i<arguments.length;i++){r[r.length-1].push(arguments[i]);}};for(var i=0;i<16;i++){if(noteData[i]["notes"].length){var keySet=(function(){var v=[];for(var j=0;j<noteData[i]["notes"].length;j++){var c=noteData[i]["notes"][j]["channel"];var p=noteData[i]["notes"][j]["pitch"];v[c]=v[c]||[];v[c][p]=v[c][p]||[];v[c][p].push([noteData[i]["notes"][j]["sequence"],noteData[i]["notes"][j]["velocity"]]);v[c][p].push([noteData[i]["notes"][j]["sequence"]+noteData[i]["notes"][j]["duration"],0]);}
for(var c=0;c<v.length;c++){v[c]=v[c]||[];for(var p=0;p<v[c].length;p++){v[c][p]=v[c][p]||[];v[c][p]=v[c][p].sort(function(a,b){return(a[0]-b[0])||(a[1]-b[1]);});for(var k=1;k<v[c][p].length;k++){if((v[c][p][k][0]==v[c][p][k-1][0])&&(v[c][p][k][1]==v[c][p][k-1][1])){v[c][p].splice(k,1);k-=1;}}
if(v[c][p].length){v[c][p][v[c][p].length-1][2]=true;}}}
return v;})();var keyData=(function(){var v=[];for(var c=0;c<keySet.length;c++){for(var p=0;p<keySet[c].length;p++){for(var j=0;j<keySet[c][p].length;j++){v.push([(dType?timeFromBeat({"beat":beat},keySet[c][p][j][0].fDiv(768)).fMul(dValue).fDiv(1000)|0:keySet[c][p][j][0].fDiv(768).fMul(dValue)|0),c+0x90,p,keySet[c][p][j][1],keySet[c][p][j][2]]);}}}
v=v.sort(function(a,b){return(a[0]-b[0])||(a[1]-b[1])||(a[2]-b[2]);});return v;})();r.push([]);var event=0;var delta=0;if(noteData[i]["instruments"][0]["instrument"]){writeDelta(delta);writeEvent(0xC0+i);writeData(noteData[i]["instruments"][0]["instrument"]);}
for(var j=0;j<keyData.length;j++){writeDelta(keyData[j][0]);writeEvent((keyData[j][4]?keyData[j][1]-0x10:keyData[j][1]));writeData(keyData[j][2],(keyData[j][4]?0x64:keyData[j][3]));}
writeDelta(delta);writeEvent(0xFF);writeData(0x2F,0X00);r[r.length-1]=Array.from(new Uint8Array().fromText("MTrk")).concat(Array.from(new Uint8Array().fromUint32(r[r.length-1].length,false)),r[r.length-1]);}}
return r;})();mid.setInt16(count+trk.length,10,false);mid=Array.from(mid);for(var i=0;i<trk.length;i++){mid=mid.concat(trk[i]);}}})();var readBmp=(function(){if(segment["bmp"]){p=segment["bmp"][0];bmp=buffer.slice(segment["bmp"][0],segment["bmp"][1]);}})();var note=(function(){var v=[];var trackToX=function(track,key){return(track*2+1)/(key*2);};var scaleToY=function(scale){return scale/12;};for(var i=0;i<noteData.length;i++){v[i]=[];for(var j=0;j<noteData[i]["notes"].length;j++){var x=trackToX((isUndefined(noteData[i]["notes"][j]["track"])?pitchToTrack(noteData[i]["notes"][j]["pitch"]):noteData[i]["notes"][j]["track"]),info["key"]);var y=scaleToY(pitchToScale(noteData[i]["notes"][j]["pitch"]));var flag={"style":"mid_"+(i!=9?"s"+getInstrument(i,noteData[i]["notes"][j]["sequence"]):"p"+noteData[i]["notes"][j]["pitch"]),"size":{"w":noteData[i]["notes"][j]["velocity"]/128},"auto":(noteData[i]["notes"][j]["isUser"]?undefined:true)};if(noteData[i]["notes"][j]["isLong"]){v[i].push({"when":{"b":noteData[i]["notes"][j]["sequence"]/dpb},"where":{"x":x,"y":y},"link":{"b":-1,"c":v[i].length,"a":v[i].length+1},"flag":flag});v[i].push({"when":{"b":(noteData[i]["notes"][j]["sequence"]+noteData[i]["notes"][j]["duration"])/dpb},"where":{"x":x,"y":y},"link":{"b":v[i].length-1,"c":v[i].length,"a":-1}});}
else{v[i].push({"when":{"b":noteData[i]["notes"][j]["sequence"]/dpb},"where":{"x":x},"flag":flag});}}}
return v;})();var data=(function(){var v=[];var m=["Acoustic Grand Piano","Bright Acoustic Piano","Electric Grand Piano","Honky-tonk Piano","Electric Piano 1","Electric Piano 2","Harpsichord","Clavi","Celesta","Glockenspiel","Music Box","Vibraphone","Marimba","Xylophone","Tubular Bells","Dulcimer","Drawbar Organ","Percussive Organ","Rock Organ","Church Organ","Reed Organ","Accordion","Harmonica","Tango Accordion","Acoustic Guitar (nylon)","Acoustic Guitar (steel)","Electric Guitar (jazz)","Electric Guitar (clean)","Electric Guitar (muted","Overdriven Guitar","Distortion Guitar","Guitar Harmonics","Acoustic Bass","Electric Bass (finger)","Electric Bass (pick)","Fretless Bass","Slap Bass 1","Slap Bass 2","Synth Bass 1","Synth Bass 2","Violin","Viola","Cello","Contrabass","Tremolo Strings","Pizzicato Strings","Orchestral Harp","Timpani","String Ensemble 1","String Ensemble 2","SynthStrings 1","SynthStrings 2","Choir Aahs","Voice Oohs","Synth Voice","Orchestra Hit","Trumpet","Trombone","Tuba","Muted Trumpet","French Horn","Brass Section","SynthBrass 1","SynthBrass 2","Soprano Sax","Alto Sax","Tenor Sax","Baritone Sax","Oboe","English Horn","Bassoon","Clarinet","Piccolo","Flute","Recorder","Pan Flute","Blown Bottle","Shakuhachi","Whistle","Ocarina","Lead 1 (square)","Lead 2 (sawtooth)","Lead 3 (calliope)","Lead 4 (chiff)","Lead 5 (charang)","Lead 6 (voice)","Lead 7 (fifths)","Lead 8 (bass + lead)","Pad 1 (new age)","Pad 2 (warm)","Pad 3 (polysynth)","Pad 4 (choir)","Pad 5 (bowed)","Pad 6 (metallic)","Pad 7 (halo)","Pad 8 (sweep)","FX 1 (rain)","FX 2 (soundtrack)","FX 3 (crystal)","FX 4 (atmosphere)","FX 5 (brightness)","FX 6 (goblins)","FX 7 (echoes)","FX 8 (sci-fi)","Sitar","Banjo","Shamisen","Koto","Kalimba","Bag pipe","Fiddle","Shanai","Tinkle Bell","Agogo","Steel Drums","Woodblock","Taiko Drum","Melodic Tom","Synth Drum","Reverse Cymbal","Guitar Fret Noise","Breath Noise","Seashore","Bird Tweet","Telephone Ring","Helicopter","Applause","Gunshot"];var mp=["Acoustic Bass Drum","Bass Drum 1","Side Stick","Acoustic Snare","Hand Clap","Electric Snare","Low Floor Tom","Closed Hi Hat","High Floor Tom","Pedal Hi-Hat","Low Tom","Open Hi-Hat","Low-Mid Tom","Hi Mid Tom","Crash Cymbal 1","High Tom","Ride Cymbal 1","Chinese Cymbal","Ride Bell","Tambourine","Splash Cymbal","Cowbell","Crash Cymbal 2","Vibraslap","Ride Cymbal 2","Hi Bongo","Low Bongo","Mute Hi Conga","Open Hi Conga","Low Conga","High Timbale","Low Timbale","High Agogo","Low Agogo","Cabasa","Maracas","Short Whistle","Long Whistle","Short Guiro","Long Guiro","Claves","Hi Wood Block","Low Wood Block","Mute Cuica","Open Cuica","Mute Triangle","Open Triangle"];for(var i=0;i<note.length;i++){if(note[i].length){v.push({"beat":beat.slice(),"note":note[i],"effect":[{"when":{"t":0},"kind":"audio","path":fileInfo.nameCore+".mid"}],"info":mergeObject(info,{"name":"channel"+i+" "+(i<note.length-1?"midi "+((i!=9?m[noteData[i]["instruments"][0]["instrument"]]||"Standard Drum":(noteData[i]["notes"].length?mp[noteData[i]["notes"][0]["pitch"]-35]:"Percussion"))):"user Mixed")},true)});}}
return v;})();var file=(function(){var v=[];if(mid.length){v.push({"path":fileInfo.nameCore+".mid","base64":new Uint8Array(mid).getBase64()});}
if(bmp.length){v.push({"path":fileInfo.nameCore+".bmp","base64":new Uint8Array(bmp).getBase64()});}
return v;})();setRaw({"meta":meta,"data":[data],"file":file});};var fromBmsBuffer=function(buffer,ext){var trackToX=function(track,key){return(track*2+1)/(key*2);};var frequencyToPitch=function(f){return(69+12*(Math.log2(f/440))).toAbbreviated(2).toAccurated();};var addChannelData=function(c,n,v){if(v!="00"){d[c]=d[c]||[];var l=(function(){for(var i=0;i<d[c].length;i++){if(d[c][i][0]==n){return i;}}
return-1;})();if(l!=-1){if(c=="A6"){d[c][l][1]+=v;}
else{d[c][l][1]=v;}}
else{d[c].push([n,v]);}}};var hBPM=120;var hLNTYPE=1;var hLNOBJ="";var hPOORBGA=0;var hPLAYER=0;var cWAVCMDs={};var hEXTCHRs={};var cSTPs=[];var hOPTION=[];var hWAVs={};var hEXWAVs={};var hBMPs={};var hEXBMPs={};var hBGAs={};var haBGAs={};var hSWBGAs={};var hBPMs={};var hEXBPMs={};var hSTOPs={};var hTEXTs={};var hEXRANKs={};var hARGBs={};var hCHANGEOPTIONs={};var stops=[];var meta={};var data=[];var beat=[];var note=[];var effect=[];var status=[];var info={};var key=0;var d={};var a=buffer.getText().replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");for(var i=0;i<a.length;i++){a[i]=a[i].trim();if((a[i][0]=="#")&&(a[i][6]==":")){var n=a[i].slice(1,6).toUpperCase().trim();var m=parseInt(n.slice(0,3));var c=n.slice(3,5);if(!isNaN(m)&&(c!="")){switch(c){case"02":addChannelData(c,m,a[i].slice(7));break;default:var v=a[i].slice(7).replace(/\s+/g,"").splitEvery(2);for(var j=0;j<v.length;j++){addChannelData(c,m.fAdd(j/v.length),v[j]);}
break;}}}
else{var ls=a[i].indexOf(" ",1);if(ls!=-1){var s=a[i].slice(0,1);var n=a[i].slice(1,ls).toUpperCase();var v=a[i].slice(ls+1).trim();switch(s){case"#":switch(n){case"TITLE":meta["title"]=v;break;case"SUBTITLE":meta["subTitle"]=v;break;case"ARTIST":meta["artist"]=v;break;case"SUBARTIST":meta["subArtist"]=v;break;case"GENRE":meta["genre"]=v;break;case"MAKER":meta["author"]=v;break;case"COMMENT":info["comment"]=v;break;case"BASEBPM":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){info["bpmBase"]=v;}
break;case"PLAYER":v=parseInt(v);if(!isNaN(v)&&(v>=0)){info["playMode"]=(function(){switch(v){case 1:hPLAYER=0;return"single";break;case 2:hPLAYER=1;return"couple";break;case 3:hPLAYER=0;return"double";break;case 4:hPLAYER=1;return"battle";break;}
return"";})();}
break;case"DIFFICULTY":v=parseInt(v);if(!isNaN(v)&&(v>=0)){info["difficulty"]=v-1;}
break;case"PLAYLEVEL":v=parseInt(v);if(!isNaN(v)&&(v>=0)){info["level"]=v;}
break;case"RANK":v=parseInt(v);if(!isNaN(v)&&(v>=0)){info["rank"]=v;}
break;case"DEFEXRANK":v=parseInt(v);if(!isNaN(v)&&(v>=0)){info["defExRank"]=v;}
break;case"TOTAL":break;case"VOLWAV":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){info["volWav"]=v.fDiv(100);}
break;case"CDDA":v=parseInt(v);if(!isNaN(v)&&(v>=0)){info["cdda"]=v;}
break;case"STAGEFILE":info["stageFile"]=v;break;case"BANNER":info["banner"]=v;break;case"BACKBMP":info["background"]=v;break;case"VIDEOFILE":info["videoFile"]=v;break;case"VIDEOF/S":v=parseInt(v);if(!isNaN(v)&&(v>=0)){info["videoFps"]=v;}
break;case"VIDEOCOLORS":v=parseInt(v);if(!isNaN(v)&&(v>=0)){info["videoColors"]=v;}
break;case"VIDEODLY":v=parseInt(v);if(!isNaN(v)&&(v>=0)){info["videoDelay"]=v;}
break;case"MOVIE":info["movie"]=v;break;case"MIDIFILE":info["midFile"]=v;break;case"CHARFILE":info["charFile"]=v;break;case"PATH_WAV":info["pathWav"]=v;break;case"MATERIALSWAV":info["materialsWav"]=v;break;case"MATERIALSBMP":info["materialsBmp"]=v;break;case"BPM":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){hBPM=v;}
break;case"LNTYPE":v=parseInt(v);if(!isNaN(v)&&(v>=0)){hLNTYPE=v;}
break;case"LNOBJ":if(v.length==2){hLNOBJ=v;}
break;case"POORBGA":v=parseInt(v);if(!isNaN(v)&&(v>=0)){hPOORBGA=v;}
break;case"WAVCMD":var p=v.replace(/\s+/g," ").split(" ");if(p.length==3){var cmd=parseInt(p[0]);var index=p[1];var value=parseFloat(p[2]);if(!isNaN(cmd)&&(index!="")&&!isNaN(value)){cWAVCMDs[index]=cWAVCMDs[index]||{};switch(cmd){case 0:cWAVCMDs[index]["pitch"]=value;break;case 1:cWAVCMDs[index]["volume"]=value.fDiv(100);break;case 2:cWAVCMDs[index]["playback"]=value;break;}}}
break;case"EXTCHR":var p=v.replace(/\s+/g," ").split(" ");if(p.length>5){var sprite=parseInt(p[0]);var index=p[1].toString(16).toUpperCase().padStart(2,"0");if(!isNaN(sprite)){hEXTCHRs[index]=hEXTCHRs[index]||{};hEXTCHRs[index]["spriteID"]=sprite;var startX=parseFloat(p[2]);if(!isNaN(startX)){hEXTCHRs[index]["startX"]=startX;}
var startY=parseFloat(p[3]);if(!isNaN(startY)){hEXTCHRs[index]["startY"]=startY;}
var endX=parseFloat(p[4]);if(!isNaN(endX)){hEXTCHRs[index]["endX"]=endX;}
var endY=parseFloat(p[5]);if(!isNaN(endY)){hEXTCHRs[index]["endY"]=endY;}
if(p.length>6){var offsetX=parseFloat(p[6]);if(!isNaN(offsetX)){hEXTCHRs[index]["offsetX"]=offsetX;}}
if(p.length>7){var offsetY=parseFloat(p[7]);if(!isNaN(offsetY)){hEXTCHRs[index]["offsetY"]=offsetY;}}
if(p.length>8){var x=parseFloat(p[8]);if(!isNaN(x)){hEXTCHRs[index]["x"]=x;}}
if(p.length>9){var y=parseFloat(p[9]);if(!isNaN(y)){hEXTCHRs[index]["y"]=y;}}}}
break;case"STP":var p=v.replace(/\s+/g," ").split(" ");if(p.length==2){var w=p[0].split(",");if(w.length==2){w[0]=parseInt(w[0]);w[1]=parseInt(w[1]);p[1]=parseInt(p[1]);if(!isNaN(w[0])&&(w[0]>=0)&&!isNaN(w[1])&&(w[1]>=0)&&!isNaN(p[1])&&(p[1]>=0)){cSTPs.push([w[0].fAdd(w[1].fDiv(1000)),p[1]]);}}}
break;case"OPTION":hOPTION.push(v);break;default:if(n.length>2){var tag=a[i].slice(1,n.length-1);var index=a[i].slice(n.length-1,n.length+1);switch(tag){case"WAV":hWAVs[index]=hWAVs[index]||{};hWAVs[index]["path"]=v;break;case"EXWAV":var p=v.replace(/\s+/g," ").split(" ");if(p.length==p[0].length+2){hEXWAVs[index]=hEXWAVs[index]||{};for(var j=0;j<p[0].length;j++){p[j+1]=parseFloat(p[j+1]);switch(p[0][j]){case"p":if(!isNaN(p[j+1])&&(p[j+1]>=-10000)&&(p[j+1]<=10000)){hEXWAVs[index]["panner"]=p[j+1]/10000;}
break;case"v":if(!isNaN(p[j+1])&&(p[j+1]>=-10000)&&(p[j+1]<=0)){hEXWAVs[index]["volume"]=p[j+1]/10000+1;}
break;case"f":if(!isNaN(p[j+1])&&(p[j+1]>=100)&&(p[j+1]<=100000)){hEXWAVs[index]["pitch"]=frequencyToPitch(p[j+1]);}
break;}}
hEXWAVs[index]["path"]=p[p.length-1];}
break;case"BMP":hBMPs[index]=hBMPs[index]||{};hBMPs[index]["path"]=v;break;case"EXBMP":var p=v.replace(/\s+/g," ").split(" ");if(p.length==5){hEXBMPs[index]=hEXBMPs[index]||{};var alpha=parseFloat(p[0]);if(!isNaN(alpha)&&(alpha>=0)){hEXBMPs[index]["alpha"]=alpha.limit(0,255);}
var red=parseFloat(p[1]);if(!isNaN(red)&&(red>=0)){hEXBMPs[index]["red"]=red.limit(0,255);}
var green=parseFloat(p[2]);if(!isNaN(green)&&(green>=0)){hEXBMPs[index]["green"]=green.limit(0,255);}
var blue=parseFloat(p[3]);if(!isNaN(blue)&&(blue>=0)){hEXBMPs[index]["blue"]=blue.limit(0,255);}
hEXBMPs[index]["path"]=p[4];}
break;case"BGA":var p=v.replace(/\s+/g," ").split(" ");if(p.length==7){hBGAs[index]=hBGAs[index]||{};hBGAs[index]["index"]=p[0].toUpperCase();var startX=parseFloat(p[1]);if(!isNaN(startX)){hBGAs[index]["startX"]=startX;}
var startY=parseFloat(p[2]);if(!isNaN(startY)){hBGAs[index]["startY"]=startY;}
var endX=parseFloat(p[3]);if(!isNaN(endX)){hBGAs[index]["endX"]=endX;}
var endY=parseFloat(p[4]);if(!isNaN(endY)){hBGAs[index]["endY"]=endY;}
var drawX=parseFloat(p[5]);if(!isNaN(drawX)){hBGAs[index]["drawX"]=drawX;}
var drawY=parseFloat(p[6]);if(!isNaN(drawY)){hBGAs[index]["drawY"]=drawY;}}
break;case"@BGA":var p=v.replace(/\s+/g," ").split(" ");if(p.length==7){haBGAs[index]=haBGAs[index]||{};haBGAs[index]["index"]=p[0].toUpperCase();var startX=parseFloat(p[1]);if(!isNaN(startX)){haBGAs[index]["startX"]=startX;}
var startY=parseFloat(p[2]);if(!isNaN(startY)){haBGAs[index]["startY"]=startY;}
var width=parseFloat(p[3]);if(!isNaN(width)){haBGAs[index]["width"]=width;}
var height=parseFloat(p[4]);if(!isNaN(height)){haBGAs[index]["height"]=height;}
var drawX=parseFloat(p[5]);if(!isNaN(drawX)){haBGAs[index]["drawX"]=drawX;}
var drawY=parseFloat(p[6]);if(!isNaN(drawY)){haBGAs[index]["drawY"]=drawY;}}
break;case"SWBGA":var p=v.replace(/\s+/g," ").split(" ");if(p.length==2){var l=p[0].split(":");if(l.length==5){var c=l[4].split(",");if(c.length==4){hSWBGAs[index]=hSWBGAs[index]||{};var interval=parseFloat(l[0]);if(!isNaN(interval)&&(interval>=0)){hSWBGAs[index]["interval"]=interval;}
var duration=parseFloat(l[1]);if(!isNaN(duration)&&(duration>=0)){hSWBGAs[index]["duration"]=duration;}
var channel=parseInt(l[2]);if(!isNaN(channel)&&(channel>=0)){hSWBGAs[index]["channel"]=channel;}
var loop=parseInt(l[3]);if(!isNaN(loop)&&(loop>=0)){hSWBGAs[index]["loop"]=(loop==0?0:-1);}
var alpha=parseFloat(c[0]);if(!isNaN(alpha)&&(alpha>=0)){hSWBGAs[index]["alpha"]=alpha.limit(0,255);}
var red=parseFloat(c[1]);if(!isNaN(red)&&(red>=0)){hSWBGAs[index]["red"]=red.limit(0,255);}
var green=parseFloat(c[2]);if(!isNaN(green)&&(green>=0)){hSWBGAs[index]["green"]=green.limit(0,255);}
var blue=parseFloat(c[3]);if(!isNaN(blue)&&(blue>=0)){hSWBGAs[index]["blue"]=blue.limit(0,255);}
hSWBGAs[index]["indexes"]=p[0].toUpperCase().splitEvery(2);}}}
break;case"BPM":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){hBPMs[index]=v;}
break;case"EXBPM":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){hEXBPMs[index]=v;}
break;case"STOP":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){hSTOPs[index]=v;}
break;case"TEXT":hTEXTs[index]=v;break;case"EXRANK":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){hEXRANKs[index]=v;}
break;case"ARGB":var p=v.split(",");if(p.length==4){hARGBs[index]=hARGBs[index]||{};var alpha=parseFloat(p[0]);if(!isNaN(alpha)&&(alpha>=0)){hARGBs[index]["alpha"]=alpha.limit(0,255);}
var red=parseFloat(p[1]);if(!isNaN(red)&&(red>=0)){hARGBs[index]["red"]=red.limit(0,255);}
var green=parseFloat(p[2]);if(!isNaN(green)&&(green>=0)){hARGBs[index]["green"]=green.limit(0,255);}
var blue=parseFloat(p[3]);if(!isNaN(blue)&&(blue>=0)){hARGBs[index]["blue"]=blue.limit(0,255);}}
break;case"CHANGEOPTION":hCHANGEOPTIONs[index]=v;break;}}
break;}
break;case"%":switch(n){case"EMAIL":info["email"]=v;break;case"URL":info["url"]=v;break;}
break;}}}}
var sortData=(function(){for(var c in d){d[c]=d[c].sort(SortNumbers);}})();var fillValue=(function(){for(var index in hEXWAVs){hWAVs[index]["panner"]=hEXWAVs[index]["panner"]||0;hWAVs[index]["volume"]=hEXWAVs[index]["volume"]||1;hWAVs[index]["pitch"]=hEXWAVs[index]["pitch"]||60;hWAVs[index]["path"]=hEXWAVs[index]["path"]||"";}
for(var index in cWAVCMDs){hWAVs[index]["pitch"]=cWAVCMDs[index]["pitch"]||60;hWAVs[index]["volume"]=cWAVCMDs[index]["volume"]||1;hWAVs[index]["playback"]=cWAVCMDs[index]["playback"]||0;}
for(var index in hWAVs){hWAVs[index]["panner"]=hWAVs[index]["panner"]||0;hWAVs[index]["volume"]=hWAVs[index]["volume"]||1;hWAVs[index]["pitch"]=hWAVs[index]["pitch"]||60;hWAVs[index]["path"]=hWAVs[index]["path"]||"";hWAVs[index]["playback"]=hWAVs[index]["playback"]||0;}
for(var index in hEXBMPs){hBMPs[index]["alpha"]=hEXBMPs[index]["alpha"]||0;hBMPs[index]["red"]=hEXBMPs[index]["red"]||0;hBMPs[index]["green"]=hEXBMPs[index]["green"]||0;hBMPs[index]["blue"]=hEXBMPs[index]["blue"]||0;hBMPs[index]["path"]=hEXBMPs[index]["path"]||"";}
for(var index in hEXTCHRs){hEXTCHRs[index]["spriteID"]=hEXTCHRs[index]["spriteID"]||0;hEXTCHRs[index]["startX"]=hEXTCHRs[index]["startX"]||0;hEXTCHRs[index]["startY"]=hEXTCHRs[index]["startY"]||0;hEXTCHRs[index]["endX"]=hEXTCHRs[index]["endX"]||hEXTCHRs[index]["startX"];hEXTCHRs[index]["endY"]=hEXTCHRs[index]["endY"]||hEXTCHRs[index]["startY"];hEXTCHRs[index]["offsetX"]=hEXTCHRs[index]["offsetX"]||0;hEXTCHRs[index]["offsetY"]=hEXTCHRs[index]["offsetY"]||0;hEXTCHRs[index]["x"]=hEXTCHRs[index]["x"]||0;hEXTCHRs[index]["y"]=hEXTCHRs[index]["y"]||0;}
for(var index in hBMPs){hBMPs[index]["alpha"]=hBMPs[index]["alpha"]||0;hBMPs[index]["red"]=hBMPs[index]["red"]||0;hBMPs[index]["green"]=hBMPs[index]["green"]||0;hBMPs[index]["blue"]=hBMPs[index]["blue"]||0;hBMPs[index]["path"]=hBMPs[index]["path"]||"";}
for(var index in haBGAs){hBGAs[index]["index"]=haBGAs[index]["index"]||"";hBGAs[index]["startX"]=haBGAs[index]["startX"]||0;hBGAs[index]["startY"]=haBGAs[index]["startY"]||0;hBGAs[index]["endX"]=hBGAs[index]["startX"]+(haBGAs[index]["width"]||0);hBGAs[index]["endY"]=hBGAs[index]["startY"]+(haBGAs[index]["height"]||0);hBGAs[index]["drawX"]=haBGAs[index]["drawX"]||0;hBGAs[index]["drawY"]=haBGAs[index]["drawY"]||0;}
for(var index in hBGAs){hBGAs[index]["index"]=hBGAs[index]["index"]||"";hBGAs[index]["startX"]=hBGAs[index]["startX"]||0;hBGAs[index]["startY"]=hBGAs[index]["startY"]||0;hBGAs[index]["endX"]=hBGAs[index]["endX"]||hBGAs[index]["startX"];hBGAs[index]["endY"]=hBGAs[index]["endY"]||hBGAs[index]["startY"];hBGAs[index]["drawX"]=hBGAs[index]["drawX"]||0;hBGAs[index]["drawY"]=hBGAs[index]["drawY"]||0;}
for(var index in hSWBGAs){hSWBGAs[index]["interval"]=hSWBGAs[index]["interval"]||16.667;hSWBGAs[index]["duration"]=hSWBGAs[index]["duration"]||0;hSWBGAs[index]["channel"]=hSWBGAs[index]["channel"]||"";hSWBGAs[index]["loop"]=hSWBGAs[index]["loop"]||0;hSWBGAs[index]["alpha"]=hSWBGAs[index]["alpha"]||0;hSWBGAs[index]["red"]=hSWBGAs[index]["red"]||0;hSWBGAs[index]["green"]=hSWBGAs[index]["green"]||0;hSWBGAs[index]["blue"]=hSWBGAs[index]["blue"]||0;hSWBGAs[index]["indexes"]=hSWBGAs[index]["indexes"]||"";}
for(var index in hEXBPMs){hBPMs[index]=hEXBPMs[index];}
for(var index in hARGBs){hARGBs[index]["alpha"]=hARGBs[index]["alpha"]||0;hARGBs[index]["red"]=hARGBs[index]["red"]||0;hARGBs[index]["green"]=hARGBs[index]["green"]||0;hARGBs[index]["blue"]=hARGBs[index]["blue"]||0;}})();var setBeat=function(n,bpm,bpn){var ow=(arguments.length>3?arguments[3]:true);var l=(function(){for(var i=0;i<beat.length;i++){if(beat[i]["when"]["n"]==n){return i;}}
return-1;})();if(l!=-1){if(ow){beat[l]["bpm"]=(!isUndefined(bpm)?bpm:beat[l]["bpm"]);beat[l]["bpn"]=(!isUndefined(bpn)?bpn:beat[l]["bpn"]);}}
else{beat.push({"when":{"n":n},"bpm":bpm,"bpn":bpn});}};for(var c in d){for(var i=0;i<d[c].length;i++){var measure=d[c][i][0];var index=d[c][i][1];switch(c){case"01":var wav=hWAVs[index];if(!isUndefined(wav)){effect.push({"when":{"n":measure},"kind":"audio","path":wav["path"],"volume":wav["volume"],"panner":wav["panner"],"pitch":wav["pitch"],"playback":wav["playback"]});}
break;case"02":var sign=parseFloat(index);if(!isNaN(sign)&&(sign>0)){setBeat(measure,undefined,sign.fMul(4));}
break;case"03":var bpm=parseInt(index,16);if(!isNaN(bpm)&&(bpm>0)){setBeat(measure,bpm,undefined);}
break;case"04":case"06":case"07":case"0A":var what=(function(){switch(c){case"04":return"back";break;case"06":return"miss";break;case"07":return"layer";break;case"0A":return"layer2";break;}})();var bga=hBGAs[index];if(!isUndefined(bga)){var bmp=hBMPs[bga["index"]];if(!isUndefined(bmp)){effect.push({"when":{"n":measure},"kind":"image","what":what,"path":bmp["path"],"where":{"x":bga["drawX"],"y":bga["drawY"]},"clip":{"x":bga["startX"],"y":bga["startY"]},"clip2":{"x":bga["endX"],"y":bga["endY"]},"backColor":{"a":bmp["alpha"],"r":bmp["red"],"g":bmp["green"],"b":bmp["blue"]}});}}
else{var bmp=hBMPs[index];if(!isUndefined(bmp)){effect.push({"when":{"n":measure},"kind":"image","what":what,"path":bmp["path"],"backColor":{"a":bmp["alpha"],"r":bmp["red"],"g":bmp["green"],"b":bmp["blue"]}});}}
break;case"05":var extchr=hEXTCHRs[index];var bmp=hBMPs[index];if(!isUndefined(extchr)&&!isUndefined(bmp)){effect.push({"when":{"n":measure},"kind":"image","what":"character","path":bmp["path"],"spriteID":extchr["spriteID"],"where":{"x":extchr["x"].fAdd(extchr["offsetX"]),"y":extchr["y"].fAdd(extchr["offsetY"])},"clip":{"x":extchr["startX"],"y":extchr["startY"]},"clip2":{"x":extchr["endX"],"y":extchr["endY"]},"backColor":{"a":bmp["alpha"],"r":bmp["red"],"g":bmp["green"],"b":bmp["blue"]}});}
break;case"08":var bpm=hBPMs[index];if(!isUndefined(bpm)){setBeat(measure,bpm,undefined);}
break;case"09":var stop=hSTOPs[index];if(!isUndefined(stop)){stops.push({"start":measure,"fpn":0,"duration":stop.fDiv(192)});}
break;case"0B":case"0C":case"0D":case"0E":var what=(function(){switch(c){case"0B":return"back";break;case"0C":return"miss";break;case"0D":return"layer";break;case"0E":return"layer2";break;}})();var opacity=parseInt(index);if(!isNaN(opacity)){opacity=opacity.limit(0,255)/255;effect.push({"when":{"n":measure},"kind":"color","what":what,"opacity":opacity});}
break
case"97":case"98":var what=(function(){switch(c){case"97":return"back";break;case"98":return"fore";break;}})();var volume=parseInt(index);if(!isNaN(volume)){volume=volume.limit(0,255)/255;effect.push({"when":{"n":measure},"kind":"player","what":what,"volume":volume});}
break;case"99":var text=hTEXTs[index];if(!isUndefined(text)){effect.push({"when":{"n":measure},"kind":"text","text":text});}
break;case"A0":var rank=hEXRANKs[index];if(!isUndefined(rank)){rank=rank.limit(0,100).fDiv(100);status.push({"when":{"n":measure},"name":"judge","value":"bm_"+rank});}
break;case"A1":case"A2":case"A3":case"A4":var what=(function(){switch(c){case"A1":return"back";break;case"A2":return"layer";break;case"A3":return"layer2";break;case"A4":return"miss";break;}})();var argb=hARGBs[index];if(!isUndefined(argb)){effect.push({"when":{"n":measure},"kind":"color","what":what,"backColor":{"a":argb["alpha"],"r":argb["red"],"g":argb["green"],"b":argb["blue"]}});}
break;case"A5":var swbga=hSWBGAs[index];if(!isUndefined(swbga)){effect.push({"when":{"n":measure},"kind":"image","while":"hit","what":"switch_"+swbga["channel"],"backColor":{"a":swbga["alpha"],"r":swbga["red"],"g":swbga["green"],"b":swbga["blue"]},"loop":swbga["loop"],"duration":swbga["duration"],"interval":swbga["interval"]});for(var k=0;k<swbga["indexes"].length;k++){var bga=hBGAs[swbga["indexes"][k]];if(!isUndefined(bga)){var bmp=hBMPs[bga["index"]];if(!isUndefined(bmp)){effect.push({"when":{"n":measure},"kind":"image","while":"hit","what":"switch_"+swbga["channel"]+"_"+k.toString(),"path":bmp["path"],"where":{"x":bga["drawX"],"y":bga["drawY"]},"clip":{"x":bga["startX"],"y":bga["startY"]},"clip2":{"x":bga["endX"],"y":bga["endY"]},"backColor":{"a":bmp["alpha"],"r":bmp["red"],"g":bmp["green"],"b":bmp["blue"]}});}
else{effect.push({"when":{"n":measure},"kind":"image","while":"hit","what":"switch_"+swbga["channel"]+"_"+k.toString()});}}
else{var bmp=hBMPs[swbga["indexes"][k]];if(!isUndefined(bmp)){effect.push({"when":{"n":measure},"kind":"image","while":"hit","what":"switch_"+swbga["channel"]+"_"+k.toString(),"path":bmp["path"],"backColor":{"a":bmp["alpha"],"r":bmp["red"],"g":bmp["green"],"b":bmp["blue"]}});}
else{effect.push({"when":{"n":measure},"kind":"image","while":"hit","what":"switch_"+swbga["channel"]+"_"+k.toString()});}}}}
break;case"A6":var indexes=index.splitEvery(2);var changeoptions=[];for(var j=0;j<indexes.length;j++){var changeoption=hCHANGEOPTIONs[indexes[j]];if(!isUndefined(changeoption)){changeoptions.push(changeoption);}}
if(changeoptions.length){var option=changeoptions.join(",");if(option!=""){status.push({"when":{"n":measure},"name":"bm_option","value":option});}}
break;}}}
var addOPTION=(function(){var l=(function(){for(var i=0;i<status.length;i++){if((status[i]["when"]["n"]==0)&&(status[i]["name"]=="bm_option")){return i;}}
return-1;})();if(l!=-1){status[l]["value"]=hOPTION.join(",")+","+status[l]["value"];}
else{var option=hOPTION.join(",");if(option!=""){status.push({"when":{"n":0},"name":"bm_option","value":option});}}})();var setLandmineWav=(function(){var landmineWav=(function(){var wav=hWAVs["00"];if(!isUndefined(wav)){return{"when":{"n":0},"kind":"audio","while":"damage","path":wav["path"],"volume":wav["volume"],"panner":wav["panner"],"pitch":wav["pitch"],"playback":wav["playback"]};}})();if(!isUndefined(landmineWav)){effect.unshift(landmineWav);}})();var setPoorBmp=(function(){var poorBmp=(function(){var bga=hBGAs["00"];if(!isUndefined(bga)){var bmp=hBMPs[bga["index"]];if(!isUndefined(bmp)){return{"when":{"n":0},"kind":"image","while":"miss","path":bmp["path"],"where":{"x":bga["drawX"],"y":bga["drawY"]},"clip":{"x":bga["startX"],"y":bga["startY"]},"clip2":{"x":bga["endX"],"y":bga["endY"]},"backColor":{"a":bmp["alpha"],"r":bmp["red"],"g":bmp["green"],"b":bmp["blue"]}};}}
else{var bmp=hBMPs["00"];if(!isUndefined(bmp)){return{"when":{"n":0},"kind":"image","while":"miss","path":bmp["path"],"backColor":{"a":bmp["alpha"],"r":bmp["red"],"g":bmp["green"],"b":bmp["blue"]}};}}})();if(!isUndefined(poorBmp)){var l=(function(){for(var i=0;i<effect.length;i++){if((effect[i]["kind"]=="image")&&(effect[i]["while"]=="miss")){return i;}}
return-1;})();if(l==-1){effect.unshift(poorBmp);}
else{effect[i]=poorBmp;}}})();var setKeyData=(function(){var channelIndexes=["11","12","13","14","15","16","17","18","19","21","22","23","24","25","26","27","28","29","31","32","33","34","35","36","37","38","39","41","42","43","44","45","46","47","48","49","51","52","53","54","55","56","57","58","59","61","62","63","64","65","66","67","68","69","D1","D2","D3","D4","D5","D6","D7","D8","D9","E1","E2","E3","E4","E5","E6","E7","E8","E9"];var trackType=(function(){var existOne=function(m){for(var i=0;i<m.length;i++){var c=parseInt(m[i],16);if(d[c.toString(16)]||d[(c+0x20).toString(16)]||d[(c+0x40).toString(16)]||d[(c+0xC0).toString(16)]){return true;}}
return false;};var existNone=function(m){for(var i=0;i<m.length;i++){if(existOne([m[i]])){return false;}}
return true;};var r={};switch(ext){case"bms":case"bml":if(existNone(["12","14","17","18","19","22","24","27","28","29"])){r["type"]="ddr4";}
else if(existNone(["17","18","19","21","22","23","24","25","26","27","28","29"])){r["type"]="ddr6";}
else if(existNone(["18","19","28","29"])){r["type"]="bm98";if(existOne(["16","26"])){r["s"]=true;}
if(existOne(["17","27"])){r["f"]=true;}}
else{r["type"]="bms";if(existOne(["16","26"])){r["s"]=true;}
if(existOne(["17","27"])){r["f"]=true;}}
break;case"bme":if(existNone(["14","15","16","17","18","19","21","22","23","24","25","26","27","28","29"])){r["type"]="bme3";}
else if(existNone(["11","12","16","17","21","22","23","24","25","26","27","28","29"])){r["type"]="bme5";}
else if(existNone(["16","17","21","22","23","24","25","26","27","28","29"])){r["type"]="bme7";}
else if(existNone(["17","18","19","23","24","25","26","27","28","29"])){r["type"]="2dx";if(existOne(["16"])){r["s"]=true;}}
else{r["type"]="bme";if(existOne(["16","26"])){r["s"]=true;}
if(existOne(["17","27"])){r["f"]=true;}}
break;case"pms":if(existNone(["14","15","16","17","18","19","21","22","23","24","25","26","27","28","29"])){r["type"]="pms3";}
else if(existNone(["11","12","16","17","18","19","21","24","25","26","27","28","29"])){r["type"]="pms5";}
else if(existNone(["16","17","18","19","21","26","27","28","29"])){r["type"]="pms";}
else{r["type"]="pmse";}
break;}
if(!r["type"]){r["type"]="bms";if(existOne(["16","26"])){r["s"]=true;}
if(existOne(["17","27"])){r["f"]=true;}}
return r;})();var trackData=(function(){var r={};var getTrackData=function(c){var r={};c=parseInt(c,16);if(isNaN(c)||(c<0x00)||(c>0xF0)){return;}
if(c>0xD0){r["type"]="landmine";c-=0xC0;}
else if(c>0x50){r["type"]="long";c-=0x40;}
else if(c>0x30){r["type"]="invisible";c-=0x20;}
else{r["type"]="visible";}
switch(trackType["type"]){case"bms":r["key"]=9;switch(c){case 0x16:r["track"]=c-0x16;r["player"]=0;break;case 0x11:case 0x12:case 0x13:case 0x14:case 0x15:r["track"]=c-0x10;r["player"]=0;break;case 0x18:case 0x19:r["track"]=c-0x12;r["player"]=0;break;case 0x17:r["track"]=c-0x0F;r["player"]=0;break;case 0x26:r["track"]=c-0x26;r["player"]=1;break;case 0x21:case 0x22:case 0x23:case 0x24:case 0x25:r["track"]=c-0x20;r["player"]=1;break;case 0x28:case 0x29:r["track"]=c-0x22;r["player"]=1;break;case 0x27:r["track"]=c-0x1F;r["player"]=1;break;}
if(!trackType["f"]){r["key"]-=1;if(!trackType["s"]){r["key"]-=1;r["track"]-=1;}}
break;case"bm98":r["key"]=7;switch(c){case 0x11:case 0x12:case 0x13:case 0x14:case 0x15:case 0x16:case 0x17:r["track"]=c-0x11;r["player"]=0;break;case 0x21:case 0x22:case 0x23:case 0x24:case 0x25:case 0x26:case 0x27:r["track"]=c-0x21;r["player"]=1;break;}
if(!trackType["f"]){r["key"]-=1;if(!trackType["s"]){r["key"]-=1;}}
break;case"ddr6":r["key"]=6;switch(c){case 0x11:case 0x12:case 0x13:case 0x14:case 0x15:case 0x16:r["track"]=c-0x11;r["player"]=0;break;}
break;case"ddr4":r["key"]=4;switch(c){case 0x11:r["track"]=c-0x11;r["player"]=0;break;case 0x13:r["track"]=c-0x12;r["player"]=0;break;case 0x15:case 0x16:r["track"]=c-0x13;r["player"]=1;break;case 0x21:r["track"]=c-0x21;r["player"]=1;break;case 0x23:r["track"]=c-0x22;r["player"]=1;break;case 0x25:case 0x26:r["track"]=c-0x23;r["player"]=1;break;}
break;case"bme":r["key"]=9;switch(c){case 0x16:r["track"]=c-0x16;r["player"]=0;break;case 0x11:case 0x12:case 0x13:case 0x14:case 0x15:r["track"]=c-0x10;r["player"]=0;break;case 0x18:case 0x19:r["track"]=c-0x12;r["player"]=0;break;case 0x17:r["track"]=c-0x0F;r["player"]=0;break;case 0x27:r["track"]=c-0x27;r["player"]=1;break;case 0x21:case 0x22:case 0x23:case 0x24:case 0x25:r["track"]=c-0x20;r["player"]=1;break;case 0x28:case 0x29:r["track"]=c-0x22;r["player"]=1;break;case 0x26:r["track"]=c-0x18;r["player"]=1;break;}
if(!trackType["f"]){r["key"]-=1;if(r["player"]==1){r["track"]-=1;}
if(!trackType["s"]){r["key"]-=1;if(r["player"]==0){r["track"]-=1;}}}
break;case"2dx":r["key"]=8;switch(c){case 0x11:case 0x12:case 0x13:case 0x14:case 0x15:r["track"]=c-0x11;r["player"]=0;break;case 0x21:case 0x22:r["track"]=c-0x16;r["player"]=0;break;}
if(!trackType["s"]){r["key"]-=1;r["track"]-=1;}
break;case"bme7":r["key"]=7;switch(c){case 0x11:case 0x12:case 0x13:case 0x14:case 0x15:r["track"]=c-0x11;r["player"]=0;break;case 0x18:case 0x19:r["track"]=c-0x13;r["player"]=0;break;}
break;case"bme5":r["key"]=5;switch(c){case 0x13:case 0x14:case 0x15:r["track"]=c-0x13;r["player"]=0;break;case 0x18:case 0x19:r["track"]=c-0x15;r["player"]=0;break;}
break;case"bme3":r["key"]=3;switch(c){case 0x11:case 0x12:case 0x13:r["track"]=c-0x11;r["player"]=0;break;}
break;case"pms":r["key"]=9;switch(c){case 0x11:case 0x12:case 0x13:case 0x14:case 0x15:r["track"]=c-0x11;r["player"]=0;break;case 0x22:case 0x23:case 0x24:case 0x25:r["track"]=c-0x1D;r["player"]=0;break;}
break;case"pmse":r["key"]=9;switch(c){case 0x11:case 0x12:case 0x13:case 0x14:case 0x15:r["track"]=c-0x11;r["player"]=0;break;case 0x18:case 0x19:r["track"]=c-0x13;r["player"]=0;break;case 0x16:case 0x17:r["track"]=c-0x0F;r["player"]=0;break;case 0x21:case 0x22:case 0x23:case 0x24:case 0x25:r["track"]=c-0x21;r["player"]=1;break;case 0x28:case 0x29:r["track"]=c-0x23;r["player"]=1;break;case 0x26:case 0x27:r["track"]=c-0x1F;r["player"]=1;break;}
break;case"pms5":r["key"]=5;switch(c){case 0x13:case 0x14:case 0x15:r["track"]=c-0x13;r["player"]=0;break;case 0x22:case 0x23:r["track"]=c-0x19;r["player"]=0;break;}
break;case"pms3":r["key"]=3;switch(c){case 0x11:case 0x12:case 0x13:r["track"]=c-0x11;r["player"]=0;break;}
break;}
return r;};for(var c in d){if(channelIndexes.indexOf(c)!=-1){r[c]=getTrackData(c);}}
if(hPLAYER==0){var p=(function(){var v=0;for(var c in r){v=(v<r[c]["player"]?r[c]["player"]:v);}
return v;})();var toOnePlayer=false;if(toOnePlayer){if(p>0){for(var c in r){r[c]["track"]+=r[c]["key"]*r[c]["player"];r[c]["player"]=0;r[c]["key"]*=p+1;}}}}
return r;})();var keyData=(function(){var r=[];for(var c in d){var v=[];if((channelIndexes.indexOf(c)!=-1)&&(trackData[c])){for(var i=0;i<d[c].length;i++){v[i]={"when":{"n":d[c][i][0]},"index":d[c][i][1]};}
switch(trackData[c]["type"]){case"visible":for(var i=1;i<v.length;i++){if((v[i]["index"]==hLNOBJ)&&(v[i-1]["index"]!=hLNOBJ)){v[i-1]["when2"]={"n":v[i]["when"]["n"]};v.splice(i,1);}}
break;case"long":switch(hLNTYPE){case 1:for(var i=1;i<v.length;i++){if(v[i]["index"]==v[i-1]["index"]){v[i-1]["when2"]={"n":v[i]["when"]["n"]};v.splice(i,1);}}
break;case 2:for(var i=1;i<v.length;i++){if(v[i]["index"]==v[i-1]["index"]){v[i-1]["when2"]={"n":v[i]["when"]["n"]};v.splice(i,1);i-=1;}}
break;}
break;}
var x=trackToX(trackData[c]["track"],trackData[c]["key"]);for(var i=0;i<v.length;i++){v[i]["x"]=x;v[i]["p"]=trackData[c]["player"];switch(trackData[c]["type"]){case"invisible":v[i]["flag"]="invisible";break;case"landmine":v[i]["flag"]="damage";break;}}
r.writes(v);key=(key<trackData[c]["key"]?trackData[c]["key"]:key);}}
r=r.sort(function(a,b){return(a["when"]["n"]-b["when"]["n"])||(a["x"]-b["x"]);});return r;})();for(var i=0;i<keyData.length;i++){note[keyData[i]["p"]]=note[keyData[i]["p"]]||[];var n=(function(){var v=[];v[0]={"when":{"n":keyData[i]["when"]["n"]},"where":{"x":keyData[i]["x"]},"link":{"b":-1,"c":note[keyData[i]["p"]].length,"a":-1}};if(keyData[i]["flag"]){var flag=keyData[i]["flag"];v[0]["flag"]=v[0]["flag"]||{};v[0]["flag"][flag]="true";if(keyData[i]["flag"]=="damage"){v[0]["flag"]["damage"]=new Number().fromBase(keyData[i]["index"],36);}}
else{var e=(function(){var wav=hWAVs[keyData[i]["index"]];if(!isUndefined(wav)){return{"when":{"n":0},"kind":"audio","path":wav["path"],"volume":wav["volume"],"panner":wav["panner"],"pitch":wav["pitch"],"playback":wav["playback"]};}})();if(e){v[0]["trigger"]=[e];}
if(keyData[i]["when2"]&&(keyData[i]["when2"]["n"]>keyData[i]["when"]["n"])){v[0]["link"]["a"]=note[keyData[i]["p"]].length+1;v[1]={"when":{"n":keyData[i]["when2"]["n"]},"where":{"x":keyData[i]["x"]},"link":{"b":note[keyData[i]["p"]].length,"c":note[keyData[i]["p"]].length+1,"a":-1}};}}
return v;})();note[keyData[i]["p"]].writes(n);}})();var fillBeat=(function(){var isBmsBpnInherited=false;if(!isBmsBpnInherited){var max=(function(){var v=0;for(var i=0;i<beat.length;i++){v=(v<beat[i]["when"]["n"]?beat[i]["when"]["n"]:v);}
for(var index=0;index<note.length;index++){for(var i=0;i<note[index].length;i++){v=(v<note[index][i]["when"]["n"]?note[index][i]["when"]["n"]:v);}}
return v;})();for(var i=0;i<max+1;i++){setBeat(i,undefined,4,false);}}
beat=beat.sort(function(a,b){return a["when"]["n"]-b["when"]["n"];});if(!beat.length||(beat[0]["when"]["n"]>0)){beat.unshift({"when":{"n":0},"bpm":hBPM,"bpn":4,"fpn":1});}
for(var i=0;i<beat.length;i++){beat[i]["bpm"]=(isUndefined(beat[i]["bpm"])?(i?beat[i-1]["bpm"]:hBPM):beat[i]["bpm"]);beat[i]["bpn"]=(isUndefined(beat[i]["bpn"])?(i?beat[i-1]["bpn"]:4):beat[i]["bpn"]);beat[i]["fpn"]=(isUndefined(beat[i]["fpn"])?(i?beat[i-1]["fpn"]:1):beat[i]["fpn"]);if(i&&(beat[i]["bpm"]==beat[i-1]["bpm"])&&(beat[i]["bpn"]==beat[i-1]["bpn"])&&(beat[i]["fpn"]==beat[i-1]["fpn"])){beat.splice(i,1);i-=1;}}})();var addSTP=(function(){for(var i=0;i<cSTPs.length;i++){stops.push({"start":cSTPs[i][0],"fpn":0,"duration":cSTPs[i][1]});}})();var setStop=(function(){beat=toData({"beat":beat},"FlowWithNote",{"FlowWithNote":stops})["beat"];})();var setInfo=(function(){info["key"]=key;info["length"]=(function(){var v=0;for(var index=0;index<note.length;index++){if(note[index].length){for(var i=0;i<note[index].length;i++){v=(v<note[index][i]["when"]["n"]?note[index][i]["when"]["n"]:v);}}}
if(d["01"].length&&isUndefined(hWAVs[d["01"][d["01"].length-1][1]])){v=(v<d["01"][d["01"].length-1][0]?d["01"][d["01"].length-1][0]:v);}
return{"when":{"n":v}};})();})();var setData=(function(){for(var index=0;index<note.length;index++){if(note[index].length){data.push({"beat":beat,"note":note[index],"effect":effect,"status":status,"info":mergeObject(info,{"player":index,"name":(note.length>1?"P"+index:"")},true)});}}})();setRaw({"meta":meta,"data":[data]});};var fromDtxBuffer=function(buffer,ext){var trackToX=function(track,key){return(track*2+1)/(key*2);};var transColor=function(c){var v={};if(!c.startsWith("#")){c=c.toLowerCase();var p=(function(){for(var n in Palette){if(c==n){return n;}}})();if(p){c="#"+Palette[p];}
else{c="#000000FF";}}
c=(c.length<9?c+"FF":c);v["r"]=(parseInt(c.slice(1,3),16)||0).limit(0,255);v["g"]=(parseInt(c.slice(3,5),16)||0).limit(0,255);v["b"]=(parseInt(c.slice(5,7),16)||0).limit(0,255);v["a"]=(parseInt(c.slice(7,9),16)||255).limit(0,255);return v;};var transChannel=function(c){var m={"1A":["LC"],"11":["HH"],"18":["HH"],"1B":["LP"],"1C":["LP"],"12":["SD"],"14":["HT"],"13":["BD"],"15":["LT"],"17":["FT"],"16":["CY"],"19":["CY"],"20":["GtV"],"21":["GtV","GtB"],"22":["GtV","GtG"],"23":["GtV","GtG","GtB"],"24":["GtV","GtR"],"25":["GtV","GtR","GtB"],"26":["GtV","GtR","GtG"],"27":["GtV","GtR","GtG","GtB"],"93":["GtV","GtY"],"94":["GtV","GtB","GtY"],"95":["GtV","GtG","GtY"],"96":["GtV","GtG","GtB","GtY"],"97":["GtV","GtR","GtY"],"98":["GtV","GtR","GtB","GtY"],"99":["GtV","GtR","GtG","GtY"],"9A":["GtV","GtR","GtG","GtB","GtY"],"9B":["GtV","GtP"],"9C":["GtV","GtB","GtP"],"9D":["GtV","GtG","GtP"],"9E":["GtV","GtG","GtB","GtP"],"9F":["GtV","GtR","GtP"],"A9":["GtV","GtR","GtB","GtP"],"AA":["GtV","GtR","GtG","GtP"],"AB":["GtV","GtR","GtG","GtB","GtP"],"AC":["GtV","GtY","GtP"],"AD":["GtV","GtB","GtY","GtP"],"AE":["GtV","GtG","GtY","GtP"],"AF":["GtV","GtG","GtB","GtY","GtP"],"D0":["GtV","GtR","GtY","GtP"],"D1":["GtV","GtR","GtB","GtY","GtP"],"D2":["GtV","GtR","GtG","GtY","GtP"],"D3":["GtV","GtR","GtG","GtB","GtY","GtP"],"28":["GtW"],"2C":["GtL"],"A0":["BsV"],"A1":["BsV","BsB"],"A2":["BsV","BsG"],"A3":["BsV","BsG","BsB"],"A4":["BsV","BsR"],"A5":["BsV","BsR","BsB"],"A6":["BsV","BsR","BsG"],"A7":["BsV","BsR","BsG","BsB"],"C5":["BsV","BsY"],"C6":["BsV","BsB","BsY"],"C8":["BsV","BsG","BsY"],"C9":["BsV","BsG","BsB","BsY"],"CA":["BsV","BsR","BsY"],"CB":["BsV","BsR","BsB","BsY"],"CC":["BsV","BsR","BsG","BsY"],"CD":["BsV","BsR","BsG","BsB","BsY"],"CE":["BsV","BsP"],"CF":["BsV","BsB","BsP"],"DA":["BsV","BsG","BsP"],"DB":["BsV","BsG","BsB","BsP"],"DC":["BsV","BsR","BsP"],"DD":["BsV","BsR","BsB","BsP"],"DE":["BsV","BsR","BsG","BsP"],"DF":["BsV","BsR","BsG","BsB","BsP"],"E1":["BsV","BsY","BsP"],"E2":["BsV","BsB","BsY","BsP"],"E3":["BsV","BsG","BsY","BsP"],"E4":["BsV","BsG","BsB","BsY","BsP"],"E5":["BsV","BsR","BsY","BsP"],"E6":["BsV","BsR","BsB","BsY","BsP"],"E7":["BsV","BsR","BsG","BsY","BsP"],"E8":["BsV","BsR","BsG","BsB","BsY","BsP"],"A8":["BsW"],"2D":["BsL"]};return m[c]||[];};var addChannelData=function(c,n,v){if(v!="00"){d[c]=d[c]||[];var l=(function(){for(var i=0;i<d[c].length;i++){if(d[c][i][0]==n){return i;}}
return-1;})();if(l!=-1){d[c][l][1]=v;}
else{d[c].push([n,v]);}}};var hBGM="";var hBMP="";var hBPM=120;var hWAVs={};var hBMPs={};var hAVIs={};var hBPMs={};var meta={};var data=[];var beat=[];var effect=[];var status=[];var info={};var drum={};var guitar={};var bass={};var audio=[];var image=[];var video=[];var d={};var a=buffer.getText().replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");for(var i=0;i<a.length;i++){a[i]=a[i].trim();if(a[i][0]=="#"){var l=a[i].indexOf(":");if(l!=-1){var n=a[i].slice(1,l).trim();var v=a[i].slice(l+1);var c=v.slice(((v.indexOf(";")+1)||(v.length+1))-1);v=v.slice(0,v.length-c.length).trimRight("\t").trim();c=c.slice(1).trim();if(n&&v){switch(n){case"TITLE":meta["title"]=v;break;case"ARTIST":meta["artist"]=v;break;case"GENRE":meta["genre"]=v;break;case"USE556X710BGAAVI":info["magnification"]=v;break;case"COMMENT":info["comment"]=v;break;case"PANEL":info["message"]=v;break;case"PREVIEW":info["preview"]=v;break;case"PREVIEW":info["preview"]=v;break;case"PREIMAGE":info["previewImage"]=v;break;case"STAGEFILE":info["stageFile"]=v;break;case"BACKGROUND":info["background"]=v;break;case"RESULTIMAGE":info["resultImage"]=v;break;case"BMP":hBMP=v;break;case"BPM":v=parseFloat(v);if(!isNaN(v)){hBPM=v;}
break;case"DLEVEL":v=parseInt(v);if(!isNaN(v)){info["levelDrum"]=v;}
break;case"GLEVEL":v=parseInt(v);if(!isNaN(v)){info["levelGuitar"]=v;}
break;case"BLEVEL":v=parseInt(v);if(!isNaN(v)){info["levelBass"]=v;}
break;case"BGMWAV":hBGM=v;break;case"DTXC_WAVFORECOLOR":case"DTXC_WAVBACKCOLOR":case"DTXC_BMPFORECOLOR":case"DTXC_BMPBACKCOLOR":case"DTXC_AVIFORECOLOR":case"DTXC_AVIBACKCOLOR":v=v.split(" ");if(v.length==2){var index=parseInt(v[0]).toBase(36);if(index){switch(n){case"DTXC_WAVFORECOLOR":hWAVs[index]=hWAVs[index]||{};hWAVs[index]["foreColor"]=transColor(v[1]);break;case"DTXC_WAVBACKCOLOR":hWAVs[index]=hWAVs[index]||{};hWAVs[index]["backColor"]=transColor(v[1]);break;case"DTXC_BMPFORECOLOR":hBMPs[index]=hBMPs[index]||{};hBMPs[index]["foreColor"]=transColor(v[1]);break;case"DTXC_BMPBACKCOLOR":hBMPs[index]=hBMPs[index]||{};hBMPs[index]["backColor"]=transColor(v[1]);break;case"DTXC_AVIFORECOLOR":hAVIs[index]=hAVIs[index]||{};hAVIs[index]["foreColor"]=transColor(v[1]);break;case"DTXC_AVIBACKCOLOR":hAVIs[index]=hAVIs[index]||{};hAVIs[index]["backColor"]=transColor(v[1]);break;}}}
break;case"DTXC_CHIPPALETTE":info["chipPalette"]=v;break;default:if(n.length>2){var tag=a[i].slice(1,n.length-1);var index=a[i].slice(n.length-1,n.length+1);if(tag&&index){switch(tag){case"WAV":hWAVs[index]=hWAVs[index]||{};hWAVs[index]["path"]=v;hWAVs[index]["comment"]=c;break;case"VOLUME":v=parseInt(v);if(!isNaN(v)){hWAVs[index]=hWAVs[index]||{};hWAVs[index]["volume"]=v.limit(0,100)/100;}
break;case"PAN":v=parseInt(v);if(!isNaN(v)){hWAVs[index]=hWAVs[index]||{};hWAVs[index]["panner"]=v.limit(-100,100)/100;}
break;case"BMP":case"BMPTEX":hBMPs[index]=hBMPs[index]||{};hBMPs[index]["path"]=v;hBMPs[index]["comment"]=c;hBMPs[index]["isTEX"]=(tag=="BMPTEX"?true:false);break;case"AVI":hAVIs[index]=hAVIs[index]||{};hAVIs[index]["path"]=v;hAVIs[index]["comment"]=c;break;case"BPM":v=parseFloat(v);if(!isNaN(v)&&(v>0)){hBPMs[index]=v;}
break;default:var m=parseInt(tag);if(!isNaN(m)){v=v.replace(/\s+/g,"").splitEvery(2);for(var j=0;j<v.length;j++){addChannelData(index,m.fAdd(j/v.length),v[j]);}}
break;}}}
break;}}}}}
if(hWAVs[hBGM]&&hWAVs[hBGM]["path"]){hWAVs[hBGM]["isBGM"]=true;}
for(var c in d){for(var i=0;i<d[c].length;i++){var measure=d[c][i][0];var index=d[c][i][1];switch(c){case"01":case"61":case"62":case"63":case"64":case"65":case"66":case"67":case"68":case"69":case"70":case"71":case"72":case"73":case"74":case"75":case"76":case"77":case"78":case"79":case"80":case"81":case"82":case"83":case"84":case"85":case"86":case"87":case"88":case"89":case"90":case"91":case"92":if(hWAVs[index]&&hWAVs[index]["path"]){audio.push({"when":{"n":measure},"kind":"audio","path":hWAVs[index]["path"],"volume":hWAVs[index]["volume"],"panner":hWAVs[index]["panner"],"backColor":hWAVs[index]["backColor"],"foreColor":hWAVs[index]["foreColor"],"comment":hWAVs[index]["comment"],"flag":{"bgm":hWAVs[index]["isBGM"]}});}
break;case"04":case"07":case"55":case"56":case"57":case"58":case"59":case"60":if(hBMPs[index]&&hBMPs[index]["path"]){image.push({"when":{"n":measure},"kind":"image","path":hBMPs[index]["path"],"comment":hBMPs[index]["comment"],"flag":{"tex":hBMPs[index]["isTEX"]}});}
break;case"54":if(hAVIs[index]&&hAVIs[index]["path"]){video.push({"when":{"n":measure},"kind":"video","path":hAVIs[index]["path"],"comment":hAVIs[index]["comment"]});}
break;case"08":if(hBPMs[index]){beat.push({"when":{"n":measure},"bpm":hBPMs[index]});}
break;case"53":status.push({"when":{"n":measure},"name":"dtx_fi","value":1});break;case"4F":status.push({"when":{"n":measure},"name":"dtx_be","value":1});break;case"2C":status.push({"when":{"n":measure},"name":"dtx_gtl","value":1});break;case"2D":status.push({"when":{"n":measure},"name":"dtx_bsl","value":1});break;case"51":status.push({"when":{"n":measure},"name":"dtx_line","value":1});break;case"1A":case"11":case"18":case"1B":case"1C":case"12":case"14":case"13":case"15":case"17":case"16":case"19":drum[measure]=drum[measure]||{};drum[measure]["measure"]=measure;var l=transChannel(c);for(var j=0;j<l.length;j++){drum[measure][l[j]]=index;}
break;case"20":case"21":case"22":case"23":case"24":case"25":case"26":case"27":case"93":case"94":case"95":case"96":case"97":case"98":case"99":case"9A":case"9B":case"9C":case"9D":case"9E":case"9F":case"A9":case"AA":case"AB":case"AC":case"AD":case"AE":case"AF":case"D0":case"D1":case"D2":case"D3":case"28":case"2C":guitar[measure]=guitar[measure]||{};guitar[measure]["measure"]=measure;var l=transChannel(c);for(var j=0;j<l.length;j++){guitar[measure][l[j]]=index;}
break;case"A0":case"A1":case"A2":case"A3":case"A4":case"A5":case"A6":case"A7":case"C5":case"C6":case"C8":case"C9":case"CA":case"CB":case"CC":case"CD":case"CE":case"CF":case"DA":case"DB":case"DC":case"DD":case"DE":case"DF":case"E1":case"E2":case"E3":case"E4":case"E5":case"E6":case"E7":case"E8":case"A8":case"2D":bass[measure]=bass[measure]||{};bass[measure]["measure"]=measure;var l=transChannel(c);for(var j=0;j<l.length;j++){bass[measure][l[j]]=index;}
break;}}}
if(!beat.length||beat[0]["when"]["n"]>0){beat.unshift({"when":{"n":0},"bpm":hBPM});}
if((!image.length||image[0]["when"]["n"]>0)&&hBMP){image.unshift({"when":{"n":0},"kind":"image","path":hBMP});}
effect=[].concat(audio,image,video);data=(function(){var has=function(o,t){for(var n in o){if(o[n][t]){return true;}}
return false;};var v=[];if(Object.keys(drum).length){var note=[];var m=(has(drum,"LC")||has(drum,"LP")||has(drum,"FT")?["LC","HH","LP","SD","HT","BD","LT","FT","CY"]:["HH","SD","HT","BD","LT","CY"]);for(var n in drum){for(var i=0;i<m.length;i++){var index=drum[n][m[i]];if(index){note.push({"when":{"n":drum[n]["measure"]},"where":{"x":trackToX(i,m.length)},"trigger":(hWAVs[index]&&hWAVs[index]["path"]?[{"kind":"audio","path":hWAVs[index]["path"],"volume":hWAVs[index]["volume"],"panner":hWAVs[index]["panner"],"backColor":hWAVs[index]["backColor"],"foreColor":hWAVs[index]["foreColor"],"comment":hWAVs[index]["comment"]}]:[])});}}}
v.push({"beat":beat.slice(),"note":note,"effect":effect,"status":status,"info":mergeObject(info,{"key":m.length,"name":"drum"},true)});}
if(Object.keys(guitar).length){var note=[];var m=(has(guitar,"GtY")||has(guitar,"GtP")?["GtV","GtR","GtG","GtB","GtY","GtP","GtW"]:["GtV","GtR","GtG","GtB","GtW"]);for(var n in guitar){for(var i=0;i<m.length;i++){var index=guitar[n][m[i]];if(index){note.push({"when":{"n":guitar[n]["measure"]},"where":{"x":trackToX(i,m.length)},"trigger":(hWAVs[index]&&hWAVs[index]["path"]?[{"kind":"audio","path":hWAVs[index]["path"],"volume":hWAVs[index]["volume"],"panner":hWAVs[index]["panner"],"backColor":hWAVs[index]["backColor"],"foreColor":hWAVs[index]["foreColor"],"comment":hWAVs[index]["comment"]}]:[])});}}}
v.push({"beat":beat.slice(),"note":note,"effect":effect,"status":status,"info":mergeObject(info,{"key":m.length,"name":"guitar"},true)});}
if(Object.keys(bass).length){var note=[];var m=(has(bass,"BsY")||has(bass,"BsP")?["BsV","BsR","BsG","BsB","BsY","BsP","BsW"]:["BsV","BsR","BsG","BsB","BsW"]);for(var n in bass){for(var i=0;i<m.length;i++){var index=bass[n][m[i]];if(index){note.push({"when":{"n":bass[n]["measure"]},"where":{"x":trackToX(i,m.length)},"trigger":(hWAVs[index]&&hWAVs[index]["path"]?[{"kind":"audio","path":hWAVs[index]["path"],"volume":hWAVs[index]["volume"],"panner":hWAVs[index]["panner"],"backColor":hWAVs[index]["backColor"],"foreColor":hWAVs[index]["foreColor"],"comment":hWAVs[index]["comment"]}]:[])});}}}
v.push({"beat":beat.slice(),"note":note,"effect":effect,"status":status,"info":mergeObject(info,{"key":m.length,"name":"bass"},true)});}
return v;})();setRaw({"meta":meta,"data":[data]});};var fromMsdBuffer=function(buffer){var trackToX=function(track,key){return(track*2+1)/(key*2);};var meta={};var data=[];var audioFilename="";var bpm=125;var offset=0;var a=buffer.getText().replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");for(var i=0;i<a.length;i++){if((a[i][0]=="#")&&(a[i][a[i].length-1]!=";")){while(true){if(i+1<a.length){a[i]=a[i]+a[i+1];a.splice(i+1,1);}
else{a[i]=a[i]+";";break;}
if(a[i][a[i].length-1]==";"){break;}}}}
for(var i=0;i<a.length;i++){if((a[i][0]=="#")&&(a[i][a[i].length-1]==";")){var d=a[i].slice(1,a[i].length-1).split(":");switch(d[0]){case"FILE":audioFilename=d[1];break;case"TITLE":meta["title"]=d[1];break;case"ARTIST":meta["artist"]=d[1];break;case"MSD":meta["maker"]=d[1];break;case"BPM":var v=parseFloat(d[1]);if(!isNaN(v)){bpm=v;}
break;case"GAP":var v=parseFloat(d[1]);if(!isNaN(v)){offset=v;}
break;case"SINGLE":case"COUPLE":case"DOUBLE":var note=[];var info={"key":4,"playMode":d[0],"difficulty":d[1],"level":d[2]};var num=(d[4]?2:1);for(var index=0;index<num;index++){note[index]=[];var sc=d[3+index];var set=[];var b=0;for(var j=0;j<sc.length;j++){if(sc[j]=="("){var l=sc.indexOf(")",j+1);l=(l==-1?sc.length:l);set.push(sc.slice(j+1,l));j=l;}
else{set.push(sc[j]+"000");}}
set=set.join("");for(var j=0;j<set.length;j++){var t=(function(){switch(set[j]){case"1":return[1,1,0,0];break;case"2":return[0,1,0,0];break;case"3":return[0,1,0,1];break;case"4":return[1,0,0,0];break;case"6":return[0,0,0,1];break;case"7":return[1,0,1,0];break;case"8":return[0,0,1,0];break;case"9":return[0,0,1,1];break;case"A":return[0,1,1,0];break;case"B":return[1,0,0,1];break;}
return[0,0,0,0];})();for(var k=0;k<t.length;k++){if(t[k]){note[index].push({"when":{"b":b},"where":{"x":trackToX(k,info["key"])}});}}
b+=0.25;}}
for(var index=0;index<note.length;index++){data.push({"beat":[{"when":{"b":0,"n":0,"t":offset},"bpm":bpm}],"note":note[index],"effect":[{"when":{"t":0},"kind":"audio","path":audioFilename}],"info":mergeObject(info,{"player":index,"name":info["playMode"]+" "+info["difficulty"]+info["level"]+(note.length>1?" P"+index:"")},true)});}
break;default:var s="msd maked by ";if(d[0].startsWith(s)){meta["maker"]=d[0].slice(s.length);}
break;}}}
setRaw({"meta":meta,"data":[data]});};var fromSsqBuffer=function(buffer){var trackToX=function(track,key){return(track*2+1)/(key*2);};var readInt=function(n){var r=buffer.getInt(n,p,true);p+=n;return r;};var readUint=function(n){var r=buffer.getUint(n,p,true);p+=n;return r;};var beat=[];var note=[];var info=[];var p=0;while(p<buffer.length){var size=readUint(4);if(size==0){break;}
var end=p-4+size;var param=[readUint(2),readUint(2),readUint(2),readUint(2)];var type=param[0];var count=param[2];var v=[];for(var i=0;i<count;i++){v[i]={"offset":readInt(4)};}
switch(type){case 1:var bpn=4;var tps=param[1];for(var i=0;i<count;i++){v[i]["tick"]=readInt(4);}
for(var i=1;i<v.length;i++){var n=v[i-1]["offset"]/4096;var bpm=(((v[i]["offset"]-v[i-1]["offset"])/4096)*bpn/((v[i]["tick"]-v[i-1]["tick"])/tps/60)).toAbbreviated(6).toAccurated();var fpn=(bpm?1:0);bpm=(bpm?bpm:(beat.length?beat[beat.length-1]["bpm"]:125))
beat.push({"when":{"n":n},"bpm":bpm,"bpn":bpn,"fpn":fpn});}
break;case 2:for(var i=0;i<count;i++){v[i]["value1"]=readUint(1);v[i]["value2"]=readUint(1);}
break;case 3:var mode=param[1];var key=4;var playMode=(function(){switch(mode&0xFF){case 0x14:return"Single";break;case 0x18:return"Double";break;}})();var difficulty=(function(){switch(mode>>8){case 0x01:return"Basic";break;case 0x02:return"Standard";break;case 0x03:return"Heavy";break;case 0x04:return"Beginner";break;case 0x06:return"Challenge";break;}})();var z=[];for(var i=0;i<count;i++){var value=readUint(1);v[i]["steps"]=value.toString(2).padStart(8,"0");if(!value){z.push({"offset":v[i]["offset"]});}}
for(var i=0;i<z.length;i++){z[i]["value1"]=readUint(1);z[i]["value2"]=readUint(1);}
var notes=[[],[]];for(var i=0;i<v.length;i++){var n=v[i]["offset"]/4096;for(var j=0;j<v[i]["steps"].length;j++){if(v[i]["steps"][j]=="1"){var track=(7-j)%4;var player=(7-j)/4|0;notes[player].push({"when":{"n":n},"where":{"x":trackToX(track,key)}});}}}
for(var i=0;i<notes.length;i++){if(notes[i].length){note.push(notes[i]);info.push({"key":key,"name":playMode+" "+difficulty+(notes[1].length?" P"+i:""),"player":i,"playMode":playMode,"difficulty":difficulty});}}
break;case 4:for(var i=0;i<count;i++){v[i]["value"]=readUint(1);}
break;case 5:for(var i=0;i<count;i++){v[i]["value1"]=readUint(1);v[i]["value2"]=readUint(1);v[i]["value3"]=readUint(1);v[i]["value4"]=readUint(1);}
var e=[];var n=readUint(4);for(var i=0;i<n;i++){e[i]={};e[i]["value1"]=readUint(1);e[i]["value2"]=readUint(1);e[i]["value3"]=readUint(1);e[i]["value4"]=readUint(1);}
break;}
p=end;}
var data=(function(){var v=[];for(var i=0;i<note.length;i++){v.push({"beat":beat.slice(),"note":note[i],"info":info[i]});}
return v;})();setRaw({"data":[data]});};var fromSmBuffer=function(buffer,ext){var getStepsInfo=function(t){switch(t){case"dance-single":return{"key":4,"num":1};case"dance-double":return{"key":4,"num":2};case"dance-couple":return{"key":4,"num":2};case"dance-solo":return{"key":6,"num":1};case"dance-threepanel":return{"key":3,"num":1};case"dance-routine":return{"key":8,"num":1};case"pump-single":return{"key":5,"num":1};case"pump-halfdouble":return{"key":6,"num":1};case"pump-double":return{"key":5,"num":2};case"pump-couple":return{"key":5,"num":2};case"pump-routine":return{"key":10,"num":1};case"kb7-single":return{"key":7,"num":1};case"kb7-small":return{"key":7,"num":1};case"ez2-single":return{"key":5,"num":1};case"ez2-double":return{"key":5,"num":2};case"ez2-real":return{"key":7,"num":1};case"para-single":return{"key":5,"num":1};case"ds3ddx-single":return{"key":8,"num":1};case"bm-single5":return{"key":6,"num":1};case"bm-versus5":return{"key":6,"num":1};case"bm-double5":return{"key":6,"num":2};case"bm-single7":return{"key":8,"num":1};case"bm-versus7":return{"key":8,"num":1};case"bm-double7":return{"key":8,"num":2};case"maniax-single":return{"key":4,"num":1};case"maniax-double":return{"key":4,"num":2};case"techno-single4":return{"key":4,"num":1};case"techno-single5":return{"key":5,"num":1};case"techno-single8":return{"key":8,"num":1};case"techno-double4":return{"key":4,"num":2};case"techno-double5":return{"key":5,"num":2};case"techno-double8":return{"key":8,"num":2};case"pnm-five":return{"key":5,"num":1};case"pnm-nine":return{"key":9,"num":1};case"kickbox-human":return{"key":4,"num":1};case"kickbox-quadarm":return{"key":4,"num":1};case"kickbox-insect":return{"key":6,"num":1};case"kickbox-arachnid":return{"key":8,"num":1};}};var getBeatInfo=function(BPMS,STOPS,DELAYS,LABELS,TIMESIGNATURES,TICKCOUNTS,COMBOS,WARPS,SPEEDS,SCROLLS,FAKES,ROWSPERBEAT){var find=function(v,t){for(var i=0;i<v.length;i++){if(v[i][0]==t){return i;}}
return-1;};var set=function(v,t,d){var l=find(v,t);if(l==-1){l=v.length;v.push([t]);}
for(var i=0;i<d.length;i++){if(!isUndefined(d[i])){v[l][i+1]=d[i];}}
return v;};var sort=function(a,b){return a[0]-b[0];};var warpsB=[];var warpsT=[];var bpms=(function(){var v=[];if(BPMS){var d=BPMS.split(",");for(var i=0;i<d.length;i++){var s=d[i].split("=");if(s.length==2){s[0]=parseFloat(s[0]);s[1]=parseFloat(s[1]);if(s[0]>=0){v=set(v,s[0],[s[1]]);}}}}
v=v.sort(sort);if((!v.length)||(v[0][0]>0)){v.unshift([0,60]);}
for(var i=1;i<v.length;i++){if(v[i][1]==v[i-1][1]){v.splice(i,1);i-=1;}}
return v;})();var stops=(function(){var v=[];if(STOPS){var d=STOPS.split(",");for(var i=0;i<d.length;i++){var s=d[i].split("=");if(s.length==2){s[0]=parseFloat(s[0]);s[1]=(parseFloat(s[1])||0).fMul(1000);if((s[0]>=0)&&(s[1]!=0)){v=set(v,s[0],[s[1]]);}}}}
v=v.sort(sort);for(var i=0;i<v.length;i++){if(v[i][1]<0){warpsT=set(warpsT,v[i][0],[-v[i][1]]);v.splice(i,1);i-=1;}}
return v;})();var labels=(function(){var v=[];if(LABELS){var d=LABELS.split(",");for(var i=0;i<d.length;i++){var s=d[i].split("=");if(s.length==2){s[0]=parseFloat(s[0]);if((s[0]>=0)&&s[1]){v=set(v,s[0],[s[1]]);}}}}
v=v.sort(sort);return v;})();var timesignatures=(function(){var v=[];if(TIMESIGNATURES){var d=TIMESIGNATURES.split(",");for(var i=0;i<d.length;i++){var s=d[i].split("=");if(s.length==3){s[0]=parseFloat(s[0]);s[1]=parseFloat(s[1]);s[2]=parseFloat(s[2])||4;if((s[0]>=0)&&(s[1]>0)&&(s[2]>0)){v=set(v,s[0],[s[1].fDiv(s[2]).fMul(4)]);}}}}
v=v.sort(sort);if((!v.length)||(v[0][0]>0)){v.unshift([0,4]);}
for(var i=1;i<v.length;i++){if(v[i][1]==v[i-1][1]){v.splice(i,1);i-=1;}}
return v;})();var scrolls=(function(){var v=[];if(SCROLLS){var d=SCROLLS.split(",");for(var i=0;i<d.length;i++){var s=d[i].split("=");if(s.length>=2){s[0]=parseFloat(s[0]);s[1]=parseFloat(s[1]);if((s[0]>=0)&&!isNaN(s[1])){v=set(v,s[0],[s[1]]);}}}}
v=v.sort(sort);for(var i=1;i<v.length;i++){if((v[i][1]==v[i-1][1])&&(v[i][2]==v[i-1][2])){v.splice(i,1);i-=1;}}
return v;})();var rowsperbeat=(function(){var v=[];if(ROWSPERBEAT){var d=ROWSPERBEAT.split(",");for(var i=0;i<d.length;i++){var s=d[i].split("=");if(s.length==2){s[0]=parseFloat(s[0]);s[1]=parseFloat(s[1]);if(s[0]>=0){v=set(v,s[0],[s[1]]);}}}}
v=v.sort(sort);if((!v.length)||(v[0][0]>0)){v.unshift([0,192]);}
for(var i=1;i<v.length;i++){if(v[i][1]==v[i-1][1]){v.splice(i,1);i-=1;}}
return v;})();var beat=(function(){var v=[];for(var i=0;i<bpms.length;i++){if(bpms[i][1]>0){v=set(v,bpms[i][0],[bpms[i][1],undefined,undefined,undefined]);}
else if(bpms[i][1]==0){v=set(v,bpms[i][0],[undefined,undefined,undefined,0]);}
else{var n=i;var b=0;var l=0;while(n+1<bpms.length){l=l.fAdd(bpms[n][1].fSub(bpms[n][0]).fMul(bpms[n][1]));b=b.fAdd(bpms[n][1].fSub(bpms[n][0]));n+=1;if(bpms[n][1]>=0){break;}
else{i+=1;}}
while((n+1<bpms.length)||(l==0)){if(l.fAdd(bpms[n][1].fSub(bpms[n][0]).fMul(bpms[n][1]))<0){l=l.fAdd(bpms[n][1].fSub(bpms[n][0]).fMul(bpms[n][1]));b=b.fAdd(bpms[n][1].fSub(bpms[n][0]));}
else{l=0;b=b.fAdd((0).fSub(l).fDiv(bpms[n][1]).fSub(bpms[n][0]));}
n+=1;}
warpsB=set(warpsB,bpms[i][0],[b]);}}
for(var i=0;i<timesignatures.length;i++){v=set(v,timesignatures[i][0],[undefined,timesignatures[i][1],undefined,undefined]);}
for(var i=0;i<rowsperbeat.length;i++){v=set(v,rowsperbeat[i][0],[undefined,undefined,rowsperbeat[i][1],undefined]);}
v=v.sort(sort);for(var i=0;i<scrolls.length;i++){var l=find(v,scrolls[i][0]);if(l!=-1){v[l][4]=scrolls[i][1];}
else{for(var j=0;j<v.length;j++){if((v[j][0]<scrolls[i][0])&&((j+1==v.length)||(v[j+1][0]>scrolls[i][0]))){v.insert([scrolls[i][0],undefined,undefined,undefined,scrolls[i][1]],j+1);break;}}}}
for(var i=0;i<v.length;i++){v[i][1]=(isUndefined(v[i][1])?(i?v[i-1][1]:125):v[i][1]);v[i][2]=(isUndefined(v[i][2])?(i?v[i-1][2]:4):v[i][2]);v[i][3]=(isUndefined(v[i][3])?(i?v[i-1][3]:192):v[i][3]);v[i][4]=(isUndefined(v[i][4])?(i?v[i-1][4]:1):v[i][4]);}
for(var i=0;i<v.length;i++){v[i]={"when":{"b":v[i][0]},"bpm":v[i][1],"bpn":v[i][2],"dpb":v[i][3],"fpn":v[i][4]};}
for(var i=0;i<v.length;i++){v[i]["when"]["t"]=timeFromBeat({"beat":v},v[i]["when"]["b"]);v[i]["when"]["n"]=noteFromBeat({"beat":v},v[i]["when"]["b"]);}
for(var i=0;i<stops.length;i++){stops[i][1]=beatFromTime({"beat":v},timeFromBeat({"beat":v},stops[i][0])+stops[i][1]);for(var j=0;j<v.length;j++){if((v[j]["when"]["b"]==stops[i][0])||((v[j]["when"]["b"]<stops[i][0])&&(j+1<v.length)&&(v[j+1]["when"]["b"]>stops[i][0]))){if(v[j]["when"]["b"]==stops[i][0]){v[j]["fpn"]=0;}
else{v.insert({"when":{"b":stops[i][0]},"bpm":v[j]["bpm"],"bpn":v[j]["bpn"],"dpb":v[j]["dpb"],"fpn":0},j+1);j+=1;}
var s=j+1;for(var k=s;k<v.length;k++){if((v[k]["when"]["b"]==stops[i][1])||((v[k-1]["when"]["b"]<stops[i][1])&&(v[k]["when"]["b"]>stops[i][1]))){if((v[k-1]["when"]["b"]<stops[i][1])&&(v[k]["when"]["b"]>stops[i][1])){v.insert({"when":{"b":stops[i][1]},"bpm":v[s-2]["bpm"],"bpn":v[s-2]["bpn"],"dpb":v[s-2]["dpb"],"fpn":v[s-2]["fpn"]},k);}
for(var l=s;l<k;l++){v[l]["fpn"]=0;}
break;}}
break;}}}
for(var i=1;i<v.length;i++){if((v[i]["bpm"]==v[i-1]["bpm"])&&(v[i]["bpn"]==v[i-1]["bpn"])&&(v[i]["dpb"]==v[i-1]["dpb"])&&(v[i]["fpn"]==v[i-1]["fpn"])){v.splice(i,1);i-=1;}}
for(var i=0;i<v.length;i++){v[i]["when"]["t"]=(isUndefined(v[i]["when"]["t"])?timeFromBeat({"beat":v},v[i]["when"]["b"]):v[i]["when"]["t"]);v[i]["when"]["n"]=(isUndefined(v[i]["when"]["n"])?noteFromBeat({"beat":v},v[i]["when"]["b"]):v[i]["when"]["n"]);}
return v;})();var delays=(function(){var v=[];if(DELAYS){var d=DELAYS.split(",");for(var i=0;i<d.length;i++){var s=d[i].split("=");if(s.length==2){s[0]=parseFloat(s[0]);s[1]=(parseFloat(s[1])||0).fMul(1000);if((s[0]>=0)&&(s[1]>0)){v=set(v,s[0],[s[1]]);}}}}
v=v.sort(sort);for(var i=1;i<v.length;i++){if(v[i][1]==v[i-1][1]){v.splice(i,1);i-=1;}}
for(var i=0;i<v.length;i++){v[i][0]=timeFromBeat({"beat":beat},v[i][0]);}
return v;})();var tickcounts=(function(){var v=[];if(TICKCOUNTS){var d=TICKCOUNTS.split(",");for(var i=0;i<d.length;i++){var s=d[i].split("=");if(s.length==2){s[0]=parseFloat(s[0]);s[1]=parseInt(s[1]);if((s[0]>=0)&&(s[1]>0)){v=set(v,s[0],[s[1]]);}}}}
v=v.sort(sort);if((!v.length)||(v[0][0]>0)){v.unshift([0,4]);}
for(var i=1;i<v.length;i++){if(v[i][1]==v[i-1][1]){v.splice(i,1);i-=1;}}
return v;})();var combos=(function(){var v=[];if(COMBOS){var d=COMBOS.split(",");for(var i=0;i<d.length;i++){var s=d[i].split("=");if(s.length>=2){s[0]=parseFloat(s[0]);s[1]=parseInt(s[1]);s[2]=parseInt((!isUndefined(s[2])?s[2]:s[1]));if((s[0]>=0)&&(s[1]>0)&&(s[2]>0)){v=set(v,s[0],[s[1],s[2]]);}}}}
v=v.sort(sort);for(var i=1;i<v.length;i++){if((v[i][1]==v[i-1][1])&&(v[i][2]==v[i-1][2])){v.splice(i,1);i-=1;}}
return v;})();var warps=(function(){var v=[];if(WARPS){var d=WARPS.split(",");for(var i=0;i<d.length;i++){var s=d[i].split("=");if(s.length==2){s[0]=parseFloat(s[0]);s[1]=parseFloat(s[1]);if((s[0]>0)&&(s[1]>0)){v=set(v,s[0],[s[1]]);}}}}
for(var i=0;i<warpsB.length;i++){v=set(v,warpsB[i][0],[warpsB[i][1]]);}
v=v.sort(sort);for(var i=1;i<v.length;i++){if(v[i][1]==v[i-1][1]){v.splice(i,1);i-=1;}}
for(var i=0;i<v.length;i++){v[i][1]=timeFromBeat({"beat":beat},v[i][0]+v[i][1])-timeFromBeat({"beat":beat},v[i][0]);}
for(var i=0;i<warpsT.length;i++){v=set(v,warpsT[i][0],[warpsT[i][1]]);}
v=v.sort(sort);return v;})();var speeds=(function(){var v=[];if(SPEEDS){var d=SPEEDS.split(",");for(var i=0;i<d.length;i++){var s=d[i].split("=");if(s.length>=2){s[0]=parseFloat(s[0]);s[1]=parseFloat(s[1]);s[2]=parseFloat(s[2]);s[3]=parseFloat(s[3]);if((s[0]>=0)&&!isNaN(s[1])){v=set(v,s[0],[s[1],s[2],s[3]]);}}}}
v=v.sort(sort);for(var i=1;i<v.length;i++){if((v[i][1]==v[i-1][1])&&(v[i][2]==v[i-1][2])&&(v[i][3]==v[i-1][3])){v.splice(i,1);i-=1;}}
for(var i=0;i<v.length;i++){switch(v[i][3]){case 0:v[i]=[v[i][0],v[i][1],timeFromBeat({"beat":beat},v[i][0]+v[i][2])-timeFromBeat({"beat":beat},v[i][0])];break;case 1:v[i]=[v[i][0],v[i][1],(v[i][2]||0).fMul(1000)];break;default:v.splice(i,1);i-=1;break;}}
return v;})();var fakes=(function(){var v=[];if(FAKES){var d=FAKES.split(",");for(var i=0;i<d.length;i++){var s=d[i].split("=");if(s.length==2){s[0]=parseFloat(s[0]);s[1]=parseFloat(s[1]);if((s[0]>=0)&&(s[1]>0)){v=set(v,s[0],[s[1]]);}}}}
v=v.sort(sort);for(var i=1;i<v.length;i++){if(v[i-1][0]+v[i-1][1]>=v[i][0]){v[i-1][1]=Math.max(v[i-1][0]+v[i-1][1],v[i][0]+v[i][1])-v[i-1][0];v.splice(i,1);i-=1;}}
return v;})();var effect=(function(){var v=[];for(var i=0;i<labels.length;i++){v.push({"when":{"b":labels[i][0]},"kind":"text","text":labels[i][1]});}
return v;})();var status=(function(){var v=[];for(var i=0;i<tickcounts.length;i++){v.push({"when":{"b":tickcounts[i][0]},"name":"sm_tickcount","value":tickcounts[i][1]});}
for(var i=0;i<combos.length;i++){if(!i||(combos[i][1]!=combos[i-1][1])){v.push({"when":{"b":combos[i][0]},"name":"sm_combo","value":combos[i][1]});}
if(!i||(combos[i][2]!=combos[i-1][2])){v.push({"when":{"b":combos[i][0]},"name":"sm_misscombo","value":combos[i][2]});}}
for(var i=0;i<warps.length;i++){v.push({"when":{"b":warps[i][0]},"name":"warp","value":warps[i][1]});}
for(var i=0;i<speeds.length;i++){v.push({"when":{"b":speeds[i][0]},"name":"sm_speed","value":speeds[i][1]+"_"+speeds[i][2]});}
for(var i=0;i<fakes.length;i++){v.push({"when":{"b":fakes[i][0]},"name":"sm_fake","value":1});v.push({"when":{"b":fakes[i][0]+fakes[i][1]},"name":"sm_fake","value":0});}
return v;})();return{"beat":beat,"effect":effect,"status":status,"delays":delays};};var getKeySounds=function(KEYSOUNDS){return(KEYSOUNDS?KEYSOUNDS.split(","):[]);};var trackToX=function(track,key){return(track*2+1)/(key*2);};var ht={};var st=[];var a=buffer.getText().replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");for(var i=0;i<a.length;i++){var l=a[i].indexOf("//");if(l!=-1){a[i]=a[i].slice(0,l);}
a[i]=a[i].trim();}
for(var i=0;i<a.length;i++){if((a[i][0]=="#")&&(a[i][a[i].length-1]!=";")){while(true){if(i+1<a.length){a[i]=a[i]+a[i+1];a.splice(i+1,1);}
else{a[i]=a[i]+";";break;}
if(a[i][a[i].length-1]==";"){break;}}}}
for(var i=0;i<a.length;i++){if((a[i][0]=="#")&&(a[i][a[i].length-1]==";")){var l=a[i].indexOf(":");if(l!=-1){var n=a[i].slice(1,l);var v=a[i].slice(l+1,a[i].length-1);switch(n){case"VERSION":case"SMAVERSION":case"TITLE":case"TITLETRANSLIT":case"SUBTITLE":case"SUBTITLETRANSLIT":case"ARTIST":case"ARTISTTRANSLIT":case"GENRE":case"ORIGIN":case"CREDIT":case"BANNER":case"BACKGROUND":case"PREVIEWVID":case"JACKET":case"DISC":case"DISCIMAGE":case"CDIMAGE":case"CDTITLE":case"LYRICSPATH":case"MUSIC":case"PREVIEW":case"INSTRUMENTTRACK":case"SAMPLESTART":case"SAMPLELENGTH":case"DISPLAYBPM":case"SELECTABLE":case"ANIMATIONS":case"BGCHANGES":case"BGCHANGES2":case"FGCHANGES":case"KEYSOUNDS":case"ATTACKS":case"ROWSPERBEAT":case"OFFSET":case"BPMS":case"STOPS":case"FREEZES":case"DELAYS":case"LABELS":case"TIMESIGNATURES":case"BEATSPERMEASURE":case"LEADTRACK":case"TICKCOUNTS":case"TICKCOUNT":case"COMBOS":case"MULTIPLIER":case"WARPS":case"SPEEDS":case"SPEED":case"SCROLLS":case"FAKES":case"CHARTNAME":case"STEPSTYPE":case"DESCRIPTION":case"CHARTSTYLE":case"DIFFICULTY":case"METER":case"RADARVALUES":case"METERTYPE":if(st.length){st[st.length-1][n]=v;}
else{ht[n]=v;}
break;case"NOTES":case"NOTES2":switch(ext){case"sm":case"sma":var d=v.split(":");if(d.length>5){if(ext=="sm"){st.push({"STEPSTYPE":d[0],"DESCRIPTION":d[1],"DIFFICULTY":d[2],"METER":d[3],"RADARVALUES":d[4],"NOTEDATA":d[5]});}
else if(ext=="sma"){st[st.length-1]["STEPSTYPE"]=d[0];st[st.length-1]["DESCRIPTION"]=d[1];st[st.length-1]["DIFFICULTY"]=d[2];st[st.length-1]["METER"]=d[3];st[st.length-1]["RADARVALUES"]=d[4];st[st.length-1]["NOTEDATA"]=d[5];}}
break;case"ssc":st[st.length-1]["NOTEDATA"]=v;break;}
break;case"NOTEDATA":if(ext=="ssc"){st.push({});}
break;}}}
else if(a[i].startsWith("//---------------")){if(ext=="sma"){st.push({});}}}
var hBeatInfo=getBeatInfo(ht["BPMS"],ht["STOPS"]||ht["FREEZES"],ht["DELAYS"],ht["LABELS"],ht["TIMESIGNATURES"]||ht["LEADTRACK"]||ht["BEATSPERMEASURE"],ht["TICKCOUNTS"]||ht["TICKCOUNT"],ht["COMBOS"]||ht["MULTIPLIER"],ht["WARPS"],ht["SPEEDS"],ht["SCROLLS"],ht["FAKES"],ht["ROWSPERBEAT"]);var hKeySounds=getKeySounds(ht["KEYSOUNDS"]);var meta={};var data=[];for(var i=0;i<st.length;i++){meta["chartVersion"]=ht["VERSION"]||st[i]["SMAVERSION"];meta["title"]=ht["TITLE"];meta["titleTranslit"]=ht["TITLETRANSLIT"];meta["subTitle"]=ht["SUBTITLE"];meta["subTitleTranslit"]=ht["SUBTITLETRANSLIT"];meta["artist"]=ht["ARTIST"];meta["artistTranslit"]=ht["ARTISTTRANSLIT"];meta["genre"]=ht["GENRE"];meta["source"]=ht["ORIGIN"];var si=getStepsInfo(st[i]["STEPSTYPE"]);if(si){var u=si["key"]*si["num"];var noteSet=(function(){var v=[];var nd=st[i]["NOTEDATA"].trim().split(",");for(var j=0;j<nd.length;j++){var vm=[];for(var k=0;k<nd[j].length;k++){if((k+1<nd[j].length)&&(nd[j][k+1]=="[")){var l=nd[j].indexOf("]",k+2);if(l==-1){l=nd[j].length;nd[j]+="]";}
var ks=parseInt(nd[j].slice(k+2,l));vm.push({"s":nd[j][k],"k":(!isNaN(ks)?ks:undefined)});k=l;}
else{vm.push({"s":nd[j][k]});}}
while(vm.length%u!=0){vm.push({"s":"0"});}
var vb=[];for(var k=0;k<vm.length;k++){if(k%u==0){vb.push([]);}
vb[vb.length-1].push(vm[k]);}
v.push(vb);}
return v;})();var keySounds=(st[i]["KEYSOUNDS"]?getKeySounds(ht["KEYSOUNDS"]):hKeySounds);var hasTiming=st[i]["BPMS"]||st[i]["STOPS"]||st[i]["FREEZES"]||st[i]["DELAYS"]||st[i]["LABELS"]||st[i]["TIMESIGNATURES"]||st[i]["LEADTRACK"]||st[i]["BEATSPERMEASURE"]||st[i]["TICKCOUNTS"]||st[i]["TICKCOUNT"]||st[i]["COMBOS"]||st[i]["MULTIPLIER"]||st[i]["WARPS"]||st[i]["SPEEDS"]||st[i]["SCROLLS"]||st[i]["FAKES"];var beatInfo=(hasTiming?getBeatInfo(st[i]["BPMS"],st[i]["STOPS"]||st[i]["FREEZES"],st[i]["DELAYS"],st[i]["LABELS"],st[i]["TIMESIGNATURES"]||st[i]["LEADTRACK"]||st[i]["BEATSPERMEASURE"],st[i]["TICKCOUNTS"]||st[i]["TICKCOUNT"],st[i]["COMBOS"]||st[i]["MULTIPLIER"],st[i]["WARPS"],st[i]["SPEEDS"],st[i]["SCROLLS"],st[i]["FAKES"],st[i]["ROWSPERBEAT"]):hBeatInfo);var beat=beatInfo["beat"].slice();var effect=beatInfo["effect"].slice();var status=beatInfo["status"].slice();var delays=beatInfo["delays"].slice();var offset=(parseFloat(st[i]["OFFSET"]||ht["OFFSET"])||0).fMul(1000);var note=(function(){var v=[];for(var n=0;n<si["num"];n++){v[n]=[];}
for(var j=0;j<noteSet.length;j++){var longTime=[];var longKey=[];var isRoll=[];for(var k=0;k<noteSet[j].length;k++){for(var t=0;t<noteSet[j][k].length;t++){var flag={};switch(noteSet[j][k][t]["s"]){case"M":case"m":flag["damage"]=1;break;case"A":case"a":break;case"K":case"k":flag["invisible"]=true;break;case"L":case"l":flag["click"]=true;break;case"F":case"f":flag["invalid"]=true;break;case"I":case"i":break;}
var trigger=(!isUndefined(noteSet[j][k][t]["k"])&&keySounds[noteSet[j][k][t]["k"]]?[{"kind":"audio","path":keySounds[noteSet[j][k][t]["k"]]}]:undefined);var n=t/si["key"]|0;switch(noteSet[j][k][t]["s"]){case"1":case"M":case"m":case"K":case"k":case"L":case"l":case"F":case"f":if(isUndefined(longTime[t])){v[n].push({"when":{"n":j+k/noteSet[j].length},"where":{"x":trackToX(t%si["key"],noteSet[j][k].length/si["num"])},"flag":flag,"trigger":trigger});}
break;case"2":case"4":if(isUndefined(longTime[t])){longTime[t]=j+k/noteSet[j].length;longKey[t]=trigger;isRoll[t]=(noteSet[j][k][t]["s"]=="4"?true:false);}
break;case"3":if(!isUndefined(longTime[t])){v[n].push({"when":{"n":longTime[t]},"where":{"x":trackToX(t%si["key"],noteSet[j][k].length/si["num"])},"link":{"b":-1,"c":v[n].length,"a":v[n].length+1},"flag":{"chain":(isRoll[t]?true:undefined)},"trigger":longKey[t]});v[n].push({"when":{"n":j+k/noteSet[j].length},"where":{"x":trackToX(t%si["key"],noteSet[j][k].length/si["num"])},"link":{"b":v[n].length-1,"c":v[n].length,"a":-1},"trigger":trigger});longTime[t]=undefined;longKey[t]=undefined;isRoll[t]=undefined;}
break;}}}}
for(var n=0;n<v.length;n++){for(var j=0;j<v[n].length;j++){v[n][j]["when"]={"t":timeFromNote({"beat":beat},v[n][j]["when"]["n"])};for(var k=0;k<delays.length;k++){if(v[n][j]["when"]["t"]>=delays[k][0]){v[n][j]["when"]["t"]=v[n][j]["when"]["t"].fAdd(delays[k][1]).fAdd(offset);break;}}}}
return v;})();effect.push({"when":{"b":0},"kind":"audio","path":st[i]["MUSIC"]||ht["MUSIC"]});var setAnimation=function(t,l){var transColor=function(c){if(!c){return newItem("argb");}
var v={};if(c.startsWith("#")){v["r"]=(parseInt(c.slice(1,3),16)||0).limit(0,255);v["g"]=(parseInt(c.slice(3,5),16)||0).limit(0,255);v["b"]=(parseInt(c.slice(5,7),16)||0).limit(0,255);v["a"]=(parseInt(c.slice(7,9),16)||255).limit(0,255);}
else{var s=c.split("^");v["r"]=(parseFloat(s[0])||0).limit(0,1).fMul(255);v["g"]=(parseFloat(s[1])||0).limit(0,1).fMul(255);v["b"]=(parseFloat(s[2])||0).limit(0,1).fMul(255);v["a"]=(parseFloat(s[3])||1).limit(0,1).fMul(255);}
return v;};var d=t.split("=");var b=parseFloat(d[0]);if(isNaN(b)){return;}
var animationPath=d[1];if(!animationPath){return;}
var rate=parseFloat(d[2]);var crossFade=(d[3]?true:false);var stretchRewind=(d[4]?true:false);var stretchLoop=(d[5]?true:false);var efffectPath=d[6]||"";var animationPath2=d[7]||"";var transitionPath=d[8]||"";var color=transColor(d[9]||"");var color2=transColor(d[10]||"");effect.push({"when":{"b":b},"kind":"image","what":l,"path":animationPath,"backColor":color,"rate":rate,"loop":(stretchLoop?-1:undefined),"playback":stretchRewind,"parameter":(crossFade?{"crossFade":true}:undefined),"addition":{"efffectPath":efffectPath,"animationPath":animationPath2,"transitionPath":transitionPath,"animationColor":color2}});};var BGCHANGES=(st[i]["BGCHANGES"]||st[i]["ANIMATIONS"]||ht["BGCHANGES"]||ht["ANIMATIONS"]||"").split(",");for(var j=0;j<BGCHANGES.length;j++){setAnimation(BGCHANGES[j],"back");}
var BGCHANGES2=(st[i]["BGCHANGES2"]||ht["BGCHANGES2"]||"").split(",");for(var j=0;j<BGCHANGES2.length;j++){setAnimation(BGCHANGES2[j],"back2");}
var FGCHANGES=(st[i]["FGCHANGES"]||ht["FGCHANGES"]||"").split(",");for(var j=0;j<FGCHANGES.length;j++){setAnimation(FGCHANGES[j],"fore");}
for(var n=0;n<si["num"];n++){var info={};info["key"]=si["key"];info["name"]=st[i]["STEPSTYPE"]+(st[i]["DESCRIPTION"]?" - "+st[i]["DESCRIPTION"]:"")+(st[i]["DIFFICULTY"]?" "+st[i]["DIFFICULTY"]:"")+(st[i]["METER"]?st[i]["METER"]:"")+(si["num"]>1?" P"+(n+1):"");info["chartName"]=st[i]["CHARTNAME"];info["chartDescription"]=st[i]["DESCRIPTION"];info["chartStyle"]=st[i]["CHARTSTYLE"];info["playMode"]=st[i]["STEPSTYPE"];info["player"]=n;info["difficulty"]=st[i]["DIFFICULTY"];info["level"]=st[i]["METER"];info["radarValues"]=st[i]["RADARVALUES"].split(",").map(function(a){return parseFloat(a);});info["meterType"]=st[i]["METERTYPE"];info["credit"]=st[i]["CREDIT"]||ht["CREDIT"];info["banner"]=st[i]["BANNER"]||ht["BANNER"];info["background"]=st[i]["BACKGROUND"]||ht["BACKGROUND"];info["previewId"]=st[i]["PREVIEWVID"]||ht["PREVIEWVID"];info["cover"]=st[i]["JACKET"]||ht["JACKET"];info["discImage"]=st[i]["DISCIMAGE"]||st[i]["DISC"]||ht["DISCIMAGE"]||ht["DISC"];info["cdImage"]=st[i]["CDIMAGE"]||ht["CDIMAGE"];info["cdTitle"]=st[i]["CDTITLE"]||ht["CDTITLE"];info["lyricsPath"]=st[i]["LYRICSPATH"]||ht["LYRICSPATH"];info["preview"]=st[i]["PREVIEW"]||ht["PREVIEW"];info["instrumentTrack"]=st[i]["INSTRUMENTTRACK"]||ht["INSTRUMENTTRACK"];info["sampleStart"]=parseFloat(st[i]["SAMPLESTART"]||ht["SAMPLESTART"])||"";info["sampleLength"]=parseFloat(st[i]["SAMPLELENGTH"]||ht["SAMPLELENGTH"])||"";info["displayBpm"]=st[i]["DISPLAYBPM"]||ht["DISPLAYBPM"];info["selectable"]=ht["SELECTABLE"];info["attacks"]=st[i]["ATTACKS"]||ht["ATTACKS"];data.push({"beat":beat,"note":note[n],"effect":effect,"status":status,"info":info});}}}
setRaw({"meta":meta,"data":[data]});};var fromSdfBuffer=function(buffer){var readBuffer=function(n){var r=new buffer.slice(p,p+n);p+=n;return r;};var readInt=function(n){var r=buffer.getInt(n,p,false);p+=n;return r;};var readUint=function(n){var r=buffer.getUint(n,p,false);p+=n;return r;};var readText=function(n){var r=buffer.getText(p,n);p+=n;return r;};var trackToX=function(track,key){return(track*2+1)/(key*2);};var p=0;var lengthBanner=readInt(4);var bufferBanner=readBuffer(lengthBanner);var lengthBackground=readInt(4);var bufferBackground=readBuffer(lengthBackground);p+=1;var flag=readInt(1);p+=4;var title=readText(readInt(1));var subTitle=readText(readInt(1));var artist=readText(readInt(1));var credit=readText(readInt(1));var offset=(readInt(1)?-readUint(2):readUint(2));var countBpms=readUint(2);var bpms=(function(){var v=[];for(var i=0;i<countBpms;i++){v.push([readInt(4),readInt(4)/1000]);}
return v;})();var countStops=readUint(2);var stops=(function(){var v=[];for(var i=0;i<countStops;i++){v.push([readInt(4),readInt(4)]);}
return v;})();var note=[];var key=4;var dpb=4;while(p<buffer.length){var lengthChunk=readUint(2);var lengthBeat=readUint(2);var pEnd=p+lengthChunk;var bufferOriginal=new Uint8Array(lengthBeat*key*4);var w=0;while(p<pEnd){var b=readUint(1);if(flag==1){bufferOriginal[w++]=b;}
else if(b==255){var n=readUint(1);var d=readInt(1);for(var i=0;i<n+1;i++){bufferOriginal[w++]=d;}}
else{bufferOriginal[w++]=b;}}
var n=[];var holds=[];var rolls=[];for(var b=0;b<lengthBeat;b++){for(var t=0;t<key;t++){var i=bufferOriginal.getInt(4,(b*4+t)*4,false);for(var d=dpb-1;d>-1;d--){var s=i>>6*d;i-=s<<6*d;switch(s){case 1:if(isUndefined(holds[t])){n.push({"when":{"b":b+d/dpb},"where":{"x":trackToX(t,key)}});}
break;case 2:case 4:if(isUndefined(holds[t])){holds[t]=b+d/dpb;rolls[t]=(s==4?true:false);}
break;case 3:if(!isUndefined(holds[t])){n.push({"when":{"b":holds[t]},"where":{"x":trackToX(t,key)},"link":{"b":-1,"c":n.length,"a":n.length+1},"flag":{"chain":(rolls[t]?true:undefined)}});n.push({"when":{"b":b+d/dpb},"where":{"x":trackToX(t,key)},"link":{"b":n.length-1,"c":n.length,"a":-1}});holds[t]=undefined;rolls[t]=undefined;}
break;}}}}
note.push(n);}
var meta={"title":title,"subTitle":subTitle,"artist":artist};var beat=(function(){var v=[];for(var i=0;i<bpms.length;i++){v.push([bpms[i][0],bpms[i][1],1]);}
for(var i=0;i<stops.length;i++){for(var j=0;j<v.length;j++){stops[i][1]=stops[i][0]+stops[i][1];if((v[j][0]==stops[i][0])||((v[j][0]<stops[i][0])&&(j+1<v.length)&&(v[j+1][0]>stops[i][0]))){if(v[j][0]==stops[i][0]){v[j][1]=0;}
else{v.insert([stops[i][0],v[j][1],0],j+1);j+=1;}
var s=j+1;for(var k=s;k<v.length;k++){if((v[k][0]==stops[i][1])||((v[k-1][0]<stops[i][1])&&(v[k][0]>stops[i][1]))){if((v[k-1][0]<stops[i][1])&&(v[k][0]>stops[i][1])){v.insert([stops[i][1],v[s-2][1],v[s-2][2]],k);}
for(var l=s;l<k;l++){v[l][2]=0;}
break;}}
break;}}}
for(var i=1;i<v.length;i++){if((v[i][1]==v[i-1][1])&&(v[i][2]==v[i-1][2])){v.splice(i,1);i-=1;}}
for(var i=0;i<v.length;i++){v[i]={"when":{"t":v[i][0]},"bpm":v[i][1],"fpn":v[i][2]};}
return v;})();var file=(function(){var r=[];r.push({"path":"banner.png","base64":bufferBanner.getBase64()});r.push({"path":"background.png","base64":bufferBackground.getBase64()});return r;})();var data=(function(){var v=[];for(var i=0;i<note.length;i++){v.push({"beat":beat.slice(),"note":note[i],"info":{"key":key,"playMode":"dance-single","credit":credit}});}
return v;})();setRaw({"meta":meta,"data":[data],"file":file});};var fromDwiBuffer=function(buffer){var trackToX=function(track,key){return(track*2+1)/(key*2);};var stepToTracks=function(s,m){if(m=="SOLO"){var v=[0,0,0,0,0,0];for(var i=0;i<s.length;i++){switch(s[i]){case"1":v[0]=1;v[2]=1;break;case"2":v[2]=1;break;case"3":v[2]=1;v[5]=1;break;case"4":v[0]=1;break;case"6":v[5]=1;break;case"7":v[0]=1;v[3]=1;break;case"8":v[3]=1;break;case"9":v[3]=1;v[5]=1;break;case"A":v[2]=1;v[3]=1;break;case"B":v[0]=1;v[5]=1;break;case"C":v[1]=1;break;case"D":v[4]=1;break;case"E":v[0]=1;v[1]=1;break;case"F":v[1]=1;v[2]=1;break;case"G":v[1]=1;v[3]=1;break;case"H":v[1]=1;v[5]=1;break;case"I":v[0]=1;v[4]=1;break;case"J":v[2]=1;v[4]=1;break;case"K":v[3]=1;v[4]=1;break;case"L":v[4]=1;v[5]=1;break;case"M":v[1]=1;v[4]=1;break;}}
return v;}
else{var v=[0,0,0,0];for(var i=0;i<s.length;i++){switch(s[i]){case"1":v[0]=1;v[1]=1;break;case"2":v[1]=1;break;case"3":v[1]=1;v[3]=1;break;case"4":v[0]=1;break;case"6":v[3]=1;break;case"7":v[0]=1;v[2]=1;break;case"8":v[2]=1;break;case"9":v[2]=1;v[3]=1;break;case"A":v[1]=1;v[2]=1;break;case"B":v[0]=1;v[3]=1;}}
return v;}};var meta={};var data=[];var infos={};var audioFilename="";var bpm=125;var offset=0;var STOPS="";var BPMS="";var a=buffer.getText().replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");for(var i=0;i<a.length;i++){if((a[i][0]=="#")&&(a[i][a[i].length-1]!=";")){while(true){if(i+1<a.length){a[i]=a[i]+a[i+1];a.splice(i+1,1);}
else{a[i]=a[i]+";";break;}
if(a[i][a[i].length-1]==";"){break;}}}}
for(var i=0;i<a.length;i++){if((a[i][0]=="#")&&(a[i][a[i].length-1]==";")){var d=a[i].slice(1,a[i].length-1).split(":");switch(d[0]){case"TITLE":meta["title"]=d[1];break;case"ARTIST":meta["artist"]=d[1];break;case"FILE":audioFilename=d[1];break;case"BPM":var v=parseFloat(d[1]);if(!isNaN(v)){bpm=v;}
break;case"GAP":var v=parseFloat(d[1]);if(!isNaN(v)){offset=v;}
break;case"DISPLAYTITLE":infos["displayTitle"]=d[1];break;case"DISPLAYARTIST":infos["displayArtist"]=d[1];break;case"DISPLAYBPM":infos["displayBpm"]=d[1];break;case"MD5":infos["audioMd5"]=d[1];break;case"FREEZE":STOPS=d[1];break;case"CHANGEBPM":BPMS=d[1];break;case"GENRE":meta["genre"]=d[1];break;case"SAMPLESTART":var v=parseFloat(d[1]);if(!isNaN(v)){infos["sampleStart"]=v;}
break;case"SAMPLELENGTH":var v=parseFloat(d[1]);if(!isNaN(v)){infos["sampleLength"]=v;}
break;case"CDTITLE":infos["cdTitle"]=d[1];break;case"RANDSEED":infos["randSeed"]=d[1];break;case"RANDSTART":infos["randStart"]=d[1];break;case"RANDFOLDER":infos["randFolder"]=d[1];break;case"RANDLIST":infos["randList"]=d[1];break;case"SINGLE":case"COUPLE":case"DOUBLE":case"SOLO":var note=[];var info=mergeObject(infos,{"key":(d[0]=="SOLO"?6:4),"playMode":d[0],"difficulty":d[1],"level":d[2]});var num=(d[4]?2:1);var dpb=48;for(var index=0;index<num;index++){note[index]=[];var sc=d[3+index];var list=[];for(var j=0;j<sc.length;j++){switch(sc[j]){case"(":var l=((sc.indexOf(")",j+1)+1)||(sc.length+1))-1;var s=sc.slice(j+1,l);j+=s.length+1;list.push([s,dpb*4/16]);break;case"[":var l=((sc.indexOf("]",j+1)+1)||(sc.length+1))-1;var s=sc.slice(j+1,l);j+=s.length+1;list.push([s,dpb*4/24]);break;case"{":var l=((sc.indexOf("}",j+1)+1)||(sc.length+1))-1;var s=sc.slice(j+1,l);j+=s.length+1;list.push([s,dpb*4/64]);break;case"`":var l=((sc.indexOf("'",j+1)+1)||(sc.length+1))-1;var s=sc.slice(j+1,l);j+=s.length+1;list.push([s,dpb*4/192]);break;default:var l=Math.min(((sc.indexOf("(",j+1)+1)||(sc.length+1))-1,((sc.indexOf("[",j+1)+1)||(sc.length+1))-1,((sc.indexOf("{",j+1)+1)||(sc.length+1))-1,((sc.indexOf("`",j+1)+1)||(sc.length+1))-1);var s=sc.slice(j,l);j+=s.length-1;list.push([s,dpb/8*4]);break;}}
var base=[];var b=0;for(var j=0;j<list.length;j++){for(var k=0;k<list[j][0].length;k++){if(list[j][0][k]=="<"){var l=((list[j][0].indexOf(">",k+1)+1)||(list[j][0].length+1))-1;var ss=list[j][0].slice(k+1,l);k+=ss.length+1;for(var l=0;l<ss.length;l++){var s=ss[l];var h="";if(ss[l+1]=="!"){l+=2;var h=ss[l];}
h=h||"0";if((s!="0")||(h!="0")){base.push({"b":b,"show":s,"hold":h});}}}
else{var s=list[j][0][k];var h="";if(list[j][0][k+1]=="!"){k+=2;var h=list[j][0][k];}
h=h||"0";if((s!="0")||(h!="0")){base.push({"b":b,"show":s,"hold":h});}}
b+=list[j][1];}}
var holds=[];for(var j=0;j<base.length;j++){var show=stepToTracks(base[j]["show"],info["playMode"]);var hold=stepToTracks(base[j]["hold"],info["playMode"]);while((j+1<base.length)&&(base[j+1]["b"]==base[j]["b"])){var show1=stepToTracks(base[j+1]["show"],info["playMode"]);for(var k=0;k<show.length;k++){show[k]=show[k]||show1[k];}
var hold1=stepToTracks(base[j+1]["hold"],info["playMode"]);for(var k=0;k<hold.length;k++){hold[k]=hold[k]||hold1[k];}
j+=1;}
for(var k=0;k<show.length;k++){if(show[k]&&!hold[k]){var x=trackToX(k,info["key"]);if(isUndefined(holds[k])){note[index].push({"when":{"b":base[j]["b"]/dpb},"where":{"x":x}});}
else{note[index].push({"when":{"b":holds[k]/dpb},"where":{"x":x},"link":{"b":-1,"c":note[index].length,"a":note[index].length+1}});note[index].push({"when":{"b":base[j]["b"]/dpb},"where":{"x":x},"link":{"b":note[index].length-1,"c":note[index].length,"a":-1}});holds[k]=undefined;}}}
for(var k=0;k<hold.length;k++){if(show[k]&&hold[k]){if(isUndefined(holds[k])){holds[k]=base[j]["b"];}}}}}
for(var index=0;index<note.length;index++){data.push({"note":note[index],"effect":[{"when":{"t":0},"kind":"audio","path":audioFilename}],"info":mergeObject(info,{"player":index,"name":info["playMode"]+" "+info["difficulty"]+info["level"]+(note.length>1?" P"+index:"")},true)});}
break;}}}
var beat=(function(){var find=function(v,t){for(var i=0;i<v.length;i++){if(v[i][0]==t){return i;}}
return-1;};var set=function(v,t,d){var l=find(v,t);if(l==-1){l=v.length;v.push([t]);}
for(var i=0;i<d.length;i++){if(!isUndefined(d[i])){v[l][i+1]=d[i];}}
return v;};var sort=function(a,b){return a[0]-b[0];};var bpms=(function(){var v=[];if(BPMS){var d=BPMS.split(",");for(var i=0;i<d.length;i++){var s=d[i].split("=");if(s.length==2){s[0]=parseFloat(s[0]);s[1]=parseFloat(s[1]);if(s[0]>=0){v=set(v,s[0],[s[1]]);}}}}
v=v.sort(sort);if((!v.length)||(v[0][0]>0)){v.unshift([0,bpm]);}
for(var i=1;i<v.length;i++){if(v[i][1]==v[i-1][1]){v.splice(i,1);i-=1;}}
return v;})();var stops=(function(){var v=[];if(STOPS){var d=STOPS.split(",");for(var i=0;i<d.length;i++){var s=d[i].split("=");if(s.length==2){s[0]=parseFloat(s[0]);s[1]=parseFloat(s[1])||0;if((s[0]>=0)&&(s[1]!=0)){v=set(v,s[0],[s[1]]);}}}}
return v.sort(sort);})();var v=[];for(var i=0;i<bpms.length;i++){if(bpms[i][1]>0){v=set(v,bpms[i][0],[bpms[i][1],undefined]);}}
for(var i=0;i<v.length;i++){v[i][1]=(isUndefined(v[i][1])?(i?v[i-1][1]:125):v[i][1]);v[i][2]=(isUndefined(v[i][2])?(i?v[i-1][2]:1):v[i][2]);}
for(var i=0;i<v.length;i++){v[i]={"when":{"b":v[i][0]},"bpm":v[i][1],"fpn":v[i][2]};}
v[0]["when"]["t"]=offset;for(var i=0;i<v.length;i++){v[i]["when"]["t"]=timeFromBeat({"beat":v},v[i]["when"]["b"]);}
for(var i=0;i<stops.length;i++){stops[i][1]=beatFromTime({"beat":v},timeFromBeat({"beat":v},stops[i][0])+stops[i][1]);for(var j=0;j<v.length;j++){if((v[j]["when"]["b"]==stops[i][0])||((v[j]["when"]["b"]<stops[i][0])&&(j+1<v.length)&&(v[j+1]["when"]["b"]>stops[i][0]))){if(v[j]["when"]["b"]==stops[i][0]){v[j]["fpn"]=0;}
else{v.insert({"when":{"b":stops[i][0]},"bpm":v[j]["bpm"],"fpn":0},j+1);j+=1;}
var s=j+1;for(var k=s;k<v.length;k++){if((v[k]["when"]["b"]==stops[i][1])||((v[k-1]["when"]["b"]<stops[i][1])&&(v[k]["when"]["b"]>stops[i][1]))){if((v[k-1]["when"]["b"]<stops[i][1])&&(v[k]["when"]["b"]>stops[i][1])){v.insert({"when":{"b":stops[i][1]},"bpm":v[s-2]["bpm"],"fpn":v[s-2]["fpn"]},k);}
for(var l=s;l<k;l++){v[l]["fpn"]=0;}
break;}}
break;}}}
return v;})();for(var index=0;index<data.length;index++){data[index]["beat"]=beat.slice();}
setRaw({"meta":meta,"data":[data]});};var fromPtBuffer=function(buffer){var findByte=function(t){for(var i=p;i<buffer.length;i++){if(buffer[i]==t){return i;}}
return buffer.length;};var readUint=function(n){var r=buffer.getUint(n,p,true);p+=n;return r;};var readFloat=function(n){var r=buffer.getFloat(n,p,true).toAbbreviated(3).toAccurated();p+=n;return r;};var readText=function(n){var r=buffer.getText(p,n);p+=n;return r;};var readTrack=function(){if(readText(4)=="EZTR"){p+=2;var data=[];var name=readText(64);var length=readUint(4);var e=readUint(4)+p;while(p<e){var time=readUint(4);var type=readUint(1);switch(type){case 1:case 2:var id=readUint(1);var volume=readUint(1)/256;var panner=(readUint(1)-64)/64;p+=1;var duration=readUint(2);data.push([time,type,id,volume,panner,duration]);break;case 3:var bpm=readFloat(4);p+=2;data.push([time,type,bpm]);break;case 4:var bpn=readUint(4);p+=2;data.push([time,type,bpn]);break;}}
tracks.push({"name":name,"length":length,"data":data});}
else{p-=4;}};var getTrack=function(t){if((t<3)||(t>20)){return-1;}
t=(t>11?t-9:t);t-=3;if(hasSP){t+=1;t=(t==8?0:t);t=(t==9?8:t);}
t=(!has67&&(t>5)?t-2:t);return t;};var trackToX=function(track,key){return(track*2+1)/(key*2);};var p=0;var tracks=[];var audios={};var beats=[];var notes={};var signature=readText(4);if(signature!="PTFF"){return;}
p+=4;var bpm=readFloat(4);var countTrack=readUint(2);var length=readUint(2);p+=2;var u=readFloat(4);var countAudio=readUint(2);for(var i=0;i<countAudio;i++){var e=p+0x42;var id=readUint(1);var bgm=(readUint(1)?true:false)
var filename=readText(findByte(0x00)-p);p+=1;p=e;audios[id]=[bgm,filename];}
while((p<buffer.length)&&(tracks.length<countTrack)){readTrack();}
var has67=[8,9,17,18].some(function(a){return tracks[a]["length"];});var hasSP=[10,11,19,20].some(function(a){return tracks[a]["length"];});var key=5+(has67?2:0)+(hasSP?2:0);var num=([12,13,14,15,16,17,18,19,20].some(function(a){return tracks[a]["length"];})?2:1);var dpb=48;var beat=(function(){var v=[];var set=function(b,bpm,bpn){var l=(function(){for(var i=0;i<v.length;i++){if(v[i][0]==b){return i;}}
return-1;})();if(l!=-1){v[l][1]=(!isUndefined(bpm)?bpm:v[l][1]);v[l][2]=(!isUndefined(bpn)?bpn:v[l][2]);}
else{v.push([b,bpm,bpn]);}};for(var i=0;i<tracks[0]["data"].length;i++){switch(tracks[0]["data"][i][1]){case 3:set(tracks[0]["data"][i][0]/dpb,tracks[0]["data"][i][2],undefined);break;case 4:set(tracks[0]["data"][i][0]/dpb,undefined,tracks[0]["data"][i][2]);break;}}
v.sort(function(a,b){return a[0]-b[0];});for(var i=1;i<v.length;i++){if((v[i][1]==v[i-1][1])&&(v[i][2]==v[i-1][2])){v.splice(i,1);i-=1;}}
for(var i=0;i<v.length;i++){v[i]={"when":{"b":v[i][0]},"bpm":v[i][1],"bpn":v[i][2],"dpb":dpb};}
return v;})();var note=(function(){var noteData=(function(){var v=[];for(var i=3;i<21;i++){for(var j=0;j<tracks[i]["data"].length;j++){if(tracks[i]["data"][j][1]==1){v.push([tracks[i]["data"][j][0]/dpb,(tracks[i]["data"][j][5]>6?tracks[i]["data"][j][5]:0)/dpb,getTrack(i),(i>11?1:0),tracks[i]["data"][j][2],tracks[i]["data"][j][3],tracks[i]["data"][j][4]]);}}}
v=v.sort(function(a,b){return(a[0]-b[0])||(a[2]-b[2]);});return v;})();var v=[[],[]];for(var i=0;i<noteData.length;i++){var x=trackToX(noteData[i][2],key);var index=noteData[i][3];var trigger=(noteData[i][4]&&audios[noteData[i][4]]?[{"kind":"audio","path":audios[noteData[i][4]][1],"volume":noteData[i][5],"panner":noteData[i][6]}]:undefined);if(noteData[i][1]){v[index].push({"when":{"b":noteData[i][0]},"where":{"x":x},"link":{"b":-1,"c":v[index].length,"a":v[index].length+1},"trigger":trigger});v[index].push({"when":{"b":noteData[i][0].fAdd(noteData[i][1])},"where":{"x":x},"link":{"b":v[index].length-1,"c":v[index].length,"a":-1}});}
else{v[index].push({"when":{"b":noteData[i][0]},"where":{"x":x},"trigger":trigger});}}
return v;})();var effect=(function(){var v=[];for(var i=22;i<tracks.length;i++){for(var j=0;j<tracks[i]["data"].length;j++){if(tracks[i]["data"][j][1]==1){if(audios[tracks[i]["data"][j][2]]){v.push({"when":{"b":tracks[i]["data"][j][0]/dpb},"kind":"audio","path":audios[tracks[i]["data"][j][2]][1],"volume":tracks[i]["data"][j][3],"panner":tracks[i]["data"][j][4]});}}}}
return v;})();var info={"key":key,"length":{"when":{"b":length/dpb}}};var data=(function(){var v=[];for(var index=0;index<note.length;index++){if(note[index].length){v.push({"beat":beat.slice(),"note":note[index],"effect":effect.slice(),"info":mergeObject(info,{"player":index,"name":(note.length>1?"P"+index:"")},true)});}}
return v;})();setRaw({"data":[data]});};var fromKsfBuffer=function(buffer){var setBeat=function(t,bpm,bpn,dpb,fpn){bpm=(!isUndefined(bpm)?bpm:(beat.length?beat[beat.length-1]["bpm"]:120));bpn=(!isUndefined(bpn)?bpn:(beat.length?beat[beat.length-1]["bpn"]:4));dpb=(!isUndefined(dpb)?dpb:(beat.length?beat[beat.length-1]["dpb"]:2));fpn=(!isUndefined(fpn)?fpn:(beat.length?beat[beat.length-1]["fpn"]:1));if(beat.length&&(beat[beat.length-1]["when"]["t"]==t)){beat[beat.length-1]["bpm"]=bpm;beat[beat.length-1]["bpn"]=bpn;beat[beat.length-1]["dpb"]=dpb;beat[beat.length-1]["fpn"]=fpn;}
else{var b=beatFromTime({"beat":beat},t);var n=noteFromBeat({"beat":beat},b);beat.push({"when":{"b":b,"n":n,"t":t},"bpm":bpm,"bpn":bpn,"dpb":dpb,"fpn":fpn});}};var trackToX=function(track,key){return(track*2+1)/(key*2);};var meta={};var data=[];var beat=[];var note=[[],[]];var status=[];var info={"key":5,"background":"title.png","banner":"disc.png","preview":"intro.mp3"};var audioFilename="song.mp3";var bpm=[120];var bunki=[0];var offset=[0];var dpb=4;var a=buffer.getText().replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");for(var i=0;i<a.length;i++){a[i]=a[i].trim();if(!a[i]){a.splice(i,1);i-=1;}}
for(var i=0;i<a.length;i++){if(a[i][0]=="#"){var l=a[i].indexOf(":");if(l!=-1){var n=a[i].slice(1,l);if(n=="STEP"){a[i]+=";"}
if(a[i][a[i].length-1]!=";"){break;}
var v=a[i].slice(l+1,a[i].length-1);switch(true){case n.startsWith("BPM"):var x=(n.length==3?1:parseInt(n.slice(3)));v=parseFloat(v);if(!isNaN(x)&&!isNaN(v)){bpm[x-1]=v;}
break;case n.startsWith("BUNKI"):var x=(n.length==5?1:parseInt(n.slice(5)));v=parseFloat(v);if(!isNaN(x)&&!isNaN(v)){bunki[x]=v*10;}
break;case n.startsWith("STARTTIME"):var x=(n.length==9?1:parseInt(n.slice(9)));v=parseFloat(v);if(!isNaN(x)&&!isNaN(v)){offset[x-1]=-v*10;}
break;default:switch(n){case"TITLE":var d=v.split(" - ");if(d.length==1){if(d[0]){meta["title"]=d[0];}}
else{if(d[0]){meta["artist"]=d[0];}
if(d[1]){meta["title"]=d[1];}
if(d[2]){if(["double","easy","normal","hard","crazy","nightmare"].indexOf(d[2])!=-1){info["difficulty"]=d[2];}}}
break;case"TICKCOUNT":v=parseFloat(v);if(!isNaN(v)){dpb=v;}
break;case"DIFFICULTY":v=parseFloat(v);if(!isNaN(v)){info["level"]=v;}
break;case"PLAYER":info["playMode"]=v;break;case"MUSICINTRO":case"INTRO":var d=v.split(":");var s=0;d[d.length-1]=parseInt(d[d.length-1]||"00");if(!isNaN(d[d.length-1])){s+=d[d.length-1];}
d[d.length-2]=parseInt(d[d.length-2]||"00");if(!isNaN(d[d.length-2])){s+=d[d.length-2]*60;}
d[d.length-3]=parseInt(d[d.length-3]||"00");if(!isNaN(d[d.length-3])){s+=d[d.length-3]*60*60;}
if(s){info["previewStart"]=s*1000;}
break;case"TITLEFILE":if(v){info["background"]=v;}
break;case"DISCFILE":if(v){info["banner"]=v;}
break;case"SONGFILE":if(v){audioFilename=v;}
break;case"INTROFILE":if(v){info["preview"]=v;}
break;case"STEP":for(var j=0;j<bpm.length;j++){if(!isUndefined(bpm[j])&&!isUndefined(bunki[j])){offset[j]=offset[j]||0;setBeat(bunki[j].fAdd(offset[j]),bpm[j],4,dpb,1);}}
var t=0;var t0=t;var o=0;var holds=[];var eof=false;for(var j=i+1;j<a.length;j++){if((a[j][0]=="|")&&(a[j][a[j].length-1]=="|")){var v=parseFloat(a[j].slice(2,a.length-1));if(!isNaN(v)){switch(a[j][1]){case"T":dpb=v;setBeat(t.fAdd(o),undefined,4,v,undefined);break;case"B":setBeat(t.fAdd(o),v,4,undefined,undefined);break;case"E":t=timeFromBeat({"beat":beat},beatFromTime({"beat":beat},t).fAdd(v));break;case"D":t=t.fAdd(v*1000);break;case"M":case"C":status.push({"when":{"t":t.fAdd(o)},"name":"sm_combo","value":v});break;case"S":status.push({"when":{"t":t.fAdd(o)},"name":"sm_speed","value":v});break;case"F":status.push({"when":{"t":t.fAdd(o)},"name":"sm_fake","value":(v?1:0)});break;case"X":setBeat(t.fAdd(o),undefined,4,undefined,v);break;}}}
else{for(var k=0;k<offset.length;k++){if((!k||(t0<bunki[k]))&&(t>=bunki[k])){o=offset[k];break;}}
for(var k=0;k<10;k++){var index=k/info["key"]|0;var x=trackToX(k%info["key"],info["key"]);var flag={};switch(a[j][k]){case"M":case"m":flag["damage"]=1;break;case"F":case"f":flag["invalid"]=true;break;case"L":case"l":flag["click"]=true;break;}
if(a[j][k]!="4"){if(holds[k]){if(holds[k][0]==holds[k][1]){note[index].push({"when":{"t":holds[k][0]},"where":{"x":x}});}
else{note[index].push({"when":{"t":holds[k][0]},"where":{"x":x},"link":{"b":-1,"c":note[index].length,"a":note[index].length+1}});note[index].push({"when":{"t":holds[k][1]},"where":{"x":x},"link":{"b":note[index].length-1,"c":note[index].length,"a":-1}});}
holds[k]=undefined;}}
switch(a[j][k]){case"1":case"M":case"m":case"F":case"f":case"L":case"l":note[index].push({"when":{"t":t.fAdd(o)},"where":{"x":x},"flag":flag});break;case"2":eof=true;break;case"4":if(!(holds[k])){holds[k]=[t.fAdd(o),t.fAdd(o)];}
else{holds[k][1]=t.fAdd(o);}
break;}}
t0=t;t=timeFromBeat({"beat":beat},beatFromTime({"beat":beat},t.fAdd(o)).fAdd((1).fDiv(dpb))).fSub(o);}
if(eof){info["length"]={"when":{"t":t0.fAdd(o)}};break;}}
break;}
break;}}}}
for(var index=0;index<note.length;index++){if(!note[index].length){note.splice(index,1);index-=1;}}
for(var index=0;index<note.length;index++){data.push({"beat":beat.slice(),"note":note[index],"effect":[{"when":{"t":0},"kind":"audio","path":audioFilename}],"status":status,"info":mergeObject(info,{"name":(info["playMode"]||"")+(note.length>1?" P"+index:""),"player":index})});}
setRaw({"meta":meta,"data":[data]});};var fromUcsBuffer=function(buffer){var setBeat=function(t,bpm,bpn,dpb){if(!beat.length&&t){beat.push({"when":{"b":0,"n":0,"t":0},"bpm":120,"bpn":4,"dpb":2});}
bpm=(!isUndefined(bpm)?bpm:(beat.length?beat[beat.length-1]["bpm"]:120));bpn=(!isUndefined(bpn)?bpn:(beat.length?beat[beat.length-1]["bpn"]:4));dpb=(!isUndefined(dpb)?dpb:(beat.length?beat[beat.length-1]["dpb"]:2));if(beat.length&&(beat[beat.length-1]["when"]["t"]==t)){beat[beat.length-1]["bpm"]=bpm;beat[beat.length-1]["bpn"]=bpn;beat[beat.length-1]["dpb"]=dpb;}
else{var b=beatFromTime({"beat":beat},t);var n=noteFromBeat({"beat":beat},b);beat.push({"when":{"b":b,"n":n,"t":t},"bpm":bpm,"bpn":bpn,"dpb":dpb});}};var trackToX=function(track,key){return(track*2+1)/(key*2);};var format=1;var mode="";var dpb=2;var key=5;var num=1;var t=0;var data=[];var beat=[];var note=[];var times=[];var holds=[];var a=buffer.getText().replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");for(var i=0;i<a.length;i++){if(a[i].startsWith(":")){var d=a[i].slice(1).split("=");if(d.length>=2){switch(d[0]){case"Format":if(!format){format=d[1];}
break;case"Mode":if(!mode){mode=d[1];num=(mode.startsWith("S")?1:2);for(var index=0;index<num;index++){note.push([]);holds.push([]);}}
break;case"BPM":d[1]=parseFloat(d[1]);if(!isNaN(d[1])){times[0]=d[1];}
break;case"Delay":d[1]=parseFloat(d[1]);if(!isNaN(d[1])){times[3]=d[1];}
break;case"Beat":d[1]=parseFloat(d[1]);if(!isNaN(d[1])){times[1]=d[1];}
break;case"Split":d[1]=parseFloat(d[1]);if(!isNaN(d[1])){dpb=d[1];times[2]=d[1];}
break;}}}
else{if(times.length){setBeat(t,times[0],times[1],times[2]);t=t.fAdd(times[3]);times=[];}
for(var index=0;index<num;index++){for(var j=0;j<key;j++){switch(a[i][index*key+j]){case"X":if(isUndefined(holds[index][j])){note[index].push({"when":{"t":t},"where":{"x":trackToX(j,key)}});}
break;case"M":if(isUndefined(holds[index][j])){holds[index][j]=t;}
break;case"H":break;case"W":if(!isUndefined(holds[index][j])){note[index].push({"when":{"t":holds[index][j]},"where":{"x":trackToX(j,key)},"link":{"b":-1,"c":note[index].length,"a":note[index].length+1}});note[index].push({"when":{"t":t},"where":{"x":trackToX(j,key)},"link":{"b":note[index].length-1,"c":note[index].length,"a":-1}});holds[index][j]=undefined;}
break;}}}
t=timeFromBeat({"beat":beat},beatFromTime({"beat":beat},t).fAdd((1).fDiv(dpb)));}}
for(var index=0;index<note.length;index++){data.push({"beat":beat.slice(),"note":note[index],"info":{"key":key,"name":mode+(note.length>1?" P"+index:""),"playMode":mode,"player":index}});}
setRaw({"data":[data]});};var fromDanceBuffer=function(buffer){var getStepsInfo=function(t){switch(t){case"SINGLE":case"VERSUS":return{"key":4,"num":1};case"COUPLE":case"DOUBLE":return{"key":4,"num":2};case"5SINGLE":case"5VERSUS":return{"key":5,"num":1};case"5COUPLE":case"5DOUBLE":return{"key":5,"num":2};case"6SINGLE":case"6VERSUS":return{"key":6,"num":1};case"6COUPLE":case"6DOUBLE":return{"key":6,"num":2};case"8SINGLE":case"8VERSUS":return{"key":8,"num":1};case"8COUPLE":case"8DOUBLE":return{"key":8,"num":2};case"9SINGLE":case"9VERSUS":return{"key":9,"num":1};case"9COUPLE":case"9DOUBLE":return{"key":9,"num":2};case"3SINGLE":case"3VERSUS":return{"key":3,"num":1};case"3COUPLE":case"3DOUBLE":return{"key":3,"num":2};}};var meta={};var data=[];var info={};var audioFilename="";var audioStart=0;var audioDuration=0;var bpm=120;var o=0;var a=buffer.getText().replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");var p=0;var read=function(){if(p<a.length){var s=a[p];var l=s.indexOf(" ");p+=1;return(l!=-1?[s.slice(0,l),s.slice(l+1)]:[s,""]);}
else{return["end",""];}};var readMetadata=(function(){while(true){var d=read();if(d[0]!="end"){switch(d[0]){case"filename":audioFilename=d[1];break;case"title":meta["title"]=d[1];break;case"subtitle":meta["subTitle"]=d[1];break;case"artist":meta["artist"]=d[1];break;case"mix":meta["mixer"]=d[1];break;case"bpm":d[1]=parseFloat(d[1]);if(!isNaN(d[1])){bpm=d[1];}
break;case"bpmdisplay":d[1]=parseFloat(d[1]);if(!isNaN(d[1])){info["bpmdisplay"]=d[1];}
break;case"gap":d[1]=parseFloat(d[1]);if(!isNaN(d[1])){o=-d[1];}
break;case"startat":d[1]=parseInt(d[1]);if(!isNaN(d[1])){audioStart=d[1];}
break;case"endat":d[1]=parseInt(d[1]);if(!isNaN(d[1])){audioDuration=d[1]-(audioStart||0);}
break;case"background":info["background"]=d[1];break;case"banner":info["banner"]=d[1];break;case"cdtitle":info["cdTitle"]=d[1];break;case"preview":var s=d[1].split(" ");if(s.length>=2){s[0]=parseFloat(s[0]);s[1]=parseFloat(s[1]);if(!isNaN(s[0])&&!isNaN(s[1])){info["previewStart"]=s[0];info["previewDuration"]=s[1];}}
break;case"md5sum":info["audioMd5"]=d[1];break;case"author":meta["author"]=d[1];break;case"movie":info["movie"]=d[1];break;case"revision":meta["datetime"]=d[1];break;case"valid":info["valid"]=d[1];break;}}
else{break;}}})();var effect=[{"when":{"n":0},"kind":"audio","path":audioFilename,"offset":audioStart,"duration":audioDuration}];var readTextSection=(function(){var readDescription=function(){var v=[];while(true){var d=read();if(d[0]!="end"){v.push((d[1]=="."?"\r\n":d[1]));}
else{break;}}
meta["description"]=v.join("\t");};var readLyrics=function(){while(true){var d=read();if(d[0]!="end"){var t=parseFloat(d[0]);var l=d[1].indexOf(" ");if(l!=-1){var c=parseInt(d[1].slice(0,l));if(!isNaN(t)&&!isNaN(c)){effect.push({"when":{"t":t.fMul(1000)},"kind":"text","what":"dance_"+c+"_g","text":d[1].slice(l+1)});}}}
else{break;}}};while(true){var t=read();if((t[0]=="DESCRIPTION")||(t[0]=="LYRICS")){if(t[0]=="DESCRIPTION"){readDescription();}
if(t[0]=="LYRICS"){readLyrics();}}
else{p-=1;break;}}})();var readStepSection=(function(){var trackToX=function(track,key){return(track*2+1)/(key*2);};var setBPM=function(beat,n,bpm){var l=(function(){for(var i=0;i<beat.length;i++){if(beat[i]["when"]["n"]==n){return i;}}
return-1;})();if(l!=-1){beat[l]["bpm"]=bpm;}
else{beat.push({"when":{"b":beatFromNote({"beat":beat},n),"n":n,"t":timeFromNote({"beat":beat},n)},"bpm":bpm,"bpn":4,"fpn":1});}
return beat;};var setStop=function(beat,n,duration){var n2=noteFromTime({"beat":beat},timeFromNote({"beat":beat},n)+duration);var l=(function(){for(var i=0;i<beat.length;i++){if(beat[i]["when"]["n"]==n){return i;}}
return-1;})();if(l!=-1){beat[l]["fpn"]=0;}
else{beat.push({"when":{"b":beatFromNote({"beat":beat},n),"n":n,"t":timeFromNote({"beat":beat},n)},"bpm":beat[beat.length-1]["bpm"],"bpn":4,"fpn":0});}
beat.push({"when":{"b":beatFromNote({"beat":beat},n2),"n":n2,"t":timeFromNote({"beat":beat},n2)},"bpm":beat[beat.length-1]["bpm"],"bpn":4,"fpn":1});return beat;};while(true){var mode=read()[0];var si=getStepsInfo(mode);if(si){var key=si["key"];var num=si["num"];var rate=read();var difficulty=rate[0];var level=parseInt(rate[1])||0;var beatS=[{"when":{"b":0,"n":0,"t":o},"bpm":bpm,"bpn":4,"fpn":1}];var noteD=(function(){var v=[];for(var i=0;i<num;i++){v.push([]);}
return v;})();var effectS=effect.slice();var n=0;var holdsN=(function(){var v=[];for(var i=0;i<num;i++){v.push([]);}
return v;})();var holdsS=(function(){var v=[];for(var i=0;i<num;i++){v.push([]);}
return v;})();while(true){var d=read();if(d[0]!="end"){switch(d[0]){case"B":d[1]=parseFloat(d[1]);if(!isNaN(d[1])){beatS=setBPM(beatS,n,d[1]);}
break;case"R":effectS.push({"when":{"n":n},"kind":"special","text":"Ready? Go!"});break;case"W":d[1]=parseFloat(d[1]);if(!isNaN(d[1])){n=noteFromTime({"beat":beatS},timeFromNote({"beat":beatS},n)+d[1].fMul(1000));}
break;case"S":d[1]=parseFloat(d[1]);if(!isNaN(d[1])){beatS=setStop(beatS,n,d[1].fMul(1000));}
break;case"D":d[1]=parseFloat(d[1]);if(!isNaN(d[1])){n+=d[1];}
break;case"L":var l=d[1].indexOf(" ");if(l!=-1){var c=parseInt(d[1].slice(0,l));if(!isNaN(c)){effectS.push({"when":{"n":n},"kind":"text","what":"dance_"+c,"text":d[1].slice(l+1)});}}
break;case"o":case"h":case"q":case"e":case"w":case"s":case"f":case"t":case"u":case"x":case"n":n+=(function(){switch(d[0]){case"o":return 1;case"h":return 1/2;case"q":return 1/4;case"e":return 1/8;case"w":return 1/12;case"s":return 1/16;case"f":return 1/24;case"t":return 1/32;case"u":return 1/48;case"x":return 1/64;case"n":return 1/192;}})();var s=d[1].split(" ");for(var index=0;index<num;index++){for(var i=0;i<key;i++){var k=parseInt(s[index][i]);if(!isNaN(k)&&k){var isPress=k&1;var isHold=k&2;var isSecret=k&4;if(isPress){if(isHold){if(isSecret){if(isUndefined(holdsS[index][i])){holdsS[index][i]=n;}}
else{if(isUndefined(holdsN[index][i])){holdsN[index][i]=n;}}}
else{var x=trackToX(i,key);if(isSecret){if(isUndefined(holdsS[index][i])){noteD[index].push({"when":{"n":n},"where":{"x":x},"flag":{"secret":true}});}
else{noteD[index].push({"when":{"n":holdsS[index][i]},"where":{"x":x},"link":{"b":-1,"c":noteD[index].length,"a":noteD[index].length+1},"flag":{"secret":true}});noteD[index].push({"when":{"n":n},"where":{"x":x},"link":{"b":noteD[index].length-1,"c":noteD[index].length,"a":-1}});holdsS[index][i]=undefined;}}
else{if(isUndefined(holdsN[index][i])){noteD[index].push({"when":{"n":n},"where":{"x":x}});}
else{noteD[index].push({"when":{"n":holdsN[index][i]},"where":{"x":x},"link":{"b":-1,"c":noteD[index].length,"a":noteD[index].length+1}});noteD[index].push({"when":{"n":n},"where":{"x":x},"link":{"b":noteD[index].length-1,"c":noteD[index].length,"a":-1}});holdsN[index][i]=undefined;}}}}}}}
break;}}
else{break;}}
for(var index=0;index<noteD.length;index++){data.push({"beat":beatS,"note":noteD[index],"effect":effectS,"info":mergeObject(info,{"key":key,"name":mode+(!isUndefined(difficulty)?" "+difficulty:"")+(!isUndefined(level)?level:"")+(noteD.length>1?" P"+index:""),"playMode":mode,"player":index,"difficulty":difficulty,"level":level},true)});}}
else{break;}}})();setRaw({"meta":meta,"data":[data]});};var fromTjaBuffer=function(buffer){var hBPM=120;var hBPN=4;var hOffset=0;var hDelay=0;var hGogoTime=0;var hScroll=1;var hBarLine=1;var meta={};var data=[];var game="Taiko";var time=0;var wave="";var bpm=hBPM;var bpn=hBPN;var offset=hOffset;var delay=hDelay;var gogoTime=hGogoTime;var scroll=hScroll;var barLine=hBarLine;var course=3;var side=2;var style=1;var level=0;var balloon=[];var songVol=100;var seVol=100;var demoStart=0;var life=0;var scoreInit=0;var scoreDiff=0;var scoreMode=1;var a=(function(){var r=buffer.getText().replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");for(var i=0;i<r.length;i++){if(r[i].slice(0,12).toUpperCase()=="#BRANCHSTART"){var j=(function(){for(var k=i+1;k<r.length;k++){if((r[i].slice(0,10).toUpperCase()=="#BRANCHEND")||(r[i].slice(0,4).toUpperCase()=="#END")){return k;}}})();var d=[];var c=0;for(var k=i+1;k<j;k++){switch(r[i].slice(0,2).toUpperCase()){case"#N":c=1;break;case"#E":c=2;break;case"#M":c=3;break;}
if(isUndefined(d[c])){d[c]=[];}
d[c].push[r[k]];}
r.splice(i,j-i);for(var k=0;k<d.length;k++){if(d[d.length-k-1].length>0){r.inserts(d[d.length-k-1],i);break;}}}}
for(var i=0;i<r.length;i++){if((i>0)&&(r[i-1].slice(0,4).toUpperCase()=="#END")){r.insert("0,",i-1);i+=1;}}
return r;})();var index=-1;var scripts=[];var bpms=[];var bpns=[];var delays=[];var gogoTimes=[];var scrolls=[];var barLines=[];var dLeft=true;var kLeft=true;var tLong5=-1;var tLong6=-1;var tLong7=-1;var tLong9=-1;var tBPM=hBPM;var tBPN=hBPN;var tGogoTime=hGogoTime;var tScroll=hScroll;var tBarLine=hBarLine;var toAxis=function(t){return(t*2+1)/(4*2);};for(var i=0;i<a.length;i++){var ln=a[i].indexOf("//");if(ln!=-1){a[i]=a[i].slice(0,ln);}
a[i]+=" ";var lc=a[i].indexOf(":");if(lc!=-1){var n=a[i].slice(0,lc).toUpperCase().trim();var v=a[i].slice(lc+1).trim();switch(n){case"GAME":game=v;break;case"WAVE":wave=v;case"BPM":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){hBPM=v;bpm=hBPM;}
break;case"OFFSET":v=parseFloat(v);if(!isNaN(v)){hOffset=Math.round(v*1000);offset=hOffset;}
break;case"COURSE":switch(v.toUpperCase().trim()){case"0":case"EASY":course=0;break;case"1":case"NORMAL":course=1;break;case"2":case"HARD":course=2;break;case"3":case"ONI":course=3;break;case"4":case"EDIT":course=4;break;case"5":case"TOWER":course=5;break;}
break;case"SIDE":switch(v.toUpperCase().trim()){case"1":case"NORMAL":side=0;break;case"2":case"EX":side=1;break;case"3":case"BOTH":side=2;break;}
break;case"STYLE":switch(v.toUpperCase().trim()){case"1":case"SINGLE":style=1;break;case"2":case"COUBLE":style=2;break;case"3":case"DOUPLE":style=3;break;}
break;case"LEVEL":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){level=v;}
break;case"BALLOON":v=v.split(",");for(var j=0;j<v.length;j++){if(!isNaN(v[j])&&(v[j]>=0)){balloon.push(v[j]);}}
break;case"SONGVOL":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){songVol=v;}
break;break;case"SEVOL":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){seVol=v;}
break;case"DEMOSTART":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){demoStart=v;}
break;case"LIFE":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){life=v;}
break;case"SCOREINIT":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){scoreInit=v;}
break;case"SCOREDIFF":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){scoreDiff=v;}
break;case"SCOREMODE":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){scoreMode=v;}
break;case"TITLE":meta["title"]=v;break;case"SUBTITLE":meta["subTitle"]=v;break;}}
else{if(a[i][0]=="#"){var ls=a[i].indexOf(" ",1);if(ls!=-1){var n=a[i].slice(1,ls).toUpperCase().trim();var v=a[i].slice(ls+1).trim();switch(n){case"START":index+=1;data[index]={"beat":[],"note":[],"effect":[],"status":[],"info":{}};if(wave!=""){data[index]["effect"]=[{"when":{"t":offset},"kind":"audio","path":wave}];}
data[index]["info"]["course"]=course;data[index]["info"]["side"]=side;data[index]["info"]["level"]=level;data[index]["info"]["playMode"]=(function(){switch(style){case 1:return"single";break;case 2:return"couple";break;case 3:return"douple";break;}
return"";})();data[index]["info"]["player"]=(function(){if(((style==2)||(style==3))&&(v.toUpperCase()=="P2")){return 1;}
else{return 0;}})();data[index]["info"]["name"]="C"+data[index]["info"]["course"]+",L"+data[index]["info"]["level"]+",S"+data[index]["info"]["side"]+",M"+style+(style!=1?",P"+data[index]["info"]["player"]:"");data[index]["info"]["balloon"]=balloon;data[index]["info"]["bgmVolumn"]=songVol.fDiv(100);data[index]["info"]["seVolumn"]=seVol.fDiv(100);data[index]["info"]["previewStart"]=demoStart;data[index]["info"]["life"]=life;data[index]["info"]["scoreInit"]=scoreInit;data[index]["info"]["scoreDiff"]=scoreDiff;data[index]["info"]["scoreMode"]=scoreMode;data[index]["beat"]=[{"when":{"t":time},"bpm":bpm,"bpn":bpn}];break;case"END":time=0;bpm=hBPM;bpn=hBPN;offset=hOffset;delay=hDelay;gogoTime=hGogoTime;scroll=hScroll;barLine=hBarLine;balloon=[];tLong5=-1;tLong6=-1;tLong7=-1;tLong9=-1;tBPM=hBPM;tBPN=hBPN;tGogoTime=hGogoTime;tScroll=hScroll;tBarLine=hBarLine;break;case"BPMCHANGE":v=parseFloat(v);if(!isNaN(v)&&(v>0)){bpm=v;}
break;case"MEASURE":var ld=v.indexOf("/");var d1=v.slice(0,ld).trim();var d2=v.slice(ld+1).trim();v=d1.fDiv(d2).fMul(4);if(!isNaN(v)&&(v>0)){bpn=v;}
break;case"DELAY":v=parseFloat(v);if(!isNaN(v)){delay+=v*1000|0;}
break;case"GOGOSTART":gogoTime=1;break;case"GOGOEND":gogoTime=0;break;case"SCROLL":v=parseFloat(v);if(!isNaN(v)){scroll=v;}
break;case"LEVELHOLD":case"SECTION":case"BRANCHSTART":case"BRANCHEND":case"BMSCROLL":case"HBSCROLL":break;case"BARLINEON":barLine=1;break;case"BARLINEOFF":barLine=0;break;}}}
else if(index!=-1){a[i]=a[i].toUpperCase().replace(/ /g,"");a[i]=(a[i]==","?"0,":a[i]);for(var j=0;j<a[i].length;j++){switch(a[i][j]){case",":if(game.toUpperCase()=="JUBE"){while(scripts.length%4!=0){scripts.push("0");bpms.push(bpm);bpns.push(bpn);delays.push(delay);gogoTimes.push(gogoTime);scrolls.push(scroll);barLines.push(barLine);}
var s=[];var bm=[];var bn=[];var d=[];var g=[];var sr=[];var bl=[];for(var k=0;k<scripts.length;k+=4){s.push(scripts[k]+scripts[k+1]+scripts[k+2]+scripts[k+3]);bm.push(bpms[k]);bn.push(bpns[k]);d.push(delays[k]);g.push(gogoTimes[k]);sr.push(scrolls[k]);bl.push(barLines[k]);}
scripts=s;bpms=bm;bpns=bn;delays=d;gogoTimes=g;scrolls=sr;barLines=bl;}
var p=(function(){var r=0;for(var k=0;k<scripts.length;k++){r=r.fAdd(bpns[k].fDiv(4).fDiv(bpms[k]));}
return r;})();var t=(function(){var r=[];var d=(function(){var r=0;for(var k=0;k<scripts.length;k++){r=r.fAdd((60000).fMul(bpns[k]).fDiv(bpms[k]).fDiv(scripts.length));}
return r;})();for(var k=0;k<scripts.length;k++){r[k]=bpns[k].fDiv(4).fDiv(bpms[k]).fDiv(p).fMul(d).fAdd(delays[k]);}
return r;})();for(var k=0;k<scripts.length;k++){if(game.toUpperCase()=="JUBE"){var b=["","","",""];for(var l=scripts[k].length-1;l>-1;l--){var s=parseInt(scripts[k][l],16).toString(2).padStart(4,"0");for(var m=0;m<s.length;m++){if(s[m]!="0"){data[index]["note"].push({"when":{"t":time},"where":{"x":toAxis(m),"y":toAxis(scripts[k].length-l-1)},"link":{"b":-1,"c":data[index]["note"].length,"a":-1}});}}}}
else{var endLong=(function(){switch(scripts[k]){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if((scripts[k]!="5")&&!isUndefined(tLong5)){var x=toAxis(1);data[index]["note"].push({"when":{"t":tLong5},"where":{"x":x},"link":{"b":-1,"c":data[index]["note"].length,"a":data[index]["note"].length+1},"flag":{"chain":true}});data[index]["note"].push({"when":{"t":time},"where":{"x":x},"link":{"b":data[index]["note"].length-1,"c":data[index]["note"].length,"a":-1}});tLong5=undefined;}
if((scripts[k]!="6")&&!isUndefined(tLong6)){var x=toAxis(2);data[index]["note"].push({"when":{"t":tLong6},"where":{"x":x},"link":{"b":-1,"c":data[index]["note"].length,"a":data[index]["note"].length+1},"flag":{"chain":true}});data[index]["note"].push({"when":{"t":time},"where":{"x":x},"link":{"b":data[index]["note"].length-1,"c":data[index]["note"].length,"a":-1}});tLong6=undefined;}
if((scripts[k]!="7")&&!isUndefined(tLong7)){var x=toAxis(0);data[index]["note"].push({"when":{"t":tLong7},"where":{"x":x},"link":{"b":-1,"c":data[index]["note"].length,"a":data[index]["note"].length+1},"flag":{"chain":true}});data[index]["note"].push({"when":{"t":time},"where":{"x":x},"link":{"b":data[index]["note"].length-1,"c":data[index]["note"].length,"a":-1}});tLong7=undefined;}
if((scripts[k]!="9")&&!isUndefined(tLong9)){var x=toAxis(3);data[index]["note"].push({"when":{"t":tLong9},"where":{"x":x},"link":{"b":-1,"c":data[index]["note"].length,"a":data[index]["note"].length+1},"flag":{"chain":true}});data[index]["note"].push({"when":{"t":time},"where":{"x":x},"link":{"b":data[index]["note"].length-1,"c":data[index]["note"].length,"a":-1}});tLong9=undefined;}
break;}})();switch(scripts[k]){case"1":data[index]["note"].push({"when":{"t":time},"where":{"x":toAxis((dLeft?1:2))},"link":{"b":-1,"c":data[index]["note"].length,"a":-1}});dLeft=!dLeft;break;case"2":data[index]["note"].push({"when":{"t":time},"where":{"x":toAxis((kLeft?0:3))},"link":{"b":-1,"c":data[index]["note"].length,"a":-1}});kLeft=!kLeft;break;case"3":data[index]["note"].push({"when":{"t":time},"where":{"x":toAxis(1)},"link":{"b":-1,"c":data[index]["note"].length,"a":-1}});data[index]["note"].push({"when":{"t":time},"where":{"x":toAxis(2)},"link":{"b":-1,"c":data[index]["note"].length,"a":-1}});break;case"4":data[index]["note"].push({"when":{"t":time},"where":{"x":toAxis(0)},"link":{"b":-1,"c":data[index]["note"].length,"a":-1}});data[index]["note"].push({"when":{"t":time},"where":{"x":toAxis(3)},"link":{"b":-1,"c":data[index]["note"].length,"a":-1}});break;case"5":if(isUndefined(tLong5)){tLong5=time;}
break;case"6":if(isUndefined(tLong6)){tLong6=time;}
break;case"7":if(isUndefined(tLong7)){tLong7=time;}
break;case"8":break;case"9":if(isUndefined(tLong9)){tLong9=time;}
break;}}
if((bpms[k]!=tBPM)||(bpns[k]!=tBPN)){data[index]["beat"].push({"when":{"t":time},"bpm":bpms[k],"bpn":bpns[k]});tBPM=bpms[k];tBPN=bpns[k];}
if(gogoTimes[k]!=tGogoTime){data[index]["status"].push({"when":{"t":time},"name":"taiko_gogotime","value":gogoTimes[k]});tGogoTime=gogoTimes[k];}
if(scrolls[k]!=tScroll){data[index]["beat"].push({"when":{"t":time},"fpn":scrolls[k]});tScroll=scrolls[k];}
if(barLines[k]!=tBarLine){data[index]["status"].push({"when":{"t":time},"name":"barLine","value":barLines[k]});tBarLine=barLines[k];}
time=time.fAdd(t[k]);}
scripts=[];bpms=[];bpns=[];delays=[];gogoTimes=[];scrolls=[];barLines=[];break;default:scripts.push(a[i][j]);bpms.push(bpm);bpns.push(bpn);delays.push(delay);gogoTimes.push(gogoTime);scrolls.push(scroll);barLines.push(barLine);break;}}}}}
if(game.toUpperCase()=="JUBE"){var isQuarterMeasure=(function(){for(var i=0;i<data.length;i++){if(data[index]["beat"][i]["bpn"]>1){return false;}}
return true;})();if(isQuarterMeasure){for(var i=0;i<data.length;i++){data[index]["beat"][i]["bpn"]=data[index]["beat"][i]["bpn"].fMul(4);}}}
setRaw({"meta":meta,"data":[data]});};var fromOjnBuffer=function(buffer){var readBuffer=function(n){var r=buffer.slice(p,p+n);p+=n;return r;};var readInt=function(n){var r=buffer.getInt(n,p,true);p+=n;return r;};var readFloat=function(n){var r=buffer.getFloat(n,p,true).toAbbreviated(6).toAccurated();p+=n;return r;};var readText=function(n){var r=buffer.getText(p,n);p+=n;return r;};var getGenre=function(code){var list=["Ballad","Rock","Dance","Techno","Hip-hop","Soul/R&B","Jazz","Funk","Classical","Traditional","Etc."];return(code<list.length?list[code]:"");};var getSuffix=function(index){var list=["_easy.o2jam","_normal.o2jam","_hard.o2jam","_cover.jpg","_cover.bmp"];return(index<list.length?list[index]:"");};var trackToX=function(track,key){return(track*2+1)/(key*2);};var p=0;var songId=readInt(4);var signature=readText(4);var encoderVersion=readFloat(4);var genre=getGenre(readInt(4));var bpm=readFloat(4);var noteLevels=[readInt(2),readInt(2),readInt(2),readInt(2)];var eventCounts=[readInt(4),readInt(4),readInt(4)];var noteCounts=[readInt(4),readInt(4),readInt(4)];var measureCounts=[readInt(4),readInt(4),readInt(4)];var blockCounts=[readInt(4),readInt(4),readInt(4)];var encoderVersionOld=readInt(2);var songIdOld=readInt(2);var genreOld=readBuffer(20);var imageSizeBmp=readInt(4);var noteVersion=readInt(4);var title=readText(64);var artist=readText(32);var maker=readText(32);var ojmFilename=readText(32);var imageSizeJpg=readInt(4);var noteDurations=[readInt(4),readInt(4),readInt(4)];var fileOffsets=[readInt(4),readInt(4),readInt(4),readInt(4)];fileOffsets[4]=fileOffsets[3]+imageSizeJpg;var fileSizes=[fileOffsets[1]-fileOffsets[0],fileOffsets[2]-fileOffsets[1],fileOffsets[3]-fileOffsets[2],imageSizeJpg,imageSizeBmp];var meta={"title":title,"artist":artist,"genre":genre,"author":maker};var file=(function(){var r=[];if(imageSizeJpg){r.push({"path":songId+".jpg","base64":buffer.slice(fileOffsets[3],fileOffsets[3]+imageSizeJpg).getBase64()});}
if(imageSizeBmp){r.push({"path":songId+".bmp","base64":buffer.slice(fileOffsets[3]+imageSizeJpg,fileOffsets[3]+imageSizeJpg+imageSizeBmp).getBase64()});}
return r;})();var data=(function(){var r=[];var key=7;for(var index=0;index<blockCounts.length;index++){r[index]={"beat":[],"note":[]};var beat=[];var note=[];var effect=[];p=fileOffsets[index];var actions=(function(){var v=[[],[],[],[],[],[],[]];for(var i=0;i<blockCounts[index];i++){var measure=readInt(4);var channel=readInt(2);var division=readInt(2);for(var j=0;j<division;j++){var n=measure.fAdd(j/division);switch(channel){case 0:var bpn=readFloat(4).fMul(4);if(bpn){beat.push({"when":{"n":n},"bpn":bpn});}
break;case 1:var bpm=readFloat(4);if(bpm){beat.push({"when":{"n":n},"bpm":bpm});}
break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:var id=readInt(2);var pan=readInt(1);var type=readInt(1);if(id){id-=1;if(type>=4){type=type%4;id+=1000;}
var track=channel-2;switch(type){case 0:case 2:case 3:v[track].push({"n":n,"type":type,"id":id});break;}}
break;case 9:var id=readInt(2);var pan=readInt(1);var type=readInt(1);if(id){id-=1;if(type>=4){type=type%4;id+=1000;}
effect.push({"when":{"n":n},"kind":"audio","path":id+".ogg"});}
break;default:var id=readInt(2);var pan=readInt(1);var type=readInt(1);break;}}}
return v;})();var notes=(function(){var v=[];for(var track=0;track<actions.length;track++){var longStart=-1;for(var i=0;i<actions[track].length;i++){switch(actions[track][i]["type"]){case 0:v.push({"n":actions[track][i]["n"],"track":track,"id":actions[track][i]["id"]});break;case 2:if(longStart==-1){longStart=actions[track][i]["n"];}
break;case 3:if(longStart!=-1){v.push({"n":longStart,"n2":actions[track][i]["n"],"track":track,"id":actions[track][i]["id"]});longStart=-1;}
break;}}}
var s=function(a,b){return(a["n"]-b["n"])||(a["track"]-b["track"])||((a["n2"]||0)-(b["n2"]||0));};v.sort(s);return v;})();for(var i=0;i<notes.length;i++){var x=trackToX(notes[i]["track"],key);var trigger=(!isUndefined(notes[i]["id"])?[{"kind":"audio","path":notes[i]["id"]+".ogg"}]:undefined);if((notes[i]["n2"])&&(notes[i]["n2"]>notes[i]["n"])){note.push({"when":{"n":notes[i]["n"]},"where":{"x":x},"link":{"b":-1,"c":note.length,"a":note.length+1},"trigger":trigger});note.push({"when":{"n":notes[i]["n2"]},"where":{"x":x},"link":{"b":note.length-1,"c":note.length,"a":-1}});}
else{note.push({"when":{"n":notes[i]["n"]},"where":{"x":x},"trigger":trigger});}}
if(imageSizeJpg){effect.push({"kind":"image","what":"back","path":songId+".jpg"});}
if(imageSizeBmp){effect.push({"kind":"image","what":"back","path":songId+".bmp"});}
r[index]={"beat":beat,"note":note,"effect":effect,"info":{"key":key,"course":index,"name":["easy","normal","hard"][index]}};}
return r;})();setRaw({"meta":meta,"data":[data],"file":file});};var fromOsuBuffer=function(buffer){var osu=(buffer.getText()+"\n[").replace(/\r/g,"\n").replace(/\n\n/g,"\n");var meta={};var beat=[];var beat2=[];var note=[];var effect=[];var status=[];var info={};var audioFilename="";var audioLeadIn=0;var mode=0;var sampleSets=[];var sampleIndexes=[];var getVolume=function(t){if(!isNaN(t)){for(var i=0;i<effect.length;i++){if((t>=effect[i]["when"]["t"])&&(effect[i]["kind"]=="player")&&(effect[i]["what"]=="back")){return volume;}}}
return 1;};var readArray=function(f){var r=[];var s=osu.extract("["+f+"]"+"\n","\n"+"[");if(s){r=s.split("\n");}
for(var i=0;i<r.length;i++){var l=r[i].indexOf("//");if(l!=-1){r[i]=r[i].slice(0,l);}
if(!r[i]){r.splice(i,1);i-=1;}}
return r;};var readInfos=function(data,group){for(var i=0;i<data.length;i++){var l=data[i].indexOf(":");var key=data[i].slice(0,l).trim();var value=data[i].slice(l+1).trim();if(key&&value){switch(group){case"General":switch(key){case"AudioFilename":audioFilename=value||(fileInfo.nameCore+".mp3");break;case"AudioLeadIn":audioLeadIn=parseInt(value)||0;break;case"PreviewTime":info["previewStart"]=parseFloat(value)||-1;break;case"Countdown":info["countdown"]=(parseInt(value)?1:0);break;case"SampleSet":status.push({"when":{"t":0},"name":"osu_sampleSet","value":(value||"Soft").toLowerCase()});break;case"StackLeniency":info["stackLeniency"]=parseFloat(value)||0.7;break;case"Mode":mode=parseInt(value)||mode;break;case"LetterboxInBreaks":info["letterboxInBreaks"]=(parseInt(value)?1:0);break;case"WidescreenStoryboard":info["widescreenStoryboard"]=(parseInt(value)?1:0);break;case"StoryFireInFront":info["storyFireInFront"]=(parseInt(value)?1:0);break;case"SpecialStyle":info["specialStyle"]=(parseInt(value)?1:0);break;case"EpilepsyWarning":info["epilepsyWarning"]=(parseInt(value)?1:0);break;case"UseSkinSprites":info["useSkinSprites"]=(parseInt(value)?1:0);break;case"EditorBookmarks":info["editorBookmarks"]=parseInt(value)||0;break;}
break;case"Editor":switch(key){case"Bookmarks":var v=[];var s=value.split(",");if(s.length==1){s=s[0].split(" ");}
for(var j=0;j<s.length;j++){var bookmark=parseInt(s[j]);if(bookmark||(bookmark>=0)){v.push(bookmark);}}
info["bookmarks"]=v;break;case"DistanceSpacing":info["distanceSpacing"]=parseFloat(value)||1;break;case"BeatDivisor":info["beatDivisor"]=parseInt(value)||2;break;case"GridSize":info["gridSize"]=parseInt(value)||4;break;case"TimelineZoom":info["timelineZoom"]=parseInt(value)||1;break;}
break;case"Metadata":switch(key){case"Title":meta["title"]=value||"";break;case"TitleUnicode":meta["title"]=meta["title"]||value||"";break;case"Artist":meta["artist"]=value||"";break;case"ArtistUnicode":meta["artist"]=meta["artist"]||value||"";break;case"Creator":meta["creator"]=value||"";break;case"Version":meta["version"]=value||"";break;case"Source":meta["source"]=value||"";break;case"Tags":var v=[];var s=value.split(",");if(s.length==1){s=s[0].split(" ");}
for(var j=0;j<s.length;j++){if(s[j]){v.push(s[j]);}}
meta["tag"]=v.join(",");break;case"BeatmapID":info["beatmapID"]=parseInt(value)||0;break;case"BeatmapSetID":info["beatmapSetID"]=parseInt(value)||-1;break;}
break;case"Difficulty":switch(key){case"HPDrainRate":info["hpDrainRate"]=parseInt(value)||5;break;case"CircleSize":info["circleSize"]=parseInt(value)||5;info["key"]=info["circleSize"];break;case"OverallDifficulty":info["overallDifficulty"]=parseInt(value)||5;break;case"ApproachRate":info["approachRate"]=parseInt(value)||5;break;case"SliderMultiplier":info["sliderMultiplier"]=parseFloat(value)||1.4;break;case"SliderTickRate":info["sliderTickRate"]=parseFloat(value)||1;break;}
break;}}}};var general=readArray("General");var editor=readArray("Editor");var metadata=readArray("Metadata");var difficulty=readArray("Difficulty");var events=readArray("Events");var timingPoints=readArray("TimingPoints");var colours=readArray("Colours");var hitObjects=readArray("HitObjects");var readGeneral=(function(){readInfos(general,"General");})();var readEditor=(function(){readInfos(editor,"Editor");})();var readMetadata=(function(){readInfos(metadata,"Metadata");})();var readDifficulty=(function(){readInfos(difficulty,"Difficulty");})();var readEvents=(function(){var width=640;var height=480;var ad=[];var toX=function(t){return(parseFloat(t)||0).fDiv(width+1);};var toY=function(t){return(parseFloat(t)||0).fDiv(height+1);};var getSymbol=function(t,k){var m=(function(){switch(k){case"type":return["Background","Video","Break","Colour","Sprite","Sample","Animation"];break;case"layer":return["Background","Fail","Pass","Foreground"];break;case"origin":return["TopLeft","Centre","CentreLeft","TopRight","BottomCentre","TopCentre","Custom","CentreRight","BottomLeft","BottomRight"];break;case"event":return[" F"," MX"," MY"," M"," S"," V"," R"," C"," P"," L"," T"];break;case"easing":return["","easeOut","easeIn"];break;case"loop":return["LoopForever","","LoopOnce"];break;}
return[];})();var l=m.indexOf(t||"");return(l!=-1?l:t|0);};var getValues=function(t,n){var v=[];var p=4;var getItems=(function(){while(true){var a=[];for(var j=0;j<n;j++){a[j]=parseFloat(t[p++]);if(v.length==1){a[j]=(!isNaN(a[j])?a[j]:v[v.length-1][j]);}
else{if(isNaN(a[j])){return v;}}}
v.push(a);}})();return v;};for(var i=0;i<events.length;i++){var d=events[i].split(",");if(d.length){var t=getSymbol(d[0],"type");switch(t){case 0:case 1:var layer=getSymbol(d[1],"layer");var filepath=(d[2].startsWith('"')&&d[2].endsWith('"')?d[2].slice(1,d[2].length-1):"");var x=parseFloat(d[3])||0;var y=parseFloat(d[4])||0;if(!isNaN(layer)&&(layer>=0)&&(layer<=3)&&filepath){var m=["back","miss","hit","fore"];effect.push({"when":{"t":0},"kind":(t==0?"iamge":"video"),"what":m[layer],"path":filepath,"where":{"x":toX(x),"y":toY(y)}});}
break;case 2:var time=parseFloat(d[1]);var time2=parseFloat(d[2]);if(!isNaN(time)&&!isNaN(time2)){status.push({"when":{"t":time},"name":"osu_berak","value":(time2-time)});}
break;case 3:var opacity=parseFloat(d[1]);var r=parseFloat(d[2]);var g=parseFloat(d[3]);var b=parseFloat(d[4]);if(!isNaN(opacity)&&!isNaN(r)&&!isNaN(g)&&!isNaN(b)){info["colorBack"]={"a":opacity.fDiv(100),"r":r.limit(0,255).fDiv(256),"g":g.limit(0,255).fDiv(256),"b":b.limit(0,255).fDiv(256)};}
break;case 4:case 6:var layer=getSymbol(d[1],"layer");var origin=getSymbol(d[2],"origin");var filepath=(d[3].startsWith('"')&&d[3].endsWith('"')?d[3].slice(1,d[3].length-1):"");var x=parseFloat(d[4])||0;var y=parseFloat(d[5])||0;var frameCount=(t==6?d[6]:0);var frameDelay=(t==6?d[7]:0);var loopType=(t==6?(getSymbol(d[8],"loop")|0)-1:0);var triggers=[];var item={"layer":layer,"origin":origin,"filepath":filepath,"x":x,"y":y,"frameCount":frameCount,"frameDelay":frameDelay,"loopType":loopType,"events":[]};var readEvent=function(s,time){var time=(arguments.length>1?arguments[1]:0);var t=(arguments.length>2?arguments[2]:false);var e=s.split(",");var event=getSymbol(e[0],"event");var easing=getSymbol(e[1],"easing");var starttime=parseFloat(e[2]);if(isNaN(starttime)){return;}
var endtime=parseFloat(e[3])||starttime;var duration=endtime-starttime;starttime+=time;endtime+=time;var setValues=function(v){var isXY=(arguments.length>1?arguments[1]:false);if(v.length>1){if(isXY){for(var j=0;j<v.length;j++){v[j][0]=(isUndefined(v[j][0])?v[j][0]:toX(v[j][0]));v[j][1]=(isUndefined(v[j][1])?v[j][1]:toY(v[j][1]));}}
item["events"]=item["events"]||[];item["events"][event]=item["events"][event]||[];var l=(function(){for(var j=0;j<item["events"][event].length;j++){if((item["events"][event][j]["duration"]==duration)&&(item["events"][event][j]["easing"]==easing)&&(item["events"][event][j]["starttime"]+item["events"][event][j]["duration"]*item["events"][event][j]["values"].length==starttime)&&item["events"][event][j]["values"][item["events"][event][j]["values"].length-1].equal(v)){return j;}}
return-1;})();if(l!=-1){item["events"][event][l]["values"].concat(v);}
else{item["events"][event].push({"starttime":starttime,"duration":duration,"easing":easing,"values":v});}}};switch(event){case 0:setValues(getValues(e,1));break;case 1:setValues(getValues(e,1),true);break;case 2:setValues(getValues(e,1),true);break;case 3:setValues(getValues(e,2),true);break;case 4:setValues(getValues(e,1));break;case 5:setValues(getValues(e,2));break;case 6:setValues(getValues(e,1));break;case 7:setValues(getValues(e,3));break;case 8:setValues([[e[4]],[e[4]]]);break;case 9:var starttime=parseFloat(e[1]);var loopcount=parseInt(e[2]);var a=[];while((i+1<events.length)&&events[i+1].startsWith(" ")){i+=1;a.push(events[i].slice((t?2:1)));}
var loopDuration=(function(){var v=0;for(var k=0;k<a.length;k++){var e=a[k].split(",");var et=parseFloat(e[3])||parseFloat(e[2])||0;v=(et>v?et:v);}
return v;})();for(var j=0;j<loopcount;j++){for(var k=0;k<a.length;k++){readEvent(a[k],starttime+loopDuration*j,t);}}
break;case 10:var triggerName=e[1];var triggerStart=parseFloat(e[2]);var triggerEnd=parseFloat(e[3]);if(isNaN(triggerStart)||isNaN(triggerEnd)){break;}
var w=(function(){var v="";switch(triggerName){case"HitSoundClap":v="osu_clap";break;case"HitSoundFinish":v="osu_finish";break;case"HitSoundWhistle":v="osu_whistle";break;case"Passing":v="hit";break;case"Failing":v="miss";break;}
return v;})();var s=[];while((i+1<events.length)&&events[i+1].startsWith(" ")){i+=1;s.push(events[i].slice(1));}
triggers.push({"events":s,"triggerName":w,"triggerStart":triggerStart,"triggerEnd":triggerEnd});break;}};while((i+1<events.length)&&events[i+1].startsWith(" ")){i+=1;readEvent(events[i]);}
ad.push(item);for(var j=0;j<triggers.length;j++){var item={"layer":layer,"origin":origin,"filepath":filepath,"x":x,"y":y,"frameCount":frameCount,"frameDelay":frameDelay,"loopType":loopType,"events":[],"triggerName":triggers[j]["triggerName"],"triggerStart":triggers[j]["triggerStart"],"triggerEnd":triggers[j]["triggerEnd"]};for(var k=0;k<triggers[j]["events"].length;k++){readEvent(triggers[j]["events"][k]);}
ad.push(item);}
break;case 5:var time=parseFloat(d[1]);var layer=getSymbol(d[2],"layer");var filepath=(d[3].startsWith('"')&&d[3].endsWith('"')?d[3].slice(1,d[3].length-1):"");var volume=parseFloat(d[4])||getVolume(time).fMul(100);if(!isNaN(time)&&!isNaN(layer)&&(layer>=0)&&(layer<=3)&&filepath&&!isNaN(volume)){var m=["back","miss","hit","fore"];effect.push({"when":{"t":time},"kind":"audio","what":m[layer],"path":filepath,"volume":volume.limit(0,100).fDiv(100)});}
break;}}}
for(var index=0;index<ad.length;index++){var what=(function(){return["back","miss","hit","fore"][ad[index]["layer"]]||"";})();var origin=(function(){var bx=toX(width);var by=toY(height);var v={"x":0,"y":by};var o=ad[index]["origin"];switch(o){case 0:v={"x":0,"y":by};break;case 1:v={"x":0.5,"y":0.5};break;case 2:v={"x":0,"y":0.5};break;case 3:v={"x":bx,"y":by};break;case 4:v={"x":0.5,"y":0};break;case 5:v={"x":0.5,"y":by};break;case 6:v={"x":0,"y":by};break;case 7:v={"x":bx,"y":0.5};break;case 8:v={"x":0,"y":0};break;case 9:v={"x":bx,"y":0};break;}
return v;})();var path=ad[index]["filepath"];var where={"x":toX(ad[index]["x"]),"y":toY(ad[index]["y"])};var frame=ad[index]["frameCount"]|0;var interval=ad[index]["frameDelay"]|0;var loop=ad[index]["loopType"]|0;var triggerName=ad[index]["triggerName"];var triggerStart=ad[index]["triggerStart"];var triggerEnd=ad[index]["triggerEnd"];var change=[];for(var e=0;e<ad[index]["events"].length;e++){ad[index]["events"][e]=ad[index]["events"][e]||[];for(var i=0;i<ad[index]["events"][e].length;i++){var easing=(function(){var v="";switch(ad[index]["events"][e][i]["easing"]){case 1:v="easeOut";break;case 2:v="easeIn";break;}
return v;})();var getWhen=function(n){return{"t":ad[index]["events"][e][i]["starttime"]+ad[index]["events"][e][i]["duration"]*n};};var getValue=function(n){var v={};switch(e){case 0:v["opacity"]=ad[index]["events"][e][i]["values"][n][0];break;case 1:v["where"]={"x":ad[index]["events"][e][i]["values"][n][0]};break;case 2:v["where"]={"y":ad[index]["events"][e][i]["values"][n][1]};break;case 3:v["where"]={"x":ad[index]["events"][e][i]["values"][n][0],"y":ad[index]["events"][e][i]["values"][n][1]};break;case 4:v["size"]={"w":ad[index]["events"][e][i]["values"][n][0],"h":ad[index]["events"][e][i]["values"][n][0]};break;case 5:v["size"]={"w":ad[index]["events"][e][i]["values"][n][0],"h":ad[index]["events"][e][i]["values"][n][1]};break;case 6:v["angle"]=ad[index]["events"][e][i]["values"][n][0];break;case 7:v["backColor"]={"a":255,"r":ad[index]["events"][e][i]["values"][n][0],"g":ad[index]["events"][e][i]["values"][n][1],"b":ad[index]["events"][e][i]["values"][n][2]};break;case 8:var p=(function(){switch(ad[index]["events"][e][i]["values"][n][0]){case"H":return"horizontalFlip";break;case"V":return"verticalFlip";break;case"A":return"additiveBlend";break;}})();if(p){v["parameter"]=v["parameter"]||{};v["parameter"][p]=(n?true:false);}
break;}
return v;};for(var j=1;j<ad[index]["events"][e][i]["values"].length;j++){change.push({"easing":easing,"when":getWhen(j-1),"when2":getWhen(j),"value":getValue(j-1),"value2":getValue(j)});}}}
effect.push({"kind":"image","path":path,"what":what,"while":triggerName,"when":(!isUndefined(triggerStart)?{"t":triggerStart}:undefined),"duration":(!isUndefined(triggerStart)&&!isUndefined(triggerEnd)?triggerEnd-triggerStart:undefined),"origin":origin,"where":where,"interval":interval,"frame":frame,"loop":loop,"change":change});}})();var readTimingPoints=(function(){var a=(function(){var v=[];var s=function(a,b){return a[0]-b[0];};for(var i=0;i<timingPoints.length;i++){var d=timingPoints[i].split(",");d[0]=parseFloat(d[0]);if(isNaN(d[0])){continue;}
v.push(d);}
return v.sort(s);})();var beats=[];var scrolls=[];var volumes=[];var kiaiModes=[];for(var i=0;i<a.length;i++){var inherited=parseInt(a[i][6])||0;var offset=a[i][0];var mspb=parseFloat(a[i][1])||(inherited?500:-100);var meter=parseFloat(a[i][2])||4;var sampleSet=(function(){switch(parseInt(a[i][3])){case 1:return"normal";break;case 2:return"soft";break;case 3:return"drum";break;default:return"soft";break;}})();var sampleIndex=parseInt(a[i][4])||0;var volume=(function(){var v=parseFloat(a[i][5])||100;return v.limit(0,100).fDiv(100);})();var kiaiMode=parseInt(a[i][7])||0;var bpm=(function(){if(inherited&&(mspb>0)){return(60000).fDiv(mspb).toAbbreviated(12).toAccurated();}})();var scroll=(function(){if(!inherited&&(mspb<0)){return(-100).fDiv(mspb).toAbbreviated(12).toAccurated();}})();if(!beats.length||((!isUndefined(bpm)&&(bpm!=beats[beats.length-1][1]))||(meter!=beats[beats.length-1][2]))){beats.push([offset,bpm,meter,bpm]);}
if((!scrolls.length||(scroll!=scrolls[scrolls.length-1][1]))&&!isUndefined(scroll)){scrolls.push([offset,scroll]);}
if(!volumes.length||(volume!=volumes[volumes.length-1][1])){volumes.push([offset,volume]);}
if(!sampleSets.length||(sampleSet!=sampleSets[sampleSets.length-1][1])){sampleSets.push([offset,sampleSet]);}
if(!sampleIndexes.length||(sampleIndex!=sampleIndexes[sampleIndexes.length-1][1])){sampleIndexes.push([offset,sampleIndex]);}
if(!kiaiModes.length||(kiaiMode!=kiaiModes[kiaiModes.length-1][1])){kiaiModes.push([offset,kiaiMode]);}}
if(beats[0][0]>0){var bpm=(60000).fDiv(beats[0][0]).fDiv(4);while(bpm<100){bpm=bpm.fMul(2);}
while(bpm>=200){bpm=bpm.fDiv(2);}
beats.unshift([0,bpm,4,beats[0][3]]);}
for(var i=1;i<beats.length;i++){beats[i][1]=(isUndefined(beats[i][1])?beats[i-1][1]:beats[i][1]);beats[i][2]=(isUndefined(beats[i][2])?beats[i-1][2]:beats[i][2]);beats[i][3]=(isUndefined(beats[i][3])?beats[i-1][3]:beats[i][3]);}
for(var i=0;i<beats.length;i++){beat.push({"when":{"t":beats[i][0]},"bpm":beats[i][1],"bpn":beats[i][2],"fpn":beats[i][3].fDiv(beats[i][1])});}
for(var i=0;i<beat.length;i++){beat[i]["when"]["b"]=beatFromTime({"beat":beat},beat[i]["when"]["t"]);}
for(var i=0;i<scrolls.length;i++){beat2.push({"when":{"t":scrolls[i][0]},"fpn":scrolls[i][1]});}
for(var i=0;i<volumes.length;i++){effect.push({"when":{"t":volumes[i][0]},"kind":"player","what":"back","volume":volumes[i][1]});}
for(var i=0;i<sampleSets.length;i++){status.push({"when":{"t":sampleSets[i][0]},"name":"osu_sampleSet","value":sampleSets[i][1]});}
for(var i=0;i<sampleIndexes.length;i++){status.push({"when":{"t":sampleIndexes[i][0]},"name":"osu_sampleIndex","value":sampleIndexes[i][1]});}
for(var i=0;i<kiaiModes.length;i++){status.push({"when":{"t":kiaiModes[i][0]},"name":"osu_kiaiMode","value":kiaiModes[i][1]});}})();var readColours=(function(){info["colorGroup"]=(function(){var r=[];for(var i=0;i<colours.length;i++){var l=colours[i].split(":");if(l.length==2){l[0]=l[0].trim();l[1]=l[1].trim();var c=l[1].split(",");for(var j=0;j<3;j++){c[j]=parseInt((c[j]||"").trim())||0;}
if(l[0].slice(0,5)=="Combo"){var n=parseInt(l[0].slice(5,l[0].length));if(!isNaN(n)){r[n]={"a":1,"r":c[0].limit(0,255).fDiv(256),"g":c[1].limit(0,255).fDiv(256),"b":c[2].limit(0,255).fDiv(256)};}}}}
for(var i=0;i<r.length;i++){if(!r[i]){r.splice(i,1);i-=1;}}
return r;})();})();var readHitObjects=(function(){var posToX=function(pos){return(parseFloat(pos)||0).limit(0,512).fDiv(513);};var posToY=function(pos){return(384).fSub((parseFloat(pos)||0).limit(0,384)).fDiv(385);};var trackToX=function(track,key){return(track*2+1)/(key*2);};var getHitSound=function(flag){var isSlide=(arguments.length>1?arguments[1]:false);flag=flag||0;var v=[];var b=new Uint8Array(1).setInt8(parseInt(flag)||0).getBits();var m=["normal","whistle","finish","clap"];for(var j=0;j<m.length;j++){if(b[j]){var s=m[j];if(isSlide){s=(s=="normal"?"slide":s);}
v.push(s);}}
return v;};var getSampleSet=function(flag){var m=["auto","normal","soft","drum"];flag=flag||0;return m[flag]||m[0];};var inheritedSampleSet=function(set,time){if(set=="auto"){for(var j=0;j<sampleSets.length;j++){if((time>=sampleSets[j][0])&&((j>=sampleSets.length-1)||(time<sampleSets[j+1][0]))){set=sampleSets[j][1];break;}}}
return set;};var additionSampleSet=function(sampleSet,hitSound,additionSet){return((hitSound=="")||(hitSound=="normal")||(additionSet=="auto")?sampleSet:additionSet);};var inheritedCustomIndex=function(index,time){if(index==0){for(var j=0;j<sampleIndexes.length;j++){if((time>=sampleIndexes[j][0])&&((j>=sampleIndexes.length-1)||(time<sampleIndexes[j+1][0]))){index=sampleIndexes[j][1];break;}}}
return index;};var dLeft=true;var kLeft=true;var a=(function(){var v=[];for(var i=0;i<hitObjects.length;i++){if(hitObjects[i]){var d=hitObjects[i].split(",");d[2]=parseFloat(d[2]);if(isNaN(d[2])){continue;}
v.push(d);}}
return v;})();for(var i=0;i<a.length;i++){var time=a[i][2];var x=posToX(a[i][0]);var y=posToY(a[i][1]);var type=new Uint8Array(1).setInt8(parseInt(a[i][3])||0).getBits();var action=(function(){switch(1){case type[0]:return"circle";break;case type[1]:return"slider";break;case type[3]:return"spinner";break;case type[7]:return"hold";break;}
return"";})();var newCombo=(function(){var v=0;if(type[2]){v+=1;v+=type[4]*1+type[5]*2+type[6]*4;}
return v;})();var taikoType=(function(){var t=(parseInt(a[i][4])||0)%16;switch(t){case 0:case 1:return"don";break;case 2:case 3:case 8:case 9:case 10:case 11:return"katsu";break;case 4:case 5:return"don_large";break;case 6:case 7:case 12:case 13:case 14:case 15:return"katsu_large";break;}})();var hitSound=getHitSound(a[i][4]);var extras=(function(){var v=[];var e=(function(){switch(action){case"circle":return a[i][5];break;case"slider":return a[i][10];break;case"spinner":return a[i][6];break;case"hold":var l=a[i][5].indexOf(":");if(l!=-1){return a[i][5].slice(l+1);}
break;}})();var d=(e||"").split(":");for(var j=0;j<5;j++){switch(j){case 0:case 1:case 2:case 3:v[j]=parseInt(d[j])||0;break;case 4:v[j]=d[j]||"";break;}}
return v;})();var sampleSet=inheritedSampleSet(getSampleSet(extras[0]),time);var additionSet=getSampleSet(extras[1]);var customIndex=inheritedCustomIndex(extras[2],time);var sampleVolume=(function(){var v=parseFloat(extras[3])||100;return v.limit(0,100).fDiv(100);})();var filename=extras[4];var repeat=(action=="slider"?parseInt(a[i][6])||1:1);var pixelLength=(action=="slider"?parseFloat(a[i][7])||0:0);var edgeHitSounds=(function(){var v=[];if(action=="slider"){var d=(a[i][8]||"").split("|");for(var j=0;j<repeat+1;j++){v.push(getHitSound(d[j],true));}}
return v;})();var edgeAdditions=(function(){var v=[];if(action=="slider"){var d=(a[i][9]||"").split("|");for(var j=0;j<repeat+1;j++){var s=(d[j]||"").split(":");var ss=getSampleSet(s[0]);ss=(ss=="auto"?sampleSet:ss);var as=getSampleSet(s[1]);as=(as=="auto"?additionSet:as);v.push([ss,as]);}}
return v;})();var endTime=(function(){switch(action){case"slider":return timeFromBeat({"beat":beat},beatFromTime({"beat":beat},time).fAdd(pixelLength.fDiv(info["sliderMultiplier"]).fDiv(100)));break;case"spinner":return parseFloat(a[i][5])||0;break;case"hold":var l=a[i][5].indexOf(":");return parseFloat(a[i][5].slice(0,(l!=-1?l:a[i][5].length)))||0;break;}
return 0;})();var trigger=(function(){var v=[];if(hitSound.length){for(var j=0;j<hitSound.length;j++){v.push({"kind":"audio","path":filename||(sampleSet+"-"+(action=="slider"?"slider":"hit")+hitSound[j]+(customIndex>1?customIndex:"")+".wav"),"volume":sampleVolume,"sampleSet":additionSampleSet(sampleSet,hitSound[j],additionSet),"sampleSound":hitSound[j],"sampleIndex":customIndex});}}
else{var hs="";v.push({"kind":"audio","path":filename,"volume":sampleVolume,"sampleSet":additionSampleSet(sampleSet,hs,additionSet),"sampleSound":hs,"sampleIndex":customIndex});}
return v;})();switch(action){case"circle":if(mode!=1){note.push({"when":{"t":time},"where":{"x":x,"y":y},"trigger":trigger,"flag":{"colorSkip":newCombo}});}
else{switch(taikoType){case"don":note.push({"when":{"t":time},"where":{"x":trackToX((dLeft?1:2),4),"y":y},"trigger":trigger,"flag":{"colorSkip":newCombo}});dLeft=!dLeft;break;case"katsu":note.push({"when":{"t":time},"where":{"x":trackToX((kLeft?0:3),4),"y":y},"trigger":trigger,"flag":{"colorSkip":newCombo}});kLeft=!kLeft;break;case"don_large":note.push({"when":{"t":time},"where":{"x":trackToX(1,4),"y":y},"trigger":trigger,"flag":{"colorSkip":newCombo}});note.push({"when":{"t":time},"where":{"x":trackToX(2,4),"y":y},"trigger":trigger,"flag":{"colorSkip":newCombo}});break;case"katsu_large":note.push({"when":{"t":time},"where":{"x":trackToX(0,4),"y":y},"trigger":trigger,"flag":{"colorSkip":newCombo}});note.push({"when":{"t":time},"where":{"x":trackToX(3,4),"y":y},"trigger":trigger,"flag":{"colorSkip":newCombo}});break;}}
break;case"slider":for(var j=0;j<repeat+1;j++){var getLine=function(t,et,r){if(action=="slider"){var d=a[i][5].split("|");if(d.length>1){var type=(function(){switch(d[0].trim()){case"L":return"linear";break;case"P":return"perfect";break;case"B":return"bezier";break;case"C":return"catmull";break;}
return"";})();var vector=(function(d){var v=[];var w={"where":{"x":x,"y":y}};for(var j=0;j<d.length;j++){if(j){var p=d[j].split(":");var w={"where":{"x":posToX(p[0]),"y":posToY(p[1])}};}
if(r){v.unshift(w);}
else{v.push(w);}}
var a=[];var s=0;for(var j=0;j<v.length;j++){var d=(j==0?0:Math.getPythagorean(v[j]["where"]["x"].fSub(v[j-1]["where"]["x"]),v[j]["where"]["y"].fSub(v[j-1]["where"]["y"])));s=s.fAdd(d);a.push(s);}
for(var j=0;j<v.length;j++){v[j]["when"]={"t":t.fAdd(a[j].fDiv(s).fMul(et.fSub(t)))};}
return v;})(d);return{"type":type,"vector":vector};}}
return{};};var tg=(function(){var v=[];for(var k=0;k<edgeHitSounds[j].length;k++){v.push({"kind":"audio","path":filename||(edgeAdditions[j][0]+"-slider"+edgeHitSounds[j][k]+(customIndex>1?customIndex:"")+".wav"),"volume":sampleVolume,"sampleSet":additionSampleSet(edgeAdditions[j][0],edgeHitSounds[j][k],edgeAdditions[j][1]),"sampleSound":edgeHitSounds[j][k],"sampleIndex":customIndex});}
return v;})();var t=time.fAdd(endTime.fSub(time).fDiv(repeat).fMul(j));var et=time.fAdd(endTime.fSub(time).fDiv(repeat).fMul(j+1));var line=getLine(t,et,j%2!=0);if(!j){note.push({"when":{"t":t},"where":{"x":x,"y":y},"link":{"b":-1,"c":note.length,"a":note.length+1},"line":{"vector":line["vector"],"type":line["type"]},"trigger":tg,"flag":{"colorSkip":newCombo}});}
else{note.push({"when":{"t":t},"where":{"x":x,"y":y},"link":{"b":note.length-1,"c":note.length,"a":(j<repeat?note.length+1:-1)},"line":(j<repeat?{"vector":line["vector"],"type":line["type"]}:undefined),"trigger":tg});}}
break;case"spinner":case"hold":note.push({"when":{"t":time},"where":{"x":x,"y":y},"link":{"b":-1,"c":note.length,"a":note.length+1},"trigger":trigger,"flag":{"colorSkip":newCombo}});note.push({"when":{"t":endTime},"where":{"x":x,"y":y},"link":{"b":note.length-1,"c":note.length,"a":-1}});break;}}})();var setAudio=(function(){effect.unshift({"when":{"t":audioLeadIn},"kind":"audio","path":audioFilename});})();setRaw({"meta":meta,"data":[[{"beat":beat.concat(beat2),"note":note,"effect":effect,"status":status,"info":info}]]});};var fromXmlBuffer=function(buffer){var trackToX=function(track,key){return(track*2+1)/(key*2);};var readData=function(t,m,n){return(t&&t[m]&&t[m][n]?t[m][n]:undefined);};var readString=function(t,m,n){return(t&&t[m]&&t[m][n]&&t[m][n]["textContent"]?t[m][n]["textContent"]:"");};var readInt=function(t,m,n){var s=readString(t,m,n);var v=parseInt(s||"");return v||0;};var readFloat=function(t,m,n){var s=readString(t,m,n);var v=parseFloat(s||"");return v||0;};var type=fileInfo.type;switch(type){case"yddr":case"ydsd":var xml=fileInfo.json||(type=="ydsd"?new Uint8Array().fromBase64(fileInfo.text||buffer.getText()).cryptDES(false,new Uint8Array().fromText(new Uint8Array().fromText((3263047).toString(16)).getBase64())):buffer).unserializeXml();var a=(xml["beats"]&&xml["beats"]["children"]&&xml["beats"]["children"]["beat"]?xml["beats"]["children"]["beat"]:[]);var d=[];var note=[];var key=0;for(var i=0;i<a.length;i++){var time=readString(a[i],"attributes","time");var type=readString(a[i],"attributes","type").split("$");time=parseInt(time);if(isNaN(time)){continue;}
for(var j=0;j<type.length;j++){var t=type[j].split("_");switch(t.length){case 1:var track=parseFloat(t[0]);if(isNaN(track)){continue;}
if(key<track){key=track;}
d.push([time,0x00,track,time]);break;case 2:var track=parseFloat(t[0]);if(isNaN(track)){continue;}
if(key<track){key=track;}
var time2=parseFloat(t[1]);if(isNaN(time2)){continue;}
time2=time2.fAdd(time);d.push([time,0x02,track,time2]);break;}}}
for(var i=0;i<d.length;i++){switch(d[i][1]){case 0x00:note.push({"when":{"t":d[i][0]},"where":{"x":trackToX(d[i][2]-1,key)},"link":{"b":-1,"c":note.length,"a":-1}});break;case 0x02:note.push({"when":{"t":d[i][0]},"where":{"x":trackToX(d[i][2]-1,key)},"link":{"b":-1,"c":note.length,"a":note.length+1}});note.push({"when":{"t":d[i][3]},"where":{"x":trackToX(d[i][2]-1,key)},"link":{"b":note.length-1,"c":note.length,"a":-1}});break;}}
setRaw({"data":[[{"note":note,"info":{"key":key}}]]});break;case"mde":var xml=fileInfo.json||buffer.unserializeXml();var length=readFloat(xml["CTimeStream"],"children","mLength")*1000;var songName=readString(xml["CTimeStream"],"children","mSongName");var delay=readFloat(xml["CTimeStream"],"children","mStartDelay")*1000;var bpm=readFloat(xml["CTimeStream"],"children","mBPM");var bpmList=(function(){var bpmData=readData(readData(xml["CTimeStream"],"children","mBPMList"),"children","CNoteBPMData")||[];var v=[];for(var i=0;i<bpmData.length;i++){var index=readInt(bpmData[i],"children","mIdx");var tick=readInt(bpmData[i],"children","mTick");var bpm=readFloat(bpmData[i],"children","mBPM");if(bpm>0){v.push([index,tick.fSub(delay),bpm]);}}
v=v.sort(SortNumbers).map(function(a){return a.slice(1);});return v;})();var notes=(function(){var noteBase=readData(readData(xml["CTimeStream"],"children","mNotes"),"children","CNoteBase")||[];var v=[];for(var i=0;i<noteBase.length;i++){var type=readString(noteBase[i],"attributes","xsi:type");var index=readInt(noteBase[i],"children","mIdx");var tick=readInt(noteBase[i],"children","mTick");var pos=(function(){var s=readData(noteBase[i],"children","mPos");var x=readFloat(s,"children","x");var y=readFloat(s,"children","y");return[x,y];})();var slideDirection=readString(noteBase[i],"children","mSlideDirection")||"";var isCircleTail=readString(noteBase[i],"children","mIsCircleTail")||"";var isCircleClockwise=readString(noteBase[i],"children","mIsCircleClockwise")||"";var points=(function(){var v=[];var s=(readData(noteBase[i],"children","mPoints")||{})["Vector2"]||[];if(s.length){for(var j=0;j<s.length;j++){var x=readInt(s[j],"children","x");var y=readInt(s[j],"children","y");v.push([x,y]);}
if(!v.length||((v[0][0]!=pos[0])||(v[0][1]!=pos[1]))){v.unshift(pos);}}
return v;})();var endTick=readFloat(noteBase[i],"children","mEndTick")||tick;var isHeadFollowType=readString(noteBase[i],"children","mIsHeadFollowType")||"";var judgeCnt=readInt(noteBase[i],"children","mJudgeCnt")||-1;v.push([index,type,tick.fSub(delay),pos,points,endTick.fSub(delay),slideDirection,(isCircleTail=="true"?isCircleClockwise:""),(type=="CNoteLong"?isHeadFollowType:""),judgeCnt]);}
v=v.sort(SortNumbers).map(function(a){return a.slice(1);});return v;})();var canvasSize=(function(){var s=readData(xml["CTimeStream"],"children","mCanvasSize");var x=readFloat(s,"children","x")||3840;var y=readFloat(s,"children","y")||2560;return[x,y];})();var defaultCamSize=readFloat(xml["CTimeStream"],"children","mDefaultCamSize");var camList=(function(){var noteCamData=readData(readData(xml["CTimeStream"],"children","mCamList"),"children","CNoteCamData")||[];var v=[];for(var i=0;i<noteCamData.length;i++){var index=readInt(noteCamData[i],"children","mIdx");var tick=readInt(noteCamData[i],"children","mTick");var pos=(function(){var s=readData(noteCamData[i],"children","mPos");var x=readFloat(s,"children","x");var y=readFloat(s,"children","y");return[x,y];})();var size=readFloat(noteCamData[i],"children","mSize");if(size>0){v.push([index,tick.fSub(delay),pos,size]);}}
v=v.sort(SortNumbers).map(function(a){return a.slice(1);});if(!v.length||(v[0][0]>0)||(v[0][1][0]!=canvasSize[0]/2)||(v[0][1][1]!=canvasSize[1]/2)||(v[0][2]!=defaultCamSize)){v.unshift([0,[canvasSize[0]/2,canvasSize[1]/2],defaultCamSize]);}
return v;})();var getCam=function(t){var cL=[];var cR=[];if(t<camList[0][0]){cL=[0,[canvasSize[0]/2,canvasSize[1]/2],defaultCamSize];cR=[camList[0][0],[camList[0][1][0],camList[0][1][1]],camList[0][2]];}
else if(t>=camList[camList.length-1][0]){cL=[camList[camList.length-1][0],[camList[camList.length-1][1][0],camList[camList.length-1][1][1]],camList[camList.length-1][2]];cR=[camList[camList.length-1][0],[camList[camList.length-1][1][0],camList[camList.length-1][1][1]],camList[camList.length-1][2]];}
else{for(var i=0;i<camList.length-1;i++){if((camList[i][0]<=t)&&(camList[i+1][0]>t)){cL=[camList[i][0],[camList[i][1][0],camList[i][1][1]],camList[i][2]];cR=[camList[i+1][0],[camList[i+1][1][0],camList[i+1][1][1]],camList[i+1][2]];break;}}}
var r=(cR[0]==cL[0]?0:t.fSub(cL[0]).fDiv(cR[0].fSub(cL[0])));var x=cL[1][0].fAdd(cR[1][0].fSub(cL[1][0]).fMul(r));var y=cL[1][1].fAdd(cR[1][1].fSub(cL[1][1]).fMul(r));var s=cL[2].fAdd(cR[2].fSub(cL[2]).fMul(r));return[t,[x,y],s];}
var transPos=function(t,p){var limit=(arguments.length>2?arguments[2]:false);var cam=getCam(t);var x=cam[1][0];var y=cam[1][1];var s=cam[2];var rx=p[0].fSub(x.fSub(s.fMul(1.5))).fDiv(s.fMul(3));var ry=p[1].fSub(y.fSub(s)).fDiv(s.fMul(2));if(limit){if((rx<0)||(rx>=1)||(ry<0)||(ry>=1)){var rr=1;while(((rx<0)&&((0).fSub(rx).fDiv(rr)>=1))||((ry<0)&&((0).fSub(ry).fDiv(rr)>=1))||((rx>=1)&&(rx.fDiv(rr)>=1))||((ry>=1)&&(ry.fDiv(rr)>=1))){rr=rr.fAdd(1);}
rx=rx.fDiv(rr).fAdd(1).fDiv(2);ry=ry.fDiv(rr).fAdd(1).fDiv(2);}}
var scaleY=2/3;var offsetY=-2/30;ry=(0.5).fSub((0.5).fSub(ry).fAdd(offsetY).fDiv(scaleY));return[rx,ry];};var beat=(function(){var v=[];for(var i=0;i<bpmList.length;i++){v.push({"when":{"t":bpmList[i][0]},"bpm":bpmList[i][1]});}
if(v.length==0){v.push({"when":{"t":0},"bpm":bpm});}
return v;})();var note=(function(){var v=[];for(var i=0;i<notes.length;i++){notes[i][2]=transPos(notes[i][1],notes[i][2],true);var vector=(function(){var p=[];if(notes[i][3].length>0){var t=[];var s=0;for(var j=0;j<notes[i][3].length;j++){var d=(j==0?0:Math.getPythagorean(notes[i][3][j][0].fSub(notes[i][3][j-1][0]),notes[i][3][j][1].fSub(notes[i][3][j-1][1])));t.push(s);s=s.fAdd(d);}
for(var j=0;j<notes[i][3].length;j++){var time=notes[i][1].fAdd(t[j].fDiv(s).fMul(notes[i][4].fSub(notes[i][1])));notes[i][3][j]=transPos(time,notes[i][3][j],false);p.push({"when":{"t":time},"where":{"x":notes[i][3][j][0],"y":notes[i][3][j][1]}});}}
return p;})();switch(notes[i][0]){case"CNoteSingle":v.push({"when":{"t":notes[i][1]},"where":{"x":notes[i][2][0],"y":notes[i][2][1]},"link":{"b":-1,"c":v.length,"a":-1}});break;case"CNoteSlide":var x=notes[i][2][0];var y=notes[i][2][1];var x2=notes[i][2][0];var y2=notes[i][2][1];var d=0.25;var ds=d.fMul(Math.SQRT1_2);switch(notes[i][5]){case"Left":x2=x2.fSub(d.fDiv(2));x=x.fAdd(d.fDiv(2));break;case"Right":x2=x2.fAdd(d.fDiv(2));x=x.fSub(d.fDiv(2));break;case"Up":y2=y2.fAdd(d.fDiv(2));y=y.fSub(d.fDiv(2));break;case"Down":y2=y2.fSub(d.fDiv(2));y=y.fAdd(d.fDiv(2));break;case"UpLeft":x2=x2.fSub(ds.fDiv(2));x=x.fAdd(ds.fDiv(2));y2=y2.fAdd(ds.fDiv(2));y=y.fSub(ds.fDiv(2));break;case"DownLeft":x2=x2.fSub(ds.fDiv(2));x=x.fAdd(ds.fDiv(2));y2=y2.fSub(ds.fDiv(2));y=y.fAdd(ds.fDiv(2));break;case"UpRight":x2=x2.fAdd(ds.fDiv(2));x=x.fSub(ds.fDiv(2));y2=y2.fAdd(ds.fDiv(2));y=y.fSub(ds.fDiv(2));break;case"DownRight":x2=x2.fAdd(ds.fDiv(2));x=x.fSub(ds.fDiv(2));y2=y2.fSub(ds.fDiv(2));y=y.fAdd(ds.fDiv(2));break;}
x=x.limit(0,0.999);y=y.limit(0,0.999);x2=x2.limit(0,0.999);y2=y2.limit(0,0.999);v.push({"when":{"t":notes[i][1]},"where":{"x":x,"y":y},"link":{"b":-1,"c":v.length,"a":v.length+1}});v.push({"when":{"t":notes[i][1]},"where":{"x":x2,"y":y2},"link":{"b":v.length-1,"c":v.length,"a":-1}});break;case"CNoteLong":case"CNoteLongSlide":v.push({"when":{"t":notes[i][1]},"where":{"x":notes[i][2][0],"y":notes[i][2][1]},"link":{"b":-1,"c":v.length,"a":v.length+1},"line":{"vector":vector,"clockwise":notes[i][6],"follow":notes[i][7]},"combo":notes[i][8]});v.push({"when":{"t":notes[i][4]},"where":((notes[i][0]=="CNoteLongSlide")&&vector.length?{"x":vector[vector.length-1]["where"]["x"],"y":vector[vector.length-1]["where"]["y"]}:{"x":notes[i][2][0],"y":notes[i][2][1]}),"link":{"b":v.length-1,"c":v.length,"a":-1}});break;}}
return v;})();var transformed=(function(){var v=[];var c=[];for(var i=1;i<camList.length;i++){var x=camList[i-1][1][0].fSub(camList[i][1][0]).toAbbreviated(6).toAccurated();var y=camList[i-1][1][1].fSub(camList[i][1][1]).toAbbreviated(6).toAccurated();var s=camList[i-1][2].fDiv(camList[i][2]).toAbbreviated(6).toAccurated();c.push([camList[i-1][0],[x,y],s,camList[i][0].fSub(camList[i-1][0])]);}
for(var i=1;i<c.length;i++){if((c[i][1][0]/c[i][3]==c[i-1][1][0]/c[i-1][3])&&(c[i][1][1]/c[i][3]==c[i-1][1][1]/c[i-1][3])&&((1-c[i][2]*1)/c[i][3]==c[i][2]-c[i-1][2]*c[i][2]/c[i-1][3])){c[i-1][1][0]+=c[i][1][0];c[i-1][1][1]+=c[i][1][1];c[i-1][1][0]*=c[i][1][0];c[i-1][3]+=c[i][3];c.splice(i,1);i-=1;}}
for(var i=0;i<c.length;i++){v.push({"when":{"t":c[i][0]},"translateX":c[i][1][0].fDiv(canvasSize[0]),"translateY":c[i][1][1].fDiv(canvasSize[1]),"scaleX":c[i][2],"scaleY":c[i][2],"duration":c[i][3]});}
return v;})();setRaw({"data":[[{"beat":beat,"note":note,"transformed":transformed,"info":{"length":{"when":{"t":length}}}}]]});break;case"dynamix":var getNotes=function(d){var noteAsset=readData(readData(d,"children","m_notes"),"children","CMapNoteAsset")||[];var v=[];for(var i=0;i<noteAsset.length;i++){var id=readInt(noteAsset[i],"children","m_id");var type=readString(noteAsset[i],"children","m_type");var time=readFloat(noteAsset[i],"children","m_time");var position=readFloat(noteAsset[i],"children","m_position");position=(!isUndefined(position)?position:2.5);var width=readFloat(noteAsset[i],"children","m_width")||1;var subId=readInt(noteAsset[i],"children","m_subId");subId=(!isUndefined(subId)?subId:-1);v[id]={"type":type,"time":time,"position":position,"width":width,"subId":subId};}
return v;};var xml=fileInfo.json;var path=readString(xml["CMap"],"children","m_path");var barPerMin=readFloat(xml["CMap"],"children","m_barPerMin");var timeOffset=readInt(xml["CMap"],"children","m_timeOffset");var leftRegion=readString(xml["CMap"],"children","m_leftRegion");var rightRegion=readString(xml["CMap"],"children","m_rightRegion");var mapID=readString(xml["CMap"],"children","m_mapID");var notes=getNotes(readData(xml["CMap"],"children","m_notes"));var notesLeft=getNotes(readData(xml["CMap"],"children","m_notesLeft"));var notesRight=getNotes(readData(xml["CMap"],"children","m_notesRight"));var beat=[{"when":{"b":0},"bpm":barPerMin}];var note=(function(){var fromPosition=function(p){return p.limit(-2,7).fAdd(2).fDiv(9);};var readNotes=function(notes,side){for(var i=0;i<notes.length;i++){if(notes[i]&&!isNaN(notes[i]["time"])){var where=(function(){var x=-1;var y=-1;switch(side){case"":x=fromPosition(notes[i]["position"].fAdd(notes[i]["width"].fDiv(2)));y=0;break;case"left":x=0;y=fromPosition(notes[i]["position"].fAdd(notes[i]["width"].fDiv(2)));break;case"right":x=0.999;y=fromPosition(notes[i]["position"].fAdd(notes[i]["width"].fDiv(2)));break;}
return{"x":x,"y":y};})();switch(notes[i]["type"]){case"0":case"NORMAL":v.push({"when":{"b":notes[i]["time"].fAdd(timeOffset)},"where":where,"flag":{"size":{"w":notes[i]["width"]}}});break;case"1":case"CHAIN":v.push({"when":{"b":notes[i]["time"].fAdd(timeOffset)},"where":where,"flag":{"size":{"w":notes[i]["width"]},"catch":"chain"}});break;case"2":case"HOLD":var l=(function(){var isSub=function(id){return((notes[id]["type"]=="3")||(notes[id]["type"]=="SUB"))&&(notes[id]["time"]>=notes[i]["time"]);};var subId=notes[i]["subId"];if(subId!=-1){if(isSub(subId)){return subId;}
else{for(var j=0;j<notes.length;j++){if(isSub(j)){return j;}}}}
return-1;})();if(l!=-1){v.push({"when":{"b":notes[i]["time"].fAdd(timeOffset)},"where":where,"flag":{"size":{"w":notes[i]["width"]}},"link":{"b":-1,"c":v.length,"a":v.length+1}});v.push({"when":{"b":notes[l]["time"].fAdd(timeOffset)},"where":where,"flag":{"size":{"w":notes[i]["width"]}},"link":{"b":v.length-1,"c":v.length,"a":-1}});}
break;}}}};var v=[];readNotes(notes,"");readNotes(notesLeft,"left");readNotes(notesRight,"right");return v;})();var effect=[{"when":{"b":0},"kind":"audio","path":path+".mp3"}];setRaw({"data":[[{"beat":beat,"note":note,"info":{"bpm":barPerMin}}]]});break;case"qqx5":var xml=fileInfo.json;var levelInfo=readData(xml["Level"],"children","LevelInfo");var bpm=readInt(levelInfo,"children","BPM");var bpn=readInt(levelInfo,"children","BeatPerBar");var dpb=readInt(levelInfo,"children","BeatLen");var globalOffset=readInt(levelInfo,"children","EnterTimeAdjust");var notePreShow=readInt(levelInfo,"children","notePreShow");var length={"when":{"t":readInt(levelInfo,"children","LevelTime")}};var max={"when":{"n":readInt(levelInfo,"children","BarAmount")}};var key=readInt(levelInfo,"children","TrackCount")||0;var previewStart=readInt(levelInfo,"children","LevelPreTime");var level=readInt(levelInfo,"children","Star")||10;var musicInfo=readData(xml["Level"],"children","MusicInfo");var author=readString(musicInfo,"children","Author").fromXml();var title=readString(musicInfo,"children","Title").fromXml();var artist=readString(musicInfo,"children","Artist").fromXml();var filePath=readString(musicInfo,"children","FilePath");var fileName=new FileInfo(filePath).nameCore;var sectionSeq=readData(xml["Level"],"children","SectionSeq");var section=readData(sectionSeq,"children","Section");var indicatorResetPos=readData(xml["Level"],"children","IndicatorResetPos");var noteInfo=readData(xml["Level"],"children","NoteInfo");var normal=readData(noteInfo,"children","Normal");var actionSeq=readData(xml["Level"],"children","ActionSeq");var actionList=readData(actionSeq,"children","ActionList");var cameraSeq=readData(xml["Level"],"children","CameraSeq");var camera=readData(cameraSeq,"children","Camera");var beat=[{"when":{"n":0},"bpm":bpm,"bpn":bpn,"dpb":dpb}];var note=(function(){var v=[];if(normal){var m=[{"Middle":0},{"Left1":0,"Right1":1},{"Left1":0,"Middle":1,"Right1":2},{"Left2":0,"Left1":1,"Right1":2,"Right2":3},{"Left2":0,"Left1":1,"Middle":2,"Right1":3,"Right2":4}][key.limit(1,5)-1];var dpn=readInt(normal,"attributes","PosNum")||64;var notes=readData(normal,"children","Note");if(notes){for(var i=0;i<notes.length;i++){var n=readInt(notes[i],"attributes","Bar")+(readInt(notes[i],"attributes","Pos")||readInt(notes[i],"attributes","BeatPos"))/dpn;var targetTrack=readString(notes[i],"attributes","target_track");var fromTrack=readString(notes[i],"attributes","from_track");var endTrack=readString(notes[i],"attributes","end_track");var noteType=readString(notes[i],"attributes","note_type");var track=readString(notes[i],"attributes","track");var length=readString(notes[i],"attributes","length");var son=readString(notes[i],"attributes","Son");var endArea=readString(notes[i],"attributes","EndArea");var moveTime=readString(notes[i],"attributes","MoveTime");var level=readString(notes[i],"attributes","level");var screenPos=readData(notes[i],"children","ScreenPos");var flyTrack=readData(notes[i],"children","FlyTrack");var moveTrack=readData(notes[i],"children","MoveTrack");var n2=(readInt(notes[i],"attributes","EndBar")+readInt(notes[i],"attributes","EndPos")/dpn);switch(true){case track!="":track=parseInt(track);targetTrack=(targetTrack?targetTrack.split(",").map(function(a){return parseInt(a);}):[]);length=(length?length.split(",").map(function(a){return parseInt(a);}):[]);if(!isNaN(track)&&targetTrack.every(function(a){return!isNaN(a);})&&length.every(function(a){return!isNaN(a);})){if(targetTrack.length){var tracks=[track].concat(targetTrack);var times=(function(){var v=[n];for(var j=0;j<length.length;j++){v.push(v[v.length-1].fAdd(length[j]/dpn));}
return v;})();var e=Math.min(targetTrack.length,length.length)+1;for(var j=0;j<e;j++){v.push({"when":{"n":times[j]},"where":{"x":tracks[j].fAdd(50).fDiv(100).limit(0,0.999)},"link":{"b":(j?v.length-1:-1),"c":v.length,"a":(j+1<e?v.length+1:-1)}});}}
else{var x=track.fAdd(50).fDiv(100).limit(0,0.999);if(length.length==1){v.push({"when":{"n":n},"where":{"x":x},"link":{"b":-1,"c":v.length,"a":v.length+1}});v.push({"when":{"n":n.fAdd(length[0]/dpn)},"where":{"x":x},"link":{"b":v.length-1,"c":v.length,"a":-1}});}
else{v.push({"when":{"n":n},"where":{"x":x},"flag":(noteType=="light"?{"catch":"light"}:undefined)});}}}
break;case endArea!="":endArea=(endArea?endArea.split("|").map(function(a){return parseInt(a);}):[]);if(endArea.every(function(a){return!isNaN(a);})){key=key||5;var track=endArea.reduce(function(t,a){return(t+(a>0)&&(a<5)?a-1:0);});var x=trackToX(track,key);if(n2>n){v.push({"when":{"n":n},"where":{"x":x},"link":{"b":-1,"c":v.length,"a":v.length+1}});v.push({"when":{"n":n2},"where":{"x":x},"link":{"b":v.length-1,"c":v.length,"a":-1}});}
else{var flag=(function(){switch(noteType){case"PinballSeries":return{"catch":"series"};break;case"PinballSlip":return{"flick":"slip"};break;}})();v.push({"when":{"n":n},"where":{"x":x},"flag":flag});}}
break;case level!="":level=parseInt(level);length=parseInt(length);if(!isNaN(level)&&!isNaN(length)){var a=new Array(length*4).fill(0).map(function(a,i){return i;});var l=level+1;l=(l>a.length?a.length:l);for(var j=0;j<l;j++){var r=a.length.fMul(Math.random())|0;v.push({"when":{"n":n.fAdd(length).fSub(a[r]/4)},"where":{"x":Math.random()}});a.splice(r,1);}}
break;case!isUndefined(screenPos):var x=readInt(screenPos,"attributes","x");var y=readInt(screenPos,"attributes","y");var d=readFloat(flyTrack||readData(screenPos,"children","FlyTrack"),"attributes","degree");var name=readString(moveTrack,"attributes","name");var degree=readFloat(moveTrack,"attributes","degree");var follow=(readInt(notes[i],"attributes","Type")==2);x=x.limit(-800,799).fAdd(800).fDiv(1600);y=y.limit(-400,399).fAdd(400).fDiv(800);if(n2>n){v.push({"when":{"n":n},"where":{"x":x,"y":y},"link":{"b":-1,"c":v.length,"a":v.length+1},"line":{"follow":follow,"name":name,"degree":degree},"flag":{"degree":d}});v.push({"when":{"n":n2},"where":{"x":x,"y":y},"link":{"b":v.length-1,"c":v.length,"a":-1}});}
else{v.push({"when":{"n":n},"where":{"x":x,"y":y},"flag":{"degree":d}});}
break;default:targetTrack=m[targetTrack];fromTrack=m[fromTrack];endTrack=m[endTrack];endTrack=(isUndefined(endTrack)?targetTrack:endTrack);fromTrack=(isUndefined(fromTrack)?targetTrack:fromTrack);n2=n2.limit(n,n2);if(!isUndefined(targetTrack)){var flag=(fromTrack!=targetTrack?{"appear":{"x":trackToX(fromTrack,key)}}:undefined);if(n2>n){v.push({"when":{"n":n},"where":{"x":trackToX(targetTrack,key)},"link":{"b":-1,"c":v.length,"a":v.length+1},"flag":flag});v.push({"when":{"n":n2},"where":{"x":trackToX(targetTrack,key)},"link":{"b":v.length-1,"c":v.length,"a":-1}});}
else if(targetTrack!=endTrack){v.push({"when":{"n":n},"where":{"x":trackToX(targetTrack,key)},"link":{"b":-1,"c":v.length,"a":v.length+1},"flag":flag});v.push({"when":{"n":n},"where":{"x":trackToX(endTrack,key)},"link":{"b":v.length-1,"c":v.length,"a":-1}});}
else{v.push({"when":{"n":n},"where":{"x":trackToX(targetTrack,key)},"flag":flag});}}
break;}}}
var combineNotes=readData(normal,"children","CombineNote");if(combineNotes){for(var i=0;i<combineNotes.length;i++){var notes=readData(combineNotes[i],"children","Note");var flag;var list=[];for(var j=0;j<notes.length;j++){var n=readInt(notes[j],"attributes","Bar")+readInt(notes[j],"attributes","Pos")/dpn;var targetTrack=readString(notes[j],"attributes","target_track");var fromTrack=readString(notes[j],"attributes","from_track");var endTrack=readString(notes[j],"attributes","end_track");var noteType=readString(notes[j],"attributes","note_type");var n2=(readInt(notes[j],"attributes","EndBar")+readInt(notes[j],"attributes","EndPos")/dpn);targetTrack=m[targetTrack];fromTrack=m[fromTrack];endTrack=m[endTrack];endTrack=(isUndefined(endTrack)?targetTrack:endTrack);fromTrack=(isUndefined(fromTrack)?targetTrack:fromTrack);n2=(n2<n?n:n2);if(!isUndefined(targetTrack)){if(!list.length){flag=(fromTrack!=targetTrack?{"appear":{"x":trackToX(fromTrack,key)}}:undefined);}
if(!list.length||(n2!=list[list.length-1]["n2"])||(endTrack!=list[list.length-1]["endTrack"])){list.push({"n":n,"targetTrack":targetTrack,"endTrack":endTrack,"n2":n2});}}}
for(var j=0;j<list.length;j++){v.push({"when":{"n":list[j]["n"]},"where":{"x":trackToX(list[j]["targetTrack"],key)},"link":{"b":(j?v.length-1:-1),"c":v.length,"a":v.length+1},"flag":(j?undefined:flag)});if(j==list.length-1){v.push({"when":{"n":list[j]["n2"]},"where":{"x":trackToX(list[j]["endTrack"],key)},"link":{"b":v.length-1,"c":v.length,"a":-1}});}}}}}
return v;})();var status=(function(){var v=[];if(section){for(var i=0;i<section.length;i++){var endBar=readInt(section[i],"attributes","endbar");var type=readString(section[i],"attributes","type");var mark=readString(section[i],"attributes","mark");var param1=readString(section[i],"attributes","param1");v.push({"when":{"n":endBar},"name":"qqx5_section","value":[type,mark,param1].join(",")});}}
if(indicatorResetPos){var dpn=readInt(indicatorResetPos,"attributes","PosNum")||64;var indicator=readData(indicatorResetPos,"children","Pos")||[];for(var i=0;i<indicator.length;i++){var n=readInt(indicator[i],"attributes","Bar")+readInt(indicator[i],"attributes","BeatPos")/dpn;v.push({"when":{"n":n},"name":"qqx5_indicator","value":1});}}
if(actionList){for(var i=0;i<actionList.length;i++){var startBar=readInt(actionList[i],"attributes","start_bar");var danceLen=readInt(actionList[i],"attributes","dance_len");var seqLen=readInt(actionList[i],"attributes","seq_len");var level=readInt(actionList[i],"attributes","level");var type=readString(actionList[i],"attributes","type");v.push({"when":{"n":startBar},"name":"qqx5_action","value":[danceLen,seqLen,level,type].join(",")});}}
if(camera){var dpn=readInt(normal,"attributes","PosNum")||64;for(var i=0;i<camera.length;i++){var bar=readInt(camera[i],"attributes","bar");var pos=readInt(camera[i],"attributes","pos");var name=readString(camera[i],"attributes","name");v.push({"when":{"n":bar+pos/dpn},"name":"qqx5_camera","value":name});}}
return v;})();setRaw({"meta":{"title":title,"artist":artist,"author":author},"data":[[{"beat":beat,"note":note,"effect":[{"when":{"t":0},"kind":"audio","path":fileName}],"status":status,"info":{"max":max,"length":length,"key":key,"bpm":bpm,"previewStart":previewStart,"level":level,"globalOffset":globalOffset}}]]});break;}};var fromVoxBuffer=function(buffer){var findInfo=function(f,t){for(var i=0;i<f.length;i++){if((f[i][0][0]==t[0])&&(f[i][0][1]==t[1])&&(f[i][0][2]==t[2])){return i;}}
return-1;};var addInfo=function(f,t,v){var l=findInfo(f,t);if(l!=-1){f[l][1]=v;}
else{f.push([[t[0],t[1],t[2]],v]);}
return f;};var getEffect=function(i,e){var r=[];for(var j=i+1;j<e;j++){var d=a[j].split(",\t");var b=true;var v=[];for(var k=0;k<d.length;k++){d[k]=(k==0?parseInt(d[k]):parseFloat(d[k]));if(!isNaN(d[k])){v.push(d[k]);}
else{b=false;break;}}
if(b){r.push(v);}}
return r;};var getBtInfo=function(i,e){var r=[];for(var j=i+1;j<e;j++){var d=a[j].split("\t");if(d.length>2){var b=d[0].split(",");b[0]=parseInt(b[0]);b[1]=parseInt(b[1]);b[2]=parseInt(b[2]);d[1]=parseInt(d[1]);d[2]=parseInt(d[2]);if((!isNaN(b[0]))&&(!isNaN(b[1]))&&(!isNaN(b[2]))&&(!isNaN(d[2]))){r=addInfo(r,[b[0],b[1],b[2]],[d[1],d[2]]);}}}
return r;};var getFxInfo=function(i,e){return getBtInfo(i,e);};var getVolInfo=function(i,e){var r=[];for(var j=i+1;j<e;j++){var d=a[j].split("\t");if(d.length>4){var b=d[0].split(",");b[0]=parseInt(b[0]);b[1]=parseInt(b[1]);b[2]=parseInt(b[2]);d[1]=parseInt(d[1]);d[2]=parseInt(d[2]);d[3]=parseInt(d[3]);d[4]=parseInt(d[4]);if((!isNaN(b[0]))&&(!isNaN(b[1]))&&(!isNaN(b[2]))&&(!isNaN(d[2]))&&(!isNaN(d[3]))&&(!isNaN(d[4]))){r=addInfo(r,[b[0],b[1],b[2]],[d[1],d[2],d[3],d[4]]);}}}
return r;};var toBeat=function(t){var b=0;var n=1;if(beats.length>1){for(var i=1;i<beats.length;i++){if((i==beats.length-1)||(beats[i][0][0]>=t[0])){b+=(t[0]-n)*beats[i-1][1][1];break;}
else{b+=(beats[i][0][0]-n)*beats[i-1][1][1];n=beats[i][0][0];}}
return b+t[1]-1+t[2]/48;}
else{return(t[0]-n)*beats[beats.length-1][1][1]+t[1]-1+t[2]/48;}};var toNote=function(t){var n=t[0]-1;var b=1;var bpn=4;for(var i=0;i<beats.length;i++){if((beats[i][0][0]>t[0])||((beats[i][0][0]==t[0])&&(beats[i][0][1]+beats[i][0][2]/48>1))){while(true){bpn=beats[i-1][1][1];if((i==beats.length-1)||((beats[i][0][0]>t[0])||((beats[i][0][0]==t[0])&&(beats[i][0][1]+beats[i][0][2]/48>t[1]+t[2]/48)))){n+=(t[1]+t[2]/48-b)/bpn;return n;}
else{n+=(beats[i][0][1]+beats[i][0][2]/48-b)/bpn;b=beats[i][0][1]+beats[i][0][2]/48;}
i+=1;}}}
bpn=beats[beats.length-1][1][1];return n+(t[1]+t[2]/48-b)/bpn;};var trackToX=function(track,key){return(track*2+1)/(key*2);};var beat=[];var note=[];var info={"key":parseInt(getSelected("selectTransKey"))||4};var beats=[];var format=9;var beatInfo=[];var bpmInfo=[];var tiltInfo=[];var lyricInfo=[];var endInfo=[];var btEffect=[];var fxEffect=[];var volEffect=[];var tabParamAssign=[];var trackInfo=[];var Spcontroler=[];var a=buffer.getText().replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");for(var i=0;i<a.length;i++){var ln=a[i].indexOf("//");if(ln!=-1){a[i]=a[i].slice(0,ln);}
if(a[i]==""){continue;}
if(a[i][0]=="#"){var e=(function(){for(var j=i+1;j<a.length;j++){if(a[j]=="#END"){return j;}}
return-1;})();if(e>i){switch(a[i].slice(1)){case"FORMAT VERSION":format=parseInt(a[e-1])||format;break;case"BEAT INFO":for(var j=i+1;j<e;j++){var d=a[j].split("\t");if(d.length>2){var b=d[0].split(",");b[0]=parseInt(b[0]);b[1]=parseInt(b[1]);b[2]=parseInt(b[2]);d[1]=parseInt(d[1]);d[2]=parseInt(d[2]);if((!isNaN(b[0]))&&(!isNaN(b[1]))&&(!isNaN(b[2]))&&(!isNaN(d[1]))&&(!isNaN(d[2]))&&(d[2]!=0)){beatInfo=addInfo(beatInfo,[b[0],b[1],b[2]],[d[1].fDiv(d[2]).fMul(4)]);}}}
break;case"BPM INFO":for(var j=i+1;j<e;j++){var d=a[j].split("\t");if(d.length>2){var b=d[0].split(",");b[0]=parseInt(b[0]);b[1]=parseInt(b[1]);b[2]=parseInt(b[2]);d[1]=parseFloat(d[1]);d[2]=parseInt(d[2]);if((!isNaN(b[0]))&&(!isNaN(b[1]))&&(!isNaN(b[2]))&&(!isNaN(d[1]))&&(d[1]!=0)&&(!isNaN(d[2]))&&(d[2]!=0)){bpmInfo=addInfo(bpmInfo,[b[0],b[1],b[2]],[d[1].fMul(d[2]).fDiv(4)]);}}}
break;case"TILT MODE INFO":for(var j=i+1;j<e;j++){var d=a[j].split("\t");if(d.length>1){var b=d[0].split(",");b[0]=parseInt(b[0]);b[1]=parseInt(b[1]);b[2]=parseInt(b[2]);d[1]=parseInt(d[1]);if((!isNaN(b[0]))&&(!isNaN(b[1]))&&(!isNaN(b[2]))&&(!isNaN(d[1]))){tiltInfo=addInfo(tiltInfo,[b[0],b[1],b[2]],[d[1]]);}}}
break;case"LYRIC INFO":for(var j=i+1;j<e;j++){var d=a[j].split("\t");if(d.length>1){var b=d[0].split(",");b[0]=parseInt(b[0]);b[1]=parseInt(b[1]);b[2]=parseInt(b[2]);if((!isNaN(b[0]))&&(!isNaN(b[1]))&&(!isNaN(b[2]))){lyricInfo=addInfo(lyricInfo,[b[0],b[1],b[2]],[d[1]]);}}}
break;case"END POSITION":for(var j=i+1;j<e;j++){var d=a[j].split("\t");if(d.length>0){var b=d[0].split(",");b[0]=parseInt(b[0]);b[1]=parseInt(b[1]);b[2]=parseInt(b[2]);if((!isNaN(b[0]))&&(!isNaN(b[1]))&&(!isNaN(b[2]))){endInfo=addInfo(endInfo,[b[0],b[1],b[2]],[]);}}}
break;case"TAB EFFECT INFO":btEffect=getEffect(i,e);break;case"FXBUTTON EFFECT INFO":fxEffect=getEffect(i,e);break;case"TAB PARAM ASSIGN INFO":tabParamAssign=getEffect(i,e);break;case"REVERB EFFECT PARAM":volEffect=getEffect(i,e);break;case"TRACK1":trackInfo[6]=getVolInfo(i,e);break;case"TRACK2":trackInfo[4]=getFxInfo(i,e);break;case"TRACK3":trackInfo[0]=getBtInfo(i,e);break;case"TRACK4":trackInfo[1]=getBtInfo(i,e);break;case"TRACK5":trackInfo[2]=getBtInfo(i,e);break;case"TRACK6":trackInfo[3]=getBtInfo(i,e);break;case"TRACK7":trackInfo[5]=getFxInfo(i,e);break;case"TRACK8":trackInfo[7]=getVolInfo(i,e);break;case"TRACK AUTO TAB":break;case"SPCONTROLER":for(var j=i+1;j<e;j++){var d=a[j].split("\t");if(d.length>7){var b=d[0].split(",");b[0]=parseInt(b[0]);b[1]=parseInt(b[1]);b[2]=parseInt(b[2]);d[2]=parseInt(d[2]);d[3]=parseInt(d[3]);d[4]=parseFloat(d[4]);d[5]=parseFloat(d[5]);d[6]=parseFloat(d[6]);d[7]=parseFloat(d[7]);if((!isNaN(b[0]))&&(!isNaN(b[1]))&&(!isNaN(b[2]))&&(!isNaN(d[2]))&&(!isNaN(d[3]))&&(!isNaN(d[4]))&&(!isNaN(d[5]))&&(!isNaN(d[6]))&&(!isNaN(d[7]))){Spcontroler=addInfo(Spcontroler,[b[0],b[1],b[2]],[d[1],d[2],d[3],d[4],d[5],d[6],d[7]]);}}}
break;}
i=e;}}}
var readBeat=(function(){beats=(function(){var v=[[[1,1,0],[125,4]]];beatInfo=beatInfo.sort(SortNumbers);for(var i=0;i<beatInfo.length;i++){var l=findInfo(v,beatInfo[i][0]);if(l!=-1){v[l][1][1]=beatInfo[i][1][0];}
else{v.push([beatInfo[i][0],[undefined,beatInfo[i][1][0]]]);}}
bpmInfo=bpmInfo.sort(SortNumbers);for(var i=0;i<bpmInfo.length;i++){var l=findInfo(v,bpmInfo[i][0]);if(l!=-1){v[l][1][0]=bpmInfo[i][1][0];}
else{v.push([bpmInfo[i][0],[bpmInfo[i][1][0],undefined]]);}}
for(var i=1;i<v.length;i++){v[i][1][0]=(isUndefined(v[i][1][0])?v[i-1][1][0]:v[i][1][0]);v[i][1][1]=(isUndefined(v[i][1][1])?v[i-1][1][1]:v[i][1][1]);}
return v;})();for(var i=0;i<beats.length;i++){beat.push({"when":{"b":toBeat(beats[i][0])},"bpm":beats[i][1][0],"bpn":beats[i][1][1]});}
var end=(function(){var v=0;for(var i=0;i<endInfo.length;i++){var b=toBeat(endInfo[i][0]);v=(v<b?b:v);}
return v;})();info["length"]={"when":{"b":end}};})();var readNote=(function(){var v=[];var ln=[-1,-1];var vx=[-1,-1];var s=false;for(var i=0;i<trackInfo.length;i++){for(var j=0;j<trackInfo[i].length;j++){var b=toBeat(trackInfo[i][j][0]);if(i<6){if(i<4){note.push({"when":{"b":b},"where":{"x":trackToX(i,info["key"])}});}
else{if(trackInfo[i][j][1][0]){note.push({"when":{"b":b},"where":{"x":trackToX((i-4)*2,info["key"])},"link":{"b":-1,"c":note.length,"a":note.length+1}});note.push({"when":{"b":b+trackInfo[i][j][1][0]/48},"where":{"x":trackToX((i-4)*2,info["key"])},"link":{"b":note.length-1,"c":note.length,"a":-1}});note.push({"when":{"b":b},"where":{"x":trackToX((i-4)*2+1,info["key"])},"link":{"b":-1,"c":note.length,"a":note.length+1}});note.push({"when":{"b":b+trackInfo[i][j][1][0]/48},"where":{"x":trackToX((i-4)*2+1,info["key"])},"link":{"b":note.length-1,"c":note.length,"a":-1}});}
else{note.push({"when":{"b":b},"where":{"x":trackToX((i-4)*2,info["key"])}});note.push({"when":{"b":b},"where":{"x":trackToX((i-4)*2+1,info["key"])}});}}}
else{var x=trackInfo[i][j][1][0]/128;switch(trackInfo[i][j][1][1]){case 0:case 2:if((ln[i-6]!=-1)&&(vx[i-6]!=-1)){if(s){v.push([ln[i-6],vx[i-6]]);}
if(vx[i-6]==x){v.push([b,vx[i-6]]);}
else if(b==ln[i-6]){v.push([ln[i-6],x]);}
else{v.push([b,x]);}
if(trackInfo[i][j][1][1]==2){for(var k=0;k<v.length;k++){note.push({"when":{"b":v[k][0]},"where":{"x":v[k][1]},"link":{"b":(k==0?-1:note.length-1),"c":note.length,"a":(k==v.length-1?-1:note.length+1)}});}
v=[];}
ln[i-6]=(trackInfo[i][j][1][1]==0?b:ln[i-6]);vx[i-6]=(trackInfo[i][j][1][1]==0?x:vx[i-6]);ln[i-6]=(trackInfo[i][j][1][1]==2?-1:ln[i-6]);vx[i-6]=(trackInfo[i][j][1][1]==2?-1:vx[i-6]);s=false;}
break;case 1:ln[i-6]=b;vx[i-6]=x;s=true;break;}}}}})();setRaw({"meta":{},"data":[[{"beat":beat,"note":note,"info":info}]]});};var fromKshBuffer=function(buffer){var ver="";var bpm=120;var bpn=4;var audioFile="";var audioOffset=0;var videoFile="";var videoOffset=0;var seGain=0.5;var seVolumn=0.5;var tilt="normal";var zoomTop=0;var zoomBottom=0;var stop=0;var stops=[];var last={"bpm":0,"bpn":0,"seGain":seGain,"seVolumn":seVolumn,"tilt":tilt,"zoomTop":zoomTop,"zoomBottom":zoomBottom,"stop":0};var meta={};var beat=[];var note=[];var effect=[];var status=[];var info={};var key=4;var d=[];var m=-1;var a=buffer.getText().replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");for(var i=0;i<a.length;i++){var lc=a[i].indexOf("//");if(lc!=-1){a[i]=a[i].slice(0,lc);}
var le=a[i].indexOf("=");if(le!=-1){var s=[a[i].slice(0,le),a[i].slice(le+1)];switch(s[0]){case"title":meta["title"]=s[1];break;case"title_img":info["titleImage"]=s[1];break;case"artist":meta["artist"]=s[1];break;case"artist_img":info["artistImage"]=s[1];break;case"effect":meta["effector"]=s[1];break;case"jacket":info["cover"]=s[1];break;case"illustrator":meta["illustrator"]=s[1];break;case"difficulty":switch(s[1]){case"Light":info["difficulty"]=1;break;case"Challenge":info["difficulty"]=2;break;case"Extended":info["difficulty"]=3;break;case"Infinite":info["difficulty"]=4;break;}
break;case"level":info["level"]=parseFloat(s[1])||0;break;case"t":var v=parseFloat(s[1]);if(!isNaN(v)){bpm=v;}
break;case"to":var v=parseFloat(s[1]);if(!isNaN(v)){info["bpmBase"]=v;}
break;case"beat":var b=s[1].split("/");if(b.length==2){b[0]=parseFloat(b[0]);b[1]=parseFloat(b[1]);if(!isNaN(b[0])&&b[0]&&!isNaN(b[1])&&b[1]){bpn=b[0].fDiv(b[1]).fMul(4);}}
break;case"m":audioFile=s[1].split(";")[0];break;case"mvol":var v=parseFloat(s[1]);if(!isNaN(v)){info["bgmVolumn"]=v;}
break;case"o":audioOffset=-(parseFloat(s[1])||0);break;case"bg":info["backgroundType"]=s[1];break;case"layer":info["layerType"]=s[1].replace(/\//g,";");break;case"po":var v=parseFloat(s[1]);if(!isNaN(v)){info["previewStart"]=v;}
break;case"plength":var v=parseFloat(s[1]);if(!isNaN(v)){info["previewDuration"]=v;}
break;case"chokkakuvol":var v=parseFloat(s[1]);if(!isNaN(v)){seVolumn=v.fDiv(100);if(isUndefined(info["seVolumn"])){info["seVolumn"]=seVolumn;}}
break;case"chokkakuautovol":if(s[1]){info["changeSeVolumn"]=s[1];}
break;case"filtertype":info["seType"]=s[1];break;case"pfiltergain":var v=parseFloat(s[1]);if(!isNaN(v)){seGain=v.fDiv(100);info["seGain"]=seGain;}
break;case"pfilterdelay":var v=parseFloat(s[1]);if(!isNaN(v)){info["seOffset"]=v;}
break;case"v":videoFile=s[1];break;case"vo":videoOffset=-(parseFloat(s[1])||0);break;case"information":info["comment"]=s[1];break;case"icon":info["icon"]=s[1];break;case"ver":ver=s[1];break;case"tilt":tilt=s[1];break;case"zoom_top":var v=parseFloat(s[1]);if(!isNaN(v)){zoomTop=v;}
break;case"zoom_bottom":var v=parseFloat(s[1]);if(!isNaN(v)){zoomBottom=v;}
break;case"stop":var v=parseFloat(s[1]);if(!isNaN(v)){stop=v;}
break;}}
else{if(a[i]=="--"){m+=1;d[m]=d[m]||[];}
else{var s=a[i].split("|");var bt=s[0];var fx=s[1];var vol=s[2];d[m].push({"script":[bt[0]||"0",bt[1]||"0",bt[2]||"0",bt[3]||"0",fx[0]||"0",fx[1]||"0",vol[0]||"-",vol[1]||"-"],"bpm":(bpm!=last["bpm"]?bpm:undefined),"bpn":(bpn!=last["bpn"]?bpn:undefined),"seGain":(seGain!=last["seGain"]?seGain:undefined),"seVolumn":(seVolumn!=last["seVolumn"]?seVolumn:undefined),"tilt":(tilt!=last["tilt"]?tilt:undefined),"zoomTop":(zoomTop!=last["zoomTop"]?zoomTop:undefined),"zoomBottom":(zoomBottom!=last["zoomBottom"]?zoomBottom:undefined),"stop":(stop!=0?stop:undefined)});stop=0;last={"bpm":(bpm!=last["bpm"]?bpm:last["bpm"]),"bpn":(bpn!=last["bpn"]?bpn:last["bpn"]),"seGain":(seGain!=last["seGain"]?seGain:last["seGain"]),"seVolumn":(seVolumn!=last["seVolumn"]?seVolumn:last["seVolumn"]),"tilt":(tilt!=last["tilt"]?tilt:last["tilt"]),"zoomTop":(zoomTop!=last["zoomTop"]?zoomTop:last["zoomTop"]),"zoomBottom":(zoomBottom!=last["zoomBottom"]?zoomBottom:last["zoomBottom"]),"stop":(stop!=0?stop:last["stop"])};}}}
var toBT=function(t){return(t*2+1)/(key*2);};var toVolX=function(t){var m="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmno";if(t&&t.length&&t[0]){var l=m.indexOf(t[0]);if(l!=-1){return l*127/50;}}
return-1;};var toFxE=function(t){var m="11STIFUHQADXVB11111";if(t&&t.length&&t[0]){if(t[0]=="2"){return 255;}
else{return m.indexOf(t[0]);}}
return-1;};var ln=[-1,-1,-1,-1,-1,-1,-1,-1];var vx=[-1,-1];var ex=[];for(var m=0;m<d.length;m++){for(var i=0;i<d[m].length;i++){var n=m+i/d[m].length;for(var k=0;k<4;k++){switch(d[m][i]["script"][k]){case"0":if(ln[k]!=-1){note.push({"when":{"n":ln[k]},"where":{"x":toBT(k)},"link":{"b":-1,"c":note.length,"a":note.length+1}});note.push({"when":{"n":n},"where":{"x":toBT(k)},"link":{"b":note.length-1,"c":note.length,"a":-1}});ln[k]=-1;}
break;case"1":note.push({"when":{"n":n},"where":{"x":toBT(k)},"link":{"b":-1,"c":note.length,"a":-1}});break;case"2":if(ln[k]==-1){ln[k]=n;}
break;}}
for(var k=4;k<6;k++){switch(d[m][i]["script"][k]){case"0":if(ln[k]!=-1){note.push({"when":{"n":ln[k]},"where":{"x":toBT((k-4)*2)},"link":{"b":-1,"c":note.length,"a":note.length+1}});note.push({"when":{"n":n},"where":{"x":toBT((k-4)*2)},"link":{"b":note.length-1,"c":note.length,"a":-1}});note.push({"when":{"n":ln[k]},"where":{"x":toBT((k-4)*2+1)},"link":{"b":-1,"c":note.length,"a":note.length+1}});note.push({"when":{"n":n},"where":{"x":toBT((k-4)*2+1)},"link":{"b":note.length-1,"c":note.length,"a":-1}});ln[k]=-1;}
break;case"2":note.push({"when":{"n":n},"where":{"x":toBT((k-4)*2)},"link":{"b":-1,"c":note.length,"a":-1}});note.push({"when":{"n":n},"where":{"x":toBT((k-4)*2+1)},"link":{"b":-1,"c":note.length,"a":-1}});break;default:if(ln[k]==-1){ln[k]=n;}
break;}}
for(var k=6;k<8;k++){switch(d[m][i]["script"][k]){case"-":if(ln[k]!=-1){ln[k]=-1;vx[k-6]=-1;}
break;case":":break;default:var x=toVolX(d[m][i]["script"][k]);if(x>=0){if((ln[k]!=-1)&&(vx[k-6]>=0)){var x0=vx[k-6].fDiv(128);var x1=x.fDiv(128);if(n.fSub(ln[k])<0.25/4){ex.push([[ln[k],x0],[ln[k],x1]]);}
else{if(x0!=x1){ex.push([[ln[k],x0],[n,x1]]);}
else{ex.push([[ln[k],x0],[n,x0]]);}
ln[k]=n;}
vx[k-6]=x;}
else{ln[k]=n;vx[k-6]=x;}}
break;}}
if(!isUndefined(d[m][i]["bpm"])||!isUndefined(d[m][i]["bpn"])){beat.push({"when":{"n":n},"bpm":(!isUndefined(d[m][i]["bpm"])?d[m][i]["bpm"]:(beat.length?beat[beat.length-1]["bpm"]:120)),"bpn":(!isUndefined(d[m][i]["bpn"])?d[m][i]["bpn"]:(beat.length?beat[beat.length-1]["bpn"]:4))});}
if(!isUndefined(d[m][i]["seGain"])){status.push({"when":{"n":n},"name":"seGain","value":d[m][i]["seGain"]});}
if(!isUndefined(d[m][i]["seVolumn"])){status.push({"when":{"n":n},"name":"seVolumn","value":d[m][i]["seVolumn"]});}
if(!isUndefined(d[m][i]["tilt"])){status.push({"when":{"n":n},"name":"tilt","value":d[m][i]["tilt"]});}
if(!isUndefined(d[m][i]["zoomTop"])){status.push({"when":{"n":n},"name":"zoomTop","value":d[m][i]["zoomTop"]});}
if(!isUndefined(d[m][i]["zoomBottom"])){status.push({"when":{"n":n},"name":"zoomBottom","value":d[m][i]["zoomBottom"]});}
if(!isUndefined(d[m][i]["stop"])){stops.push({"start":n,"fpn":0,"duration":d[m][i]["stop"]/192});}}}
for(var i=0;i<ex.length;i++){if(ex[i].length){while(true){var l=(function(){for(var j=0;j<ex.length;j++){if(ex[j].length&&ex[j][0][0].isClose(ex[i][ex[i].length-1][0],1/768)&&ex[j][0][1].isClose(ex[i][ex[i].length-1][1],1/128)){return j;}}
return-1;})();if(l!=-1){ex[i].push(ex[l][1]);ex[l]=[];}
else{break;}}}}
for(var i=0;i<ex.length;i++){for(var j=0;j<ex[i].length;j++){note.push({"when":{"n":ex[i][j][0]},"where":{"x":ex[i][j][1]},"link":{"b":(j==0?-1:note.length-1),"c":note.length,"a":(j==ex[i].length-1?-1:note.length+1)}});}}
beat=toData({"beat":beat},"FlowWithNote",{"FlowWithNote":stops})["beat"];effect=(function(){var v=[];if(audioFile){v.push({"when":{"t":audioOffset},"kind":"audio","path":audioFile});}
if(videoFile){v.push({"when":{"t":videoOffset},"kind":"video","path":videoFile});}
return v;})();setRaw({"meta":meta,"data":[[{"beat":beat,"note":note,"effect":effect,"status":status,"info":mergeObject(info,{"key":key},true)}]]});};var fromImdBuffer=function(buffer){var readInt=function(n){var r=buffer.getInt(n,p,true);p+=n;return r;};var readFloat=function(n){var r=buffer.getFloat(n,p,true);p+=n;return r;};var trackToX=function(track,key){return(track*2+1)/(key*2);};var p=0;var length=readInt(4);var beat=(function(){var r=[];var d=[];var addData=function(time,bpm){var l=(function(){for(var i=0;i<d.length;i++){if(d[i][0]==time){return i;}}
return-1;})();if(l!=-1){d[l][1]=bpm;}
else{d.push([time,bpm]);}};var addBeat=function(time,bpm){if(time<0){time=timd.fAdd((60000).fDiv(bpm));}
if((r.length==0)&&(time>0)){var bpm=(60000).fDiv(time);while(bpm<100){bpm=bpm.fMul(2);}
while(bpm>=200){bpm=bpm.fDiv(2);}
r.push({"when":{"t":0},"bpm":bpm});}
var l=(function(){for(var i=0;i<r.length;i++){if(r[i]["when"]["t"]==time){return i;}}
return-1;})();if(l!=-1){r[l]["bpm"]=bpm;}
else{if((r.length==0)||((r.length>0)&&(bpm!=r[r.length-1]["bpm"]))){r.push({"when":{"t":time},"bpm":bpm});}}};var count=readInt(4);for(var i=0;i<count;i++){var time=readInt(4);var bpm=readFloat(8);bpm=(bpm<1?1:bpm);addData(time,bpm);}
d=d.sort(SortNumbers);for(var i=0;i<d.length;i++){if((d[i][0]<0)&&(i>d.length-1)&&(d[i+1][0]<0)){continue;}
addBeat(d[i][0],d[i][1]);}
return r;})();var flag=readInt(2);var key=0;var note=(function(){var r=[];var d=[];var pointsToNotes=function(p,s){var v=[];for(var i=0;i<p.length;i++){v.push({"when":{"t":p[i][0]},"where":{"x":trackToX(p[i][1],key)},"link":{"b":(i>0?s+i-1:-1),"c":s+i,"a":(i+1<p.length?s+i+1:-1)}});}
return v;};var count=readInt(4);for(var i=0;i<count;i++){var action=readInt(2);var time=readInt(4);var track=readInt(1);var param=readInt(4);if((time>=0)&&(time<=length)){switch(action){case 0x00:if(key<track){key=track;}
break;case 0x01:case 0x61:case 0x21:case 0xA1:if(key<track+param){key=track+param;}
break;case 0x02:case 0x62:case 0x22:case 0xA2:if(time+param>length){param=length-time;}
if(key<track){key=track;}
break;}
d.push([time,track,action,param]);}}
key+=1;for(var i=0;i<d.length;i++){var p=[];switch(d[i][2]){case 0x00:p.push([d[i][0],d[i][1]]);break;case 0x01:p.push([d[i][0],d[i][1]]);if(d[i][3]!=0){p.push([d[i][0],d[i][1]+d[i][3]]);}
break;case 0x02:p.push([d[i][0],d[i][1]]);if(d[i][3]!=0){p.push([d[i][0]+d[i][3],d[i][1]]);}
break;case 0x61:case 0x62:case 0x21:case 0x22:case 0xA1:case 0xA2:var e=false;while(true){switch(d[i][2]){case 0x62:case 0x22:p.push([d[i][0],d[i][1]]);if((i+1<d.length)&&((d[i+1][2]==0x21)||(d[i+1][2]==0xA1)||(d[i+1][2]==0xA2))){i+=1;}
else{e=true;}
break;case 0xA2:p.push([d[i][0],d[i][1]]);if(d[i][3]!=0){p.push([d[i][0]+d[i][3],d[i][1]]);}
e=true;break;case 0x61:case 0x21:p.push([d[i][0],d[i][1]]);if((i+1<d.length)&&((d[i+1][2]==0x22)||(d[i+1][2]==0xA2))){i+=1;}
break;case 0xA1:p.push([d[i][0],d[i][1]]);if(d[i][3]!=0){p.push([d[i][0],d[i][1]+d[i][3]]);}
e=true;break;}
if(e){break;}}
break;}
r.writes(pointsToNotes(p,r.length));}
return r;})();setRaw({"data":[[{"beat":beat,"note":note,"info":{"key":key,"length":{"when":{"t":length}}}}]]});};var fromMdeBuffer=function(buffer){fromXmlBuffer(new Uint8Array().fromBase64(buffer.getText()),"mde")};var fromTxtBuffer=function(buffer){var trackToX=function(track,key){return(track*2+1)/(key*2);};var txt=fileInfo.text||buffer.getText();var type=fileInfo.type;var version=fileInfo.version;switch(type){case"cytus":var tickToTime=function(t){return t.fMul(1000);};var toX=function(x){return x.limit(0,0.999);};var toY=function(y){return y.limit(0,0.999);};var timeToY=function(time){var l=(time.fAdd(pageShift));var d=(l/pageShift)%2;var y=l%pageShift;return(d<1?y:-y);};var a=txt.replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");var bpm=125;var shift=0;var blinkShift=0;var scanMode=4;var pageShift=0;var pageSize=0;var notes=[];if(version){for(var i=0;i<a.length;i++){var d=a[i].split("\t");switch(d[0]){case"NOTE":var id=parseInt(d[1]);var tick=parseFloat(d[2]);var x=parseFloat(d[3]);var duration=parseFloat(d[4]);if(!isNaN(id)&&!isNaN(tick)&&!isNaN(x)&&!isNaN(duration)){notes[id]=notes[id]||{};notes[id]["time"]=tickToTime(tick);notes[id]["x"]=x;notes[id]["duration"]=tickToTime(duration);}
break;default:d=a[i].split(" ");switch(d[0]){case"BPM":var v=parseFloat(d[1]);if(!isNaN(v)){bpm=v;}
break;case"PAGE_SHIFT":var v=parseFloat(d[1]);if(!isNaN(v)){pageShift=tickToTime(v);}
break;case"PAGE_SIZE":var v=parseFloat(d[1]);if(!isNaN(v)){pageSize=tickToTime(v);}
break;case"SHIFT":case"SHIFT_ANDROID":var v=parseFloat(d[1]);if(!isNaN(v)){shift=tickToTime(v);}
break;case"LINK":var links=[];for(var j=1;j<d.length;j++){var link=parseInt(d[j]);if(!isNaN(link)){links.push(link);}
else{break;}}
for(var j=0;j<links.length-1;j++){var id=links[j];notes[id]=notes[id]||{};notes[id]["link"]=links[j+1];}
break;}
break;}}
for(var i=0;i<notes.length;i++){notes[i]["link"]=(isUndefined(notes[i]["link"])?-1:notes[i]["link"]);}}
else{for(var i=0;i<a.length;i++){var d=a[i].split("\t");switch(d[0]){case"NAME":case"BG_MUSIC":break;case"BPM":var v=parseFloat(d[1]);if(!isNaN(v)){bpm=v;}
break;case"SHIFT":case"SHIFT_ANDROID":var v=parseFloat(d[1]);if(!isNaN(v)){shift=tickToTime(v);}
break;case"BLINK_SHIFT":var v=parseFloat(d[1]);if(!isNaN(v)){blinkShift=tickToTime(v);}
break;case"SCAN_MODE":var v=parseInt(d[1]);if(!isNaN(v)){scanMode=v;}
break;case"SECTION":if(!pageSize){var v=parseFloat(d[2]);if(!isNaN(v)){pageSize=tickToTime(v);}}
break;case"NOTE":var id=parseInt(d[1]);var tick=parseFloat(d[3]);var type=parseFloat(d[4]);var x=parseFloat(d[5]);var link=parseInt(d[6]);var duration=parseFloat(d[7]);if(!isNaN(id)&&!isNaN(tick)&&!isNaN(x)&&!isNaN(link)&&!isNaN(duration)){notes[id]={"time":tickToTime(tick),"type":type,"x":x,"link":link,"duration":tickToTime(duration)};}
break;}}}
var beat=[{"when":{"t":0},"bpm":bpm}];var note=(function(){var v=[];for(var i=0;i<notes.length;i++){if(notes[i]["link"]==-1){if(!notes[i]["done"]){var time=notes[i]["time"];if(notes[i]["duration"]){var endTime=notes[i]["time"].fAdd(notes[i]["duration"]);v.push({"when":{"t":time},"where":{"x":toX(notes[i]["x"].toAccurated()),"y":toY(timeToY(time).toAccurated())},"link":{"b":-1,"c":v.length,"a":v.length+1}});v.push({"when":{"t":endTime},"where":{"x":toX(notes[i]["x"].toAccurated()),"y":toY(timeToY(endTime).toAccurated())},"link":{"b":v.length-1,"c":v.length,"a":-1}});}
else{v.push({"when":{"t":time},"where":{"x":toX(notes[i]["x"].toAccurated()),"y":toY(timeToY(time).toAccurated())}});}
notes[i]["done"]=true;}}
else{var drag=[];var n=i;while(notes[n]&&!notes[n]["done"]){drag.push({"time":notes[n]["time"],"x":notes[n]["x"]});notes[n]["done"]=true;if(notes[n]["link"]!=-1){n=notes[n]["link"];}
else{break;}}
for(var j=0;j<drag.length;j++){var time=drag[j]["time"];v.push({"when":{"t":time},"where":{"x":toX(drag[j]["x"].toAccurated()),"y":toY(timeToY(time).toAccurated())},"link":{"b":(j?v.length-1:-1),"c":v.length,"a":(j<drag.length-1?v.length+1:-1)}});}}}
return v;})();var effect=[{"kind":"audio","when":{"t":shift},"path":fileInfo.nameCore+".wav"}];var info={"bpm":bpm,"blinkShift":blinkShift,"scanMode":scanMode,"pageShift":pageShift};setRaw({"data":[[{"beat":beat,"note":note,"effect":effect,"info":info}]]});break;case"cytus2":var getList=function(n){return(cytus2[n]||[]).sort(function(a,b){return a["tick"]-b["tick"];});};var tickToBeat=function(t){return t/base;};var toX=function(x){return x.limit(0,0.999);};var toY=function(y){return y.limit(0,0.999);};var beatToY=function(beat){var y=beat%2/2;var d=(function(){for(var i=0;i<scans.length;i++){if((i==scans.length-1)||(beat>=scans[i]["beat"])){return scans[i]["direction"];}}
return 1;})();return y*d;};var cytus2=fileInfo.json||JSON.parse(txt);var verion=cytus2["format_version"]||0;var base=cytus2["time_base"]||480;var audioOffset=cytus2["start_offset_time"]||0;var scans=(function(){var v=[];var list=getList("page_list");for(var i=0;i<list.length;i++){v.push({"beat":tickToBeat(list[i]["start_tick"]),"direction":list[i]["scan_line_direction"]});if(i==list.length-1){v.push({"beat":tickToBeat(list[i]["end_tick"]),"direction":-list[i]["scan_line_direction"]});}}
return v.sort(function(a,b){return a["beat"]-b["beat"];});})();var beat=(function(){var v=[];var list=getList("tempo_list");for(var i=0;i<list.length;i++){v.push({"when":{"b":tickToBeat(list[i]["tick"])},"bpm":(60000000).fDiv(list[i]["value"]).toAbbreviated(6).toAccurated()});}
return v;})();var note=(function(){var notes=[];var list=getList("note_list");for(var i=0;i<list.length;i++){notes[list[i]["id"]]={"beat":tickToBeat(list[i]["tick"]),"type":list[i]["type"],"x":list[i]["x"],"duration":tickToBeat(list[i]["hold_tick"]),"link":list[i]["next_id"]||-1};}
var v=[];for(var i=0;i<notes.length;i++){if(notes[i]){switch(notes[i]["type"]){case 0:case 5:var flag=(notes[i]["type"]==5?{"flick":"flick"}:undefined);var beat=notes[i]["beat"];v.push({"when":{"b":beat},"where":{"x":toX(notes[i]["x"].toAccurated()),"y":toY(beatToY(beat).toAccurated())},"flag":flag});notes[i]["done"]=true;break;case 1:case 2:var beat=notes[i]["beat"];var endBeat=notes[i]["beat"].fAdd(notes[i]["duration"]);v.push({"when":{"b":beat},"where":{"x":toX(notes[i]["x"].toAccurated()),"y":toY(beatToY(beat).toAccurated())},"link":{"b":-1,"c":v.length,"a":v.length+1}});v.push({"when":{"b":endBeat},"where":{"x":toX(notes[i]["x"].toAccurated()),"y":toY(beatToY(endBeat).toAccurated())},"link":{"b":v.length-1,"c":v.length,"a":-1}});notes[i]["done"]=true;break;case 3:case 6:var flag=(notes[i]["type"]==3?{"catch":"chain"}:undefined);var drag=[];var n=i;while(notes[n]&&!notes[n]["done"]){drag.push({"beat":notes[n]["beat"],"x":notes[n]["x"]});notes[n]["done"]=true;if(notes[n]["link"]!=-1){n=notes[n]["link"];}
else{break;}}
for(var j=0;j<drag.length;j++){var beat=drag[j]["beat"];v.push({"when":{"b":beat},"where":{"x":toX(drag[j]["x"].toAccurated()),"y":toY(beatToY(beat).toAccurated())},"link":{"b":(j?v.length-1:-1),"c":v.length,"a":(j<drag.length-1?v.length+1:-1)},"flag":flag});}
break;}}}
return v;})();var effect=[{"kind":"audio","when":{"t":audioOffset},"path":fileInfo.nameCore+".wav"}];var status=(function(){var v=[];for(var i=0;i<scans.length;i++){v.push({"when":{"b":scans[i]["beat"]},"name":"scanDirection","value":scans[i]["direction"]});}
var list=getList("event_order_list");for(var i=0;i<list.length;i++){var beat=tickToBeat(list[i]["tick"]);for(var j=0;j<list[i]["event_list"].length;j++){v.push({"when":{"b":beat},"name":"cytus2_"+list[i]["event_list"][j]["args"],"value":list[i]["event_list"][j]["type"]});}}
return v;})();setRaw({"data":[[{"beat":beat,"note":note,"effect":effect,"status":status}]]});break;case"bangdream":var addChannelData=function(c,n,v){if(v!="00"){d[c]=d[c]||[];var l=(function(){for(var i=0;i<d[c].length;i++){if(d[c][i][0]==n){return i;}}
return-1;})();if(l!=-1){d[c][l][1]=v;}
else{d[c].push([n,v]);}}};var hBPM=125;var hLNTYPE=1;var hLNOBJ="";var hWAVs={};var hBPMs={};var meta={};var beat=[];var note=[];var effect=[];var status=[];var info={};var key=7;var d={};var a=buffer.getText().replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");for(var i=0;i<a.length;i++){a[i]=a[i].trim();if(a[i][0]=="#"){if(a[i][6]==":"){var n=a[i].slice(1,6).toUpperCase().trim();var m=parseInt(n.slice(0,3));var c=n.slice(3,5);if(!isNaN(m)&&(c!="")){var v=a[i].slice(7).replace(/\s+/g,"").splitEvery(2);for(var j=0;j<v.length;j++){addChannelData(c,m.fAdd(j/v.length),v[j]);}}}
else{var ls=a[i].indexOf(" ",1);if(ls!=-1){var n=a[i].slice(1,ls).toUpperCase();var v=a[i].slice(ls+1).trim();switch(n){case"GENRE":meta["genre"]=v;break;case"TITLE":meta["title"]=v;break;case"ARTIST":meta["artist"]=v;break;case"BPM":v=parseFloat(v);if(!isNaN(v)&&(v>0)){hBPM=v;}
break;case"LNTYPE":v=parseInt(v);if(!isNaN(v)&&(v>=0)){hLNTYPE=v;}
case"LNOBJ":if(v.length==2){hLNOBJ=v;}
break;break;case"PLAYLEVEL":v=parseInt(v);if(!isNaN(v)&&(v>=0)){info["level"]=v;}
break;case"RANK":v=parseInt(v);if(!isNaN(v)&&(v>=0)){info["rank"]=v;}
break;case"STAGEFILE":info["stageFile"]=v;break;default:if(n.length>2){var tag=a[i].slice(1,n.length-1);var index=a[i].slice(n.length-1,n.length+1);switch(tag){case"WAV":hWAVs[index]=hWAVs[index]||{};hWAVs[index]["path"]=v;break;case"BPM":v=parseFloat(v);if(!isNaN(v)&&(v>=0)){hBPMs[index]=v;}
break;}}}}}}}
var sortData=(function(){for(var c in d){d[c]=d[c].sort(SortNumbers);}})();var setBeat=function(n,bpm,bpn){var ow=(arguments.length>3?arguments[3]:true);var l=(function(){for(var i=0;i<beat.length;i++){if(beat[i]["when"]["n"]==n){return i;}}
return-1;})();if(l!=-1){if(ow){beat[l]["bpm"]=(!isUndefined(bpm)?bpm:beat[l]["bpm"]);beat[l]["bpn"]=(!isUndefined(bpn)?bpn:beat[l]["bpn"]);}}
else{beat.push({"when":{"n":n},"bpm":bpm,"bpn":bpn});}};for(var c in d){for(var i=0;i<d[c].length;i++){var measure=d[c][i][0];var index=d[c][i][1];switch(c){case"01":var w=hWAVs[index]["path"];switch(w){case"cmd_fever_ready.wav":status.push({"when":{"n":measure},"name":"bang_fever","value":"ready"});break;case"cmd_fever_start.wav":status.push({"when":{"n":measure},"name":"bang_fever","value":"start"});break;case"cmd_fever_checkpoint.wav":status.push({"when":{"n":measure},"name":"bang_fever","value":"checkpoint"});break;case"cmd_fever_end.wav":status.push({"when":{"n":measure},"name":"bang_fever","value":"end"});break;default:var id=parseInt(fileInfo.name.slice(0,fileInfo.name.indexOf("_")))||parseInt(w.slice(3,w.length-4));if(!isNaN(id)){effect.push({"when":{"n":measure},"kind":"audio","path":"bgm"+id+".mp3"});}
break;}
break;case"02":var sign=parseFloat(index);if(!isNaN(sign)&&(sign>0)){setBeat(measure,undefined,sign.fMul(4));}
break;case"03":var bpm=parseInt(index,16);if(!isNaN(bpm)&&(bpm>0)){setBeat(measure,bpm,undefined);}
break;case"08":var bpm=hBPMs[index];if(!isUndefined(bpm)){setBeat(measure,bpm,undefined);}
break;}}}
var setKeyData=(function(){var channelIndexes=["11","12","13","14","15","16","18","51","52","53","54","55","56","58"];var trackData=(function(){var r={};var getTrackData=function(c){var r={};c=parseInt(c,16);if(isNaN(c)||(c<0x00)||(c>0xF0)){return;}
if(c>0x50){r["type"]="long";c-=0x40;}
else{r["type"]="visible";}
switch(c){case 0x16:r["track"]=c-0x16;break;case 0x11:case 0x12:case 0x13:case 0x14:case 0x15:r["track"]=c-0x10;break;case 0x18:r["track"]=c-0x12;break;}
return r;};for(var c in d){if(channelIndexes.indexOf(c)!=-1){r[c]=getTrackData(c);}}
return r;})();var keyData=(function(){var r=[];for(var c in d){var v=[];if((channelIndexes.indexOf(c)!=-1)&&(trackData[c])){for(var i=0;i<d[c].length;i++){v[i]={"when":{"n":d[c][i][0]},"index":d[c][i][1]};}
switch(trackData[c]["type"]){case"visible":for(var i=1;i<v.length;i++){if((v[i]["index"]==hLNOBJ)&&(v[i-1]["index"]!=hLNOBJ)){v[i-1]["when2"]={"n":v[i]["when"]["n"]};v[i-1]["index2"]=v[i]["index"];v.splice(i,1);}}
break;case"long":switch(hLNTYPE){case 1:for(var i=1;i<v.length;i++){v[i-1]["when2"]={"n":v[i]["when"]["n"]};v[i-1]["index2"]=v[i]["index"];v.splice(i,1);}
break;case 2:for(var i=1;i<v.length;i++){v[i-1]["when2"]={"n":v[i]["when"]["n"]};v[i-1]["index2"]=v[i]["index"];v.splice(i,1);i-=1;}
break;}
break;}
var x=trackToX(trackData[c]["track"],key);for(var i=0;i<v.length;i++){v[i]["x"]=x;}
r.writes(v);}}
r=r.sort(function(a,b){return(a["when"]["n"]-b["when"]["n"])||(a["x"]-b["x"]);});return r;})();var getFlag=function(w){return{"flick":(w.indexOf("flick")!=-1?true:undefined),"fever":(w.indexOf("fever_note")!=-1?true:undefined),"skill":(w.indexOf("skill")!=-1?true:undefined)};};var slide={};for(var i=0;i<keyData.length;i++){var w=hWAVs[keyData[i]["index"]]["path"].replace(".wav","");if(w.indexOf("slide")!=-1){var id=w.slice(w.lastIndexOf("_")+1);slide[id]=slide[id]||[];if(w.indexOf("slide_end")!=-1){if(slide[id].length){slide[id].push({"index":i,"flag":getFlag(w)});for(var j=0;j<slide[id].length;j++){note.push({"when":{"n":keyData[slide[id][j]["index"]]["when"]["n"]},"where":{"x":keyData[slide[id][j]["index"]]["x"]},"flag":slide[id][j]["flag"],"link":{"b":(j?note.length-1:-1),"c":note.length,"a":(j+1<slide[id].length?note.length+1:-1)}});}
slide[id]=[];}}
else if(w.indexOf("slide")!=-1){slide[id].push({"index":i,"flag":getFlag(w)});}}
else if(keyData[i]["when2"]&&(keyData[i]["when2"]["n"]>keyData[i]["when"]["n"])){note.push({"when":{"n":keyData[i]["when"]["n"]},"where":{"x":keyData[i]["x"]},"flag":getFlag(w),"link":{"b":-1,"c":note.length,"a":note.length+1}});note.push({"when":{"n":keyData[i]["when2"]["n"]},"where":{"x":keyData[i]["x"]},"flag":getFlag(hWAVs[keyData[i]["index2"]]["path"].replace(".wav","")),"link":{"b":note.length-1,"c":note.length,"a":-1}});}
else{note.push({"when":{"n":keyData[i]["when"]["n"]},"where":{"x":keyData[i]["x"]},"flag":getFlag(w)});}}})();var fillBeat=(function(){beat=beat.sort(function(a,b){return a["when"]["n"]-b["when"]["n"];});if(!beat.length||(beat[0]["when"]["n"]>0)){beat.unshift({"when":{"n":0},"bpm":hBPM,"bpn":4});}
for(var i=0;i<beat.length;i++){beat[i]["bpm"]=(isUndefined(beat[i]["bpm"])?(i?beat[i-1]["bpm"]:hBPM):beat[i]["bpm"]);beat[i]["bpn"]=(isUndefined(beat[i]["bpn"])?(i?beat[i-1]["bpn"]:4):beat[i]["bpn"]);if(i&&(beat[i]["bpm"]==beat[i-1]["bpm"])&&(beat[i]["bpn"]==beat[i-1]["bpn"])){beat.splice(i,1);i-=1;}}})();var setInfo=(function(){info["key"]=key;info["length"]=(function(){var v=0;for(var i=0;i<note.length;i++){v=(v<note[i]["when"]["n"]?note[i]["when"]["n"]:v);}
if(d["01"].length&&isUndefined(hWAVs[d["01"][d["01"].length-1][1]])){v=(v<d["01"][d["01"].length-1][0]?d["01"][d["01"].length-1][0]:v);}
return{"when":{"n":v}};})();})();setRaw({"meta":meta,"data":[[{"beat":beat,"note":note,"effect":effect,"status":status,"info":info}]]});break;case"musync":var tickToTime=function(t){return t/10000;};if(version){txt=new Uint8Array().fromBase64(txt).cryptDES(false,new Uint8Array().fromHex("147A3F256B0DC8E9"),new Uint8Array().fromHex("1324967058ABCDEF")).getText();}
var a=txt.replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");var bpm=125;var bpn=4;var key=8;var level=1;var bpms=[];var fpns=[];var wavs=[];var mNotes=[];var tNotes=[];var lNotes=[];var sNotes=[];var status=[];var noteFactoryPrepare="";var defaultStartTunnel="";var defaultWeatherUIB="";var defaultCurtainUIC="";var defaultChiefClimax="";for(var i=0;i<a.length;i++){var d=a[i].split("\t");switch(d[0]){case"BPM":var v=parseFloat(d[1]);if(!isNaN(v)){bpm=v;}
break;case"Rank":var v=parseInt(d[1]);if(!isNaN(v)){level=v;}
break;case"NoteFactoryPrepare":noteFactoryPrepare=d.slice(1).join("\t");break;case"DefaultStartTunnel":defaultStartTunnel=d[1];break;case"DefaultWeatherUIB":defaultWeatherUIB=d[1];break;case"DefaultCurtainUIC":defaultCurtainUIC=d[1];break;case"DefaultChiefClimax":defaultChiefClimax=d[1];break;case"SubBeatNumber":var v=parseFloat(d[1]);if(!isNaN(v)){bpn=v;}
break;case"WAV":var id=new Number().fromBase(d[1],36);if(!isNaN(id)){wavs[id]=d[2]+".wav";}
break;case"BeatLine":break;case"SpeedChange":var tick=parseInt(d[1]);var value=parseFloat(d[2]);if(!isNaN(tick)&&!isNaN(value)){fpns.push([tickToTime(tick),value]);}
break;case"BPMChanger":var tick=parseInt(d[1]);var value=parseFloat(d[2]);if(!isNaN(tick)&&!isNaN(value)){bpms.push([tickToTime(tick),value]);}
break;case"TunnelSwitch":var tick=parseInt(d[1]);var value=(d[2]=="true"?true:false);if(!isNaN(tick)){status.push({"when":{"t":tickToTime(tick)},"name":"musync_tunnelSwitch","value":value});}
break;case"TunnelThickness":var tick=parseInt(d[1]);var value=parseInt(d[2]);var endTick=parseInt(d[3]);if(!isNaN(tick)&&!isNaN(value)&&!isNaN(endTick)){status.push({"when":{"t":tickToTime(tick)},"name":"musync_tunnelThickness","value":value});status.push({"when":{"t":tickToTime(endTick)},"name":"musync_tunnelThickness"});}
break;case"TunnelRotate":var tick=parseInt(d[1]);if(!isNaN(tick)){status.push({"when":{"t":tickToTime(tick)},"name":"musync_tunnelRotate","value":d.slice(2).join("\t")});}
break;case"TunnelSpiralNo":var tick=parseInt(d[1]);var value=parseInt(d[2]);if(!isNaN(tick)&&!isNaN(value)){status.push({"when":{"t":tickToTime(tick)},"name":"musync_tunnelSpiralNo","value":value});}
break;case"TunnelSpiralAngle":var tick=parseInt(d[1]);if(!isNaN(tick)){status.push({"when":{"t":tickToTime(tick)},"name":"musync_tunnelSpiralAngle","value":d.slice(2).join("\t")});}
break;case"WeatherBg":var tick=parseInt(d[1]);var value=d[2];var endTick=parseInt(d[3]);if(!isNaN(tick)&&!isNaN(endTick)){status.push({"when":{"t":tickToTime(tick)},"name":"musync_weatherBg","value":value});status.push({"when":{"t":tickToTime(endTick)},"name":"musync_weatherBg"});}
break;case"WeatherUIB":var tick=parseInt(d[1]);var value=d[2];var endTick=parseInt(d[3]);if(!isNaN(tick)&&!isNaN(endTick)){status.push({"when":{"t":tickToTime(tick)},"name":"musync_weatherUIB","value":value});status.push({"when":{"t":tickToTime(endTick)},"name":"musync_weatherUIB"});}
break;case"CurtainUIC":var tick=parseInt(d[1]);var value=d[2];if(!isNaN(tick)){status.push({"when":{"t":tickToTime(tick)},"name":"musync_curtainUIC","value":value});}
break;case"ChiefClimax":var tick=parseInt(d[1]);var value=(d[2]=="true"?true:false);if(!isNaN(tick)){status.push({"when":{"t":tickToTime(tick)},"name":"musync_chiefClimax","value":value});}
break;case"ReverseColor":var tick=parseInt(d[1]);var value=parseInt(d[2]);var endTick=parseInt(d[3]);if(!isNaN(tick)&&!isNaN(value)&&!isNaN(endTick)){status.push({"when":{"t":tickToTime(tick)},"name":"musync_reverseColor","value":value});status.push({"when":{"t":tickToTime(endTick)},"name":"musync_reverseColor"});}
break;case"MoveCamera":var tick=parseInt(d[1]);var value=d[2];if(!isNaN(tick)){status.push({"when":{"t":tickToTime(tick)},"name":"musync_moveCamera","value":value});}
break;case"MusicNote":var tick=parseInt(d[1]);var track=parseInt(d[2]);var id=new Number().fromBase(d[3],36);if(!isNaN(tick)&&!isNaN(track)&&!isNaN(id)){mNotes.push({"time":tickToTime(tick),"track":track,"id":id});}
break;case"Note":var tick=parseInt(d[1]);var track=parseInt(d[2]);var id=new Number().fromBase(d[3],36);if(!isNaN(tick)&&!isNaN(track)&&!isNaN(id)&&(track>0)&&(track<key+1)){tNotes.push({"time":tickToTime(tick),"track":track,"id":id});}
break;case"LongNote":var tick=parseInt(d[1]);var track=parseInt(d[2]);var id=new Number().fromBase(d[3],36);var endTick=parseInt(d[4]);if(!isNaN(tick)&&!isNaN(track)&&!isNaN(id)&&!isNaN(endTick)&&(track>0)&&(track<key+1)&&(endTick>tick)){lNotes.push({"time":tickToTime(tick),"track":track,"id":id,"endTime":tickToTime(endTick)});}
break;case"LongNoteSub":var tick=parseInt(d[1]);var track=parseInt(d[2]);var id=new Number().fromBase(d[3],36);var endTick=parseInt(d[4]);var endTrack=parseInt(d[5]);if(!isNaN(tick)&&!isNaN(track)&&!isNaN(id)&&!isNaN(endTick)&&!isNaN(endTrack)&&(track>0)&&(track<key+1)&&(endTick>tick)&&(endTrack>0)&&(endTrack<key+1)){sNotes.push({"time":tickToTime(tick),"track":track,"id":id,"endTime":tickToTime(endTick),"endTrack":endTrack});}
break;}}
var beat=(function(){var find=function(t){for(var i=0;i<v.length;i++){if(v[i][0]==t){return i;}}
return-1;};var set=function(t,d){var l=find(t);if(l==-1){l=v.length;v.push([t]);}
for(var i=0;i<d.length;i++){if(!isUndefined(d[i])){v[l][i+1]=d[i];}}};var v=[[0,bpm,bpn,1]];for(var i=0;i<bpms.length;i++){set(bpms[i][0],[bpms[i][1],undefined,undefined]);}
for(var i=0;i<fpns.length;i++){set(fpns[i][0],[undefined,undefined,fpns[i][1]]);}
v=v.sort(function(a,b){return a[0]-b[0];});for(var i=1;i<v.length;i++){v[i][1]=(isUndefined(v[i][1])?v[i-1][1]:v[i][1]);v[i][2]=(isUndefined(v[i][2])?v[i-1][2]:v[i][2]);v[i][3]=(isUndefined(v[i][3])?v[i-1][3]:v[i][3]);}
for(var i=0;i<v.length;i++){v[i]={"when":{"t":v[i][0]},"bpm":v[i][1],"bpn":v[i][2],"fpn":v[i][3]};}
return v;})();var note=(function(){var v=[];for(var i=0;i<tNotes.length;i++){v.push({"when":{"t":tNotes[i]["time"]},"where":{"x":trackToX(tNotes[i]["track"]-1,key)},"trigger":(wavs[tNotes[i]["id"]]?[{"kind":"audio","path":wavs[tNotes[i]["id"]]}]:undefined)});}
for(var i=0;i<lNotes.length;i++){var isInSub=(function(){for(var j=0;j<sNotes.length;j++){if((sNotes[j]["track"]==lNotes[i]["track"])&&(sNotes[j]["time"]==lNotes[i]["time"])){return true;}}
return false;})();if(!isInSub){v.push({"when":{"t":lNotes[i]["time"]},"where":{"x":trackToX(lNotes[i]["track"]-1,key)},"trigger":(wavs[lNotes[i]["id"]]?[{"kind":"audio","path":wavs[lNotes[i]["id"]]}]:undefined),"link":{"b":-1,"c":v.length,"a":v.length+1}});v.push({"when":{"t":lNotes[i]["endTime"]},"where":{"x":trackToX(lNotes[i]["track"]-1,key)},"link":{"b":v.length-1,"c":v.length,"a":-1}});}}
sNotes=sNotes.sort(function(a,b){return(a["time"]-b["time"])||(a["track"]-b["track"]);});for(var i=0;i<sNotes.length;i++){if(sNotes[i]["list"]){continue;}
var list=[];var n=-1;var findNext=function(){if(n==-1){return i;}
for(var j=n+1;j<sNotes.length;j++){if(!sNotes[j]["list"]&&(sNotes[j]["time"]==sNotes[n]["endTime"])&&(sNotes[j]["track"]==sNotes[n]["endTrack"])){return j;}}
return-1;};while(true){n=findNext();if(n!=-1){list.push(n);sNotes[n]["list"]=true;}
else{break;}}
for(var j=0;j<list.length;j++){v.push({"when":{"t":sNotes[list[j]]["time"]},"where":{"x":trackToX(sNotes[list[j]]["track"]-1,key)},"trigger":(wavs[sNotes[list[j]]["id"]]?[{"kind":"audio","path":wavs[sNotes[list[j]]["id"]]}]:undefined),"link":{"b":(j?v.length-1:-1),"c":v.length,"a":v.length+1}});if(j==list.length-1){v.push({"when":{"t":sNotes[list[j]]["endTime"]},"where":{"x":trackToX(sNotes[list[j]]["endTrack"]-1,key)},"link":{"b":v.length-1,"c":v.length,"a":-1}});}}}
return v;})();var effect=(function(){var v=[];for(var i=0;i<mNotes.length;i++){if(wavs[mNotes[i]["id"]]){v.push({"when":{"t":mNotes[i]["time"]},"kind":"audio","path":wavs[mNotes[i]["id"]]});}}
return v;})();var info={"bpm":bpm,"key":key,"level":level,"noteFactoryPrepare":noteFactoryPrepare,"defaultStartTunnel":defaultStartTunnel,"defaultWeatherUIB":defaultWeatherUIB,"defaultCurtainUIC":defaultCurtainUIC,"defaultChiefClimax":defaultChiefClimax};setRaw({"data":[[{"beat":beat,"note":note,"effect":effect,"status":status,"info":info}]]});break;}};var fromJsonBuffer=function(buffer){var trackToX=function(track,key){return(track*2+1)/(key*2);};var json=fileInfo.json||JSON.parse(fileInfo.text||buffer.getText());var type=fileInfo.type;switch(type){case"deemo":var toTime=function(t){return t.fMul(1000);};var toX=function(x){return x.limit(0,0.999);};var posToX=function(pos){return pos.fAdd(2).fDiv(4);};var soundsToTrigger=function(s){var r=[];s=s||[];for(var i=0;i<s.length;i++){var t={"kind":"audio"};var w=parseFloat(s[i]["w"]);if(!isNaN(w)){t["offset"]=toTime(w);}
var d=parseFloat(s[i]["d"]);if(!isNaN(d)){t["duration"]=toTime(d);}
var p=parseFloat(s[i]["p"]);if(!isNaN(p)){t["pitch"]=p;}
var v=parseFloat(s[i]["v"]);if(!isNaN(v)){t["volume"]=v/100;}
r.push(t);}
return r;};var findId=function(id){var i=parseInt(id);if(!isNaN(i)&&notes[i-1]&&(notes[i-1]["$id"]==id)){return i-1;}
for(var i=0;i<notes.length;i++){if(notes[i]["$id"]==id){return i;}}
return-1;};var speed=json["speed"]||1;var notes=json["notes"]||[];var links=json["links"]||[];for(var i=0;i<links.length;i++){links[i]["notes"]=links[i]["notes"]||[];for(var j=0;j<links[i]["notes"].length-1;j++){var c=findId(links[i]["notes"][j]["$ref"]);var a=findId(links[i]["notes"][j+1]["$ref"]);if((c!=-1)&&(a!=-1)){notes[c]["link"]=a;}}}
for(var i=0;i<notes.length;i++){notes[i]["time"]=(isUndefined(notes[i]["time"])?notes[i]["_time"]:notes[i]["time"]);notes[i]["pos"]=(isUndefined(notes[i]["pos"])?0:notes[i]["pos"]);notes[i]["link"]=notes[i]["link"]||-1;notes[i]["done"]=((notes[i]["pos"]<-2)||(notes[i]["pos"]>2)?true:false);}
var note=(function(){var v=[];for(var i=0;i<notes.length;i++){if(notes[i]["link"]==-1){if(!notes[i]["done"]){v.push({"when":{"t":toTime(notes[i]["time"])},"where":{"x":toX(posToX(notes[i]["pos"]).toAccurated())},"flag":(notes[i]["size"]?{"size":{"w":notes[i]["size"].toAccurated()}}:undefined),"trigger":soundsToTrigger(notes[i]["sounds"])});notes[i]["done"]=true;}}
else{var drag=[];var n=i;while(notes[n]&&!notes[n]["done"]){drag.push({"time":notes[n]["time"],"pos":notes[n]["pos"],"size":notes[n]["size"],"sounds":notes[n]["sounds"]});notes[n]["done"]=true;if(notes[n]["link"]!=-1){n=notes[n]["link"];}
else{break;}}
for(var j=0;j<drag.length;j++){v.push({"when":{"t":toTime(drag[j]["time"])},"where":{"x":toX(posToX(drag[j]["pos"]).toAccurated())},"link":{"b":(j?v.length-1:-1),"c":v.length,"a":(j<drag.length-1?v.length+1:-1)},"flag":(drag[j]["size"]?{"size":{"w":drag[j]["size"].toAccurated()}}:undefined),"trigger":soundsToTrigger(drag[j]["sounds"])});}}}
return v;})();setRaw({"data":[[{"note":note,"info":{"speed":speed}}]]});break;case"imd":var tickToBeat=function(t){return t.fDiv(48);};var key=4;var signature=json["signature"];var tempo=json["tempo"];var tracks=json["tracks"];var version=json["version"];var beat=[{"when":{"b":0},"bpm":tempo}];var note=(function(){var notes=[];for(var i=0;i<tracks.length;i++){if((tracks[i]["track"]>=3)&&(tracks[i]["track"]<=6)){var track=tracks[i]["track"]-3;for(var j=0;j<tracks[i]["note"].length;j++){notes.push({"tick":tracks[i]["note"][j]["tick"],"endTick":tracks[i]["note"][j]["tick"]+tracks[i]["note"][j]["dur"],"track":track,"endTrack":(tracks[i]["note"][j]["toTrack"]?tracks[i]["note"][j]["toTrack"]-3:-1),"isEnd":tracks[i]["note"][j]["isEnd"],"attr":tracks[i]["note"][j]["attr"]});}}}
notes=notes.sort(function(a,b){return(a["tick"]-b["tick"])||(a["track"]-b["track"]);});var v=[];for(var i=0;i<notes.length;i++){if(notes[i]["attr"]==0){if(notes[i]["tick"]==notes[i]["endTick"]){v.push({"when":{"b":tickToBeat(notes[i]["tick"])},"where":{"x":trackToX(notes[i]["track"],key)}});}
else{v.push({"when":{"b":tickToBeat(notes[i]["tick"])},"where":{"x":trackToX(notes[i]["track"],key)},"link":{"b":-1,"c":v.length,"a":v.length+1}});v.push({"when":{"b":tickToBeat(notes[i]["endTick"])},"where":{"x":trackToX(notes[i]["track"],key)},"link":{"b":v.length-1,"c":v.length,"a":-1}});}}
else if(notes[i]["attr"]==3){var drag=[];var n=i;while(true){drag.push({"tick":notes[n]["tick"],"endTick":notes[n]["endTick"],"track":notes[n]["track"],"endTrack":notes[n]["endTrack"]});var l=(function(){if(!notes[n]["isEnd"]){for(var j=0;j<notes.length;j++){if((notes[j]["attr"]==4)&&(notes[j]["tick"]==notes[n]["endTick"])&&(notes[j]["track"]==notes[n]["endTrack"])){return j;}}}
return-1;})();if(l!=-1){n=l;}
else{break;}}
for(var j=0;j<drag.length;j++){v.push({"when":{"b":tickToBeat(drag[j]["tick"])},"where":{"x":trackToX(drag[j]["track"],key)},"link":{"b":(j?v.length-1:-1),"c":v.length,"a":v.length+1}});if(j==drag.length-1){v.push({"when":{"b":tickToBeat(drag[j]["endTick"])},"where":{"x":trackToX(drag[j]["endTrack"],key)},"link":{"b":v.length-1,"c":v.length,"a":-1}});}}}}
return v;})();setRaw({"meta":{"creator":signature,"version":version},"data":[[{"beat":beat,"note":note,"info":{"bpm":tempo,"key":4}}]]});break;}};var fromMcBuffer=function(buffer){var mc=fileInfo.json||JSON.parse(fileInfo.text||buffer.getText());var meta={};var beat=[];var note=[];var effect=[];var status=[];var info={};var mode=0;var fromBeatArray=function(a){if(a&&a.length&&(a.length==3)){var b=parseFloat(a[0]);var c=parseFloat(a[1]);var d=parseFloat(a[2]);if(!isNaN(b)&&!isNaN(c)&&!isNaN(d)&&(d>0)){return b.fAdd(c.fDiv(d));}}
return NaN;};var readMeta=(function(){if(mc["meta"]){info["cover"]=mc["meta"]["cover"];meta["creator"]=mc["meta"]["creator"];info["background"]=mc["meta"]["background"];effect.push({"when":{"b":0},"kind":"image","what":"back","path":mc["meta"]["background"]});meta["version"]=mc["meta"]["version"];meta["datetime"]=new Date(mc["meta"]["time"]).format();info["id"]=mc["meta"]["id"];mode=mc["meta"]["mode"];if(mc["meta"]["song"]){meta["title"]=mc["meta"]["song"]["title"];meta["artist"]=mc["meta"]["song"]["artist"];meta["id"]=mc["meta"]["song"]["id"];meta["source"]=mc["meta"]["song"]["source"];if(mc["meta"]["song"]["org"]){meta["orgTitle"]=mc["meta"]["song"]["org"]["title"];meta["orgArtist"]=mc["meta"]["song"]["org"]["artist"];meta["orgSource"]=mc["meta"]["song"]["org"]["source"];}}
if(mc["meta"]["mode_ext"]){info["key"]=mc["meta"]["mode_ext"]["column"];info["speed"]=mc["meta"]["mode_ext"]["speed"];info["interval"]=mc["meta"]["mode_ext"]["interval"];}}})();var readTime=(function(){if(mc["time"]){for(var i=0;i<mc["time"].length;i++){var b=fromBeatArray(mc["time"][i]["beat"]);if(!isNaN(b)){var bpm=parseFloat(mc["time"][i]["bpm"]);var bpn=parseFloat(mc["time"][i]["signature"]);beat.push({"when":{"b":b},"bpm":(!isNaN(bpm)?bpm:undefined),"bpn":(!isNaN(bpn)?bpn:undefined)});}}}
if(!beat.length){beat.push({"when":{"b":0},"bpm":116,"bpn":4});}
beat=beat.sort(SortNumbers);for(var i=1;i<beat.length;i++){if(beat[i]["when"]["b"]==beat[i-1]["when"]["b"]){beat.splice(i-1,1);i-=1;}}
if(beat[0]["when"]["b"]!=0){beat.unshift({"when":{"b":0},"bpm":beat[0]["bpm"],"bpn":beat[0]["bpn"]});}})();var readEffect=(function(){if(mc["effect"]){for(var i=0;i<mc["effect"].length;i++){var b=fromBeatArray(mc["effect"][i]["beat"]);if(!isNaN(b)){var fpn=parseFloat(mc["effect"][i]["scroll"]);var lpn=parseFloat(mc["effect"][i]["sign"]);var barLine=parseFloat(mc["effect"][i]["showbar"]);var warp=parseFloat(mc["effect"][i]["jump"]);var hs=parseFloat(mc["effect"][i]["hs"]);if(!isNaN(fpn)){beat.push({"when":{"b":b},"fpn":fpn});}
if(!isNaN(lpn)){beat.push({"when":{"b":b},"lpn":lpn});}
if(!isNaN(barLine)){status.push({"when":{"b":b},"name":"barLine","value":(barLine?1:0)});}
if(!isNaN(warp)){status.push({"when":{"b":b},"name":"warp","value":warp});}
if(!isNaN(hs)){status.push({"when":{"b":b},"name":"mc_hs","value":hs});}}}}})();var trackToX=function(track,key){return(track*2+1)/(key*2);};var key=info["key"]||parseInt(getSelected("selectTransKey"))||4;var tCatch=Math.ceil(key/2);var nCatch=0;var dLeft=true;var kLeft=true;var bLeft=true;var readNote=(function(){if(mc["note"]){for(var i=0;i<mc["note"].length;i++){var beat=fromBeatArray(mc["note"][i]["beat"]);if(!isNaN(beat)){var endbeat=fromBeatArray(mc["note"][i]["endbeat"]);var type=parseInt(mc["note"][i]["type"]);if(!isNaN(type)&&(type==1)){effect.push({"when":{"b":beat},"kind":"audio","path":mc["note"][i]["sound"],"volume":((mc["note"][i]["vol"]||0)+128)/255,"offset":mc["note"][i]["offset"],"fix":mc["note"][i]["isBgm"]});}
else{var trigger=(mc["note"][i]["sound"]?[{"kind":"audio","path":mc["note"][i]["sound"],"volume":((mc["note"][i]["vol"]||0)+128)/255}]:undefined);switch(mode){case 0:case 1:case 2:case 6:var column=parseInt(mc["note"][i]["column"]);if(!isNaN(column)&&(column<key)){var x=trackToX(column,key);if(!isNaN(endbeat)&&(endbeat>beat)){note.push({"when":{"b":beat},"where":{"x":x},"link":{"b":-1,"c":note.length,"a":note.length+1},"trigger":trigger});note.push({"when":{"b":endbeat},"where":{"x":x},"link":{"b":note.length-1,"c":note.length,"a":-1}});}
else{note.push({"when":{"b":beat},"where":{"x":x},"trigger":trigger});}}
break;case 3:var x=parseFloat(mc["note"][i]["x"]);if(!isNaN(x)){note.push({"when":{"b":beat},"where":{"x":x.limit(0,511).fDiv(512)},"trigger":trigger});}
else if(!isNaN(type)&&(type==3)){if(((key%2==0)&&(tCatch==0))||((key%2!=0)&&(tCatch==key-1))){tCatch=Math.ceil(key/2);nCatch=0;}
tCatch+=(nCatch%2==0?nCatch:-nCatch);nCatch+=1;var x=trackToX(tCatch,key);if(!isNaN(endbeat)&&(endbeat>beat)){note.push({"when":{"b":beat},"where":{"x":x},"link":{"b":-1,"c":note.length,"a":note.length+1},"trigger":trigger});note.push({"when":{"b":endbeat},"where":{"x":x},"link":{"b":note.length-1,"c":note.length,"a":-1}});}
else{note.push({"when":{"b":beat},"where":{"x":x},"trigger":trigger});}}
break;case 4:var index=parseInt(mc["note"][i]["index"]);var endindex=parseInt(mc["note"][i]["endindex"]);if(!isNaN(index)){var x=trackToX(index%4,4);var y=1-trackToX(index/4|0,4);var x2=(!isNaN(endindex)?trackToX(endindex%4,4):x);var y2=(!isNaN(endindex)?1-trackToX(endindex/4|0,4):y);if(!isNaN(endbeat)&&(endbeat>beat)){note.push({"when":{"b":beat},"where":{"x":x,"y":y},"link":{"b":-1,"c":note.length,"a":note.length+1},"trigger":trigger});note.push({"when":{"b":endbeat},"where":{"x":x2,"y":y2},"link":{"b":note.length-1,"c":note.length,"a":-1}});}
else{note.push({"when":{"b":beat},"where":{"x":x,"y":y},"trigger":trigger});}}
break;case 5:var style=parseInt(mc["note"][i]["style"]);if(!isNaN(style)){switch(style){case 0:note.push({"when":{"b":beat},"where":{"x":trackToX((dLeft?1:2),key)},"trigger":trigger});dLeft=!dLeft;break;case 1:note.push({"when":{"b":beat},"where":{"x":trackToX(1,key)},"trigger":trigger});note.push({"when":{"b":beat},"where":{"x":trackToX(2,key)}});break;case 2:note.push({"when":{"b":beat},"where":{"x":trackToX((kLeft?0:3),key)},"trigger":trigger});kLeft=!kLeft;break;case 3:note.push({"when":{"b":beat},"where":{"x":trackToX(0,key)},"trigger":trigger});note.push({"when":{"b":beat},"where":{"x":trackToX(3,key)}});break;case 4:case 5:var x=trackToX(style-3,key);if(!isNaN(endbeat)&&(endbeat>beat)){note.push({"when":{"b":beat},"where":{"x":x},"link":{"b":-1,"c":note.length,"a":note.length+1},"trigger":trigger});note.push({"when":{"b":endbeat},"where":{"x":x},"link":{"b":note.length-1,"c":note.length,"a":-1}});}
else{note.push({"when":{"b":beat},"where":{"x":x},"trigger":trigger});}
break;case 6:var x=trackToX((bLeft?0:3),key);if(!isNaN(endbeat)&&(endbeat>beat)){note.push({"when":{"b":beat},"where":{"x":x},"link":{"b":-1,"c":note.length,"a":note.length+1},"trigger":trigger});note.push({"when":{"b":endbeat},"where":{"x":x},"link":{"b":note.length-1,"c":note.length,"a":-1}});}
else{note.push({"when":{"b":beat},"where":{"x":x},"trigger":trigger});}
bLeft=!bLeft;break;}}
break;case 7:var x=parseFloat(mc["note"][i]["x"]);if(!isNaN(x)){var a=[[beat,x]];if(mc["note"][i]["seg"]){for(var j=0;j<mc["note"][i]["seg"].length;j++){var sbeat=fromBeatArray(mc["note"][i]["seg"][j]["beat"]);var sx=parseFloat(mc["note"][i]["seg"][j]["x"]);if(!isNaN(sbeat)&&!isNaN(sx)){a.push([beat.fAdd(sbeat),x.fAdd(sx)]);}}}
for(var j=0;j<a.length;j++){note.push({"when":{"b":a[j][0]},"where":{"x":a[j][1].limit(0,255).fDiv(256)},"link":{"b":(j==0?-1:note.length-1),"c":note.length,"a":(j==a.length-1?-1:note.length+1)},"flag":{"size":{"w":(j==0?(mc["note"][i]["w"]||48).fDiv(256):undefined)},"catch":((j==0)&&(mc["note"][i]["type"]==4)?"wipe":"")},"trigger":(j==0?trigger:undefined)});}}
break;}}}}}})();var readExtra=(function(){if(mc["extra"]){if(mc["extra"]["test"]){info["testDivide"]=mc["extra"]["test"]["divide"];info["testSpeed"]=mc["extra"]["test"]["speed"];info["testSave"]=mc["extra"]["test"]["save"];info["testLock"]=mc["extra"]["test"]["lock"];info["testEditMode"]=mc["extra"]["test"]["edit_mode"];}}})();setRaw({"meta":meta,"data":[[{"beat":beat,"note":note,"effect":effect,"status":status,"info":info}]]});};var fromC2sBuffer=function(buffer){};var fromAffBuffer=function(buffer){var trackToX=function(track,key){return(track*2+1)/(key*2);};var toX=function(x){return x.fSub(0.5).fDiv(1.5).fMul(0.998).fAdd(1).fDiv(2);};var toY=function(y){return y.fSub(2.5).fDiv(2.5).fMul(0.998).fAdd(1).fDiv(2);};var width=1600;var height=1200;var deep=5000;var offset=0;var mScenecontrol={"arcahvdebris":"debris","arcahvdistort":"distort","redline":"redLine"};var data=[];var aff=buffer.getText().replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");var arg=[];var header=(function(){var v=[];for(var i=0;i<aff.length;i++){if(aff[i].trim()=="-"){break;}
else{v.push(aff[i]);}}
aff.splice(0,v.length+1);return v;})();var group=(function(){var v=[[]];var n=0;var isStart=function(t){var l=t.indexOf("timinggroup");if(l!=-1){var l2=t.indexOf("(",l);if(l2!=-1){var l3=t.indexOf(")",l2);if(l3!=-1){var l4=t.indexOf("{",l3);if(l4!=-1){return t.slice(l2+1,l3).split(",").map(function(a){return a.trim();});}}}}
return false;};var isEnd=function(t){var l=t.indexOf("}");if(l!=-1){var l2=t.indexOf(";",l);if(l2!=-1){return true;}}
return false;};for(var i=0;i<aff.length;i++){var a=isStart(aff[i]);if(a){aff.splice(i,1);n+=1;v[n]=[];arg[n]=a;for(var j=i;j<aff.length;j++){if(isEnd(aff[j])){aff.splice(j,1);j-=1;break;}
else if(j==aff.length-1){break;}
else{v[n].push(aff[j]);}}
i=j;}
else{v[0].push(aff[i]);}}
return v;})();for(var i=0;i<header.length;i++){var d=header[i].split(":");if(d.length==2){switch(d[0].trim()){case"AudioOffset":offset=-(parseFloat(d[1])||0);break;}}}
for(var child=0;child<group.length;child++){var isNoInput=(arg[child]&&arg[child].length&&arg[child].indexOf("noinput")!=-1?true:false);var beat=[];var note=[];var status=[];var transform=[];var s=function(a,b){var getTime=function(d){var l1=d.indexOf("(");if(l1!=-1){var l2=d.indexOf(",",l1);if(l2!=-1){var v=parseFloat(d.slice(l1+"(".length,l2));if(!isNaN(v)){return v;}}}
return-1;};var getType=function(d){var l=d.indexOf("(");if(l!=-1){var t=d.slice(0,l).toLowerCase().trim();switch(t){case"timing":return 0;break;case"":return 1;break;case"hold":return 2;break;case"arc":return 3;break;default:return-1;break;}}
return-1;};var ta=getTime(a);var tb=getTime(b);if(ta!=tb){return ta-tb;}
else{return getType(a)-getType(b);}};group[child].sort(s);for(var i=0;i<group[child].length;i++){var l1=group[child][i].indexOf("(");if(l1!=-1){var l2=group[child][i].indexOf(")",l1);if(l2!=-1){var l3=group[child][i].indexOf(";",l2);if(l3!=-1){var d=group[child][i].slice(l1+"(".length,l2).split(",");var m=group[child][i].slice(0,l1).toLowerCase().trim();switch(m){case"timing":if(d.length>2){var time=parseFloat(d[0]);if(isNaN(time)){continue;}
var bpm=parseFloat(d[1]);if(isNaN(bpm)){continue;}
var lpn=parseFloat(d[2]);if(isNaN(lpn)){continue;}
if(!beat.length||(bpm!=beat[beat.length-1]["bpm"])||(lpn!=beat[beat.length-1]["lpn"])){beat.push({"when":{"t":time},"bpm":bpm,"lpn":lpn});}}
break;case"":if(d.length>1){var time=parseFloat(d[0]);if(isNaN(time)){continue;}
var track=parseInt(d[1]);if(isNaN(track)){continue;}
track=track.limit(1,4);track-=1;note.push({"when":{"t":time},"where":{"x":trackToX(track,4)},"link":{"b":-1,"c":note.length,"a":-1},"flag":{"fake":(isNoInput?true:undefined)}});}
break;case"hold":if(d.length>2){var time1=parseFloat(d[0]);if(isNaN(time1)){continue;}
var time2=parseFloat(d[1]);if(isNaN(time2)){continue;}
var track=parseFloat(d[2]);if(isNaN(track)){continue;}
track-=1;track=(track<0?0:track);track=(track>3?3:track);if(time2>=time1){note.push({"when":{"t":time1},"where":{"x":trackToX(track,4)},"link":{"b":-1,"c":note.length,"a":note.length+1},"flag":{"fake":(isNoInput?true:undefined)}});note.push({"when":{"t":time2},"where":{"x":trackToX(track,4)},"link":{"b":note.length-1,"c":note.length,"a":-1},"flag":{"fake":(isNoInput?true:undefined)}});}}
break;case"arc":if(d.length>9){var time1=parseFloat(d[0]);if(isNaN(time1)){continue;}
var time2=parseFloat(d[1]);if(isNaN(time2)){continue;}
var x1=parseFloat(d[2]);if(isNaN(x1)){continue;}
var x2=parseFloat(d[3]);if(isNaN(x2)){continue;}
var type=d[4].trim();var y1=parseFloat(d[5]);if(isNaN(y1)){continue;}
var y2=parseFloat(d[6]);if(isNaN(y2)){continue;}
var parallel=parseInt(d[7]);if(isNaN(parallel)){continue;}
var adv=d[8].trim();var isTab=d[9].trim();if((isTab!="true")&&(isTab!="false")){continue;}
var times=(function(){var v=[];var l4=group[child][i].indexOf("[",l2);if(l4!=-1){var l5=group[child][i].indexOf("]",l4);if(l5!=-1){var l=group[child][i].slice(l4+"[".length,l5).split(",");for(var j=0;j<l.length;j++){var la=l[j].indexOf("arctap(");if(la!=-1){var lb=l[j].indexOf(")",la);if(lb!=-1){var time=parseFloat(l[j].slice(la+"arctap(".length,lb));if(isNaN(time)){continue;}
v.push(time);}}}}}
return v;})();if(time2>=time1){x1=toX(x1.limit(-0.5,1.5));x2=toX(x2.limit(-0.5,1.5));y1=toY(y1.limit(0,1));y2=toY(y2.limit(0,1));if((isTab=="true")||!((time2==time1)&&(x2==x1)&&(y2==y1))){note.push({"when":{"t":time1},"where":{"x":x1,"y":y1},"link":{"b":-1,"c":note.length,"a":note.length+1},"line":{"curve":"arcaea_"+type},"flag":{"catch":"arc","invalid":(isTab=="true"?1:0),"fake":(isNoInput?true:undefined),"parallel":"arcaea_"+parallel}});note.push({"when":{"t":time2},"where":{"x":x2,"y":y2},"link":{"b":note.length-1,"c":note.length,"a":-1},"line":{"curve":"arcaea_"+type},"flag":{"catch":"arc","invalid":(isTab=="true"?1:0),"fake":(isNoInput?true:undefined),"parallel":"arcaea_"+parallel}});}
if(times.length){for(var j=0;j<times.length;j++){if(times[j]>=time1){var x=x1.fAdd((times[j]==time1)||(time2==time1)?0:times[j].fSub(time1).fDiv(time2.fSub(time1)).fMul(x2.fSub(x1)));var y=y1.fAdd((times[j]==time1)||(time2==time1)?0:times[j].fSub(time1).fDiv(time2.fSub(time1)).fMul(y2.fSub(y1)));note.push({"when":{"t":times[j]},"where":{"x":x,"y":y},"link":{"b":-1,"c":note.length,"a":-1},"flag":{"fake":(isNoInput?true:undefined)}});}}}}}
break;case"scenecontrol":if(d.length>1){var time=parseFloat(d[0]);if(isNaN(time)){continue;}
switch(d[1]){case"trackhide":status.push({"when":{"t":time},"name":"hideTrack","value":true});break;case"trackshow":status.push({"when":{"t":time},"name":"hideTrack","value":false});break;case"arcahvdebris":case"arcahvdistort":case"redline":var v=parseFloat(d[2]);var v2=parseInt(d[3]);if(!isNaN(v)&&!isNaN(v2)){status.push({"when":{"t":time},"name":mScenecontrol[d[1]],"value":v,"value2":v2});}
break;case"hidegroup":var v=parseInt(d[3]);status.push({"when":{"t":time},"name":"hideGroup","value":(v?true:false)});break;}}
break;case"camera":if(d.length>8){var time=parseFloat(d[0]);if(isNaN(time)){continue;}
var translateX=parseFloat(d[1]);if(isNaN(translateX)){continue;}
var translateY=parseFloat(d[2]);if(isNaN(translateY)){continue;}
var translateZ=parseFloat(d[3]);if(isNaN(translateZ)){continue;}
var rotateY=parseFloat(d[4]);if(isNaN(rotateY)){continue;}
var rotateX=parseFloat(d[5]);if(isNaN(rotateX)){continue;}
var rotateZ=parseFloat(d[6]);if(isNaN(rotateZ)){continue;}
var easing=(function(){switch(d[7]){case"l":return"linear";case"qi":return"quadraticIn";break;case"qo":return"quadraticOut";break;}
return"";})();var duration=parseFloat(d[8]);if(isNaN(duration)){continue;}
if(d[7]=="reset"){transform.push({"when":{"t":time},"reset":true});}
else{transform.push({"when":{"t":time},"translateX":-translateX/width,"translateY":-translateY/height,"translateZ":-translateZ/deep,"rotateX":rotateX,"rotateY":rotateY,"rotateZ":rotateZ,"duration":duration,"easing":easing});}}
break;}}}}}
for(var i=0;i<note.length;i++){if((note[i]["link"]["b"]!=-1)&&(note[i]["link"]["a"]==-1)){for(var j=0;j<note.length;j++){if((note[j]["link"]["b"]==-1)&&(note[j]["link"]["a"]!=-1)&&(note[j]["when"]["t"]==note[i]["when"]["t"])&&(note[j]["where"]["x"]==note[i]["where"]["x"])&&(note[j]["where"]["y"]==note[i]["where"]["y"])&&((!(note[j]["flag"]&&!isUndefined(note[j]["flag"]["parallel"]))&&!(note[i]["flag"]&&!isUndefined(note[i]["flag"]["parallel"])))||(note[j]["flag"]&&note[i]["flag"]&&(note[j]["flag"]["parallel"]==note[i]["flag"]["parallel"])))&&((!(note[j]["flag"]&&!isUndefined(note[j]["flag"]["invalid"]))&&!(note[i]["flag"]&&!isUndefined(note[i]["flag"]["invalid"])))||(note[j]["flag"]&&note[i]["flag"]&&(note[j]["flag"]["invalid"]==note[i]["flag"]["invalid"])))&&((!(note[j]["flag"]&&!isUndefined(note[j]["flag"]["fake"]))&&!(note[i]["flag"]&&!isUndefined(note[i]["flag"]["fake"])))||(note[j]["flag"]&&note[i]["flag"]&&(note[j]["flag"]["fake"]==note[i]["flag"]["fake"])))){note[i]["link"]["a"]=note[j]["link"]["a"];note[note[j]["link"]["a"]]["link"]["b"]=note[i]["link"]["c"];note[j]["link"]["c"]=-1;break;}}}}
note=sortNote(note);var mainBPM=(function(){var max=0;for(var i=0;i<beat.length;i++){max=(max<beat[i]["when"]["t"]?beat[i]["when"]["t"]:max);}
for(var i=0;i<note.length;i++){max=(max<note[i]["when"]["t"]?note[i]["when"]["t"]:max);}
return bpmFromBeat(beat,"t",max);})();data.push(fixData({"beat":beat,"note":note,"effect":[{"when":{"t":offset},"kind":"audio","path":"base.ogg"},{"when":{"t":0},"kind":"image","what":"back","path":"base.jpg"}],"status":status,"transform":transform,"info":{"key":4}},"FlowWithBpm",{"FlowWithBpm":mainBPM}));}
setRaw({"data":[data]});};var fromDrbBuffer=function(buffer){var offset=0;var bpn=4;var bpmCount=0;var scCount=0;var bpms=[];var scs=[];var notes=[];var a=buffer.getText().replace(/\r/g,"\n").replace(/\n\n/g,"\n").split("\n");for(var i=0;i<a.length;i++){if((a[i][0]=="#")&&(a[i][a[i].length-1]!=";")){while(true){if(i+1<a.length){a[i]=a[i]+a[i+1];a.splice(i+1,1);}
else{a[i]=a[i]+";";break;}
if(a[i][a[i].length-1]==";"){break;}}}}
for(var i=0;i<a.length;i++){if((a[i][0]=="#")&&(a[i][a[i].length-1]==";")){var l=a[i].indexOf("=");if(l!=-1){var n=a[i].slice(1,l);var v=a[i].slice(l+1,a[i].length-1);v=parseFloat(v);if(!isNaN(v)){switch(n){case"OFFSET":offset=v;break;case"BEAT":bpn=v.fMul(4);break;case"BPM_NUMBER":bpmCount=v|0;break;case"SCN":scCount=v|0;break;default:var id=parseInt(n.extract("[","]"));if(!isNaN(id)){switch(true){case n.startsWith("BPMS"):bpms[id]=bpms[id]||[];bpms[id][0]=v;break;case n.startsWith("BPM"):bpms[id]=bpms[id]||[];bpms[id][1]=v;break;case n.startsWith("SCI"):scs[id]=scs[id]||[];scs[id][0]=v;break;case n.startsWith("SC"):scs[id]=scs[id]||[];scs[id][1]=v;break;}}
break;}}}}
else{a[i]=a[i].trim();if((a[i][0]=="<")&&(a[i][a[i].length-1]==">")){var d=a[i].slice(1,a[i].length-1).split("><");var hasNaN=(function(){for(var j=0;j<d.length;j++){d[j]=parseFloat(d[j]);if(isNaN(d[j])){return true;}}
return false;})();if(!hasNaN&&(d[3]>=0)&&(d[4]>0)&&(d[3]+d[4]<=16)){notes[d[0]]={"note":d[2].fAdd(offset),"kind":d[1],"pos":d[3],"width":d[4],"ex":d[5],"preId":d[6]};}}}}
var beat=(function(){var find=function(v,t){for(var i=0;i<v.length;i++){if(v[i][0]==t){return i;}}
return-1;};var set=function(v,t,d){var l=find(v,t);if(l==-1){l=v.length;v.push([t]);}
for(var i=0;i<d.length;i++){if(!isUndefined(d[i])){v[l][i+1]=d[i];}}
return v;};var sort=function(a,b){return a[0]-b[0];};var v=[];bpms=bpms.slice(0,bpmCount);for(var i=0;i<bpms.length;i++){if(isUndefined(bpms[i][0])||isUndefined(bpms[i][1])){bpms.slice(i,1);i-=1;}}
bpms=bpms.sort(sort);while(bpms.length&&(bpms[0][0]<0)){bpms.splice(0,1);}
if(!bpms.length||(bpms[0][0]>0)){bpms.unshift([0,180]);}
for(var i=0;i<bpms.length;i++){v=set(v,bpms[i][0],[bpms[i][1],undefined,undefined]);}
scs=scs.slice(0,scCount);for(var i=0;i<scs.length;i++){if(isUndefined(scs[i][0])||isUndefined(scs[i][1])){scs.slice(i,1);i-=1;}}
scs=scs.sort(sort);while(scs.length&&(scs[0][0]<0)){scs.splice(0,1);}
if(!scs.length||(scs[0][0]>0)){scs.unshift([0,1]);}
for(var i=0;i<scs.length;i++){v=set(v,scs[i][0],[undefined,undefined,scs[i][1]]);}
v=v.sort(sort);for(var i=0;i<v.length;i++){v[i][1]=(isUndefined(v[i][1])?(i?v[i-1][1]:180):v[i][1]);v[i][2]=(isUndefined(v[i][2])?(i?v[i-1][2]:bpn):v[i][2]);v[i][3]=(isUndefined(v[i][3])?(i?v[i-1][3]:1):v[i][3]);}
for(var i=0;i<v.length;i++){v[i]={"when":{"n":v[i][0]},"bpm":v[i][1],"bpn":v[i][2],"fpn":v[i][3]};}
return v;})();var note=(function(){var getX=function(t){return(t["pos"]+t["width"]/2)/17;};var v=[];for(var i=notes.length-1;i>-1;i--){if(notes[i]&&!notes[i]["done"]){switch(notes[i]["kind"]){case 1:notes[i]["done"]=true;v.push({"when":{"n":notes[i]["note"]},"where":{"x":getX(notes[i])},"flag":{"size":{"w":notes[i]["width"]/4},"ex":(notes[i]["ex"]?true:undefined)}});break;case 2:notes[i]["done"]=true;v.push({"when":{"n":notes[i]["note"]},"where":{"x":getX(notes[i])},"flag":{"size":{"w":notes[i]["width"]/4},"catch":true,"ex":(notes[i]["ex"]?true:undefined)}});break;case 4:notes[i]["done"]=true;var p=notes[i]["preId"];if(notes[p]&&(notes[p]["kind"]==3)&&(notes[i]["note"]>notes[p]["note"])){v.push({"when":{"n":notes[p]["note"]},"where":{"x":getX(notes[p])},"link":{"b":-1,"c":v.length,"a":v.length+1},"flag":{"size":{"w":notes[p]["width"]/4},"ex":(notes[p]["ex"]?true:undefined)}});v.push({"when":{"n":notes[i]["note"]},"where":{"x":getX(notes[i])},"link":{"b":v.length-1,"c":v.length,"a":-1},"flag":{"size":{"w":notes[i]["width"]/4},"catch":true,"ex":(notes[i]["ex"]?true:undefined)}});notes[p]["done"]=true;}
break;case 6:case 7:notes[i]["done"]=true;var p=notes[i]["preId"];var drag=[notes[i]];while(notes[p]&&!notes[p]["done"]&&((notes[p]["kind"]==5)||(notes[p]["kind"]==6)||(notes[p]["kind"]==7)||(notes[p]["kind"]==8)||(notes[p]["kind"]==9))&&(notes[i]["note"]>notes[p]["note"])){drag.unshift(notes[p]);notes[p]["done"]=true;if((notes[p]["kind"]==5)||(notes[p]["kind"]==8)||(notes[p]["kind"]==9)){break;}
p=notes[p]["preId"];}
for(var j=0;j<drag.length;j++){v.push({"when":{"n":drag[j]["note"]},"where":{"x":getX(drag[j])},"link":{"b":(j?v.length-1:-1),"c":v.length,"a":(j+1<drag.length?v.length+1:-1)},"flag":{"size":{"w":drag[j]["width"]/4},"catch":(j?true:undefined),"flick":(drag[j]["kind"]==8?"left":(drag[j]["kind"]==9?"right":undefined)),"ex":(drag[j]["ex"]?true:undefined)}});}
break;case 8:notes[i]["done"]=true;v.push({"when":{"n":notes[i]["note"]},"where":{"x":getX(notes[i])},"flag":{"size":{"w":notes[i]["width"]/4},"flick":"left","ex":(notes[i]["ex"]?true:undefined)}});break;case 9:notes[i]["done"]=true;v.push({"when":{"n":notes[i]["note"]},"where":{"x":getX(notes[i])},"flag":{"size":{"w":notes[i]["width"]/4},"flick":"right","ex":(notes[i]["ex"]?true:undefined)}});break;}}}
for(var i=notes.length-1;i>-1;i--){if(notes[i]&&!notes[i]["done"]){switch(notes[i]["kind"]){case 3:case 5:notes[i]["done"]=true;v.push({"when":{"n":notes[i]["note"]},"where":{"x":getX(notes[i])},"flag":{"size":{"w":notes[i]["width"]/4},"ex":(notes[i]["ex"]?true:undefined)}});break;}}}
return v;})();setRaw({"data":[[{"beat":beat,"note":note}]]});};var fromMstBuffer=function(buffer){setRaw(new Function("return "+(fileInfo.text||buffer.getText()))());};var fromMidBuffer=function(buffer){var readUint=function(n){var e=(arguments.length>1?arguments[1]:LittleEndian);var r=buffer.getUint(n,p,e);p+=n;return r;};var readText=function(n){var r=buffer.getText(p,n);p+=n;return r;};var readDelta=function(){var r=0;while(true){var v=readUint(1);var f=(v&0x80)>>7;var d=v&0x7F;r*=0x80;r+=d;if(!f){break;}}
return r;};var setInstrument=function(c,s,i){if(i!=noteData[c]["instruments"][noteData[c]["instruments"].length-1]["instrument"]){if(s==noteData[c]["instruments"][noteData[c]["instruments"].length-1]["sequence"]){noteData[c]["instruments"][noteData[c]["instruments"].length-1]["instrument"]=i;}
else{noteData[c]["instruments"].push({"sequence":s,"instrument":i});}}};var getInstrument=function(c,s){for(var i=0;i<noteData[c]["instruments"].length;i++){if((s>=noteData[c]["instruments"][i]["sequence"])&&((i+1>=noteData[c]["instruments"].length)||(s<noteData[c]["instruments"][i+1]["sequence"]))){return noteData[c]["instruments"][i]["instrument"];}}
return 0;};var pitchToTrack=function(p){var s=p%12;s=(s>10?s+1:s);s=(s>3?s+1:s);return(s/2)|0;};var pitchToScale=function(p){return((p/12)|0).limit(0,11);};var p=0;var signature=readText(4);var offset=readUint(4,false);if(signature!="MThd"){return;}
var mode=readUint(2,false);var count=readUint(2,false);var division=readUint(2,false);var dType=(division&0x8000)>>15;var dValue=(dType?(0x80-((division&0x7F00)>>8))*division&0x00FF:division&0x7FFF);var info={"key":7};var beatData=[];var noteData=(function(){var v=[];for(var i=0;i<17;i++){v.push({"instruments":[{"sequence":0,"instrument":0}],"notes":[]});}
return v;})();var readMTrk=function(){var signature=readText(4);var offset=readUint(4,false)+p;if(signature!="MTrk"){p=offset;return;}
var nd={};var s=0;var e=0x00;var eof=false;var info={};var readEvent=function(){var event=readUint(1);if(event<0x80){event=e;p-=1;}
else{e=event;}
return event;};while(!eof){s+=readDelta();var event=readEvent();switch(event){case 0xF0:while(true){if(readUint(1)==0xF7){break;}}
break;case 0xF1:p+=1;break;case 0xF2:p+=2;break;case 0xF3:p+=1;break;case 0xF4:case 0xF5:case 0xF6:case 0xF8:case 0xF9:case 0xFA:case 0xFB:case 0xFC:case 0xFD:case 0xFE:break;case 0xF7:var o=readUint(1)+p;p=o;break;case 0xFF:switch(readUint(1)){case 0x00:info["sequenceNumber"]=readUint(readUint(1),false);break;case 0x01:info["textEvent"]=readText(readUint(1));break;case 0x02:info["copyrightNotice"]=readText(readUint(1));break;case 0x03:info["trackName"]=readText(readUint(1));break;case 0x04:info["instrumentName"]=readText(readUint(1));break;case 0x05:info["lyric"]=readText(readUint(1));break;case 0x06:info["marker"]=readText(readUint(1));break;case 0x07:info["cuePoint"]=readText(readUint(1));break;case 0x20:info["channelPrefix"]=readUint(readUint(1),false);break;case 0x51:var bpm=(60000000/readUint(readUint(1),false)).toAbbreviated(3).toAccurated();beatData.push([s,bpm,undefined]);break;case 0x54:var o=readUint(1)+p;var hr=readUint(1);var mn=readUint(1);var se=readUint(1);var fr=readUint(1);var ff=readUint(1);p=o;break;case 0x58:var o=readUint(1)+p;var bpn=(readUint(1)/(1<<readUint(1))).fMul(4);beatData.push([s,undefined,bpn]);var cpb=readUint(1);var cpb=1<<readUint(1);p=o;break;case 0x59:var o=readUint(1)+p;var sf=readUint(1);var mi=readUint(1);p=o;break;case 0x2F:var o=readUint(1)+p;p=o;eof=true;break;case 0x7F:info["sequenceSpecificMetaEvent"]=readBuffer(readUint(1));break;default:var o=readUint(1)+p;p=o;}
break;default:if((event>0x7F)&&(event<0xF0)){var f=(event&0xF0)>>4;var c=event&0x0F;switch(f){case 0x8:var pitch=readUint(1);var velocity=readUint(1);noteData[c]["notes"].push({"sequence":s,"channel":c,"pitch":pitch,"velocity":0});break;case 0x9:var pitch=readUint(1);var velocity=readUint(1);noteData[c]["notes"].push({"sequence":s,"channel":c,"pitch":pitch,"velocity":velocity});break;case 0xA:case 0xB:case 0xE:p+=2;break;case 0xC:setInstrument(c,s,readUint(1));break;case 0xD:p+=1;break;}}
else{eof=true;}
break;}}};for(var i=0;i<count;i++){readMTrk();}
for(var i=0;i<16;i++){for(var j=0;j<noteData[i]["notes"].length;j++){if(noteData[i]["notes"][j]["velocity"]){for(var k=j+1;k<noteData[i]["notes"].length;k++){if((noteData[i]["notes"][k]["channel"]==noteData[i]["notes"][j]["channel"])&&(noteData[i]["notes"][k]["pitch"]==noteData[i]["notes"][j]["pitch"])){noteData[i]["notes"][j]["duration"]=noteData[i]["notes"][k]["sequence"]-noteData[i]["notes"][j]["sequence"];if(!noteData[i]["notes"][k]["velocity"]){noteData[i]["notes"].splice(k,1);k-=1;}
break;}}
if(isUndefined(noteData[i]["notes"][j]["duration"])){noteData[i]["notes"].splice(j,1);j-=1;}}}
for(var j=0;j<noteData[i]["notes"].length;j++){noteData[16]["notes"].push(copyObject(noteData[i]["notes"][j]));}}
for(var i=0;i<noteData.length;i++){if(noteData[i]["notes"].length){var s=noteData[i]["notes"][0]["sequence"];for(var j=1;j<noteData[i]["instruments"].length;j++){if((noteData[i]["instruments"][j]["sequence"]<=s)&&(noteData[i]["instruments"][j-1]["sequence"]<s)){noteData[i]["instruments"].splice(j-1,1);j-=1;}}}}
var beat=(function(){var v=[];var set=function(b,bpm,bpn){var l=(function(){for(var i=0;i<v.length;i++){if(v[i][0]==b){return i;}}
return-1;})();if(l!=-1){v[l][1]=(!isUndefined(bpm)?bpm:v[l][1]);v[l][2]=(!isUndefined(bpn)?bpn:v[l][2]);}
else{v.push([b,bpm,bpn]);}};beatData.unshift([0,125,4]);for(var i=0;i<beatData.length;i++){set.apply(null,beatData[i]);}
v=v.sort(function(a,b){return a[0]-b[0];});for(var i=0;i<v.length;i++){v[i][1]=(isUndefined(v[i][1])?(i?v[i-1][1]:125):v[i][1]);v[i][2]=(isUndefined(v[i][2])?(i?v[i-1][2]:4):v[i][2]);}
for(var i=0;i<v.length;i++){v[i]={"when":(dType?{"t":(v[i][0]/dValue).fMul(1000)}:{"b":v[i][0]/dValue}),"bpm":v[i][1],"bpn":v[i][2]};}
return v;})();var note=(function(){var v=[];var trackToX=function(track,key){return(track*2+1)/(key*2);};var scaleToY=function(scale){return scale/12;};for(var i=0;i<noteData.length;i++){v[i]=[];for(var j=0;j<noteData[i]["notes"].length;j++){var x=trackToX(pitchToTrack(noteData[i]["notes"][j]["pitch"]),info["key"]);var y=scaleToY(pitchToScale(noteData[i]["notes"][j]["pitch"]));var flag={"style":"mid_"+(i!=9?"s"+getInstrument(i,noteData[i]["notes"][j]["sequence"]):"p"+noteData[i]["notes"][j]["pitch"]),"size":{"w":noteData[i]["notes"][j]["velocity"]/128}};var w=(dType?{"t":(noteData[i]["notes"][j]["sequence"]/dValue).fMul(1000)}:{"b":noteData[i]["notes"][j]["sequence"]/dValue});var w2=(dType?{"t":((noteData[i]["notes"][j]["sequence"]+noteData[i]["notes"][j]["duration"])/dValue).fMul(1000)}:{"b":(noteData[i]["notes"][j]["sequence"]+noteData[i]["notes"][j]["duration"])/dValue});if((dType?beatFromTime({"beat":beat},w2["t"])-beatFromTime({"beat":beat},w["t"]):w2["b"]-w["b"])>=1){v[i].push({"when":w,"where":{"x":x,"y":y},"link":{"b":-1,"c":v[i].length,"a":v[i].length+1},"flag":flag});v[i].push({"when":w2,"where":{"x":x,"y":y},"link":{"b":v[i].length-1,"c":v[i].length,"a":-1}});}
else{v[i].push({"when":w,"where":{"x":x},"flag":flag});}}}
return v;})();var data=(function(){var v=[];var m=["Acoustic Grand Piano","Bright Acoustic Piano","Electric Grand Piano","Honky-tonk Piano","Electric Piano 1","Electric Piano 2","Harpsichord","Clavi","Celesta","Glockenspiel","Music Box","Vibraphone","Marimba","Xylophone","Tubular Bells","Dulcimer","Drawbar Organ","Percussive Organ","Rock Organ","Church Organ","Reed Organ","Accordion","Harmonica","Tango Accordion","Acoustic Guitar (nylon)","Acoustic Guitar (steel)","Electric Guitar (jazz)","Electric Guitar (clean)","Electric Guitar (muted","Overdriven Guitar","Distortion Guitar","Guitar Harmonics","Acoustic Bass","Electric Bass (finger)","Electric Bass (pick)","Fretless Bass","Slap Bass 1","Slap Bass 2","Synth Bass 1","Synth Bass 2","Violin","Viola","Cello","Contrabass","Tremolo Strings","Pizzicato Strings","Orchestral Harp","Timpani","String Ensemble 1","String Ensemble 2","SynthStrings 1","SynthStrings 2","Choir Aahs","Voice Oohs","Synth Voice","Orchestra Hit","Trumpet","Trombone","Tuba","Muted Trumpet","French Horn","Brass Section","SynthBrass 1","SynthBrass 2","Soprano Sax","Alto Sax","Tenor Sax","Baritone Sax","Oboe","English Horn","Bassoon","Clarinet","Piccolo","Flute","Recorder","Pan Flute","Blown Bottle","Shakuhachi","Whistle","Ocarina","Lead 1 (square)","Lead 2 (sawtooth)","Lead 3 (calliope)","Lead 4 (chiff)","Lead 5 (charang)","Lead 6 (voice)","Lead 7 (fifths)","Lead 8 (bass + lead)","Pad 1 (new age)","Pad 2 (warm)","Pad 3 (polysynth)","Pad 4 (choir)","Pad 5 (bowed)","Pad 6 (metallic)","Pad 7 (halo)","Pad 8 (sweep)","FX 1 (rain)","FX 2 (soundtrack)","FX 3 (crystal)","FX 4 (atmosphere)","FX 5 (brightness)","FX 6 (goblins)","FX 7 (echoes)","FX 8 (sci-fi)","Sitar","Banjo","Shamisen","Koto","Kalimba","Bag pipe","Fiddle","Shanai","Tinkle Bell","Agogo","Steel Drums","Woodblock","Taiko Drum","Melodic Tom","Synth Drum","Reverse Cymbal","Guitar Fret Noise","Breath Noise","Seashore","Bird Tweet","Telephone Ring","Helicopter","Applause","Gunshot"];var mp=["Acoustic Bass Drum","Bass Drum 1","Side Stick","Acoustic Snare","Hand Clap","Electric Snare","Low Floor Tom","Closed Hi Hat","High Floor Tom","Pedal Hi-Hat","Low Tom","Open Hi-Hat","Low-Mid Tom","Hi Mid Tom","Crash Cymbal 1","High Tom","Ride Cymbal 1","Chinese Cymbal","Ride Bell","Tambourine","Splash Cymbal","Cowbell","Crash Cymbal 2","Vibraslap","Ride Cymbal 2","Hi Bongo","Low Bongo","Mute Hi Conga","Open Hi Conga","Low Conga","High Timbale","Low Timbale","High Agogo","Low Agogo","Cabasa","Maracas","Short Whistle","Long Whistle","Short Guiro","Long Guiro","Claves","Hi Wood Block","Low Wood Block","Mute Cuica","Open Cuica","Mute Triangle","Open Triangle"];for(var i=0;i<note.length;i++){if(note[i].length){v.push({"beat":beat.slice(),"note":note[i],"effect":[{"when":{"t":0},"kind":"audio","path":fileInfo.nameCore+".mid"}],"info":mergeObject(info,{"name":"channel"+i+" "+(i<note.length-1?"midi "+((i!=9?m[noteData[i]["instruments"][0]["instrument"]]||"Standard Drum":(noteData[i]["notes"].length?mp[noteData[i]["notes"][0]["pitch"]-35]:"Percussion"))):"user Mixed")},true)});}}
return v;})();setRaw({"data":[data],"file":[{"path":fileInfo.nameCore+".mid","base64":buffer.getBase64()}]});};var fromAudioBuffer=function(buffer){setRaw({"data":[[{"effect":[{"when":{"t":0},"kind":"audio","path":fileInfo.nameCore+"."+ext}]}]],"file":[{"path":fileInfo.nameCore+"."+ext,"base64":buffer.getBase64()}]});}
var toLogBuffer=function(){Text["log"]=Text["log"]||toLogText();return new Uint8Array().fromText(Text["log"]);};var toBmsBuffer=function(indexes,ext){var list=indexes.join(",");switch(ext){case"bms":case"bml":case"bme":case"pms":Text["bms"+ext][list]=Text["bms"+ext][list]||toBmsText(indexes,ext);return new Uint8Array().fromText(Text["bms"+ext][list]);break;}};var toDtxBuffer=function(indexes,type){var list=indexes.join(",");Text["dtx"+type][list]=Text["dtx"+type][list]||toDtxText(indexes,type);return new Uint8Array().fromText(Text["dtx"+type][list]);};var toMsdBuffer=function(indexes){var list=indexes.join(",");Text["msd"][list]=Text["msd"][list]||toMsdText(indexes);return new Uint8Array().fromText(Text["msd"][list]);};var toSmBuffer=function(indexes,ext){var list=indexes.join(",");switch(ext){case"sm":case"sma":case"ssc":Text["sm"+ext][list]=Text["sm"+ext][list]||toSmText(indexes,ext);return new Uint8Array().fromText(Text["sm"+ext][list]);break;}};var toDwiBuffer=function(indexes){var list=indexes.join(",");Text["dwi"][list]=Text["dwi"][list]||toDwiText(indexes);return new Uint8Array().fromText(Text["dwi"][list]);};var toKsfBuffer=function(indexes){var list=indexes.join(",");Text["ksf"][list]=Text["ksf"][list]||toKsfText(indexes);return new Uint8Array().fromText(Text["ksf"][list]);};var toUcsBuffer=function(indexes){var list=indexes.join(",");Text["ucs"][list]=Text["ucs"][list]||toUcsText(indexes);return new Uint8Array().fromText(Text["ucs"][list]);};var toDanceBuffer=function(indexes){var list=indexes.join(",");Text["dance"][list]=Text["dance"][list]||toDanceText(indexes);return new Uint8Array().fromText(Text["dance"][list]);};var toTjaBuffer=function(indexes,type){var list=indexes.join(",");switch(type){case"taiko":case"jube":Text["tja"+type][list]=Text["tja"+type][list]||toTjaText(indexes,type);return new Uint8Array().fromText(Text["tja"+type][list],"ANSI");break;}};var toOsuBuffer=function(index,type){switch(type){case"osu":case"taiko":case"ctb":case"mania":Text["osu"+type][index]=Text["osu"+type][index]||toOsuText(index,type);return new Uint8Array().fromText(Text["osu"+type][index]);break;}};var toXmlBuffer=function(index,type){var type2=(arguments.length>2?arguments[2]:"");switch(type){case"yddr":case"ydsd":case"mde":case"dynamix":case"qqx5":Text["xml"+type+type2][index]=Text["xml"+type+type2][index]||toXmlText(index,type,type2);return new Uint8Array().fromText(Text["xml"+type+type2][index]);break;}};var toVoxBuffer=function(index){Text["vox"][index]=Text["vox"][index]||toVoxText(index);return new Uint8Array().fromText(Text["vox"][index]);};var toKshBuffer=function(index){Text["ksh"][index]=Text["ksh"][index]||toKshText(index);return new Uint8Array().fromText(Text["ksh"][index]);};var toImdBuffer=function(index){Text["imd"][index]=Text["imd"][index]||toImdText(index);return new Uint8Array().fromHex(Text["imd"][index]);};var toMdeBuffer=function(index){Text["mde"][index]=Text["mde"][index]||toMdeText(index);return new Uint8Array().fromText(Text["mde"][index]);};var toTxtBuffer=function(index,type,version){Text["txt"+type+version][index]=Text["txt"+type+version][index]||toTxtText(index,type,version);return new Uint8Array().fromText(Text["txt"+type+version][index]);};var toJsonBuffer=function(index,type){Text["json"+type][index]=Text["json"+type][index]||toJsonText(index,type);return new Uint8Array().fromText(Text["json"+type][index]);};var toMcBuffer=function(index,type){switch(type){case"key":case"step":case"dj":case"catch":case"pad":case"taiko":case"ring":case"slide":Text["mc"+type][index]=Text["mc"+type][index]||toMcText(index,type);return new Uint8Array().fromText(Text["mc"+type][index]);break;}};var toC2sBuffer=function(index){Text["c2s"][index]=Text["c2s"][index]||toC2sText(index);return new Uint8Array().fromText(Text["c2s"][index]);};var toAffBuffer=function(index){Text["aff"][index]=Text["aff"][index]||toAffText(index);return new Uint8Array().fromText(Text["aff"][index]);};var toDrbBuffer=function(index){Text["drb"][index]=Text["drb"][index]||toDrbText(index);return new Uint8Array().fromText(Text["drb"][index],"UCS-2",true);};var toMstBuffer=function(indexes){var list=indexes.join(",");Text["mst"][list]=Text["mst"][list]||toMstText(indexes);return new Uint8Array().fromText(Text["mst"][list]);};var toBuffer=function(indexes,ext){var type=(arguments.length>2?arguments[2]:"");var type2=(arguments.length>3?arguments[3]:"");if(indexes.length==0){return new Uint8Array();}
var index=indexes[0];var list=indexes.join(",");switch(ext){case"log":Buffer["log"]=Buffer["log"]||toLogBuffer();return Buffer["log"];break;case"bms":case"bme":case"bml":case"pms":Buffer["bms"+ext][list]=Buffer["bms"+ext][list]||toBmsBuffer(indexes,ext);return Buffer["bms"+ext][list];break;case"dtx":Buffer["dtx"+type][list]=Buffer["dtx"+type][list]||toDtxBuffer(indexes,type);return Buffer["dtx"+type][list];break;case"msd":Buffer["msd"][list]=Buffer["msd"][list]||toMsdBuffer(indexes);return Buffer["msd"][list];break;case"sm":case"sma":case"ssc":Buffer["sm"+ext][list]=Buffer["sm"+ext][list]||toSmBuffer(indexes,ext);return Buffer["sm"+ext][list];break;case"dwi":Buffer["dwi"][list]=Buffer["dwi"][list]||toDwiBuffer(indexes);return Buffer["dwi"][list];break;case"ksf":Buffer["ksf"][list]=Buffer["ksf"][list]||toKsfBuffer(indexes);return Buffer["ksf"][list];break;case"ucs":Buffer["ucs"][list]=Buffer["ucs"][list]||toUcsBuffer(indexes);return Buffer["ucs"][list];break;case"dance":Buffer["dance"][list]=Buffer["dance"][list]||toDanceBuffer(indexes);return Buffer["dance"][list];break;case"tja":switch(type){case"taiko":case"jube":Buffer["tja"+type][list]=Buffer["tja"+type][list]||toTjaBuffer(indexes,type);return Buffer["tja"+type][list];break;}
break;case"osu":switch(type){case"osu":case"taiko":case"ctb":case"mania":Buffer["osu"+type][index]=Buffer["osu"+type][index]||toOsuBuffer(index,type);return Buffer["osu"+type][index];break;}
break;case"xml":switch(type){case"yddr":case"ydsd":case"mde":case"dynamix":case"qqx5":Buffer["xml"+type+type2][index]=Buffer["xml"+type+type2][index]||toXmlBuffer(index,type,type2);return Buffer["xml"+type+type2][index];break;}
break;case"vox":Buffer["vox"][index]=Buffer["vox"][index]||toVoxBuffer(index);return Buffer["vox"][index];break;case"ksh":Buffer["ksh"][index]=Buffer["ksh"][index]||toKshBuffer(index);return Buffer["ksh"][index];break;case"imd":Buffer["imd"][index]=Buffer["imd"][index]||toImdBuffer(index);return Buffer["imd"][index];break;case"mde":Buffer["mde"][index]=Buffer["mde"][index]||toMdeBuffer(index);return Buffer["mde"][index];break;case"txt":Buffer["txt"+type+type2][index]=Buffer["txt"+type+type2][index]||toTxtBuffer(index,type,type2);return Buffer["txt"+type+type2][index];break;case"json":Buffer["json"+type][index]=Buffer["json"+type][index]||toJsonBuffer(index,type);return Buffer["json"+type][index];break;case"mc":switch(type){case"key":case"step":case"dj":case"catch":case"pad":case"taiko":case"ring":case"slide":Buffer["mc"+type][index]=Buffer["mc"+type][index]||toMcBuffer(index,type);return Buffer["mc"+type][index];break;}
break;case"c2s":Buffer["c2s"][index]=Buffer["c2s"][index]||toC2sBuffer(index);return Buffer["c2s"][index];break;case"aff":Buffer["aff"][index]=Buffer["aff"][index]||toAffBuffer(index);return Buffer["aff"][index];break;case"drb":Buffer["drb"][index]=Buffer["drb"][index]||toDrbBuffer(index);return Buffer["drb"][index];break;case"mst":Buffer["mst"][list]=Buffer["mst"][list]||toMstBuffer(indexes);return Buffer["mst"][list];break;}};var toLogText=function(){return"Read from "+fileInfo.path+"(type: "+fileInfo.type+(fileInfo.version?", version: "+fileInfo.version:"")+") completed in "+(Stutas["timeSemi"]-Stutas["timeRead"])+" ms.";};var toBmsText=function(indexes){var ext=(arguments.length>1?arguments[1]:"");var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var trackToX=function(track,key){return(track*2+1)/(key*2);};var dpb=MstOptions["CorrectTime"][0]||192;var meta=Semi["meta"];var data=(function(){var v=[];var l=Math.min(indexes.length,2);for(var i=0;i<l;i++){v.push(repairData(toData(toData(toData(toData(toData(toData(toData(extData(mergeData(Semi["data"][indexes[i]]),indexes[i]),"InvalidKeyRemove"),"FakeKeyRemove"),"NoOblique"),"NoSlide"),"BpnByNote"),"NoFlowBackward"),"NoFlowChange"),indexes[i]));}
return v;})();var offsetEffect=(function(){var l=getEffectIndex(data[0],"");if((l!=-1)&&(data[0]["effect"][l]["when"]["n"]<0)){var n=data[0]["effect"][l]["when"]["n"].fSub(data[0]["effect"][l]["when"]["n"]|0).toAbbreviated(6).toAccurated();var t=timeFromNote(data[0],n);var o=t.fSub(data[0]["effect"][l]["when"]["t"]);if(o!=0){data=[(data[0]?toData(data[0],"TranslateWhen",{"TranslateWhen":o}):data[0]),(data[1]?toData(data[1],"TranslateWhen",{"TranslateWhen":o}):data[1])];}}})();var hWAVs=[];var hEXWAVs=[];var cWAVCMDs=[];var hBPMs=[];var hBMPs=[];var hEXBMPs=[];var hBGAs=[];var haBGAs=[];var hEXTCHRs=[];var hSTOPs=[];var hTEXTs=[];var hEXRANKs=[];var hARGBs=[];var hSWBGAs=[];var hCHANGEOPTIONs={};var pitchToFrequency=function(p){return(Math.pow(2,(p-69)/12)*440).toAbbreviated(2).toAccurated();};var getBaseType=function(length){return(length>255?36:16);};var setWAV=function(e){var idx=(arguments.length>1?arguments[1]:-1);var needEXWAV=((e["panner"]!=0)||(e["volume"]!=1)||(e["pitch"]!=60)?true:false);var needWAVCMD=((e["pitch"]!=60)||(e["volume"]!=1)||(e["playback"]!=0)?true:false);if(idx!=-1){hWAVs[idx]={"path":e["path"]};if(needEXWAV){hEXWAVs[idx]={"panner":e["panner"],"volume":e["volume"],"pitch":e["pitch"]};}
if(needWAVCMD){cWAVCMDs[idx]={"pitch":e["pitch"],"volume":e["volume"],"playback":e["playback"]};}
return idx;}
else{var l=(function(){for(var i=0;i<hWAVs.length;i++){if(hWAVs[i]&&(hWAVs[i]["path"]==e["path"])&&(!needEXWAV||(hEXWAVs[i]&&(hEXWAVs[i]["panner"]==e["panner"])&&(hEXWAVs[i]["volume"]==e["volume"])&&(hEXWAVs[i]["pitch"]==e["pitch"])))&&(!needWAVCMD||(cWAVCMDs[i]&&(cWAVCMDs[i]["pitch"]==e["pitch"])&&(cWAVCMDs[i]["volume"]==e["volume"])&&(cWAVCMDs[i]["playback"]==e["playback"])))){return i;}}
return-1;})();if(l<1){l=hWAVs.length||1;hWAVs[l]={"path":e["path"]};if(needEXWAV){hEXWAVs[l]={"path":e["path"],"panner":e["panner"],"volume":e["volume"],"pitch":e["pitch"]};}
if(needWAVCMD){cWAVCMDs[l]={"pitch":e["pitch"],"volume":e["volume"],"playback":e["playback"]};}}
return l;}};var setBPM=function(v){var l=(function(){for(var i=0;i<hBPMs.length;i++){if(hBPMs[i]&&(hBPMs[i]["bpm"]==v)){return i;}}
return-1;})();if(l<1){l=hBPMs.length||1;hBPMs[l]={"bpm":v};}
return l;};var setBMP=function(e){var idx=(arguments.length>1?arguments[1]:-1);var needEXBMP=((e["backColor"]["a"]!=0)||(e["backColor"]["r"]!=0)||(e["backColor"]["g"]!=0)||(e["backColor"]["b"]!=0)?true:false);if(idx!=-1){hBMPs[idx]={"path":e["path"]};if(needEXBMP){hEXBMPs[idx]={"alpha":e["backColor"]["a"],"red":e["backColor"]["r"],"green":e["backColor"]["g"],"blue":e["backColor"]["b"]};}
return idx;}
else{var l=(function(){for(var i=0;i<hBMPs.length;i++){if(hBMPs[i]&&(hBMPs[i]["path"]==e["path"])&&(!needEXBMP||(hEXBMPs[i]&&(hEXBMPs[i]["alpha"]==e["backColor"]["a"])&&(hEXBMPs[i]["red"]==["backColor"]["r"])&&(hEXBMPs[i]["green"]==e["backColor"]["g"])&&(hEXBMPs[i]["blue"]==e["backColor"]["b"])))){return i;}}
return-1;})();if(l<1){l=hBMPs.length||1;hBMPs[l]={"path":e["path"]};if(needEXBMP){hEXBMPs[l]={"alpha":e["backColor"]["a"],"red":e["backColor"]["r"],"green":e["backColor"]["g"],"blue":e["backColor"]["b"]};}}
return l;}};var setBGA=function(e,n){var idx=(arguments.length>1?arguments[1]:-1);var needBGA=((e["clip"]["x"]!=0)||(e["clip"]["y"]!=0)||(e["clip2"]["x"]!=0)||(e["clip2"]["y"]!=0)||(e["where"]["x"]!=0)||(e["where"]["y"]!=0)?true:false);if(needBGA){if(idx!=-1){hBGAs[idx]={"index":n,"startX":e["clip"]["x"],"startY":e["clip"]["y"],"endX":e["clip2"]["x"],"endY":e["clip2"]["y"],"drawX":e["where"]["x"],"drawY":e["where"]["y"]};haBGAs[idx]={"index":n,"startX":e["clip"]["x"],"startY":e["clip"]["y"],"width":e["clip2"]["x"].fSub(e["clip"]["x"]),"height":e["clip2"]["y"].fSub(e["clip"]["y"]),"drawX":e["where"]["x"],"drawY":e["where"]["y"]};return idx;}
else{var l=(function(){for(var i=0;i<hBGAs.length;i++){if(hBGAs[i]&&(hBGAs[i]["index"]==n)&&(hBGAs[i]["startX"]==e["clip"]["x"])&&(hBGAs[i]["startY"]==e["clip"]["y"])&&(hBGAs[i]["endX"]==e["clip2"]["x"])&&(hBGAs[i]["endY"]==e["clip2"]["y"])&&(hBGAs[i]["drawX"]==e["where"]["x"])&&(hBGAs[i]["drawY"]==e["where"]["y"])){return i;}}
return-1;})();if(l<1){l=hBGAs.length||1;hBGAs[l]={"index":n,"startX":e["clip"]["x"],"startY":e["clip"]["y"],"endX":e["clip2"]["x"],"endY":e["clip2"]["y"],"drawX":e["where"]["x"],"drawY":e["where"]["y"]};haBGAs[l]={"index":n,"startX":e["clip"]["x"],"startY":e["clip"]["y"],"width":e["clip2"]["x"].fSub(e["clip"]["x"]),"height":e["clip2"]["y"].fSub(e["clip"]["y"]),"drawX":e["where"]["x"],"drawY":e["where"]["y"]};return l;}}}
else{return n;}};var setEXTCHR=function(e){var l=(function(){for(var i=0;i<hEXTCHRs.length;i++){if(hEXTCHRs[i]&&(hEXTCHRs[i]["spriteID"]==e["spriteID"])&&(hBMPs[hEXTCHRs[i]["index"]]["path"]==e["path"])&&(hEXBMPs[hEXTCHRs[i]["index"]]["alpha"]==e["backColor"]["a"])&&(hEXBMPs[hEXTCHRs[i]["index"]]["red"]==e["backColor"]["r"])&&(hEXBMPs[hEXTCHRs[i]["index"]]["green"]==e["backColor"]["g"])&&(hEXBMPs[hEXTCHRs[i]["index"]]["blue"]==e["backColor"]["b"])&&(hEXTCHRs[i]["startX"]==e["clip"]["x"])&&(hEXTCHRs[i]["startY"]==e["clip"]["y"])&&(hEXTCHRs[i]["endX"]==e["clip2"]["x"])&&(hEXTCHRs[i]["endY"]==e["clip2"]["y"])&&(hEXTCHRs[i]["x"]==e["where"]["x"])&&(hEXTCHRs[i]["y"]==e["where"]["y"])){return i;}}
return-1;})();if(l<1){l=hEXTCHRs.length||1;hEXTCHRs[l]={"spriteID":e["spriteID"],"index":setBMP(e),"startX":e["clip"]["x"],"startY":e["clip"]["y"],"endX":e["clip2"]["x"],"endY":e["clip2"]["y"],"offsetX":0,"offsetY":0,"x":e["where"]["x"],"y":e["where"]["y"]};}
return l;};var setSTOP=function(v){var l=(function(){for(var i=0;i<hSTOPs.length;i++){if(hSTOPs[i]["duration"]==v){return i;}}
return-1;})();if((l!=-1)&&(l<1)){l=hSTOPs.length||1;hSTOPs[l]={"duration":v};}
return l;};var setTEXT=function(e){var l=(function(){for(var i=0;i<hTEXTs.length;i++){if(hTEXTs[i]["text"]==e["text"]){return i;}}
return-1;})();if(l<1){l=hTEXTs.length||1;hTEXTs[l]={"text":e["text"]};}
return l;};var setEXRANK=function(v){var l=(function(){for(var i=0;i<hEXRANKs.length;i++){if(hEXRANKs[i]&&(hEXRANKs[i]["exrank"]==v)){return i;}}
return-1;})();if(l<1){l=hEXRANKs.length||1;hEXRANKs[l]={"exrank":v};}
return l;};var setARGB=function(e){var l=(function(){for(var i=0;i<hARGBs.length;i++){if(hARGBs[i]&&(hARGBs[i]["alpha"]==e["backColor"]["a"])&&(hARGBs[i]["red"]==e["backColor"]["r"])&&(hARGBs[i]["green"]==e["backColor"]["g"])&&(hARGBs[i]["blue"]==e["backColor"]["b"])){return i;}}
return-1;})();if(l<1){l=hARGBs.length||1;hARGBs[l]={"alpha":e["backColor"]["a"],"red":e["backColor"]["r"],"green":e["backColor"]["g"],"blue":e["backColor"]["b"]};}
return l;};var setSWBGA=function(e,is){var l=(function(){for(var i=0;i<hSWBGAs.length;i++){var channel=e["what"].slice(7,9);if(hSWBGAs[i]&&(hSWBGAs[i]["interval"]==e["interval"])&&(hSWBGAs[i]["duration"]==e["duration"])&&(hSWBGAs[i]["channel"]==channel)&&(hSWBGAs[i]["loop"]==(e["loop"]!=-1?0:1))&&(hSWBGAs[i]["alpha"]==e["backColor"]["a"])&&(hSWBGAs[i]["red"]==e["backColor"]["r"])&&(hSWBGAs[i]["green"]==e["backColor"]["g"])&&(hSWBGAs[i]["blue"]==e["backColor"]["b"])&&(hSWBGAs[i]["indexes"].join()==is.join())){return i;}}
return-1;})();if(l<1){l=hSWBGAs.length||1;hSWBGAs[l]={"interval":e["interval"],"duration":e["duration"],"channel":e["channel"],"loop":(e["loop"]!=-1?0:1),"alpha":e["backColor"]["a"],"red":e["backColor"]["r"],"green":e["backColor"]["g"],"blue":e["backColor"]["b"],"indexes":is};}
return l;};var setCHANGEOPTION=function(v){var l=(function(){for(var i=0;i<hCHANGEOPTIONs.length;i++){if(hCHANGEOPTIONs[i]&&(hCHANGEOPTIONs[i]["changeoption"]==v)){return i;}}
return-1;})();if(l<1){l=hCHANGEOPTIONs.length||1;hCHANGEOPTIONs[l]={"changeoption":v};}
return l;};var cd=[];var noteData=[[],[]];var setChannelLabel=(function(){for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="audio")&&(data[0]["effect"][i]["while"]=="damage")&&data[0]["effect"][i]["path"]){setWAV(data[0]["effect"][i],0x00);break;}}
for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="image")&&(data[0]["effect"][i]["while"]=="miss")&&data[0]["effect"][i]["path"]){setBGA(data[0]["effect"][i],setBMP(data[0]["effect"][i],0),0);break;}}
var bgm=[];for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="audio")&&(data[0]["effect"][i]["while"]=="")&&data[0]["effect"][i]["path"]){bgm.push({"n":data[0]["effect"][i]["when"]["n"],"index":setWAV(data[0]["effect"][i])});}}
bgm.push({"n":data[0]["info"]["max"]["when"]["n"],"index":-1});cd[0x01]=bgm;var bpn=[];for(var i=0;i<data[0]["beat"].length;i++){if((i==0)||(data[0]["beat"][i]["bpn"]!=data[0]["beat"][i-1]["bpn"])){if(!bpn.length&&(data[0]["beat"][i]["bpn"]==4)){continue;}
bpn.push({"n":data[0]["beat"][i]["when"]["n"],"value":data[0]["beat"][i]["bpn"].fDiv(4)});}}
var isBmsBpnInherited=false;if(!isBmsBpnInherited){bpn=(function(){var v=[];for(var i=0;i<bpn.length;i++){v[bpn[i]["n"]]=bpn[i]["value"];}
for(var i=0;i<data[0]["info"]["max"]["when"]["n"]+1;i++){v[i]={"n":i,"value":(isUndefined(v[i])?(i?v[i-1]["value"]:1):v[i])};}
return v;})();}
cd[0x02]=bpn;var bpm03=[];var bpm08=[];var bpmC=0;for(var i=0;i<data[0]["beat"].length;i++){if(data[0]["beat"][i]["fpn"]!=0){var bpm=data[0]["beat"][i]["bpm"].toAbbreviated(6).toAccurated();if((!i||(bpm!=bpmC))&&(bpm>0)){bpmC=bpm;if((isInteger(bpm)&&(bpm>0)&&(bpm<256))){bpm03.push({"n":data[0]["beat"][i]["when"]["n"],"script":bpm.toBase(16)});}
else{bpm08.push({"n":data[0]["beat"][i]["when"]["n"],"index":setBPM(bpm)});}}}}
cd[0x03]=bpm03;cd[0x08]=bpm08;var bmpbga04=[];var bmpbga06=[];var bmpbga07=[];var bmpbga0A=[];for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="image")&&(data[0]["effect"][i]["while"]=="")&&data[0]["effect"][i]["path"]){var bgmbga={"n":data[0]["effect"][i]["when"]["n"],"index":setBGA(data[0]["effect"][i],setBMP(data[0]["effect"][i]))};switch(data[0]["effect"][i]["what"]){case"back":bmpbga04.push(bgmbga);break;case"miss":bmpbga06.push(bgmbga);break;case"layer":bmpbga07.push(bgmbga);break;case"layer2":bmpbga0A.push(bgmbga);break;}}}
cd[0x04]=bmpbga04;cd[0x06]=bmpbga06;cd[0x07]=bmpbga07;cd[0x0A]=bmpbga0A;var extchr=[];for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="image")&&(data[0]["effect"][i]["while"]=="")&&(data[0]["effect"][i]["what"]=="character")&&data[0]["effect"][i]["path"]){extchr.push({"n":data[0]["effect"][i]["when"]["n"],"index":setEXTCHR(data[0]["effect"][i])});}}
cd[0x05]=extchr;var stop=[];for(var i=0;i<data[0]["beat"].length-1;i++){if(data[0]["beat"][i]["fpn"]==0){var n=i;while(i<data[0]["beat"].length-1){if(data[0]["beat"][i+1]["fpn"]>0){stop.push({"n":data[0]["beat"][n]["when"]["n"],"index":setSTOP(data[0]["beat"][i+1]["when"]["n"].fSub(data[0]["beat"][n]["when"]["n"]).fMul(192))});break;}
else{i+=1;}}
i+=1;}}
cd[0x09]=stop;var opacity0B=[];var opacity0C=[];var opacity0D=[];var opacity0E=[];for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="color")&&(data[0]["effect"][i]["while"]=="")){var opacity={"n":data[0]["effect"][i]["when"]["n"],"script":(data[0]["effect"][i]["opacity"]*255).toBase(16)};switch(data[0]["effect"][i]["what"]){case"back":if(!opacity0B.length||(opacity0B.length&&(opacity0B[opacity0B.length-1]["script"]!=opacity["script"]))){opacity0B.push(opacity);}
break;case"layer":if(!opacity0C.length||(opacity0C.length&&(opacity0C[opacity0C.length-1]["script"]!=opacity["script"]))){opacity0C.push(opacity);}
break;case"layer2":if(!opacity0D.length||(opacity0D.length&&(opacity0D[opacity0D.length-1]["script"]!=opacity["script"]))){opacity0D.push(opacity);}
break;case"miss":if(!opacity0E.length||(opacity0E.length&&(opacity0E[opacity0E.length-1]["script"]!=opacity["script"]))){opacity0E.push(opacity);}
break;}}}
cd[0x0B]=opacity0B;cd[0x0C]=opacity0C;cd[0x0D]=opacity0D;cd[0x0E]=opacity0E;var volume97=[];var volume98=[];for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="player")&&(data[0]["effect"][i]["while"]=="")){var volume={"n":data[0]["effect"][i]["when"]["n"],"script":(data[0]["effect"][i]["volume"]*255).toBase(16)};switch(data[0]["effect"][i]["what"]){case"back":if(!volume97.length||(volume97.length&&(volume97[volume97.length-1]["script"]!=volume["script"]))){volume97.push(volume);}
break;case"fore":if(!volume98.length||(volume98.length&&(volume98[volume98.length-1]["script"]!=volume["script"]))){volume98.push(volume);}
break;}}}
cd[0x97]=volume97;cd[0x98]=volume98;var text=[];for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="text")&&(data[0]["effect"][i]["while"]=="")){text.push({"n":data[0]["effect"][i]["when"]["n"],"index":setTEXT(data[0]["effect"][i])});}}
cd[0x99]=text;var exrank=[];for(var i=0;i<data[0]["status"].length;i++){if(data[0]["status"][i]["name"]=="bm_judge"){var index=setEXRANK(data[0]["status"][i]["value"]);if(!exrank.length||(exrank.length&&(exrank[exrank.length-1]["index"]!=index))){exrank.push({"n":data[0]["status"][i]["when"]["n"],"index":index});}}}
cd[0xA0]=exrank;var argbA1=[];var argbA2=[];var argbA3=[];var argbA4=[];for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="color")&&(data[0]["effect"][i]["while"]=="")){var argb={"n":data[0]["effect"][i]["when"]["n"],"index":setARGB(data[0]["effect"][i])};switch(data[0]["effect"][i]["what"]){case"back":if(!argbA1.length||(argbA1.length&&(argbA1[argbA1.length-1]["index"]!=argb["index"]))){argbA1.push(argb);}
break;case"layer":if(!argbA2.length||(argbA2.length&&(argbA2[argbA2.length-1]["index"]!=argb["index"]))){argbA2.push(argb);}
break;case"layer2":if(!argbA3.length||(argbA3.length&&(argbA3[argbA3.length-1]["index"]!=argb["index"]))){argbA3.push(argb);}
break;case"miss":if(!argbA4.length||(argbA4.length&&(argbA4[argbA4.length-1]["index"]!=argb["index"]))){argbA4.push(argb);}
break;}}}
cd[0xA1]=argbA1;cd[0xA2]=argbA2;cd[0xA3]=argbA3;cd[0xA4]=argbA4;var swbga=[];for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="image")&&(data[0]["effect"][i]["while"]=="hit")&&(data[0]["effect"][i]["what"].length==9)&&(data[0]["effect"][i]["what"].slice(0,7)=="switch_")&&data[0]["effect"][i]["path"]){var e=data[0]["effect"][i];var c=data[0]["effect"][i]["what"].slice(7,9);var indexes=[];while(i+1<data[0]["effect"].length){if((data[0]["effect"][i+1]["kind"]=="image")&&(data[0]["effect"][i+1]["while"]=="hit")&&data[0]["effect"][i+1]["path"]){if((data[0]["effect"][i+1]["what"].length>10)&&(data[0]["effect"][i+1]["what"].slice(0,7)=="switch_")&&(data[0]["effect"][i+1]["what"].slice(7,9)==c)){var n=parseInt(data[0]["effect"][i+1]["what"].slice(10));if(!isNaN(n)){indexes[n]=(function(){var findBMP=function(){if((data[0]["effect"][i+1]["backColor"]["a"]!=0)||(data[0]["effect"][i+1]["backColor"]["r"]!=0)||(data[0]["effect"][i+1]["backColor"]["g"]!=0)||(data[0]["effect"][i+1]["backColor"]["b"]!=0)){for(var j=0;j<hEXBMPs.length;j++){if(hEXBMPs[j]&&(hEXBMPs[j]["path"]==data[0]["effect"][i+1]["path"])&&(hEXBMPs[j]["alpha"]==data[0]["effect"][i+1]["backColor"]["a"])&&(hEXBMPs[j]["red"]==data[0]["effect"][i+1]["backColor"]["r"])&&(hEXBMPs[j]["green"]==data[0]["effect"][i+1]["backColor"]["g"])&&(hEXBMPs[j]["blue"]==data[0]["effect"][i+1]["backColor"]["b"])){return j;}}}
else{for(var j=0;j<hBMPs.length;j++){if(hBMPs[j]&&(hBMPs[j]["path"]==data[0]["effect"][i+1]["path"])){return j;}}}
return-1;};if(data[0]["effect"][i+1]["path"]!=""){if((data[0]["effect"][i+1]["where"]["x"]!=-1)||(data[0]["effect"][i+1]["where"]["y"]!=-1)||(data[0]["effect"][i+1]["clip"]["x"]!=-1)||(data[0]["effect"][i+1]["clip"]["y"]!=-1)||(data[0]["effect"][i+1]["clip2"]["x"]!=-1)||(data[0]["effect"][i+1]["clip2"]["y"]!=-1)){var index=findBMP();if(index!=-1){for(var j=0;j<hBGAs.length;j++){if(hBGAs[j]&&(hBGAs[j]["index"]==index)&&(hBGAs[j]["startX"]==data[0]["effect"][i+1]["clip"]["x"])&&(hBGAs[j]["startY"]==data[0]["effect"][i+1]["clip"]["y"])&&(hBGAs[j]["endX"]==data[0]["effect"][i+1]["clip2"]["x"])&&(hBGAs[j]["endY"]==data[0]["effect"][i+1]["clip2"]["y"])&&(hBGAs[j]["drawX"]==data[0]["effect"][i+1]["where"]["x"])&&(hBGAs[j]["drawY"]==data[0]["effect"][i+1]["where"]["y"])&&(hBGAs[j]["alpha"]==data[0]["effect"][i+1]["where"]["y"])){return{"type":"BGA","value":j};}}}}
else{var index=findBMP();if(!isUndefined(hBGAs[index])){if(hBMPs.length<hBGAs.length){hBMPs[hBGAs.length]=hBMPs[index];hEXBMPs[hBGAs.length]=hEXBMPs[index];}
else{hBMPs.push(hBMPs[index]);hEXBMPs.push(hEXBMPs[index]);return{"type":"BMP","value":hBMPs.length-1};}}}}})();}}
else if((data[0]["effect"][i+1]["what"].length==9)&&(data[0]["effect"][i+1]["what"].slice(0,7)=="switch_")){for(var j=0;j<indexes.length;j++){if(isUndefined(indexes[j])){indexes[j]={"type":"","value":0};}}
swbga.push({"n":data[0]["effect"][i+1]["when"]["n"],"index":setSWBGA(e,indexes)});break;}}
i+=1;}}}
cd[0xA5]=swbga;var changeoption=[];for(var i=0;i<data[0]["status"].length;i++){if((data[0]["status"][i]["name"]=="bm_option")){var index=setCHANGEOPTION(data[0]["status"][i]["value"]);if(!changeoption.length||(changeoption.length&&(changeoption[changeoption.length-1]["index"]!=index))){changeoption.push({"n":data[0]["status"][i]["when"]["n"],"index":index});}}}
cd[0xA6]=changeoption;})();var setChannelKey=(function(){var hasP2=(data[1]&&data[1]["note"].length&&data[1]["info"]&&data[1]["info"]["key"]);var trackToChannel=function(t,p){var v=0x00;var m=(function(){switch(ext){case"bms":case"bml":return[[0x16,0x11,0x12,0x13,0x14,0x15,0x18,0x19,0x17],[0x26,0x21,0x22,0x23,0x24,0x25,0x28,0x29,0x27]];break;case"bme":return[[0x16,0x11,0x12,0x13,0x14,0x15,0x18,0x19,0x17],[0x27,0x21,0x22,0x23,0x24,0x25,0x28,0x29,0x26]];break;case"pms":return[[0x11,0x12,0x13,0x14,0x15,0x18,0x19,0x16,0x17],[0x21,0x22,0x23,0x24,0x25,0x28,0x29,0x26,0x27]];break;default:return[[0x16,0x11,0x12,0x13,0x14,0x15,0x18,0x19,0x17],[0x26,0x21,0x22,0x23,0x24,0x25,0x28,0x29,0x27]];break;}})();switch(p){case 0:if(t<9){v=m[0][t];}
else if((t>=9)&&(t<18)&&!hasP2){v=m[1][t-9];}
break;default:if(t<9){v=m[1][t];}
break;}
return v;};var setChannel=function(d){var isP2=(arguments.length>1?arguments[1]:false);for(var i=0;i<d["note"].length;i++){if(d["note"][i]["link"]["b"]==-1){var t=xToTrack(d["note"][i]["where"]["x"],d["info"]["key"]);var c=trackToChannel(t,(isP2?1:0));if(c){var l=(function(){for(var j=0;j<d["note"][i]["trigger"].length;j++){if((d["note"][i]["trigger"][j]["kind"]=="audio")&&(d["note"][i]["trigger"][j]["while"]=="")&&d["note"][i]["trigger"][j]["path"]){return j;}}
return-1;})();var index=(l!=-1?setWAV(d["note"][i]["trigger"][l]):-1);var flag=(function(){if(d["note"][i]["link"]["a"]!=-1){return"long";}
else if(d["note"][i]["flag"]["invisible"]){return"invisible";}
else if(d["note"][i]["flag"]["damage"]){return"landmine";}
return"visible";})();var p=(isP2?1:0);var key=data[p]["info"]["key"];switch(flag){case"visible":c+=0x00;cd[c]=cd[c]||[];cd[c].push({"n":d["note"][i]["when"]["n"],"index":index});noteData[p].push({"action":0x00,"when":{"b":d["note"][i]["when"]["b"],"n":d["note"][i]["when"]["n"],"t":d["note"][i]["when"]["t"]},"where":{"x":trackToX(xToTrack(d["note"][i]["where"]["x"],key),key)},"trigger":d["note"][i]["trigger"]});break;case"invisible":c+=0x20;cd[c]=cd[c]||[];cd[c].push({"n":d["note"][i]["when"]["n"],"index":index});noteData[p].push({"action":0x00,"when":{"b":d["note"][i]["when"]["b"],"n":d["note"][i]["when"]["n"],"t":d["note"][i]["when"]["t"]},"where":{"x":trackToX(xToTrack(d["note"][i]["where"]["x"],key),key)},"flag":{"invisible":"true"},"trigger":d["note"][i]["trigger"]});break;case"long":c+=0x40;var a=d["note"][i]["link"]["a"];cd[c]=cd[c]||[];cd[c].push({"n":d["note"][i]["when"]["n"],"index":index});cd[c].push({"n":d["note"][a]["when"]["n"],"index":index});noteData[p].push({"action":0x02,"when":{"b":d["note"][i]["when"]["b"],"n":d["note"][i]["when"]["n"],"t":d["note"][i]["when"]["t"]},"when2":{"b":d["note"][a]["when"]["b"],"n":d["note"][a]["when"]["n"],"t":d["note"][a]["when"]["t"]},"where":{"x":trackToX(xToTrack(d["note"][i]["where"]["x"],key),key)},"trigger":d["note"][i]["trigger"]});break;case"landmine":c+=0xC0;cd[c]=cd[c]||[];cd[c].push({"n":d["note"][i]["when"]["n"],"script":d["note"][i]["flag"]["damage"].toBase(16)});noteData[p].push({"action":0x00,"when":{"b":d["note"][i]["when"]["b"],"n":d["note"][i]["when"]["n"],"t":d["note"][i]["when"]["t"]},"where":{"x":trackToX(xToTrack(d["note"][i]["where"]["x"],key),key)},"flag":{"damage":d["note"][i]["flag"]["damage"]},"trigger":d["note"][i]["trigger"]});break;}}}}};setChannel(data[0],false);if(hasP2){setChannel(data[1],true);}})();var setLabelIndex=(function(){var setWAVIndex=(function(){var baseType=getBaseType(hWAVs.length);for(var i=0;i<hWAVs.length;i++){var script=i.toBase(baseType);if(hWAVs[i]){hWAVs[i]["script"]=script;}
if(hEXWAVs[i]){hEXWAVs[i]["script"]=script;}
if(cWAVCMDs[i]){cWAVCMDs[i]["script"]=script;}}})();var setBPMIndex=(function(){var baseType=getBaseType(hBPMs.length);for(var i=0;i<hBPMs.length;i++){var script=i.toBase(baseType);if(hBPMs[i]){hBPMs[i]["script"]=script;}}})();var setBMPIndex=(function(){var baseType=getBaseType(hBMPs.length);for(var i=0;i<hBMPs.length;i++){var script=i.toBase(baseType);if(hBMPs[i]){hBMPs[i]["script"]=script;}
if(hEXBMPs[i]){hEXBMPs[i]["script"]=script;}}})();var setBGAIndex=(function(){var baseType=getBaseType(hBGAs.length);for(var i=0;i<hBGAs.length;i++){var script=i.toBase(baseType);if(hBGAs[i]){hBGAs[i]["script"]=script;}
if(haBGAs[i]){haBGAs[i]["script"]=script;}}})();var setSTOPIndex=(function(){var baseType=getBaseType(hSTOPs.length);for(var i=0;i<hSTOPs.length;i++){var script=i.toBase(baseType);if(hSTOPs[i]){hSTOPs[i]["script"]=script;}}})();var setTEXTIndex=(function(){var baseType=getBaseType(hTEXTs.length);for(var i=0;i<hTEXTs.length;i++){var script=i.toBase(baseType);if(hTEXTs[i]){hTEXTs[i]["script"]=script;}}})();var setEXRANKIndex=(function(){var baseType=getBaseType(hEXRANKs.length);for(var i=0;i<hEXRANKs.length;i++){var script=i.toBase(baseType);if(hEXRANKs[i]){hEXRANKs[i]["script"]=script;}}})();var setARGBIndex=(function(){var baseType=getBaseType(hARGBs.length);for(var i=0;i<hARGBs.length;i++){var script=i.toBase(baseType);if(hARGBs[i]){hARGBs[i]["script"]=script;}}})();var setSWBGAIndex=(function(){var baseType=getBaseType(hSWBGAs.length);for(var i=0;i<hSWBGAs.length;i++){var script=i.toBase(baseType);if(hSWBGAs[i]){hSWBGAs[i]["script"]=script;}}})();var setCHANGEOPTIONIndex=(function(){var baseType=getBaseType(hCHANGEOPTIONs.length);for(var i=0;i<hCHANGEOPTIONs.length;i++){var script=i.toBase(baseType);if(hCHANGEOPTIONs[i]){hCHANGEOPTIONs[i]["script"]=script;}}})();})();var md=[];var transData=function(c){var s=(arguments.length>1?arguments[1]:undefined);var s2=(arguments.length>2?arguments[2]:undefined);cd[c]=cd[c]||[];for(var i=0;i<cd[c].length;i++){var m=cd[c][i]["n"]|0;var d=cd[c][i]["n"].fSub(m).fMul(dpb)|0;md[m]=md[m]||[];md[m][c]=md[m][c]||[];if(s){md[m][c][d]=(cd[c][i]["index"]==-1?s.length.toBase(getBaseType(s.length+1)):(s[cd[c][i]["index"]]||s2[cd[c][i]["index"]])["script"]);}
else{md[m][c][d]=cd[c][i]["script"]||cd[c][i]["value"];}}};var reductScript=function(t){var r="";for(var i=t.length;i>1;i--){if(t.length%i!=0){continue;}
var needReduct=(function(){for(var j=0;j<t.length;j++){if((j%i!=0)&&(t[j]!="00")){return false;}}
return true;})();if(needReduct){var v=[];for(var j=0;j<t.length;j++){if(j%i==0){v.push(t[j]);}}
t=v;i=t.length-1;}}
r=t.join("");r=(r=="00"?"":r);return r;};for(var c=0;c<cd.length;c++){if((c>0x00)&&(c<=0xFF)){switch(c){case 0x01:transData(c,hWAVs);break;case 0x02:transData(c);break;case 0x03:transData(c);break;case 0x04:case 0x06:case 0x07:case 0x0A:transData(c,hBGAs,hBMPs);break;case 0x05:transData(c,hEXTCHRs);break;case 0x08:transData(c,hBPMs);break;case 0x09:transData(c,hSTOPs);break;case 0x0B:case 0x0C:case 0x0D:case 0x0E:transData(c);break;case 0x97:case 0x98:transData(c);break;case 0x99:transData(c,hTEXTs);break;case 0xA0:transData(c,hEXRANKs);break;case 0xA1:case 0xA2:case 0xA3:case 0xA4:transData(c,hARGBs);break;case 0xA5:transData(c,hSWBGAs);break;case 0xA6:transData(c,hCHANGEOPTIONs);break;default:if((c>0x10)&&(c<=0x29)){transData(c,hWAVs);}
else if((c>0x30)&&(c<=0x49)){transData(c,hWAVs);}
else if((c>0x50)&&(c<=0x69)){transData(c,hWAVs);}
else if((c>0xD0)&&(c<=0xE9)){transData(c);}
break;}}}
for(var m=0;m<md.length;m++){md[m]=md[m]||[];for(var c=0;c<md[m].length;c++){md[m][c]=md[m][c]||[];for(var d=0;d<dpb;d++){md[m][c][d]=md[m][c][d]||"00";}
md[m][c]=reductScript(md[m][c]);}
var t=[];for(var c=0;c<md[m].length;c++){if(md[m][c]){t.push("#"+m.toString().padStart(3,"0")+c.toBase(16).padStart(2,"0")+":"+md[m][c]);}}
md[m]=t.join("\r\n");}
var bms=[];var writeBms=function(n,v){var d=(arguments.length>2?arguments[2]:"");var s=(arguments.length>3?arguments[3]:"#");if(n){if(!isUndefined(v)&&(v!=d)){bms.push(s+n+" "+v);}}
else{bms.push(v);}};var writeHEADER=(function(){writeBms("","");writeBms("","*---------------------- HEADER FIELD");writeBms("","");writeBms("TITLE",meta["title"]);writeBms("SUBTITLE",meta["subTitle"]);writeBms("ARTIST",meta["artist"]);writeBms("SUBARTIST",meta["subArtist"]);writeBms("GENRE",meta["genre"]);writeBms("MAKER",meta["author"]);writeBms("COMMENT",data[0]["info"]["comment"]);writeBms("BASEBPM",data[0]["info"]["bpmBase"],0);var player=(function(){var v=(indexes.length==1?1:3);switch(true){case data[0]["info"]["playMode"].toLowerCase().indexOf("single")!=-1:v=0;break;case data[0]["info"]["playMode"].toLowerCase().indexOf("couple")!=-1:v=1;break;case data[0]["info"]["playMode"].toLowerCase().indexOf("double")!=-1:v=2;break;case data[0]["info"]["playMode"].toLowerCase().indexOf("battle")!=-1:v=3;break;}})();writeBms("PLAYER",player);writeBms("DIFFICULTY",data[0]["info"]["difficulty"]);writeBms("PLAYLEVEL",data[0]["info"]["level"],0);writeBms("RANK",data[0]["info"]["rank"],0);writeBms("DEFEXRANK",data[0]["info"]["defExRank"],0);writeBms("VOLWAV",data[0]["info"]["volWav"],1);writeBms("CDDA",data[0]["info"]["cdda"],0);writeBms("STAGEFILE",data[0]["info"]["stageFile"].toDirWin());writeBms("BANNER",data[0]["info"]["banner"].toDirWin());writeBms("BACKBMP",data[0]["info"]["background"].toDirWin());writeBms("VIDEOFILE",data[0]["info"]["videoFile"].toDirWin());writeBms("VIDEOF/S",data[0]["info"]["videoFps"],15);writeBms("VIDEOCOLORS",data[0]["info"]["videoColors"],16);writeBms("VIDEODLY",data[0]["info"]["videoDelay"],0);writeBms("MOVIE",data[0]["info"]["movie"].toDirWin());writeBms("MIDIFILE",data[0]["info"]["midFile"].toDirWin());writeBms("CHARFILE",data[0]["info"]["charFile"].toDirWin());writeBms("PATH_WAV",data[0]["info"]["pathWav"]);writeBms("MATERIALSWAV",data[0]["info"]["materialsWav"].toDirWin());writeBms("MATERIALSBMP",data[0]["info"]["materialsBmp"].toDirWin());writeBms("EMAIL",data[0]["info"]["email"],"","%");writeBms("URL",data[0]["info"]["url"],"","%");writeBms("BPM",getBeat(data[0],0)["bpm"]);writeBms("","");for(var i=0;i<hWAVs.length;i++){if(hWAVs[i]){writeBms("WAV"+hWAVs[i]["script"],hWAVs[i]["path"].toDirWin());}}
writeBms("","");for(var i=0;i<hEXWAVs.length;i++){if(hEXWAVs[i]){var flag=[];var value=[];if(hEXWAVs[i]["panner"]!=0){flag.push("p");value.push(hEXWAVs[i]["panner"]*10000);}
if(hEXWAVs[i]["volume"]!=1){flag.push("v");value.push((hEXWAVs[i]["volume"]-1)*10000);}
if(hEXWAVs[i]["pitch"]!=60){flag.push("f");value.push(pitchToFrequency(hEXWAVs[i]["pitch"]));}
if(flag.length){writeBms("EXWAV"+hEXWAVs[i]["script"],flag.join("")+" "+value.join(" ")+" "+hEXWAVs[i]["path"].toDirWin());}}}
writeBms("","");for(var i=0;i<cWAVCMDs.length;i++){if(cWAVCMDs[i]){if(cWAVCMDs[i]["pitch"]!=60){writeBms("WAVCMD","00"+" "+cWAVCMDs[i]["script"]+" "+cWAVCMDs[i]["pitch"]);}
if(cWAVCMDs[i]["volume"]!=1){writeBms("WAVCMD","01"+" "+cWAVCMDs[i]["script"]+" "+cWAVCMDs[i]["volume"].fMul(100));}
if(cWAVCMDs[i]["playback"]!=0){writeBms("WAVCMD","02"+" "+cWAVCMDs[i]["script"]+" "+cWAVCMDs[i]["playback"]);}}}
writeBms("","");for(var i=0;i<hBPMs.length;i++){if(hBPMs[i]){writeBms("BPM"+hBPMs[i]["script"],hBPMs[i]["bpm"].toAbbreviated(6).toAccurated());}}
writeBms("","");for(var i=0;i<hBMPs.length;i++){if(hBMPs[i]){writeBms("BMP"+hBMPs[i]["script"],hBMPs[i]["path"].toDirWin());}}
writeBms("","");for(var i=0;i<hEXBMPs.length;i++){if(hEXBMPs[i]&&(hEXBMPs[i]["alpha"]!=-1)&&(hEXBMPs[i]["red"]!=-1)&&(hEXBMPs[i]["green"]!=-1)&&(hEXBMPs[i]["blue"]!=-1)){writeBms("EXBMP"+hEXBMPs[i]["script"],hEXBMPs[i]["alpha"]+","+hEXBMPs[i]["red"]+","+hEXBMPs[i]["green"]+","+hEXBMPs[i]["blue"]+" "+hEXBMPs[i]["path"].toDirWin());}}
writeBms("","");for(var i=0;i<hBGAs.length;i++){if(hBGAs[i]){if(hBMPs[hBGAs[i]["index"]]){if((hBGAs[i]["startX"]!=-1)||(hBGAs[i]["startY"]!=-1)||(hBGAs[i]["endX"]!=-1)||(hBGAs[i]["endY"]!=-1)||(hBGAs[i]["drawX"]!=-1)||(hBGAs[i]["drawY"]!=-1)){writeBms("BGA"+hBGAs[i]["script"],hBMPs[hBGAs[i]["index"]]["script"]+" "+hBGAs[i]["startX"]+" "+hBGAs[i]["startY"]+" "+hBGAs[i]["endX"]+" "+hBGAs[i]["endY"]+" "+hBGAs[i]["drawX"]+" "+hBGAs[i]["drawY"]);}}}}
writeBms("","");for(var i=0;i<haBGAs.length;i++){if(haBGAs[i]){if(hBMPs[haBGAs[i]["index"]]){if((haBGAs[i]["startX"]!=-1)||(haBGAs[i]["startY"]!=-1)||(haBGAs[i]["width"]!=0)||(haBGAs[i]["height"]!=0)||(haBGAs[i]["drawX"]!=-1)||(haBGAs[i]["drawY"]!=-1)){writeBms("@BGA"+haBGAs[i]["script"],hBMPs[haBGAs[i]["index"]]["script"]+" "+haBGAs[i]["startX"]+" "+haBGAs[i]["startY"]+" "+haBGAs[i]["width"]+" "+haBGAs[i]["height"]+" "+haBGAs[i]["drawX"]+" "+haBGAs[i]["drawY"]);}}}}
writeBms("","");for(var i=0;i<hEXTCHRs.length;i++){if(hEXTCHRs[i]){if(hBMPs[hEXTCHRs[i]["index"]]){writeBms("EXTCHR",hEXTCHRs[i]["spriteID"]+" "+hBMPs[hEXTCHRs[i]["index"]]["script"]+" "+hEXTCHRs[i]["startX"]+" "+hEXTCHRs[i]["startY"]+" "+hEXTCHRs[i]["endX"]+" "+hEXTCHRs[i]["endY"]+" "+hEXTCHRs[i]["offsetX"]+" "+hEXTCHRs[i]["offsetY"]+" "+hEXTCHRs[i]["x"]+" "+hEXTCHRs[i]["y"]);}}}
writeBms("","");for(var i=0;i<hSTOPs.length;i++){if(hSTOPs[i]){writeBms("STOP"+hSTOPs[i]["script"],hSTOPs[i]["duration"].toAbbreviated(6).toAccurated());}}
writeBms("","");for(var i=0;i<hTEXTs.length;i++){if(hTEXTs[i]){writeBms("TEXT"+hTEXTs[i]["script"],hTEXTs[i]["text"]);}}
writeBms("","");for(var i=0;i<hEXRANKs.length;i++){if(hEXRANKs[i]){writeBms("EXRANK"+hEXRANKs[i]["script"],hEXRANKs[i]["exrank"]);}}
writeBms("","");for(var i=0;i<hARGBs.length;i++){if(hARGBs[i]){writeBms("ARGB"+hARGBs[i]["script"],hARGBs[i]["alpha"]+","+hARGBs[i]["red"]+","+hARGBs[i]["green"]+","+hARGBs[i]["blue"]);}}
writeBms("","");for(var i=0;i<hSWBGAs.length;i++){if(hSWBGAs[i]){writeBms("SWBGA"+hSWBGAs[i]["script"],(1000).fDiv(hSWBGAs[i]["interval"])+":"+hSWBGAs[i]["duration"]+":"+hSWBGAs[i]["channel"]+":"+hSWBGAs[i]["loop"]+":"+hSWBGAs[i]["alpha"]+","+hSWBGAs[i]["red"]+","+hSWBGAs[i]["green"]+","+hSWBGAs[i]["blue"]+" "+hSWBGAs[i]["indexes"].join(""));}}
writeBms("","");for(var i=0;i<hCHANGEOPTIONs.length;i++){if(hCHANGEOPTIONs[i]){writeBms("CHANGEOPTION"+hCHANGEOPTIONs[i]["script"],hCHANGEOPTIONs[i]["changeoption"]);}}
writeBms("","");writeBms("LNTYPE","1");})();var writeMAINDATA=(function(){writeBms("","");writeBms("","*---------------------- MAIN DATA FIELD");writeBms("","");writeBms("",md.join("\r\n\r\n"));writeBms("","");})();for(var i=0;i<noteData.length;i++){if(!isUndefined(indexes[i])){Semi["draw"][indexes[i]]=Semi["draw"][indexes[i]]||{};Semi["draw"][indexes[i]]["bms"]=Semi["draw"][indexes[i]]["bms"]||{};Semi["draw"][indexes[i]]["bms"]["list"]=[{"data":data[i],"noteData":noteData[i]}];Semi["draw"][indexes[i]]["bms"]["valid"]=false;}}
return bms.join("\r\n");};var toDtxText=function(indexes,type){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var types=(function(){var v=[];var m=["drum","guitar","bass"];for(var i=0;i<m.length;i++){if(type.indexOf(m[i])!=-1){v.push(m[i]);}}
return v;})();var dpb=MstOptions["CorrectTime"][0]||192;var meta=Semi["meta"];var data=(function(){var v=[];if(indexes.length>types.length){indexes=indexes.slice(0,types.length);}
if(indexes.length<types.length){switch(true){case(indexes.length==1)&&(types.length==2):indexes=[indexes[0],indexes[0]];break;case(indexes.length==1)&&(types.length==3):indexes=[indexes[0],indexes[0],indexes[0]];break;case(indexes.length==2)&&(types.length==3):indexes=[indexes[0],indexes[1],indexes[1]];break;}}
for(var i=0;i<indexes.length;i++){v.push(repairData(toData(toData(toData(toData(toData(toData(toData(toData(extData(mergeData(Semi["data"][indexes[i]]),indexes[i]),"InvalidKeyRemove"),"FakeKeyRemove"),"NoSlide"),"NoLong"),"NoFlowBackward"),"NoFlowStop"),"NoFlowChange"),"BpnUnified",{"BpnUnified":4}),indexes[i]));}
return v;})();var hBGM="";var hBMP="";var hBPM=0;var hWAVs=[];var hVOLUMEs=[];var hPANs=[];var hBPMs=[];var hAVIs=[];var hBMPs=[];var transColor=function(c){if(typeof c=="object"){if((c["a"]!=-1)&&(c["r"]!=-1)&&(c["g"]!=-1)&&(c["b"]!=-1)){c=("#"+c["r"].limit(0,255).toString(16).padStart(2,"0")+c["g"].limit(0,255).toString(16).padStart(2,"0")+c["b"].limit(0,255).toString(16).padStart(2,"0")).toUpperCase();for(var n in Palette){if(c==Palette[n].slice(0,7)){c=n.toUpperCase(1);break;}}}
else{c="";}}
return c;};var setWAV=function(e){var isBGM=(e["flag"]["bgm"]?true:false);var needVOLUME=(e["volume"]!=1?true:false);var needPAN=(e["panner"]!=0?true:false);e["backColor"]=transColor(e["backColor"]);e["foreColor"]=transColor(e["foreColor"]);var l=(function(){for(var i=0;i<hWAVs.length;i++){if(hWAVs[i]&&(hWAVs[i]["path"]==e["path"])&&(hWAVs[i]["backColor"]==e["backColor"])&&(hWAVs[i]["foreColor"]==e["foreColor"])&&(hWAVs[i]["comment"]==e["comment"])&&(hWAVs[i]["isBGM"]==isBGM)&&(!needVOLUME||(hVOLUMEs[i]&&(hVOLUMEs[i]["volume"]==e["volume"])))&&(!needPAN||(hPANs[i]&&(hPANs[i]["panner"]==e["panner"])))){return i;}}
return-1;})();if(l<1){l=hWAVs.length||1;hWAVs[l]={"path":e["path"],"backColor":e["backColor"],"foreColor":e["foreColor"],"comment":e["comment"],"isBGM":isBGM};if(needVOLUME){hVOLUMEs[l]={"volume":e["volume"]};}
if(needPAN){hPANs[l]={"panner":e["panner"]};}}
return l;};var setBMP=function(e){var isTEX=(e["flag"]["tex"]?true:false);e["backColor"]=transColor(e["backColor"]);e["foreColor"]=transColor(e["foreColor"]);var l=(function(){for(var i=0;i<hBMPs.length;i++){if(hBMPs[i]&&(hBMPs[i]["path"]==e["path"])&&(hBMPs[i]["backColor"]==e["backColor"])&&(hBMPs[i]["foreColor"]==e["foreColor"])&&(hBMPs[i]["comment"]==e["comment"])&&(hBMPs[i]["isTEX"]==isTEX)){return i;}}
return-1;})();if(l<1){l=hBMPs.length||1;hBMPs[l]={"path":e["path"],"backColor":e["backColor"],"foreColor":e["foreColor"],"comment":e["comment"],"isTEX":isTEX};}
return l;};var setAVI=function(e){e["backColor"]=transColor(e["backColor"]);e["foreColor"]=transColor(e["foreColor"]);var l=(function(){for(var i=0;i<hAVIs.length;i++){if(hAVIs[i]&&(hAVIs[i]["path"]==e["path"])&&(hAVIs[i]["backColor"]==e["backColor"])&&(hAVIs[i]["foreColor"]==e["foreColor"])&&(hAVIs[i]["comment"]==e["comment"])){return i;}}
return-1;})();if(l<1){l=hAVIs.length||1;hAVIs[l]={"path":e["path"],"backColor":e["backColor"],"foreColor":e["foreColor"],"comment":e["comment"]};}
return l;};var setBPM=function(v){var l=(function(){for(var i=0;i<hBPMs.length;i++){if(hBPMs[i]&&(hBPMs[i]["bpm"]==v)){return i;}}
return-1;})();if(l<1){l=hBPMs.length||1;hBPMs[l]={"bpm":v};}
return l;};var cd=[];var setChannelLabel=(function(){var wav=(function(){var v=[];var t;for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="audio")&&(data[0]["effect"][i]["while"]=="")&&data[0]["effect"][i]["path"]){var n=data[0]["effect"][i]["when"]["n"];if(n!=t){v.push({"n":n,"indexes":[setWAV(data[0]["effect"][i])]});t=n;}
else{v[v.length-1]["indexes"].push(setWAV(data[0]["effect"][i]));}}}
return v;})();hBGM=(function(){for(var i=0;i<hWAVs.length;i++){if((hWAVs[i])&&(hWAVs[i]["path"])&&(hWAVs[i]["isBGM"])){return i.toBase(36);}}
for(var i=0;i<hWAVs.length;i++){if((hWAVs[i])&&(hWAVs[i]["path"])){hWAVs[i]["isBGM"]=true;return i.toBase(36);}}
return"";})();var bgm=[];var se=[];for(var i=0;i<wav.length;i++){var b="";var s=[];for(var j=0;j<wav[i]["indexes"].length;j++){var index=wav[i]["indexes"][j];if(hWAVs[index]["isBGM"]&&!b){b={"n":wav[i]["n"],"index":index};}
else{s.push({"n":wav[i]["n"],"index":index});}}
if(b){bgm.push(b);}
for(var j=0;j<s.length;j++){se[j]=se[j]||[];se[j].push(s[j]);}}
cd[0x01]=bgm;cd[0x61]=se[0]||[];cd[0x62]=se[1]||[];cd[0x63]=se[2]||[];cd[0x64]=se[3]||[];cd[0x65]=se[4]||[];cd[0x66]=se[5]||[];cd[0x67]=se[6]||[];cd[0x68]=se[7]||[];cd[0x69]=se[8]||[];cd[0x70]=se[9]||[];cd[0x71]=se[10]||[];cd[0x72]=se[11]||[];cd[0x73]=se[12]||[];cd[0x74]=se[13]||[];cd[0x75]=se[14]||[];cd[0x76]=se[15]||[];cd[0x77]=se[16]||[];cd[0x78]=se[17]||[];cd[0x79]=se[18]||[];cd[0x70]=se[19]||[];cd[0x81]=se[20]||[];cd[0x82]=se[21]||[];cd[0x83]=se[22]||[];cd[0x84]=se[23]||[];cd[0x85]=se[24]||[];cd[0x86]=se[25]||[];cd[0x87]=se[26]||[];cd[0x88]=se[27]||[];cd[0x89]=se[28]||[];cd[0x90]=se[29]||[];cd[0x91]=se[30]||[];cd[0x92]=se[31]||[];var bmp=(function(){var v=[];for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="image")&&(data[0]["effect"][i]["while"]=="")&&data[0]["effect"][i]["path"]){hBMP=hBMP||data[0]["effect"][i]["path"];var n=data[0]["effect"][i]["when"]["n"];if((n==0)&&(data[0]["effect"][i]["path"]==hBMP)){continue;}
if(n!=t){v.push({"n":n,"indexes":[setBMP(data[0]["effect"][i])]});t=n;}
else{v[v.length-1]["indexes"].push(setBMP(data[0]["effect"][i]));}}}
return v;})();var bg=[];for(var i=0;i<bmp.length;i++){var b=[];for(var j=0;j<bmp[i]["indexes"].length;j++){var index=bmp[i]["indexes"][j];b.push({"n":bmp[i]["n"],"index":index});}
for(var j=0;j<b.length;j++){bg[j]=bg[j]||[];bg[j].push(b[j]);}}
cd[0x04]=bg[0]||[];cd[0x07]=bg[1]||[];cd[0x55]=bg[2]||[];cd[0x56]=bg[3]||[];cd[0x57]=bg[4]||[];cd[0x58]=bg[5]||[];cd[0x59]=bg[6]||[];cd[0x60]=bg[7]||[];var avi=(function(){var v=[];for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="video")&&(data[0]["effect"][i]["while"]=="")&&data[0]["effect"][i]["path"]){v.push({"n":data[0]["effect"][i]["when"]["n"],"index":setAVI(data[0]["effect"][i])});}}
return v;})();cd[0x54]=avi;var bpm=(function(){var v=[];var t=0;for(var i=0;i<data[0]["beat"].length;i++){var bpm=data[0]["beat"][i]["bpm"].toAbbreviated(6).toAccurated();hBPM=hBPM||bpm;if((!i||(bpm!=t))&&(bpm>0)){t=bpm;v.push({"n":data[0]["beat"][i]["when"]["n"],"index":setBPM(bpm)});}}
return v;})();cd[0x08]=bpm;var fi=(function(){var v=[];for(var i=0;i<data[0]["status"].length;i++){if((data[0]["status"][i]["name"]=="dtx_fi")&&data[0]["status"][i]["value"]){v.push({"n":data[0]["status"][i]["when"]["n"],"index":-1});}}
return v;})();cd[0x53]=fi;var be=(function(){var v=[];for(var i=0;i<data[0]["status"].length;i++){if((data[0]["status"][i]["name"]=="dtx_be")&&data[0]["status"][i]["value"]){v.push({"n":data[0]["status"][i]["when"]["n"],"index":-1});}}
return v;})();cd[0x4F]=be;var gtl=(function(){var v=[];for(var i=0;i<data[0]["status"].length;i++){if((data[0]["status"][i]["name"]=="dtx_gtl")&&data[0]["status"][i]["value"]){v.push({"n":data[0]["status"][i]["when"]["n"],"index":-1});}}
return v;})();cd[0x2C]=gtl;var bsl=(function(){var v=[];for(var i=0;i<data[0]["status"].length;i++){if((data[0]["status"][i]["name"]=="dtx_bsl")&&data[0]["status"][i]["value"]){v.push({"n":data[0]["status"][i]["when"]["n"],"index":-1});}}
return v;})();cd[0x2D]=bsl;var line=(function(){var v=[];for(var i=0;i<data[0]["status"].length;i++){if((data[0]["status"][i]["name"]=="dtx_line")&&data[0]["status"][i]["value"]){v.push({"n":data[0]["status"][i]["when"]["n"],"index":-1});}}
return v;})();cd[0x51]=line;})();var setChannelKey=(function(){var rowToChannels=function(r,c,k){var v=[];switch(c){case"drum":var m=(k>6?[0x1A,0x11,0x1B,0x12,0x14,0x13,0x15,0x17,0x16]:[0x11,0x12,0x14,0x13,0x15,0x16]);for(var i=0;i<k;i++){if(r[i]){v.push({"c":m[i],"index":r[i]});}}
break;case"guitar":case"bass":for(var i=1;i<k-1;i++){r[0]=r[0]||r[i];}
r[0]=r[0]||-1;var s=[];for(var i=0;i<k-1;i++){s[i]=(r[i]?"1":"0");}
s=s.join("");s+=(k>5?"":"00");var m={};var w=0x00;switch(c){case"guitar":m={"100000":0x20,"100100":0x21,"101000":0x22,"101100":0x23,"110000":0x24,"110100":0x25,"111000":0x26,"111100":0x27,"100010":0x93,"100110":0x94,"101010":0x95,"101110":0x96,"110010":0x97,"110110":0x98,"111010":0x99,"111110":0x9A,"100001":0x9B,"100101":0x9C,"101001":0x9D,"101101":0x9E,"110001":0x9F,"110101":0xA9,"111001":0xAA,"111101":0xAB,"100011":0xAC,"100111":0xAD,"101011":0xAE,"101111":0xAF,"110011":0xD0,"110111":0xD1,"111011":0xD2,"111111":0xD3};w=0x28;break;case"bass":m={"100000":0xA0,"100100":0xA1,"101000":0xA2,"101100":0xA3,"110000":0xA4,"110100":0xA5,"111000":0xA6,"111100":0xA7,"100010":0xC5,"100110":0xC6,"101010":0xC8,"101110":0xC9,"110010":0xCA,"110110":0xCB,"111010":0xCC,"111110":0xCD,"100001":0xCE,"100101":0xCF,"101001":0xDA,"101101":0xDB,"110001":0xDC,"110101":0xDD,"111001":0xDE,"111101":0xDF,"100011":0xE1,"100111":0xE2,"101011":0xE3,"101111":0xE4,"110011":0xE5,"110111":0xE6,"111011":0xE7,"111111":0xE8};w=0xA8;break;}
if(m[s]){v.push({"c":m[s],"index":r[0]});}
if(r[k-1]){v.push({"c":w,"index":r[k-1]});}
break;}
return v;};var setChannel=function(d,c){var v={};for(var i=0;i<d["note"].length;i++){if(d["note"][i]["link"]["b"]==-1){var n=d["note"][i]["when"]["n"];var t=xToTrack(d["note"][i]["where"]["x"],d["info"]["key"]);var l=(function(){for(var j=0;j<d["note"][i]["trigger"].length;j++){if((d["note"][i]["trigger"][j]["kind"]=="audio")&&(d["note"][i]["trigger"][j]["while"]=="")&&d["note"][i]["trigger"][j]["path"]){return j;}}
return-1;})();var index=(l!=-1?setWAV(d["note"][i]["trigger"][l]):-1);v[n]=v[n]||[];v[n][t]=index;}}
var k=d["info"]["key"];switch(c){case"drum":k=(k>6?9:6);break;case"guitar":case"bass":k=(k>5?7:5);break;}
for(var n in v){var cs=rowToChannels(v[n],c,k);if(cs.length){for(var i=0;i<cs.length;i++){cd[cs[i]["c"]]=cd[cs[i]["c"]]||[];cd[cs[i]["c"]].push({"n":Number(n),"index":cs[i]["index"]});}}}};for(var i=0;i<data.length;i++){setChannel(data[i],types[i]);}})();var setLabelIndex=(function(){var setWAVIndex=(function(){for(var i=0;i<hWAVs.length;i++){if(hWAVs[i]){hWAVs[i]["script"]=i.toBase(36);}}})();var setBMPIndex=(function(){for(var i=0;i<hBMPs.length;i++){if(hBMPs[i]){hBMPs[i]["script"]=i.toBase(36);}}})();var setAVIIndex=(function(){for(var i=0;i<hAVIs.length;i++){if(hAVIs[i]){hAVIs[i]["script"]=i.toBase(36);}}})();var setBPMIndex=(function(){for(var i=0;i<hBPMs.length;i++){if(hBPMs[i]){hBPMs[i]["script"]=i.toBase(36);}}})();})();var md=[];var transData=function(c){var s=(arguments.length>1?arguments[1]:[]);cd[c]=cd[c]||[];for(var i=0;i<cd[c].length;i++){var m=cd[c][i]["n"]|0;var d=cd[c][i]["n"].fSub(m).fMul(dpb)|0;md[m]=md[m]||[];md[m][c]=md[m][c]||[];md[m][c][d]=(cd[c][i]["index"]==-1?(s.length||1).toBase(36):s[cd[c][i]["index"]]["script"]);}};var reductScript=function(t){var r="";for(var i=t.length;i>1;i--){if(t.length%i!=0){continue;}
var needReduct=(function(){for(var j=0;j<t.length;j++){if((j%i!=0)&&(t[j]!="00")){return false;}}
return true;})();if(needReduct){var v=[];for(var j=0;j<t.length;j++){if(j%i==0){v.push(t[j]);}}
t=v;i=t.length-1;}}
r=t.join("");r=(r=="00"?"":r);return r;};for(var c=0;c<cd.length;c++){switch(c){case 0x01:case 0x61:case 0x62:case 0x63:case 0x64:case 0x65:case 0x66:case 0x67:case 0x68:case 0x69:case 0x70:case 0x71:case 0x72:case 0x73:case 0x74:case 0x75:case 0x76:case 0x77:case 0x78:case 0x79:case 0x80:case 0x81:case 0x82:case 0x83:case 0x84:case 0x85:case 0x86:case 0x87:case 0x88:case 0x89:case 0x90:case 0x91:case 0x92:case 0x1A:case 0x11:case 0x1B:case 0x12:case 0x14:case 0x13:case 0x15:case 0x17:case 0x16:case 0x20:case 0x21:case 0x22:case 0x23:case 0x24:case 0x25:case 0x26:case 0x27:case 0x93:case 0x94:case 0x95:case 0x96:case 0x97:case 0x98:case 0x99:case 0x9A:case 0x9B:case 0x9C:case 0x9D:case 0x9E:case 0x9F:case 0xA9:case 0xAA:case 0xAB:case 0xAC:case 0xAD:case 0xAE:case 0xAF:case 0xD0:case 0xD1:case 0xD2:case 0xD3:case 0x28:case 0xA0:case 0xA1:case 0xA2:case 0xA3:case 0xA4:case 0xA5:case 0xA6:case 0xA7:case 0xC5:case 0xC6:case 0xC8:case 0xC9:case 0xCA:case 0xCB:case 0xCC:case 0xCD:case 0xCE:case 0xCF:case 0xDA:case 0xDB:case 0xDC:case 0xDD:case 0xDE:case 0xDF:case 0xE1:case 0xE2:case 0xE3:case 0xE4:case 0xE5:case 0xE6:case 0xE7:case 0xE8:case 0xA8:transData(c,hWAVs);break;case 0x04:case 0x07:case 0x55:case 0x56:case 0x57:case 0x58:case 0x59:case 0x60:transData(c,hBMPs);break;case 0x54:transData(c,hAVIs);break;case 0x08:transData(c,hBPMs);break;case 0x53:case 0x4F:case 0x2C:case 0x2D:case 0x51:transData(c);break;}}
for(var m=0;m<md.length;m++){md[m]=md[m]||[];for(var c=0;c<md[m].length;c++){md[m][c]=md[m][c]||[];for(var d=0;d<dpb;d++){md[m][c][d]=md[m][c][d]||"00";}
md[m][c]=reductScript(md[m][c]);}
var t=[];for(var c=0;c<md[m].length;c++){if(md[m][c]){t.push("#"+m.toString().padStart(3,"0")+c.toBase(16).padStart(2,"0")+":"+md[m][c]);}}
md[m]=t.join("\r\n");}
var dtx=[];var writeDtx=function(n,v){var d=(arguments.length>2?arguments[2]:"");if(n){if(!isUndefined(v)&&(v!=d)){dtx.push("#"+n+": "+v);}}
else{dtx.push(v);}};var writeMeta=(function(){writeDtx("","; Created by rmstZ.html "+Version);writeDtx("","");writeDtx("TITLE",meta["title"]);writeDtx("ARTIST",meta["artist"]);writeDtx("GENRE",meta["genre"],"");writeDtx("USE556X710BGAAVI",(data[0]["info"]["magnification"]?1:0),0);writeDtx("COMMENT",data[0]["info"]["comment"],"");writeDtx("PANEL",data[0]["info"]["message"],"");writeDtx("PREVIEW",data[0]["info"]["preview"]);writeDtx("PREIMAGE",data[0]["info"]["previewImage"]);writeDtx("STAGEFILE",data[0]["info"]["stageFile"],"");writeDtx("BACKGROUND",data[0]["info"]["background"],"");writeDtx("RESULTIMAGE",data[0]["info"]["resultImage"],"");writeDtx("BMP",hBMP,"");writeDtx("BPM",data[0]["beat"].length?data[0]["beat"][0]["bpm"]:120);writeDtx("DLEVEL",data[0]["info"]["levelDrum"]||"0");writeDtx("GLEVEL",data[0]["info"]["levelGuitar"]||"0");writeDtx("BLEVEL",data[0]["info"]["levelBass"]||"0");writeDtx("","");writeDtx("","");})();var writeList=(function(){for(var i=0;i<hWAVs.length;i++){if(hWAVs[i]){writeDtx("WAV"+hWAVs[i]["script"],hWAVs[i]["path"].toDirWin()+(hWAVs[i]["comment"]?"\t;"+hWAVs[i]["comment"]:""));if(!isUndefined(hWAVs[i]["volume"])){writeDtx("VOLUME"+hWAVs[i]["script"],hWAVs[i]["volume"]);}
if(!isUndefined(hWAVs[i]["panner"])){writeDtx("PAN"+hWAVs[i]["script"],hWAVs[i]["panner"]);}
if(hWAVs[i]["isBGM"]){writeDtx("BGMWAV",hWAVs[i]["script"]);}}}
writeDtx("","");for(var i=0;i<hBMPs.length;i++){if(hBMPs[i]){writeDtx((hBMPs[i]["isTEX"]?"BPMTEX":"BPM")+hBMPs[i]["script"],hBMPs[i]["path"].toDirWin()+(hBMPs[i]["comment"]?"\t;"+hBMPs[i]["comment"]:""));}}
writeDtx("","");for(var i=0;i<hAVIs.length;i++){if(hAVIs[i]){writeDtx("AVI"+hAVIs[i]["script"],hAVIs[i]["path"].toDirWin()+(hAVIs[i]["comment"]?"\t;"+hAVIs[i]["comment"]:""));}}
writeDtx("","");writeDtx("","");for(var i=0;i<hBPMs.length;i++){if(hBPMs[i]){writeDtx("BPM"+hBPMs[i]["script"],hBPMs[i]["bpm"].toAbbreviated(6).toAccurated());}}
writeDtx("","");writeDtx("","");})();var writeData=(function(){writeDtx("",md.join("\r\n\r\n"));writeDtx("","");writeDtx("","");writeDtx("","");})();var writeExtra=(function(){for(var i=0;i<hWAVs.length;i++){if(hWAVs[i]){if(hWAVs[i]["foreColor"]){writeDtx("DTXC_WAVFORECOLOR",new Number().fromBase(hWAVs[i]["script"],36)+" "+hWAVs[i]["foreColor"]);}
if(hWAVs[i]["backColor"]){writeDtx("DTXC_WAVBACKCOLOR",new Number().fromBase(hWAVs[i]["script"],36)+" "+hWAVs[i]["backColor"]);}}}
for(var i=0;i<hBMPs.length;i++){if(hBMPs[i]){if(hBMPs[i]["foreColor"]){writeDtx("DTXC_BMPFORECOLOR",new Number().fromBase(hBMPs[i]["script"],36)+" "+hBMPs[i]["foreColor"]);}
if(hBMPs[i]["backColor"]){writeDtx("DTXC_BMPBACKCOLOR",new Number().fromBase(hBMPs[i]["script"],36)+" "+hBMPs[i]["backColor"]);}}}
for(var i=0;i<hAVIs.length;i++){if(hAVIs[i]){if(hAVIs[i]["foreColor"]){writeDtx("DTXC_AVIFORECOLOR",new Number().fromBase(hAVIs[i]["script"],36)+" "+hAVIs[i]["foreColor"]);}
if(hAVIs[i]["backColor"]){writeDtx("DTXC_AVIBACKCOLOR",new Number().fromBase(hAVIs[i]["script"],36)+" "+hAVIs[i]["backColor"]);}}}
writeDtx("DTXC_CHIPPALETTE",data[0]["info"]["chipPalette"]);writeDtx("","");})();return dtx.join("\r\n");};var toMsdText=function(indexes){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var writeMsd=function(n,v){var h=(arguments.length>2?arguments[2]:false);if(n){if(!isUndefined(v)&&(v!="")){msd.push("#"+n+":"+v+";");}
else if(!h){msd.push("#"+n+":;");}}
else{if(!isUndefined(v)&&(v!="")){msd.push(v);}
else if(!h){msd.push("");}}};var msd=[];var meta=Semi["meta"];var audioFilename="";var bpm=0;var offset=0;var step=[];var indexList=(function(){var v=[];var setList=function(n,d,p){if(!d||(p==-1)){v.push({"name":"","list":[n]});}
else{var l=(function(){for(var i=0;i<v.length;i++){if(v[i]["name"]&&(v[i]["name"]==d)){return i;}}
return-1;})();if(l!=-1){v[l]["list"]=v[l]["list"]||[];v[l]["list"][p]=n;}
else{var list=[];list[p]=n;v.push({"name":d,"list":list});}}};for(var n=0;n<indexes.length;n++){var index=indexes[n];var data=Semi["data"];if(index<data.length){setList(index,data[index][0]["info"]["playMode"]+(data[index][0]["info"]["difficulty"]?" "+data[index][0]["info"]["difficulty"]:"")+(data[index][0]["info"]["level"]?data[index][0]["info"]["level"]:""),((data[index][0]["info"]["playMode"].toLowerCase().indexOf("double")!=-1)||(data[index][0]["info"]["playMode"].toLowerCase().indexOf("couple")!=-1)?data[index][0]["info"]["player"]:-1));}}
for(var i=0;i<v.length;i++){v[i]=v[i]["list"];}
return v;})();for(var list=0;list<indexList.length;list++){var isToSingle=false;var index=indexList[list][0];var index2=indexList[list][1];if((indexList[list].length>1)&&((!isUndefined(index)&&isUndefined(index2))||(isUndefined(index)&&!isUndefined(index2)))){if(!isUndefined(index)&&isUndefined(index2)){indexList[list]=[index];}
else if(isUndefined(index)&&!isUndefined(index2)){indexList[list]=[index2];}
isToSingle=true;index=indexList[list][0];index2=indexList[list][1];}
if(!isUndefined(index)||!isUndefined(index2)){var data=(function(){var v=[];for(var i=0;i<indexList[list].length;i++){v.push(repairData(toData(toData(toData(toData(toData(toData(toData(toData(extData(mergeData(Semi["data"][indexList[list][i]]),indexes[i]),"InvalidKeyRemove"),"FakeKeyRemove"),"NoOblique"),"NoSlide"),"NoFlowBackward"),"NoFlowStop"),"NoFlowChange"),"BpmUnified"),indexes[i]));}
return v;})();var level=parseInt(data[0]["info"]["level"])||1;var difficulty=(function(){var t=(data[0]["info"]["playMode"]||"").toUpperCase();var m=["SMANIAC","BEGINNER","BASIC","ANOTHER","MANIAC"];for(var i=0;i<m.length;i++){if(t.indexOf(m[i])!=-1){return m[i];}}
return"BASIC";})();var mode=(function(){var t=(data[0]["info"]["playMode"]||"").toUpperCase();var m=["SINGLE","COUPLE","DOUBLE"];for(var i=0;i<m.length;i++){if(t.indexOf(m[i])!=-1){return m[i];}}
return m[data.length-1];})();var key=4;var set=[];for(var i=0;i<data.length;i++){audioFilename=(audioFilename?audioFilename:(function(){for(var j=0;j<data[i]["effect"].length;j++){if((data[i]["effect"][j]["kind"]=="audio")&&(data[i]["effect"][j]["while"]=="")&&data[i]["effect"][j]["path"]){return data[i]["effect"][j]["path"];}}})());offset=(offset?offset:data[i]["beat"][0]["when"]["t"]);bpm=(bpm?bpm:data[i]["info"]["bpm"]);set[i]=[];for(var j=0;j<data[i]["note"].length;j++){if(data[i]["note"][j]["link"]["b"]==-1){var w=Math.round(data[i]["note"][j]["when"]["b"].fMul(4));set[i][w]=set[i][w]||[];set[i][w][xToTrack(data[i]["note"][j]["where"]["x"],key)]=1;}}
while(set[i].length%16!=0){set[i].push([]);}
var sLUR=0;var sLDR=0;var sLDU=0;var sDUR=0;var sLDUR=0;for(var w=0;w<set[i].length;w++){set[i][w]=(function(){set[i][w]=set[i][w]||[];for(var j=0;j<key;j++){set[i][w][j]=set[i][w][j]||0;}
var s=set[i][w].join("");switch(s){case"1100":return"1";break;case"0100":return"2";break;case"0101":return"3";break;case"1000":return"4";break;case"0001":return"6";break;case"1010":return"7";break;case"0010":return"8";break;case"0011":return"9";break;case"0110":return"A";break;case"1001":return"B";break;case"1011":var m="79B";var v=m[sLUR];sLUR=(sLUR+1<m.length?sLUR+1:0);return v;break;case"1101":var m="13B";var v=m[sLDR];sLDR=(sLDR+1<m.length?sLDR+1:0);return v;break;case"1110":var m="17A";var v=m[sLDU];sLDU=(sLDU+1<m.length?sLDU+1:0);return v;break;case"0111":var m="39A";var v=m[sDUR];sDUR=(sDUR+1<m.length?sDUR+1:0);return v;break;case"1111":var m="1379AB";var v=m[sLDUR];sLDUR=(sLDUR+1<m.length?sLDUR+1:0);return v;break;default:return"0";break;}})();}
set[i]=(function(){var v=[];for(var w=0;w<set[i].length;w+=4){var s=[set[i][w],set[i][w+1],set[i][w+2],set[i][w+3]].join("");v.push((s.slice(1)=="000"?s[0]:"("+s+")"));}
return"\r\n"+v.join("");})();}
set.unshift(level);set.unshift(difficulty);step.push([mode,set.join(":")]);}}
writeMsd("FILE",(audioFilename||fileInfo.nameCore+".wav").toDirWin());writeMsd("TITLE",meta["title"]);writeMsd("ARTIST",meta["artist"]);writeMsd("MSD",meta["maker"],true);writeMsd("BPM",bpm);writeMsd("GAP",offset);for(var i=0;i<step.length;i++){writeMsd(step[i][0],step[i][1]);}
writeMsd("","");return msd.join("\r\n");};var toSmText=function(indexes){var ext=(arguments.length>1?arguments[1]:"");var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var writeSm=function(n,v){var h=(arguments.length>2?arguments[2]:false);if(n){if(!isUndefined(v)&&(v!="")){sm.push("#"+n+":"+v+";");}
else if(!h){sm.push("#"+n+":;");}}
else{if(!isUndefined(v)&&(v!="")){sm.push(v);}
else if(!h){sm.push("");}}};var majority=function(l){var v=[];for(var i=0;i<st.length;i++){var t=[];for(var j=0;j<l.length;j++){t.push(st[i][l[j]]||"");}
v.push(t.join("\t"));}
for(var i=0;i<v.length;i++){if(!v[i]){v.splice(i,1);i-=1;}}
return v.majority();};var unrepeat=function(l,i,c){var c=(arguments.length>2?arguments[2]:ht[l[0]]);var t=[];for(var j=0;j<l.length;j++){t.push(st[i][l[j]]||"");}
var v=t.join("\t");return(v==c?"":v);};var getAnimation=function(e,w){var v=[];var toColor=function(t){var c=newItem("argb");var v=(t&&!isUndefined(t["r"])&&!isUndefined(t["g"])&&!isUndefined(t["b"])&&!isUndefined(t["a"])&&!((t["r"]==c["r"])&&(t["g"]==c["g"])&&(t["b"]==c["b"])&&(t["a"]==c["a"]))?"#"+t["r"].limit(0,255).toBase(16)+t["g"].limit(0,255).toBase(16)+t["b"].limit(0,255).toBase(16)+t["a"].limit(0,255).toBase(16):"");return(v=="#00000000"?"":v);};for(var i=0;i<e.length;i++){if((e[i]["kind"]=="image")&&(e[i]["while"]=="")&&(e[i]["what"]==w)&&e[i]["path"]){var beat=e[i]["when"]["b"].toFixed(3);var animationPath=e[i]["path"];var rate=e[i]["rate"];var crossFade=e[i]["parameter"]["crossFade"];var stretchRewind=e[i]["playback"];var stretchLoop=(e[i]["loop"]==-1);var efffectPath=e[i]["addition"]["efffectPath"];var animationPath2=e[i]["addition"]["animationPath"];var transitionPath=e[i]["addition"]["transitionPath"];var color=toColor(e[i]["backColor"]);var color2=toColor(e[i]["addition"]["animationColor"]);var item=[beat,animationPath,rate,crossFade,stretchRewind,stretchLoop,efffectPath,animationPath2,transitionPath,color,color2];for(var j=item.length-1;j>-1;j--){if(!item[j]){item.splice(j,1);}
else{break;}}
v.push(item.join("="));}}
return v.join(",");};var sm=[];var ht={};var st=[];var meta=Semi["meta"];var indexList=(function(){var v=[];var setList=function(n,d,p){if(!d||(p==-1)){v.push({"name":"","list":[n]});}
else{var l=(function(){for(var i=0;i<v.length;i++){if(v[i]["name"]&&(v[i]["name"]==d)){return i;}}
return-1;})();if(l!=-1){v[l]["list"]=v[l]["list"]||[];v[l]["list"][p]=n;}
else{var list=[];list[p]=n;v.push({"name":d,"list":list});}}};for(var n=0;n<indexes.length;n++){var index=indexes[n];var data=Semi["data"];if(index<data.length){setList(index,data[index][0]["info"]["playMode"]+(data[index][0]["info"]["chartDescription"]?" - "+data[index][0]["info"]["chartDescription"]:"")+(data[index][0]["info"]["difficulty"]?" "+data[index][0]["info"]["difficulty"]:"")+(data[index][0]["info"]["level"]?data[index][0]["info"]["level"]:""),((data[index][0]["info"]["playMode"].toLowerCase().indexOf("double")!=-1)||(data[index][0]["info"]["playMode"].toLowerCase().indexOf("couple")!=-1)?data[index][0]["info"]["player"]:-1));}}
for(var i=0;i<v.length;i++){v[i]=v[i]["list"];}
return v;})();for(var list=0;list<indexList.length;list++){var isToSingle=false;var index=indexList[list][0];var index2=indexList[list][1];if((indexList[list].length>1)&&((!isUndefined(index)&&isUndefined(index2))||(isUndefined(index)&&!isUndefined(index2)))){if(!isUndefined(index)&&isUndefined(index2)){indexList[list]=[index];}
else if(isUndefined(index)&&!isUndefined(index2)){indexList[list]=[index2];}
isToSingle=true;index=indexList[list][0];index2=indexList[list][1];}
if(!isUndefined(index)||!isUndefined(index2)){var data=(function(){var v=[];for(var i=0;i<indexList[list].length;i++){v.push(repairData(toData(toData(extData(mergeData(Semi["data"][indexList[list][i]]),indexList[list][i]),"NoOblique"),"NoSlide"),indexList[list][i]));}
return v;})();var info=data[0]["info"];var key=(indexList[list].length==1?data[0]["info"]["key"]:Math.max(data[0]["info"]["key"],data[1]["info"]["key"]));var i=st.length;st[i]={};st[i]["CREDIT"]=info["credit"];st[i]["BANNER"]=info["banner"];st[i]["BACKGROUND"]=info["background"];st[i]["PREVIEWVID"]=info["previewId"];st[i]["JACKET"]=info["cover"];st[i]["DISCIMAGE"]=info["discImage"];st[i]["CDIMAGE"]=info["cdImage"];st[i]["CDTITLE"]=info["cdTitle"];st[i]["LYRICSPATH"]=info["lyricsPath"];st[i]["MUSIC"]=(function(){for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="audio")&&(data[0]["effect"][i]["while"]=="")&&data[0]["effect"][i]["path"]){return data[0]["effect"][i]["path"];}}
return"";})();st[i]["PREVIEW"]=info["preview"];st[i]["INSTRUMENTTRACK"]=info["instrumentTrack"];st[i]["SAMPLESTART"]=info["sampleStart"];st[i]["SAMPLELENGTH"]=info["sampleLength"];st[i]["DISPLAYBPM"]=info["displayBpm"];st[i]["SELECTABLE"]=info["selectable"];st[i]["BGCHANGES"]=getAnimation(data[0]["effect"],"back");st[i]["BGCHANGES2"]=getAnimation(data[0]["effect"],"back2");st[i]["FGCHANGES"]=getAnimation(data[0]["effect"],"fore");st[i]["KEYSOUNDS"]="";st[i]["ATTACKS"]=info["attacks"];st[i]["ROWSPERBEAT"]=(function(){var v=[];for(var i=0;i<data[0]["beat"].length;i++){if(!i||(data[0]["beat"][i]["dpb"]!=data[0]["beat"][i-1]["dpb"])){v.push([data[0]["beat"][i]["when"]["b"].toFixed(3),data[0]["beat"][i]["dpb"].toFixed(0)].join("="));}}
return v.join(",");})();st[i]["OFFSET"]="0.000000";st[i]["BPMS"]=(function(){var v=[];for(var i=0;i<data[0]["beat"].length;i++){if(!i||(data[0]["beat"][i]["bpm"]!=data[0]["beat"][i-1]["bpm"])){v.push([data[0]["beat"][i]["when"]["b"].toFixed(3),data[0]["beat"][i]["bpm"].toFixed(3)].join("="));}}
return v.join(",");})();st[i]["STOPS"]=(function(){var v=[];for(var i=0;i<data[0]["beat"].length;i++){if(data[0]["beat"][i]["fpn"]==0){var beat=data[0]["beat"][i]["when"]["b"];var length=0;var l=(function(){for(var j=i+1;j<data[0]["beat"].length;j++){if(data[0]["beat"][j]["fpn"]!=0){return j;}}
return-1;})();if(l!=-1){length=data[0]["beat"][l]["when"]["t"]-data[0]["beat"][i]["when"]["t"];i=l;}
else{length=data[0]["info"]["max"]["when"]["t"]-data[0]["beat"][i]["when"]["t"];i=data[0]["beat"].length-1;}
v.push([beat.toFixed(3),length.fDiv(1000).toFixed(3)].join("="));}}
return v.join(",");})();st[i]["DELAYS"]="";st[i]["LABELS"]=(function(){var v=[];for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="text")&&data[0]["effect"][i]["text"]){v.push([data[0]["effect"][i]["when"]["b"].toFixed(3),data[0]["effect"][i]["text"]].join("="));}}
return v.join(",");})();st[i]["TIMESIGNATURES"]=(function(){var v=[];for(var i=0;i<data[0]["beat"].length;i++){if(!i||(data[0]["beat"][i]["bpn"]!=data[0]["beat"][i-1]["bpn"])){if(v.length||(data[0]["beat"][i]["bpn"].toAbbreviated(6).toAccurated()!=4)){v.push([data[0]["beat"][i]["when"]["b"].toFixed(3),data[0]["beat"][i]["bpn"].toAbbreviated(6).toAccurated(),4].join("="));}}}
return v.join(",");})();st[i]["TICKCOUNTS"]=(function(){var v=[];for(var i=0;i<data[0]["status"].length;i++){if(data[0]["status"][i]["name"]=="sm_tickcount"){v.push([data[0]["status"][i]["when"]["b"].toFixed(3),data[0]["status"][i]["value"].toFixed(0)].join("="));}}
return v.join(",");})();st[i]["COMBOS"]=(function(){var v=[];var combos=[];var set=function(b,v){var l=(function(){for(var i=0;i<combos.length;i++){if(combos[i][0]==b){return i;}}
return-1;})();if(l!=-1){for(var i=0;i<v.length;i++){combos[l][i+1]=(!isUndefined(v[i])?v[i]:combos[l][i+1]);}}
else{var n=[b];for(var i=0;i<v.length;i++){n[i+1]=v[i];}
combos.push(n);}};var sort=function(a,b){return a[0]-b[0];};for(var i=0;i<data[0]["status"].length;i++){if(data[0]["status"][i]["name"]=="sm_combo"){set(data[0]["status"][i]["when"]["b"],[data[0]["status"][i]["value"],undefined]);}
if(data[0]["status"][i]["name"]=="sm_misscombo"){set(data[0]["status"][i]["when"]["b"],[undefined,data[0]["status"][i]["value"]]);}}
combos=combos.sort(sort);for(var i=0;i<combos.length;i++){if(!i){combos[i][1]=combos[i][1]||0;combos[i][2]=combos[i][2]||combos[i][1];}
else{combos[i][1]=combos[i][1]||combos[i-1][1];combos[i][2]=combos[i][2]||combos[i-1][2];}
v.push([combos[i][0].toFixed(3),combos[i][1].toFixed(0),combos[i][2].toFixed(0)].join("="));}
return v.join(",");})();st[i]["WARPS"]=(function(){var v=[];for(var i=0;i<data[0]["status"].length;i++){if(data[0]["status"][i]["name"]=="warp"){v.push([data[0]["status"][i]["when"]["b"].toFixed(3),(beatFromTime(data[0],data[0]["status"][i]["when"]["t"]+data[0]["status"][i]["value"])-data[0]["status"][i]["when"]["b"]).toFixed(3)].join("="));}}
return v.join(",");})();st[i]["SPEEDS"]=(function(){var v=[];for(var i=0;i<data[0]["status"].length;i++){if(data[0]["status"][i]["name"]=="sm_speed"){var speed=data[0]["status"][i]["value"].split("_");speed[0]=parseFloat(speed[0]);speed[1]=parseFloat(speed[1]);if(!isNaN(speed[0])&&!isNaN(speed[1])){v.push([data[0]["status"][i]["when"]["b"].toFixed(3),speed[0].toFixed(3),speed[1].fDiv(1000).toFixed(3),1].join("="));}}}
return v.join(",");})();st[i]["SCROLLS"]=(function(){var v=[];var set=function(beat,scroll){if(scroll){v.push([beat.toFixed(3),scroll.toFixed(3)].join("="));}};for(var i=0;i<data[0]["beat"].length;i++){if(!i){set(data[0]["beat"][i]["when"]["b"],data[0]["beat"][i]["fpn"]);}
for(var j=i+1;j<data[0]["beat"].length;j++){if((data[0]["beat"][j]["fpn"]!=0)&&(data[0]["beat"][j]["fpn"]!=data[0]["beat"][i]["fpn"])){set(data[0]["beat"][j]["when"]["b"],data[0]["beat"][j]["fpn"]);i=j;break;}}}
return v.join(",");})();st[i]["FAKES"]=(function(){var v=[];for(var i=0;i<data[0]["status"].length;i++){if((data[0]["status"][i]["name"]=="sm_fake")&&data[0]["status"][i]["value"]){var beat=data[0]["status"][i]["when"]["b"];var length=0;var l=(function(){for(var j=i+1;j<data[0]["status"].length;j++){if((data[0]["status"][j]["name"]=="sm_fake")&&!data[0]["status"][j]["value"]){return j;}}
return-1;})();if(l!=-1){length=data[0]["status"][l]["when"]["b"]-data[0]["status"][i]["when"]["b"];i=l;}
else{length=data[0]["info"]["max"]["when"]["b"]-data[0]["status"][i]["when"]["b"];i=data[0]["status"].length-1;}
v.push([beat.toFixed(3),length.toFixed(3)].join("="));}}
return v.join(",");})();st[i]["SMAVERSION"]=meta["chartVersion"];st[i]["CHARTNAME"]=info["chartName"];st[i]["DESCRIPTION"]=info["chartDescription"];st[i]["CHARTSTYLE"]=info["chartStyle"];st[i]["STEPSTYPE"]=(function(){var m=(((info["playMode"].toLowerCase().indexOf("double")!=-1)||(info["playMode"].toLowerCase().indexOf("couple")!=-1))&&(indexList[list].length==1)?info["playMode"].toLowerCase().replace("double","single").replace("couple","single"):info["playMode"]);if(["dance-single","dance-double","dance-couple","dance-solo","dance-threepanel","dance-routine","pump-single","pump-halfdouble","pump-double","pump-couple","pump-routine","kb7-single","kb7-small","ez2-single","ez2-double","ez2-real","para-single","ds3ddx-single","bm-single5","bm-versus5","bm-double5","bm-single7","bm-versus7","bm-double7","maniax-single","maniax-double","techno-single4","techno-single5","techno-single8","techno-double4","techno-double5","techno-double8","pnm-five","pnm-nine","kickbox-human","kickbox-quadarm","kickbox-insect","kickbox-arachnid"].indexOf(m)!=-1){switch(true){case m.startsWith("dance-"):if(indexList[list].length==1){switch(key){case 0:case 1:case 2:case 4:key=4;return"dance-single";break;case 3:return"dance-threepanel";break;case 5:case 6:key=6;return"dance-solo";break;default:key=8;return"dance-routine";break;}}
else{key=4;return(m=="dance-couple"?"dance-couple":"dance-double");}
break;case m.startsWith("pump-"):if(indexList[list].length==1){switch(key){case 0:case 1:case 2:case 3:case 4:case 5:key=5;return"pump-single";break;case 6:return"pump-halfdouble";break;default:key=10;return"pump-routine";break;}}
else{key=5;return(m=="pump-couple"?"pump-couple":"pump-double");}
break;case m.startsWith("kb7-"):key=7;return(m=="kb7-small"?"kb7-small":"kb7-single");break;case m.startsWith("ez2-"):if(indexList[list].length==1){if(key<=5){key=5;return"ez2-single";}
else{key=7;return"ez2-real";}}
else{key=5;return"ez2-double";}
break;case m.startsWith("para-"):key=5;return"para-single";break;case m.startsWith("ds3ddx-"):key=8;return"ds3ddx-single ";break;case m.startsWith("bm-"):if(indexList[list].length==1){if(key<=6){key=6;return(m=="bm-versus5"?"bm-versus5":"bm-single5");}
else{key=8;return(m=="bm-versus7"?"bm-versus7":"bm-single7");}}
else{if(key<=6){key=6;return"bm-double5";}
else{key=8;return"bm-double7";}}
break;case m.startsWith("maniax-"):if(indexList[list].length==1){key=4;return"maniax-single";}
else{key=4;return"maniax-double";}
break;case m.startsWith("techno-"):if(indexList[list].length==1){switch(key){case 0:case 1:case 2:case 3:case 4:key=4;return"techno-single4";break;case 5:return"techno-single5";break;default:key=8;return"techno-single8";break;}}
else{switch(key){case 0:case 1:case 2:case 3:case 4:key=4;return"techno-double4";break;case 5:return"techno-double5";break;default:key=8;return"techno-double8";break;}}
break;case m.startsWith("pnm-"):if(key<=5){key=5;return"pnm-five";}
else{key=9;return"pnm-nine";}
break;case m.startsWith("kickbox-"):switch(key){case 0:case 1:case 2:case 3:case 4:key=4;return(m<=4?"kickbox-quadarm":"kickbox-human");break;case 5:case 6:key=6;return"kickbox-insect";break;default:key=8;return"kickbox-arachnid";break;}
break;}}
else{if(indexList[list].length==1){switch(key){case 0:case 1:case 2:case 4:key=4;return"dance-single";case 3:return"dance-threepanel";case 5:return"pump-single";case 6:return"dance-solo";case 7:return"kb7-single";case 8:return"dance-routine";case 9:return"pnm-nine";default:key=10;return"pump-routine";}}
else if(indexList[list].length==2){switch(key){case 0:case 1:case 2:case 3:case 4:key=4;return"dance-double";case 5:return"pump-double";case 6:return"bm-double5";default:key=8;return"techno-double8";}}}})();st[i]["DIFFICULTY"]=info["difficulty"]||"Challenge";st[i]["METER"]=info["level"]||1;st[i]["RADARVALUES"]=(info["radarValues"]||[]).map(function(a){return a.toFixed(6);}).join(",");st[i]["METERTYPE"]=info["meterType"];st[i]["NOTEDATA"]=(function(){var noteSet=[];var keySounds=[];var setKeySounds=function(k){var l=(function(){for(var i=0;i<keySounds.length;i++){if(keySounds[i]==k){return i;}}
return-1;})();if(l==-1){l=keySounds.length;keySounds[l]=k;}
return l;};var addScript=function(m,n,t,s,k){noteSet[m]=noteSet[m]||[];noteSet[m][n]=noteSet[m][n]||[];noteSet[m][n][t]=noteSet[m][n][t]||{};noteSet[m][n][t]["s"]=s;noteSet[m][n][t]["k"]=k;};for(var index=0;index<data.length;index++){for(var j=0;j<data[index]["note"].length;j++){var s=(function(){switch(true){case data[index]["note"][j]["flag"]&&data[index]["note"][j]["flag"]["damage"]:return"M";case data[index]["note"][j]["flag"]&&data[index]["note"][j]["flag"]["invisible"]:return"K";case data[index]["note"][j]["flag"]&&data[index]["note"][j]["flag"]["click"]:return"L";case data[index]["note"][j]["flag"]&&data[index]["note"][j]["flag"]["invalid"]:return"F";default:return"1";}})();var k=(function(){for(var t=0;t<data[index]["note"][j]["trigger"].length;t++){if((data[index]["note"][j]["trigger"][t]["kind"]=="audio")&&data[index]["note"][j]["trigger"][t]["path"]){return setKeySounds(data[index]["note"][j]["trigger"][t]["path"]);}}})();var t=xToTrack(data[index]["note"][j]["where"]["x"],key)+key*index;if(data[index]["note"][j]["link"]["a"]!=-1){var a=data[index]["note"][j]["link"]["a"];s=(data[index]["note"][j]["flag"]&&data[index]["note"][j]["flag"]["chain"]?"4":"2");addScript(data[index]["note"][j]["when"]["n"]|0,(data[index]["note"][j]["when"]["n"]-(data[index]["note"][j]["when"]["n"]|0)).fMul(192)|0,t,s,k);addScript(data[index]["note"][a]["when"]["n"]|0,(data[index]["note"][a]["when"]["n"]-(data[index]["note"][a]["when"]["n"]|0)).fMul(192)|0,t,"3",undefined);j=a;}
else{addScript(data[index]["note"][j]["when"]["n"]|0,(data[index]["note"][j]["when"]["n"]-(data[index]["note"][j]["when"]["n"]|0)).fMul(192)|0,t,s,k);}}}
var reductScript=(function(){var u=key*data.length;var isEmpty=function(s){s=s||[];for(var t=0;t<u;t++){if(s[t]&&s[t]["s"]){return false;}}
return true;};for(var m=0;m<noteSet.length;m++){noteSet[m]=noteSet[m]||[];for(var n=0;n<192;n++){if(isEmpty(noteSet[m][n])){noteSet[m][n]=undefined;}}
for(var j=noteSet[m].length;j>1;j--){if(noteSet[m].length%j!=0){continue;}
var needReduct=(function(){for(var k=0;k<noteSet[m].length;k++){if((k%j!=0)&&noteSet[m][k]){return false;}}
return true;})();if(needReduct){var v=[];for(var k=0;k<noteSet[m].length;k++){if(k%j==0){v.push(noteSet[m][k]);}}
noteSet[m]=v;j=noteSet[m].length-1;}}
for(var n=0;n<noteSet[m].length;n++){var v=[];noteSet[m][n]=noteSet[m][n]||[];for(var t=0;t<u;t++){noteSet[m][n][t]=noteSet[m][n][t]||{};v.push((noteSet[m][n][t]["s"]||"0")+(!isUndefined(noteSet[m][n][t]["k"])?"["+noteSet[m][n][t]["k"]+"]":""));}
noteSet[m][n]=v.join("");}
noteSet[m]=noteSet[m].join("\r\n")+"\r\n";}
noteSet=noteSet.join(",\r\n");})();st[i]["KEYSOUNDS"]=keySounds.join(",");return noteSet;})();}}
var setData=(function(){ht["VERSION"]=meta["chartVersion"];ht["TITLE"]=meta["title"];ht["TITLETRANSLIT"]=meta["titleTranslit"];ht["SUBTITLE"]=meta["subTitle"];ht["SUBTITLETRANSLIT"]=meta["subTitleTranslit"];ht["ARTIST"]=meta["artist"];ht["ARTISTTRANSLIT"]=meta["artistTranslit"];ht["GENRE"]=meta["genre"];ht["ORIGIN"]=meta["source"];ht["CREDIT"]=majority(["CREDIT"]);ht["BANNER"]=majority(["BANNER"]);ht["BACKGROUND"]=majority(["BACKGROUND"]);ht["PREVIEWVID"]=majority(["PREVIEWVID"]);ht["JACKET"]=majority(["JACKET"]);ht["CDIMAGE"]=majority(["CDIMAGE"]);ht["DISCIMAGE"]=majority(["DISCIMAGE"]);ht["LYRICSPATH"]=majority(["LYRICSPATH"]);ht["CDTITLE"]=majority(["CDTITLE"]);ht["MUSIC"]=majority(["MUSIC"]);ht["PREVIEW"]=majority(["PREVIEW"]);ht["INSTRUMENTTRACK"]=majority(["INSTRUMENTTRACK"]);ht["SAMPLESTART"]=majority(["SAMPLESTART"]);ht["SAMPLELENGTH"]=majority(["SAMPLELENGTH"]);ht["DISPLAYBPM"]=majority(["DISPLAYBPM"]);ht["SELECTABLE"]=(st.find(function(a){return!isUndefined(a["SELECTABLE"]);})||{})["SELECTABLE"]||"";ht["BGCHANGES"]=majority(["BGCHANGES"]);ht["BGCHANGES2"]=majority(["BGCHANGES2"]);ht["FGCHANGES"]=majority(["FGCHANGES"]);ht["KEYSOUNDS"]=majority(["KEYSOUNDS"]);ht["ATTACKS"]=majority(["ATTACKS"]);ht["ROWSPERBEAT"]=majority(["ROWSPERBEAT"]);ht["OFFSET"]=majority(["OFFSET"]);var htBeat=majority(["BPMS","STOPS","DELAYS","LABELS","TIMESIGNATURES","TICKCOUNTS","COMBOS","WARPS","SPEEDS","SCROLLS","FAKES"]);if(htBeat){var htBeatList=htBeat.split("\t");ht["BPMS"]=htBeatList[0];ht["STOPS"]=htBeatList[1];ht["DELAYS"]=htBeatList[2];ht["LABELS"]=htBeatList[3];ht["TIMESIGNATURES"]=htBeatList[4];ht["TICKCOUNTS"]=htBeatList[5];ht["COMBOS"]=htBeatList[6];ht["WARPS"]=htBeatList[7];ht["SPEEDS"]=htBeatList[8];ht["SCROLLS"]=htBeatList[9];ht["FAKES"]=htBeatList[10];}
for(var i=0;i<st.length;i++){st[i]["CREDIT"]=unrepeat(["CREDIT"],i);st[i]["BANNER"]=unrepeat(["BANNER"],i);st[i]["BACKGROUND"]=unrepeat(["BACKGROUND"],i);st[i]["PREVIEWVID"]=unrepeat(["PREVIEWVID"],i);st[i]["JACKET"]=unrepeat(["JACKET"],i);st[i]["DISCIMAGE"]=unrepeat(["DISCIMAGE"],i);st[i]["CDIMAGE"]=unrepeat(["CDIMAGE"],i);st[i]["CDTITLE"]=unrepeat(["CDTITLE"],i);st[i]["LYRICSPATH"]=unrepeat(["LYRICSPATH"],i);st[i]["MUSIC"]=unrepeat(["MUSIC"],i);st[i]["PREVIEW"]=unrepeat(["PREVIEW"],i);st[i]["INSTRUMENTTRACK"]=unrepeat(["INSTRUMENTTRACK"],i);st[i]["SAMPLESTART"]=unrepeat(["SAMPLESTART"],i);st[i]["SAMPLELENGTH"]=unrepeat(["SAMPLELENGTH"],i);st[i]["DISPLAYBPM"]=unrepeat(["DISPLAYBPM"],i);st[i]["SELECTABLE"]=unrepeat(["SELECTABLE"],i);st[i]["BGCHANGES"]=unrepeat(["BGCHANGES"],i);st[i]["BGCHANGES2"]=unrepeat(["BGCHANGES2"],i);st[i]["FGCHANGES"]=unrepeat(["FGCHANGES"],i);st[i]["KEYSOUNDS"]=unrepeat(["KEYSOUNDS"],i);st[i]["ATTACKS"]=unrepeat(["ATTACKS"],i);st[i]["OFFSET"]=unrepeat(["OFFSET"],i);var stBeat=unrepeat(["BPMS","STOPS","DELAYS","LABELS","TIMESIGNATURES","TICKCOUNTS","COMBOS","WARPS","SPEEDS","SCROLLS","FAKES"],i,htBeat);if(!stBeat){st[i]["BPMS"]="";st[i]["STOPS"]="";st[i]["DELAYS"]="";st[i]["LABELS"]="";st[i]["TIMESIGNATURES"]="";st[i]["TICKCOUNTS"]="";st[i]["COMBOS"]="";st[i]["WARPS"]="";st[i]["SPEEDS"]="";st[i]["SCROLLS"]="";st[i]["FAKES"]="";}}})();var writeData=(function(){switch(ext){case"sm":writeSm("TITLE",ht["TITLE"]);writeSm("SUBTITLE",ht["SUBTITLE"]);writeSm("ARTIST",ht["ARTIST"]);writeSm("TITLETRANSLIT",ht["TITLETRANSLIT"]);writeSm("SUBTITLETRANSLIT",ht["SUBTITLETRANSLIT"]);writeSm("ARTISTTRANSLIT",ht["ARTISTTRANSLIT"]);writeSm("GENRE",ht["GENRE"]);writeSm("CREDIT",ht["CREDIT"]);writeSm("BANNER",(ht["BANNER"]||"").toDirWin());writeSm("BACKGROUND",(ht["BACKGROUND"]||"").toDirWin());writeSm("LYRICSPATH",ht["LYRICSPATH"]);writeSm("CDTITLE",ht["CDTITLE"]);writeSm("MUSIC",(ht["MUSIC"]||"").toDirWin());writeSm("OFFSET",ht["OFFSET"]);writeSm("SAMPLESTART",ht["SAMPLESTART"]);writeSm("SAMPLELENGTH",ht["SAMPLELENGTH"]);writeSm("SELECTABLE",ht["SELECTABLE"]);writeSm("DISPLAYBPM",ht["DISPLAYBPM"],true);writeSm("BPMS",ht["BPMS"]);writeSm("STOPS",ht["STOPS"]);writeSm("BGCHANGES",(ht["BGCHANGES"]||"").toDirWin());writeSm("BGCHANGES2",(ht["BGCHANGES2"]||"").toDirWin(),true);writeSm("FGCHANGES",(ht["FGCHANGES"]||"").toDirWin(),true);writeSm("KEYSOUNDS",(ht["KEYSOUNDS"]||"").toDirWin());writeSm("ATTACKS",ht["ATTACKS"]);writeSm("TIMESIGNATURES",ht["TIMESIGNATURES"],true);for(var i=0;i<st.length;i++){writeSm("","");writeSm("","//---------------"+st[i]["STEPSTYPE"]+" - "+st[i]["DESCRIPTION"]+"----------------");writeSm("","#NOTES:");writeSm("","   "+st[i]["STEPSTYPE"]+":");writeSm("","   "+st[i]["DESCRIPTION"]+":");writeSm("","   "+st[i]["DIFFICULTY"]+":");writeSm("","   "+st[i]["METER"]+":");writeSm("","   "+st[i]["RADARVALUES"]+":");writeSm("",st[i]["NOTEDATA"]+";");}
break;case"sma":writeSm("TITLE",ht["TITLE"]);writeSm("SUBTITLE",ht["SUBTITLE"]);writeSm("ARTIST",ht["ARTIST"]);writeSm("TITLETRANSLIT",ht["TITLETRANSLIT"]);writeSm("SUBTITLETRANSLIT",ht["SUBTITLETRANSLIT"]);writeSm("ARTISTTRANSLIT",ht["ARTISTTRANSLIT"]);writeSm("GENRE",ht["GENRE"]);writeSm("CREDIT",ht["CREDIT"]);writeSm("BANNER",(ht["BANNER"]||"").toDirWin());writeSm("DISC",(ht["DISCIMAGE"]||"").toDirWin());writeSm("BACKGROUND",(ht["BACKGROUND"]||"").toDirWin());writeSm("PREVIEW",(ht["PREVIEW"]||"").toDirWin());writeSm("LYRICSPATH",ht["LYRICSPATH"]);writeSm("CDTITLE",ht["CDTITLE"]);writeSm("MUSIC",(ht["MUSIC"]||"").toDirWin());writeSm("INSTRUMENTTRACK",ht["INSTRUMENTTRACK"],true);writeSm("SAMPLESTART",ht["SAMPLESTART"]);writeSm("SAMPLELENGTH",ht["SAMPLELENGTH"]);writeSm("SELECTABLE",ht["SELECTABLE"]);writeSm("DISPLAYBPM",ht["DISPLAYBPM"],true);writeSm("SMAVERSION",ht["VERSION"]);writeSm("ROWSPERBEAT",ht["ROWSPERBEAT"]);writeSm("BEATSPERMEASURE",ht["TIMESIGNATURES"]);writeSm("OFFSET",ht["OFFSET"]);writeSm("BPMS",ht["BPMS"]);writeSm("STOPS",ht["STOPS"]);writeSm("BGCHANGES",(ht["BGCHANGES"]||"").toDirWin());for(var i=0;i<st.length;i++){writeSm("","");writeSm("","//---------------"+st[i]["STEPSTYPE"]+" - "+st[i]["DESCRIPTION"]+"----------------");writeSm("ROWSPERBEAT",st[i]["ROWSPERBEAT"]);writeSm("BEATSPERMEASURE",st[i]["TIMESIGNATURES"]);writeSm("FGCHANGES",st[i]["FGCHANGES"],true);writeSm("OFFSET",st[i]["OFFSET"]);writeSm("BPMS",st[i]["BPMS"]);writeSm("STOPS",st[i]["STOPS"]);writeSm("DELAYS",st[i]["DELAYS"]);writeSm("TICKCOUNT",st[i]["TICKCOUNTS"]);writeSm("SPEED",st[i]["SPEEDS"]);writeSm("MULTIPLIER",st[i]["COMBOS"]);writeSm("FAKES",st[i]["FAKES"]);writeSm("METERTYPE",st[i]["METERTYPE"]);writeSm("KEYSOUNDS",st[i]["KEYSOUNDS"],true);writeSm("ATTACKS",st[i]["ATTACKS"]);writeSm("","#NOTES:");writeSm("","   "+st[i]["STEPSTYPE"]+":");writeSm("","   "+st[i]["DESCRIPTION"]+":");writeSm("","   "+st[i]["DIFFICULTY"]+":");writeSm("","   "+st[i]["METER"]+":");writeSm("","   "+st[i]["RADARVALUES"]+":");writeSm("",st[i]["NOTEDATA"]+";");}
break;case"ssc":writeSm("VERSION",ht["VERSION"]);writeSm("TITLE",ht["TITLE"]);writeSm("SUBTITLE",ht["SUBTITLE"]);writeSm("ARTIST",ht["ARTIST"]);writeSm("TITLETRANSLIT",ht["TITLETRANSLIT"]);writeSm("SUBTITLETRANSLIT",ht["SUBTITLETRANSLIT"]);writeSm("ARTISTTRANSLIT",ht["ARTISTTRANSLIT"]);writeSm("GENRE",ht["GENRE"]);writeSm("ORIGIN",ht["ORIGIN"]);writeSm("CREDIT",ht["CREDIT"]);writeSm("BANNER",(ht["BANNER"]||"").toDirWin());writeSm("BACKGROUND",(ht["BACKGROUND"]||"").toDirWin());writeSm("PREVIEWVID",ht["PREVIEWVID"]);writeSm("JACKET",(ht["JACKET"]||"").toDirWin());writeSm("CDIMAGE",(ht["CDIMAGE"]||"").toDirWin());writeSm("DISCIMAGE",(ht["DISCIMAGE"]||"").toDirWin());writeSm("LYRICSPATH",ht["LYRICSPATH"]);writeSm("CDTITLE",ht["CDTITLE"]);writeSm("MUSIC",(ht["MUSIC"]||"").toDirWin());writeSm("PREVIEW",(ht["PREVIEW"]||"").toDirWin(),true);writeSm("INSTRUMENTTRACK",ht["INSTRUMENTTRACK"],true);writeSm("OFFSET",ht["OFFSET"]);writeSm("SAMPLESTART",ht["SAMPLESTART"]);writeSm("SAMPLELENGTH",ht["SAMPLELENGTH"]);writeSm("SELECTABLE",ht["SELECTABLE"]);writeSm("DISPLAYBPM",ht["DISPLAYBPM"],true);writeSm("BPMS",ht["BPMS"]);writeSm("STOPS",ht["STOPS"]);writeSm("DELAYS",ht["DELAYS"]);writeSm("WARPS",ht["WARPS"]);writeSm("TIMESIGNATURES",ht["TIMESIGNATURES"]);writeSm("TICKCOUNTS",ht["TICKCOUNTS"]);writeSm("COMBOS",ht["COMBOS"]);writeSm("SPEEDS",ht["SPEEDS"]);writeSm("SCROLLS",ht["SCROLLS"]);writeSm("FAKES",ht["FAKES"]);writeSm("LABELS",ht["LABELS"]);writeSm("BGCHANGES",(ht["BGCHANGES"]||"").toDirWin());writeSm("BGCHANGES2",(ht["BGCHANGES2"]||"").toDirWin(),true);writeSm("FGCHANGES",(ht["FGCHANGES"]||"").toDirWin());writeSm("KEYSOUNDS",(ht["KEYSOUNDS"]||"").toDirWin());writeSm("ATTACKS",ht["ATTACKS"]);for(var i=0;i<st.length;i++){writeSm("","");writeSm("","//---------------"+st[i]["STEPSTYPE"]+" - "+st[i]["DESCRIPTION"]+"----------------");writeSm("","#NOTEDATA:;");writeSm("CHARTNAME",st[i]["CHARTNAME"]);writeSm("STEPSTYPE",st[i]["STEPSTYPE"]);writeSm("DESCRIPTION",st[i]["DESCRIPTION"]);writeSm("CHARTSTYLE",st[i]["CHARTSTYLE"]);writeSm("DIFFICULTY",st[i]["DIFFICULTY"]);writeSm("METER",st[i]["METER"]);writeSm("MUSIC",st[i]["MUSIC"],true);writeSm("RADARVALUES",st[i]["RADARVALUES"]);writeSm("CREDIT",st[i]["CREDIT"],true);writeSm("OFFSET",st[i]["OFFSET"],true);writeSm("ATTACKS",st[i]["ATTACKS"]);writeSm("DISPLAYBPM",st[i]["DISPLAYBPM"],true);writeSm("","#NOTES:");writeSm("",st[i]["NOTEDATA"]+";");}
break;}})();writeSm("","");return sm.join("\r\n");};var toDwiText=function(indexes){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var tracksToStep=function(s,h,m){var trans=function(s,m){var v="0";if(m=="SOLO"){switch(s){case"000000":v="0";break;case"101000":v="1";break;case"001000":v="2";break;case"001001":v="3";break;case"100000":v="4";break;case"000001":v="6";break;case"100100":v="7";break;case"000100":v="8";break;case"000101":v="9";break;case"001100":v="A";break;case"100001":v="B";break;case"010000":v="C";break;case"000010":v="D";break;case"110000":v="E";break;case"011000":v="F";break;case"010100":v="G";break;case"010001":v="H";break;case"100010":v="I";break;case"001010":v="J";break;case"000110":v="K";break;case"000011":v="L";break;case"010010":v="M";break;}}
else{switch(s){case"0000":v="0";break;case"1100":v="1";break;case"0100":v="2";break;case"0101":v="3";break;case"1000":v="4";break;case"0001":v="6";break;case"1010":v="7";break;case"0010":v="8";break;case"0011":v="9";break;case"0110":v="A";break;case"1001":v="B";break;}}
return v;};var show=[];var hold=[];if(m=="SOLO"){switch(s){case"000000":case"101000":case"001000":case"001001":case"100000":case"000001":case"100100":case"000100":case"000101":case"001100":case"100001":case"010000":case"000010":case"110000":case"011000":case"010100":case"010001":case"100010":case"001010":case"000110":case"000011":case"010010":show.push(trans(s,m));hold.push(trans(h,m));break;case"010111":case"100101":case"100110":case"100111":show.push(trans(s.slice(0,4)+"00",m));show.push(trans("0000"+s.slice(4),m));hold.push(trans(h.slice(0,4)+"00",m));hold.push(trans("0000"+h.slice(4),m));break;case"010011":case"010101":case"010110":case"011001":case"011010":case"011011":case"011101":case"011110":case"100011":case"101001":case"101010":case"101011":case"101101":case"101110":show.push(trans(s.slice(0,3)+"000",m));show.push(trans("000"+s.slice(3),m));hold.push(trans(h.slice(0,3)+"000",m));hold.push(trans("000"+h.slice(3),m));break;case"110101":case"110110":case"111001":case"111010":show.push(trans(s.slice(0,2)+"0000",m));show.push(trans("00"+s.slice(2),m));hold.push(trans(h.slice(0,2)+"0000",m));hold.push(trans("00"+h.slice(2),m));break;case"000111":case"001011":case"001101":case"001110":case"001111":case"011100":case"101100":case"110001":case"110010":case"110011":case"110100":case"111000":case"111100":case"011111":case"101111":case"110111":case"111011":case"111101":case"111110":case"111111":show.push(trans(s.slice(0,2)+"0000",m));show.push(trans("00"+s.slice(2,4)+"00",m));show.push(trans("0000"+s.slice(4),m));hold.push(trans(h.slice(0,2)+"0000",m));hold.push(trans("00"+h.slice(2,4)+"00",m));hold.push(trans("0000"+h.slice(4),m));}}
else{switch(s){case"0000":case"1100":case"0100":case"0101":case"1000":case"0001":case"1010":case"0010":case"0011":case"0110":case"1001":show.push(trans(s,m));hold.push(trans(h,m));break;case"0111":case"1011":case"1101":case"1110":case"1111":show.push(trans(s.slice(0,2)+"00",m));show.push(trans("00"+s.slice(2),m));hold.push(trans(h.slice(0,2)+"00",m));hold.push(trans("00"+h.slice(2),m));break;}}
var s="";for(var i=0;i<show.length;i++){if(show[i]!="0"){s+=show[i]+(hold[i]!="0"?"!"+hold[i]:"");}}
return(show.length>1?"<"+s+">":s)||"0";};var writeDwi=function(n,v){var h=(arguments.length>2?arguments[2]:false);if(n){if(!isUndefined(v)&&(v!="")){dwi.push("#"+n+":"+v+";");}
else if(!h){dwi.push("#"+n+":;");}}
else{if(!h){if(!isUndefined(v)&&(v!="")){dwi.push(v);}
else if(!h){dwi.push("");}}}};var dwi=[];var meta=Semi["meta"];var audioFilename="";var bpm=0;var offset=0;var info={};var step=[];var indexList=(function(){var v=[];var setList=function(n,d,p){if(!d||(p==-1)){v.push({"name":"","list":[n]});}
else{var l=(function(){for(var i=0;i<v.length;i++){if(v[i]["name"]&&(v[i]["name"]==d)){return i;}}
return-1;})();if(l!=-1){v[l]["list"]=v[l]["list"]||[];v[l]["list"][p]=n;}
else{var list=[];list[p]=n;v.push({"name":d,"list":list});}}};for(var n=0;n<indexes.length;n++){var index=indexes[n];var data=Semi["data"];if(index<data.length){setList(index,data[index][0]["info"]["playMode"]+(data[index][0]["info"]["difficulty"]?" "+data[index][0]["info"]["difficulty"]:"")+(data[index][0]["info"]["level"]?data[index][0]["info"]["level"]:""),((data[index][0]["info"]["playMode"].toLowerCase().indexOf("double")!=-1)||(data[index][0]["info"]["playMode"].toLowerCase().indexOf("couple")!=-1)?data[index][0]["info"]["player"]:-1));}}
for(var i=0;i<v.length;i++){v[i]=v[i]["list"];}
return v;})();for(var list=0;list<indexList.length;list++){var isToSingle=false;var index=indexList[list][0];var index2=indexList[list][1];if((indexList[list].length>1)&&((!isUndefined(index)&&isUndefined(index2))||(isUndefined(index)&&!isUndefined(index2)))){if(!isUndefined(index)&&isUndefined(index2)){indexList[list]=[index];}
else if(isUndefined(index)&&!isUndefined(index2)){indexList[list]=[index2];}
isToSingle=true;index=indexList[list][0];index2=indexList[list][1];}
if(!isUndefined(index)||!isUndefined(index2)){var data=(function(){var v=[];for(var i=0;i<indexList[list].length;i++){v.push(repairData(toData(toData(toData(toData(toData(toData(toData(extData(mergeData(Semi["data"][indexList[list][i]]),indexList[list][i]),"InvalidKeyRemove"),"FakeKeyRemove"),"NoOblique"),"NoSlide"),"BpnUnified",{"BpnUnified":4}),"NoFlowBackward"),"NoFlowChange"),indexList[list][i]));}
return v;})();var level=parseInt(data[0]["info"]["level"])||1;var difficulty=(function(){var t=(data[0]["info"]["difficulty"]||"").toUpperCase();var m=["SMANIAC","BEGINNER","BASIC","ANOTHER","MANIAC"];for(var i=0;i<m.length;i++){if(t.indexOf(m[i])!=-1){return m[i];}}
return"BASIC";})();var mode=(function(){var t=(data[0]["info"]["playMode"]||"").toUpperCase();var m=["SINGLE","COUPLE","DOUBLE","SOLO"];for(var i=0;i<m.length;i++){if(t.indexOf(m[i])!=-1){return m[i];}}
return(data[0]["info"]["key"]==6?"SOLO":m[data.length-1]);})();var key=(mode=="SOLO"?6:4);var set=[];for(var i=0;i<data.length;i++){audioFilename=audioFilename||(function(){for(var j=0;j<data[i]["effect"].length;j++){if((data[i]["effect"][j]["kind"]=="audio")&&(data[i]["effect"][j]["while"]=="")&&data[i]["effect"][j]["path"]){return data[i]["effect"][j]["path"];}}})();offset=offset||data[i]["beat"][0]["when"]["t"];bpm=bpm||data[i]["info"]["bpm"];info["displayTitle"]=info["displayTitle"]||data[i]["info"]["displayTitle"];info["displayArtist"]=info["displayArtist"]||data[i]["info"]["displayArtist"];info["displayBpm"]=info["displayBpm"]||data[i]["info"]["displayBpm"];info["audioMd5"]=info["audioMd5"]||data[i]["info"]["audioMd5"];info["bpms"]=(!isUndefined(info["bpms"])?info["bpms"]:(function(){var v=[];var bpmC=0;for(var i=0;i<data[0]["beat"].length;i++){if(data[0]["beat"][i]["fpn"]!=0){var bpm=data[0]["beat"][i]["bpm"].toAbbreviated(6).toAccurated();if((!v.length||(bpm!=bpmC))&&(bpm>0)){bpmC=bpm;v.push([data[0]["beat"][i]["when"]["b"].toFixed(3),bpm.toFixed(3)].join("="));}}}
if(v.length&&(v[0]==[(0).toFixed(3),bpm.toFixed(3)].join("="))){v.splice(0,1);}
return v.join(",");})());info["stops"]=(!isUndefined(info["stops"])?info["stops"]:(function(){var v=[];for(var i=0;i<data[0]["beat"].length;i++){if(data[0]["beat"][i]["fpn"]==0){var beat=data[0]["beat"][i]["when"]["b"];var length=0;var l=(function(){for(var j=i+1;j<data[0]["beat"].length;j++){if(data[0]["beat"][j]["fpn"]!=0){return j;}}
return-1;})();if(l!=-1){length=data[0]["beat"][l]["when"]["t"]-data[0]["beat"][i]["when"]["t"];i=l;}
else{length=data[0]["info"]["max"]["when"]["t"]-data[0]["beat"][i]["when"]["t"];i=data[0]["beat"].length-1;}
v.push([beat.toFixed(3),length.toFixed(3)].join("="));}}
return v.join(",");})());info["cdTitle"]=info["cdTitle"]||data[i]["info"]["cdTitle"];info["sampleStart"]=info["sampleStart"]||data[i]["info"]["sampleStart"];info["sampleLength"]=info["sampleLength"]||data[i]["info"]["sampleLength"];info["randSeed"]=info["randSeed"]||data[i]["info"]["randSeed"];info["randStart"]=info["randStart"]||data[i]["info"]["randStart"];info["randFolder"]=info["randFolder"]||data[i]["info"]["randFolder"];info["randList"]=info["randList"]||data[i]["info"]["randList"];set[i]=[];for(var j=0;j<data[i]["note"].length;j++){var w=Math.round(data[i]["note"][j]["when"]["b"].fMul(48));var t=xToTrack(data[i]["note"][j]["where"]["x"],key);set[i][w]=set[i][w]||{};set[i][w]["show"]=set[i][w]["show"]||[];set[i][w]["show"][t]=1;var a=data[i]["note"][j]["link"]["a"];if(a!=-1){set[i][w]["hold"]=set[i][w]["hold"]||[];set[i][w]["hold"][t]=1;var w2=Math.round(data[i]["note"][a]["when"]["b"].fMul(48));set[i][w2]=set[i][w2]||{};set[i][w2]["show"]=set[i][w2]["show"]||[];set[i][w2]["show"][t]=1;j=a;}}
while(set[i].length%192!=0){set[i].push({});}
for(var w=0;w<set[i].length;w++){set[i][w]=(function(){set[i][w]=set[i][w]||{};set[i][w]["show"]=set[i][w]["show"]||[];set[i][w]["hold"]=set[i][w]["hold"]||[];for(var j=0;j<key;j++){set[i][w]["show"][j]=set[i][w]["show"][j]||0;set[i][w]["hold"][j]=set[i][w]["hold"][j]||0;}
return tracksToStep(set[i][w]["show"].join(""),set[i][w]["hold"].join(""),mode);})();}
set[i]=(function(){var v=[];for(var w=0;w<set[i].length;w+=192){var s=set[i].slice(w,w+192);var m=[192/8,192/16,192/24,192/64];for(var j=0;j<m.length;j++){if(s.length%m[j]!=0){continue;}
var needReduct=(function(){for(var k=0;k<s.length;k++){if((k%m[j]!=0)&&(s[k]!="0")){return false;}}
return true;})();if(needReduct){var t=[];for(var k=0;k<s.length;k++){if(k%m[j]==0){t.push(s[k]);}}
s=t;break;}}
switch(s.length){case 8:s=s.join("");break;case 16:s="("+s.join("")+")";break;case 24:s="["+s.join("")+"]";break;case 64:s="{"+s.join("")+"}";break;case 192:s="`"+s.join("")+"'";break;}
v.push(s);}
v.unshift("");v.push("");return v.join("\r\n");})();}
set.unshift(level);set.unshift(difficulty);step.push([mode,set.join(":")]);}}
writeDwi("TITLE",meta["title"]);writeDwi("ARTIST",meta["artist"]);writeDwi("FILE",((audioFilename==fileInfo.nameCore+".mp3")||(audioFilename==fileInfo.nameCore+".wav")?"":audioFilename).toDirWin(),true);writeDwi("BPM",bpm.toFixed(3));writeDwi("GAP",offset||"0");writeDwi("DISPLAYTITLE",info["displayTitle"],true);writeDwi("DISPLAYARTIST",info["displayArtist"],true);writeDwi("DISPLAYBPM",info["displayBpm"],true);writeDwi("MD5",info["audioMd5"],true);writeDwi("FREEZE",info["stops"],true);writeDwi("CHANGEBPM",info["bpms"],true);writeDwi("GENRE",meta["genre"],true);writeDwi("SAMPLESTART",info["sampleStart"],true);writeDwi("SAMPLELENGTH",info["sampleLength"],true);writeDwi("CDTITLE",info["cdTitle"],true);writeDwi("RANDSEED",info["randSeed"],true);writeDwi("RANDSTART",info["randStart"],true);writeDwi("RANDFOLDER",info["randFolder"],true);writeDwi("RANDLIST",info["randList"],true);for(var i=0;i<step.length;i++){writeDwi(step[i][0],step[i][1]);}
writeDwi("","");return dwi.join("\r\n");};var toKsfText=function(indexes){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var writeKsf=function(n,v){var h=(arguments.length>2?arguments[2]:false);if(n){if(!isUndefined(v)&&(v!="")){ksf.push("#"+n+":"+v+";");}
else if(!h){ksf.push("#"+n+":;");}}
else{if(!isUndefined(v)&&(v!="")){ksf.push(v);}
else if(!h){ksf.push("");}}};var ksf=[];var meta=Semi["meta"];var data=(function(){var v=[];var m=Math.min(indexes.length,2);for(var i=0;i<m;i++){v.push(repairData(toData(toData(toData(toData(toData(toData(extData(mergeData(Semi["data"][indexes[i]]),indexes[i]),"InvalidKeyRemove"),"FakeKeyRemove"),"NoOblique"),"NoSlide"),"NoFlowBackward"),"NoFlowStop"),indexes[i]));}
return v;})();var info=data[0]["info"];var title=(function(){var v="";if(meta["title"]){if(meta["artist"]){v=meta["artist"]+" - "+meta["title"];if(["double","easy","normal","hard","crazy","nightmare"].indexOf(info["difficulty"])!=-1){v+=" - "+info["difficulty"];}}
else{v=meta["title"];}}
return v;})();var bpm=data[0]["beat"][0]["bpm"];var tickcount=1;var starttime=-data[0]["beat"][0]["when"]["t"]/10;var mode=(data.length==1?"":"double");var intro=(function(){if(info["previewStart"]){var s=(info["previewStart"]/1000)|0;var m=(s/60)|0;s-=m*60;var h=(m/60)|0;m-=h*60;var v=[];if(h){v.push(h);}
if(m){v.push(m);}
if(s){v.push(s);}
return v.join(":");}})();var audioFilename=(function(){for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="audio")&&(data[0]["effect"][i]["while"]=="")&&data[0]["effect"][i]["path"]){return data[0]["effect"][i]["path"];}}
return"";})();var key=5;var s=[];var set=function(b,i,m,v,t){var l=(function(){for(var j=0;j<s.length;j++){if((s[j][0]==b)&&(s[j][1]==i)){return j;}}
return-1;})();if(l!=-1){if(m){s[l][3]=v;}
else{s[l][3]=s[l][3].slice(0,t)+v+s[l][3].slice(t+1);}}
else{var r=(m?v:new Array(2).fill("0".repeat(key)).join("")+"000");r=(m?r:r.slice(0,t)+v+r.slice(t+1));s.push([b,i,m,r]);}};var bpms=(function(){var v=[];for(var i=0;i<data[0]["beat"].length;i++){if(!v.length||(data[0]["beat"][i]["bpm"]!=v[v.length-1][1])){v.push([data[0]["beat"][i]["when"]["b"],data[0]["beat"][i]["bpm"]]);}}
return v;})();for(var i=0;i<bpms.length;i++){if(i||(bpms[i][1]!=bpm)){set(bpms[i][0],1,"B",bpms[i][1]);}}
var combos=(function(){var v=[];for(var i=0;i<data[0]["status"].length;i++){if((data[0]["status"][i]["name"]=="sm_combo")&&(!v.length||(data[0]["status"][i]["value"]!=v[v.length-1][1]))){v.push([data[0]["status"][i]["when"]["b"],data[0]["status"][i]["value"]]);}}
return v;})();for(var i=0;i<combos.length;i++){set(combos[i][0],4,"C",combos[i][1]);}
var speeds=(function(){var v=[];for(var i=0;i<data[0]["status"].length;i++){if((data[0]["status"][i]["name"]=="sm_speed")&&(!v.length||(data[0]["status"][i]["value"]!=v[v.length-1][1]))){v.push([data[0]["status"][i]["when"]["b"],data[0]["status"][i]["value"]]);}}
return v;})();for(var i=0;i<speeds.length;i++){set(speeds[i][0],5,"S",speeds[i][1]);}
var fakes=(function(){var v=[];for(var i=0;i<data[0]["status"].length;i++){if((data[0]["status"][i]["name"]=="sm_fake")&&(!v.length||((data[0]["status"][i]["value"]?1:0)!=v[v.length-1][1]))){v.push([data[0]["status"][i]["when"]["b"],(data[0]["status"][i]["value"]?1:0)]);}}
return v;})();for(var i=0;i<fakes.length;i++){set(fakes[i][0],6,"F",fakes[i][1]);}
var scrolls=(function(){var v=[];for(var i=0;i<data[0]["beat"].length;i++){if((!v.length&&(data[0]["beat"][i]["fpn"]!=1))||(v.length&&(data[0]["beat"][i]["fpn"]!=v[v.length-1][1]))){v.push([data[0]["beat"][i]["when"]["b"],data[0]["beat"][i]["fpn"]]);}}
return v;})();for(var i=0;i<scrolls.length;i++){set(scrolls[i][0],7,"X",scrolls[i][1]);}
for(var index=0;index<data.length;index++){for(var i=0;i<data[index]["note"].length;i++){var t=xToTrack(data[index]["note"][i]["where"]["x"],key)+key*index;var a=data[index]["note"][i]["link"]["a"];if(a!=-1){set(data[index]["note"][i]["when"]["b"],8,"","4",t);set(data[index]["note"][a]["when"]["b"],8,"","4",t);i=a;}
else{var v=(function(){switch(true){case(data[index]["note"][i]["flag"]["damage"]?true:false):return"M";case data[index]["note"][i]["flag"]["invalid"]:return"F";case data[index]["note"][i]["flag"]["click"]:return"L";default:return"1";}})();set(data[index]["note"][i]["when"]["b"],0,"",v,t);}}}
s=s.sort(function(a,b){return(a[0]-b[0])||(a[1]-b[1]);});while(tickcount<768){var tc=(function(){for(var i=0;i<s.length;i++){var b=s[i][0].fMul(tickcount).toAbbreviated(6).toAccurated();if((b|0)!=b){return false;}}
return true;})();if(tc){break;}
else{tickcount+=1;}}
for(var i=0;i<s.length;i++){s[i][0]=s[i][0].fMul(tickcount).toAbbreviated(6).toAccurated()|0;}
var sd=(function(){var v=[];var d=0;for(var i=0;i<s.length;i++){while(d<s[i][0]){v.push("");d+=1;}
d=s[i][0];if(s[i][2]){v.push("|"+s[i][2]+s[i][3]+"|");}
else{v.push(s[i][3]);d+=1;}}
var length=info["length"]["when"]["b"].fMul(tickcount).toAbbreviated(6).toAccurated()|0;while(d<length){v.push("");d+=1;}
var fillLong=(function(){var h=[];var fill=function(t){for(var i=0;i<t.length;i++){if(h[i]&&(t[i]=="0")){t=t.slice(0,i)+"4"+t.slice(i+1);}}
return t;};for(var i=0;i<v.length;i++){v[i]=v[i]||"0".repeat(13);if(v[i][0]!="|"){for(var j=0;j<v[i].length;j++){if(v[i][j]=="4"){h[j]=(h[j]?false:true);}}
v[i]=fill(v[i]);}}})();v.push("2".repeat(13));return v.join("\r\n");})();writeKsf("TITLE",title);writeKsf("BPM",bpm);writeKsf("TICKCOUNT",tickcount);writeKsf("STARTTIME",starttime||"0");writeKsf("DIFFICULTY",info["level"],true);writeKsf("PLAYER",mode,true);writeKsf("INTRO",intro,true);writeKsf("TITLEFILE",(info["background"]=="title.png"?"":info["background"]).toDirWin(),true);writeKsf("DISCFILE",(info["banner"]=="disc.png"?"":info["banner"]).toDirWin(),true);writeKsf("SONGFILE",(audioFilename=="song.mp3"?"":audioFilename).toDirWin(),true);writeKsf("INTROFILE",(info["preview"]=="intro.mp3"?"":info["preview"]).toDirWin(),true);writeKsf("","#STEP:");writeKsf("",sd);writeKsf("","");return ksf.join("\r\n");};var toUcsText=function(indexes){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var writeUcs=function(n,v){var h=(arguments.length>2?arguments[2]:false);if(n){if(!isUndefined(v)&&(v!="")){ucs.push(":"+n+"="+v);}
else if(!h){ucs.push(":"+n+"=");}}
else{if(!isUndefined(v)&&(v!="")){ucs.push(v);}
else if(!h){ucs.push("");}}};var ucs=[];var meta=Semi["meta"];var data=(function(){var v=[];for(var i=0;i<indexes.length;i++){var data=repairData(toData(toData(toData(toData(toData(toData(toData(extData(mergeData(Semi["data"][indexes[i]]),indexes[i]),"InvalidKeyRemove"),"FakeKeyRemove"),"NoOblique"),"NoSlide"),"NoFlowBackward"),"NoFlowStop"),"NoFlowChange"),indexes[i]);var offset=(0).fSub(data["info"]["start"]["when"]["t"]);data=(offset?toData(data,"OffsetWhen",{"OffsetWhen":offset}):data);v.push(data);}
return v;})();var num=(isUndefined(data[1])?1:2);var key=5;var mode=(function(){var v=data[0]["info"]["playMode"];if(num==2){v=(v=="S-Performance"?"D-Performance":v);v=(v=="D-Performance"?"D-Performance":"Double");}
else{v=(v=="D-Performance"?"S-Performance":v);v=(v=="S-Performance"?"S-Performance":"Single");}
return v;})();var beatSet=(function(){var v=[];for(var i=0;i<data[0]["beat"].length;i++){if(!i||((data[0]["beat"][i]["bpm"]!=data[0]["beat"][i-1]["bpm"])||(data[0]["beat"][i]["bpn"]!=data[0]["beat"][i-1]["bpn"]))){v.push([data[0]["beat"][i]["when"]["n"].fMul(768)|0,undefined,data[0]["beat"][i]["bpm"],data[0]["beat"][i]["bpn"]]);}}
return v;})();var stepSet=(function(){var v=[];var max=0;var addScript=function(d,t,s){v[d]=v[d]||[];v[d][t]=s;max=(d>max?Math.ceil(d/768)*768:max);};for(var index=0;index<data.length;index++){for(var i=0;i<data[index]["note"].length;i++){var t=xToTrack(data[index]["note"][i]["where"]["x"],key)+key*index;if(data[index]["note"][i]["link"]["a"]!=-1){var a=data[index]["note"][i]["link"]["a"];addScript(data[index]["note"][i]["when"]["n"].fMul(768)|0,t,"M");addScript(data[index]["note"][a]["when"]["n"].fMul(768)|0,t,"W");i=a;}
else{addScript(data[index]["note"][i]["when"]["n"].fMul(768)|0,t,"X");}}}
v[max-1]=v[max-1]||undefined;var s=[];var n=0;for(var m=0;m<beatSet.length;m++){s[m]=s[m]||[];beatSet[m][1]=(m+1<beatSet.length?beatSet[m+1][0]:max);while(n<beatSet[m][1]){s[m].push(v[n]);n+=1;}}
var reductScript=(function(){var u=key*num;var h=[];for(var m=0;m<s.length;m++){for(var i=s[m].length;i>1;i--){if(s[m].length%i!=0){continue;}
var needReduct=(function(){for(var j=0;j<s[m].length;j++){if((j%i!=0)&&s[m][j]){return false;}}
return true;})();if(needReduct){var v=[];for(var j=0;j<s[m].length;j++){if(j%i==0){v.push(s[m][j]);}}
s[m]=v;i=s[m].length-1;}}
beatSet[m][4]=s[m].length*768/beatSet[m][3]/(beatSet[m][1]-beatSet[m][0]);for(var n=0;n<s[m].length;n++){s[m][n]=s[m][n]||[];for(var t=0;t<u;t++){h[t]=(s[m][n][t]=="M"?true:h[t]);h[t]=(s[m][n][t]=="W"?false:h[t]);s[m][n][t]=s[m][n][t]||(h[t]?"H":".");}
s[m][n]=s[m][n].join("");}
s[m]=s[m].join("\r\n");}})();return s;})();writeUcs("Format",1);writeUcs("Mode",mode);for(var m=0;m<beatSet.length;m++){writeUcs("BPM",beatSet[m][2]);writeUcs("Delay","0");writeUcs("Beat",beatSet[m][3]);writeUcs("Split",beatSet[m][4]);writeUcs("",stepSet[m]);}
writeUcs("","");return ucs.join("\r\n");};var toDanceText=function(indexes){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var writeDance=function(n,v){var h=(arguments.length>2?arguments[2]:false);if(n){if(!isUndefined(v)&&(v!="")){dance.push(n+" "+v);}
else if(!h){dance.push(n+" ");}}
else{if(!isUndefined(v)&&(v!="")){dance.push(v);}
else if(!h){dance.push("");}}};var dance=[];var meta=Semi["meta"];var info=[];var audioFilename="";var audioStart=0;var audioDuration=0;var bpm=0;var gap=0;var lyrics;var step=[];var indexList=(function(){var v=[];var setList=function(n,d,p){if(!d||(p==-1)){v.push({"name":"","list":[n]});}
else{var l=(function(){for(var i=0;i<v.length;i++){if(v[i]["name"]&&(v[i]["name"]==d)){return i;}}
return-1;})();if(l!=-1){v[l]["list"]=v[l]["list"]||[];v[l]["list"][p]=n;}
else{var list=[];list[p]=n;v.push({"name":d,"list":list});}}};for(var n=0;n<indexes.length;n++){var index=indexes[n];var data=Semi["data"];if(index<data.length){setList(index,data[index][0]["info"]["playMode"]+(data[index][0]["info"]["difficulty"]?" "+data[index][0]["info"]["difficulty"]:"")+(data[index][0]["info"]["level"]?data[index][0]["info"]["level"]:""),((data[index][0]["info"]["playMode"].toLowerCase().indexOf("double")!=-1)||(data[index][0]["info"]["playMode"].toLowerCase().indexOf("couple")!=-1)?data[index][0]["info"]["player"]:-1));}}
for(var i=0;i<v.length;i++){v[i]=v[i]["list"];}
return v;})();for(var list=0;list<indexList.length;list++){var isToSingle=false;var index=indexList[list][0];var index2=indexList[list][1];if((indexList[list].length>1)&&((!isUndefined(index)&&isUndefined(index2))||(isUndefined(index)&&!isUndefined(index2)))){if(!isUndefined(index)&&isUndefined(index2)){indexList[list]=[index];}
else if(isUndefined(index)&&!isUndefined(index2)){indexList[list]=[index2];}
isToSingle=true;index=indexList[list][0];index2=indexList[list][1];}
if(!isUndefined(index)||!isUndefined(index2)){var data=(function(){var v=[];for(var i=0;i<indexList[list].length;i++){v.push(repairData(toData(toData(toData(toData(toData(toData(toData(extData(mergeData(Semi["data"][indexList[list][i]]),indexList[list][i]),"InvalidKeyRemove"),"FakeKeyRemove"),"NoOblique"),"NoSlide"),"NoFlowBackward"),"NoFlowChange"),"BpnUnified",{"BpnUnified":4}),indexList[list][i]));}
return v;})();var key=(indexList[list].length==1?data[0]["info"]["key"]:Math.max(data[0]["info"]["key"],data[1]["info"]["key"]));info[list]=data[0]["info"];if(!audioFilename){for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="audio")&&(data[0]["effect"][i]["while"]=="")&&data[0]["effect"][i]["path"]){audioFilename=data[0]["effect"][i]["path"];audioStart=data[0]["effect"][i]["offset"];audioDuration=data[0]["effect"][i]["duration"];break;}}}
if(!bpm){for(var i=0;i<data[0]["beat"].length;i++){if(data[0]["beat"][i]["bpm"]){bpm=data[0]["beat"][i]["bpm"];break;}}}
if(!gap){for(var i=0;i<data[0]["beat"].length;i++){if(!data[0]["beat"][i]["when"]["t"]){gap=-data[0]["beat"][i]["when"]["t"];break;}}}
if(!lyrics){var v=[];for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="text")&&data[0]["effect"][i]["text"]){var d=data[0]["effect"][i]["what"].split("_");if((d.length==3)&&(d[0]=="dance")&&(d[2]=="g")){var c=parseInt(d[1]);if(!isNaN(c)){v.push([(data[0]["effect"][i]["when"]["t"]|0).fDiv(1000),c,data[0]["effect"][i]["text"]].join(" "));}}}}
if(v.length){lyrics=v;}}
info[list]["mode"]=(function(){var m=(((data[0]["info"]["playMode"].toLowerCase().indexOf("double")!=-1)||(data[0]["info"]["playMode"].toLowerCase().indexOf("couple")!=-1))&&(indexList[list].length==1)?data[0]["info"]["playMode"].toLowerCase().replace("double","single").replace("couple","single").toUpperCase():data[0]["info"]["playMode"]);switch(key){case 0:case 1:case 2:case 3:key=3;break;case 4:key=4;break;case 5:key=5;break;case 6:key=6;break;case 7:case 8:key=8;break;default:key=9;break;}
var k=(key==4?"":key);if(indexList[list].length==1){return(m==k+"VERSUS"?k+"VERSUS":k+"SINGLE");}
else{return(m==k+"COUPLE"?k+"COUPLE":k+"DOUBLE");}})();info[list]["difficulty"]=(function(){var m=["SMANIAC","S-MANIAC","BEGINNER","LIGHT","EASY","BASIC","STANDARD","STANDER","TRICK","MEDIUM","DOUBLE","ANOTHER","PARA","NORMAL","MANIAC","HARD","HEAVY","HARDCORE","CHALLENGE","CRAZY","EXPERT"];for(var i=0;i<m.length;i++){if(data[0]["info"]["difficulty"].indexOf(m[i])!=-1){return m[i];}}
return"BASIC";})();info[list]["level"]=data[0]["info"]["level"]|0;info[list]["num"]=data.length;var s=[];var set=function(n,i,m,v,t){var d=n.fMul(192)|0;var l=(function(){for(var j=0;j<s.length;j++){if((s[j][0]==d)&&(s[j][1]==i)){return j;}}
return-1;})();if((l!=-1)&&(m!="L")){if(m){s[l][3]=v;}
else{s[l][3]=s[l][3].slice(0,t)+v+s[l][3].slice(t+1);}}
else{var r=(m?v:new Array(data.length).fill("0".repeat(key)).join(" "));r=(m?r:r.slice(0,t)+v+r.slice(t+1));s.push([d,i,m,r]);}};var beat=(function(){var v=[];var bpmC=0;for(var i=0;i<data[0]["beat"].length;i++){if(data[0]["beat"][i]["fpn"]!=0){var bpm=data[0]["beat"][i]["bpm"].toAbbreviated(6).toAccurated();if((!v.length||(bpm!=bpmC))&&(bpm>0)){bpmC=bpm;v.push([data[0]["beat"][i]["when"]["n"],bpm]);}}}
return v;})();for(var i=0;i<beat.length;i++){if(i||(beat[i][1]!=bpm)){set(beat[i][0],1,"B",beat[i][1]);}}
for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="special")&&(data[0]["effect"][i]["text"]=="Ready? Go!")){set(data[0]["effect"][i]["when"]["n"],2,"R","");}}
for(var i=0;i<data[0]["beat"].length;i++){if(data[0]["beat"][i]["fpn"]==0){for(var j=i+1;j<data[0]["beat"].length;j++){if(data[0]["beat"][j]["fpn"]!=0){set(data[0]["beat"][i]["when"]["n"],3,"S",(data[0]["beat"][j]["when"]["t"]-data[0]["beat"][i]["when"]["t"]).fDiv(1000));i=j;break;}}}}
for(var i=0;i<data[0]["effect"].length;i++){if((data[0]["effect"][i]["kind"]=="text")&&data[0]["effect"][i]["text"]){var d=data[0]["effect"][i]["what"].split("_");if((d.length==2)&&(d[0]=="dance")){var c=parseInt(d[1]);if(!isNaN(c)){set(data[0]["effect"][i]["when"]["n"],4,"L",c+" "+data[0]["effect"][i]["text"]);}}}}
for(var index=0;index<data.length;index++){for(var i=0;i<data[index]["note"].length;i++){var secret=(data[index]["note"][i]["flag"]&&data[index]["note"][i]["flag"]["secret"]?4:0);var t=xToTrack(data[index]["note"][i]["where"]["x"],key)+(key+1)*index;var a=data[index]["note"][i]["link"]["a"];if(a!=-1){set(data[index]["note"][i]["when"]["n"],0,"",3+secret,t);set(data[index]["note"][a]["when"]["n"],0,"",1+secret,t);i=a;}
else{set(data[index]["note"][i]["when"]["n"],0,"",1+secret,t);}}}
s=s.sort(function(a,b){return(a[0]-b[0])||(a[1]-b[1]);});step.push(s);}}
var writeMetadata=(function(){writeDance("filename",audioFilename.toDirWin());writeDance("title",meta["title"]);writeDance("subtitle",meta["subTitle"],true);writeDance("artist",meta["artist"]);writeDance("mix",meta["mixer"],true);writeDance("bpm",bpm);writeDance("bpmdisplay",info[0]["bpmdisplay"],true);writeDance("gap",gap,true);writeDance("startat",(audioStart?audioStart:undefined),true);writeDance("endat",(audioStart&&audioDuration?audioDuration-audioStart:undefined),true);writeDance("background",info[0]["background"].toDirWin(),true);writeDance("banner",info[0]["banner"].toDirWin(),true);writeDance("cdTitle",info[0]["cdTitle"].toDirWin(),true);writeDance("preview",(info[0]["previewStart"]&&info[0]["previewDuration"]?info[0]["previewStart"]+" "+info[0]["previewDuration"]:""),true);writeDance("md5sum",info[0]["audioMd5"],true);writeDance("author",meta["author"],true);writeDance("movie",info[0]["movie"].toDirWin(),true);writeDance("revision",meta["datetime"],true);writeDance("valid",info[0]["valid"],true);writeDance("","end");})();var writeTextSection=(function(){var description=meta["description"];if(description){var t=description.split("\t");writeDance("","DESCRIPTION");for(var i=0;i<t.length;i++){writeDance(""," "+(t[i]=="\r\n"?".":t[i]));}
writeDance("","end");}
if(lyrics){writeDance("","LYRICS");for(var i=0;i<lyrics.length;i++){writeDance("",lyrics[i]);}
writeDance("","end");}})();var writeStepSection=(function(){for(var list=0;list<step.length;list++){var ds=new Array(info[list]["num"]).fill("0".repeat(info[list]["key"])).join(" ");var n=0;writeDance("",info[list]["mode"]);writeDance("",info[list]["difficulty"]+" "+info[list]["level"]);for(var i=0;i<step[list].length;i++){var t=step[list][i][0]-n;if(step[list][i][2]){t=t.fDiv(192);if(t){writeDance("D",t);}
writeDance(step[list][i][2],step[list][i][3]);}
else{if(t>192){var s=t.fDiv(192)|0;writeDance("D",s);t-=s*192;}
var m=["o","h","q","e","w","s","f","t","u","x","n"];var u=[1,2,4,8,12,16,24,32,48,64,192];for(var j=0;j<m.length;j++){var d=192/u[j];while(t>=d){t-=d;writeDance(m[j],(t?ds:step[list][i][3]));}}}
n=step[list][i][0];}
writeDance("","end");}})();writeDance("","");return dance.join("\r\n");};var toTjaText=function(indexes,type){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var writeTja=function(n,v){var d=(arguments.length>2?arguments[2]:"");if(n){if(!isUndefined(v)&&(v!==d)){tja.push(n+":"+v);}}
else{tja.push(v);}};var tja=[];var dpb=48;var unit=(function(){switch(type){case"taiko":return 1;break;case"jube":return 4;break;}
return 1;})();var hWave;var hBPM;var hOffset;var hCourse;var hSide;var hStyle;var hLevel;var hBalloon;var hSongVol;var hSeVol;var hDemoStart;var hLife;var hScoreInit;var hScoreDiff;var hScoreMode;if(type!="taiko"){writeTja("GAME",type);}
writeTja("TITLE",Semi["meta"]["title"]||fileInfo.nameCore);writeTja("SUBTITLE",Semi["meta"]["subTitle"],"");var indexList=(function(){var v=[];var setList=function(n,d,p){if(!d||(p==-1)){v.push({"name":"","list":[n]});}
else{var l=(function(){for(var i=0;i<v.length;i++){if(v[i]["name"]&&(v[i]["name"]==d)){return i;}}
return-1;})();if(l!=-1){v[l]["list"]=v[l]["list"]||[];v[l]["list"][p]=n;}
else{var list=[];list[p]=n;v.push({"name":d,"list":list});}}};for(var n=0;n<indexes.length;n++){var index=indexes[n];var data=Semi["data"];if(index<data.length){setList(index,"C"+data[index][0]["info"]["course"]+",L"+data[index][0]["info"]["level"]+",S"+data[index][0]["info"]["side"],((data[index][0]["info"]["playMode"].toLowerCase().indexOf("couple")!=-1)||(data[index][0]["info"]["playMode"].toLowerCase().indexOf("double")!=-1)?data[index][0]["info"]["player"]:-1));}}
for(var i=0;i<v.length;i++){v[i]=v[i]["list"];}
return v;})();for(var list=0;list<indexList.length;list++){for(var p=0;p<indexList[list].length;p++){var index=indexList[list][p];if(!isUndefined(index)){var data=(function(){var data=toData(toData(toData(toData(toData(toData(extData(mergeData(Semi["data"][index]),index),"InvalidKeyRemove"),"FakeKeyRemove"),"NoOblique"),"NoSlide"),"NoFlowBackward"),"NoFlowStop");switch(type){case"taiko":data=toData(data,"TaikoBase");break;case"jube":data=toData(toData(data,"NoLong"),"TaikoBase");break;}
return repairData(data,index);})();var beat=data["beat"];var note=data["note"];var status=data["status"];var balloon=data["info"]["balloon"];var noteData=[];var scriptData=(function(){var r=[];var sDK=true;var bDK=true;var b=!balloon.length;for(var i=0;i<note.length;i++){var a=note[i]["link"]["a"];var d=(function(){var v="";switch(type){case"taiko":v="0";if(a==-1){var t=(function(){var m=["0","0","0","0"];for(var j=i;j<note.length;j++){if(note[j]["when"]["b"]==note[i]["when"]["b"]){var x=(note[j]["where"]["x"]!=-1?note[j]["where"]["x"]:0);m[xToTrack(x,4)]="1";}
else{i=j-1;break;}
if(j==note.length-1){i=j;}}
return m.join("");})();switch(t){case"0010":case"0100":v="1";break;case"0001":case"1000":v="2";break;case"0110":case"0111":case"1110":v="3";break;case"1001":case"1011":case"1101":v="4";break;case"0011":case"1100":case"0101":case"1010":v=(sDK?"1":"2");sDK=!sDK;break;case"1111":v=(bDK?"3":"4");bDK=!bDK;break;}}
else{if(note[i]["where"]["x"]!=-1){var track=xToTrack(note[i]["where"]["x"],4);switch(track){case 0:v="7";break;case 1:v="5";break;case 2:v="6";break;case 3:v="9";break;}}}
break;case"jube":v="0000";if(a==-1){var t=(function(){var m=["0000","0000","0000","0000"];for(var j=i;j<note.length;j++){if(note[j]["when"]["b"]==note[i]["when"]["b"]){var x=(note[j]["where"]["x"]!=-1?note[j]["where"]["x"]:0);var y=(note[j]["where"]["y"]!=-1?note[j]["where"]["y"]:0);var n=3-(xToTrack(y,4)|0);m[n]=m[n].splice(xToTrack(x,4)|0,1,"1");}
else{i=j-1;break;}
if(j==note.length-1){i=j;}}
for(var j=0;j<m.length;j++){m[j]=parseInt(m[j],2).toString(16).toUpperCase();}
return m.join("");})();v=t;}
break;}
return v;})();r.push([note[i]["when"]["n"],d]);if(type=="taiko"){var s=(function(){switch(d){case"1":return"taiko_don";break;case"2":return"taiko_katsu";break;case"3":return"taiko_don_large";break;case"4":return"taiko_katsu_large";break;case"5":return"taiko_chain";break;case"6":return"taiko_chain_large";break;case"7":return"taiko_balloon";break;case"9":return"taiko_potato";break;}})();noteData.push({"action":(a!=-1?0x02:0x00),"when":{"b":note[i]["when"]["b"],"n":note[i]["when"]["n"],"t":note[i]["when"]["t"]},"when2":{"b":note[(a!=-1?i+1:i)]["when"]["b"],"n":note[(a!=-1?i+1:i)]["when"]["n"],"t":note[(a!=-1?i+1:i)]["when"]["t"]},"where":{"x":0.5},"flag":{"style":s}});if(a!=-1){i+=1;d="8";r.push([note[i]["when"]["n"],d]);}
if(b&&(d=="8")){switch(r[r.length-2][1]){case"7":case"9":balloon.push(r[r.length-1][0].fSub(r[r.length-2][0]).fMul(4).fAdd(1)|0);break;}}}}
return r;})();var bpmData=(function(){var v=[];var bpm=data["info"]["bpm"];for(var i=0;i<beat.length;i++){if(bpm!=beat[i]["bpm"]){bpm=beat[i]["bpm"];v.push([beat[i]["when"]["n"],bpm]);}}
return v;})();var bpnData=(function(){var v=[];var bpn=4;for(var i=0;i<beat.length;i++){if(bpn!=beat[i]["bpn"]){bpn=(type=="jube"?beat[i]["bpn"]:beat[i]["bpn"].fDiv(4));v.push([beat[i]["when"]["n"],bpn]);}}
return v;})();var gogoTimeData=(function(){var v=[];var gogoTime=0;for(var i=0;i<status.length;i++){if(status[i]["name"]=="taiko_gogotime"){var value=(status[i]["value"]?1:0);if(gogoTime!=value){gogoTime=value;v.push([status[i]["when"]["n"],gogoTime]);}}}
if(v.length&&(v[v.length-1][1]!=0)){v.push([data["info"]["max"]["when"]["n"],0]);}
return v;})();var scrollData=(function(){var v=[];var scroll=1;for(var i=0;i<beat.length;i++){var value=beat[i]["fpn"];if((scroll!=value)&&(value!=0)){scroll=value;v.push([beat[i]["when"]["n"],scroll]);}}
return v;})();var barLineData=(function(){var v=[];var barLine=1;for(var i=0;i<status.length;i++){if(status[i]["name"]=="barLine"){var value=(status[i]["value"]?1:0);if(barLine!=value){barLine=value;v.push([status[i]["when"]["n"],barLine]);}}}
return v;})();var md=(function(){var v=[];var t=[];var u="0".repeat(unit);for(var i=0;i<data["info"]["max"]["when"]["n"]+1;i++){t[i]=[];for(var j=0;j<dpb*4;j++){t[i][j]=[new Array(5),u];}}
for(var i=0;i<scriptData.length;i++){var m=scriptData[i][0]|0;var d=scriptData[i][0].fSub(m).fMul(dpb*4)|0;t[m][d][1]=scriptData[i][1];}
for(var i=0;i<bpmData.length;i++){var m=bpmData[i][0]|0;var d=bpmData[i][0].fSub(m).fMul(dpb*4)|0;t[m][d][0][0]="#BPMCHANGE "+bpmData[i][1];}
for(var i=0;i<bpnData.length;i++){var m=bpnData[i][0]|0;var d=bpnData[i][0].fSub(m).fMul(dpb*4)|0;t[m][d][0][1]="#MEASURE "+bpnData[i][1]+"/4";}
for(var i=0;i<gogoTimeData.length;i++){var m=gogoTimeData[i][0]|0;var d=gogoTimeData[i][0].fSub(m).fMul(dpb*4)|0;t[m][d][0][2]=(gogoTimeData[i][1]!=0?"#GOGOSTART":"#GOGOEND");}
for(var i=0;i<scrollData.length;i++){var m=scrollData[i][0]|0;var d=scrollData[i][0].fSub(m).fMul(dpb*4)|0;t[m][d][0][3]="#SCROLL "+scrollData[i][1];}
for(var i=0;i<barLineData.length;i++){var m=barLineData[i][0]|0;var d=barLineData[i][0].fSub(m).fMul(dpb*4)|0;t[m][d][0][4]=(barLineData[i][1]!=0?"#BARLINEON":"#BARLINEOFF");}
for(var i=0;i<t.length;i++){for(var j=0;j<t[i].length;j++){for(var k=0;k<t[i][j][0].length;k++){if(!t[i][j][0][k]){t[i][j][0].splice(k,1);k-=1;}}
t[i][j][0]=t[i][j][0].join("\r\n");}}
for(var i=0;i<t.length;i++){v[i]=[];for(var j=0;j<t[i].length;j++){if(!v[i].length||(t[i][j][0]!="")){v[i].push([t[i][j][0],[]]);}
v[i][v[i].length-1][1].push(t[i][j][1]);}
for(var j=0;j<v[i].length;j++){v[i][j][1]=v[i][j][1].join("");}
var c=u;while(true){var isOver=(function(){for(var j=0;j<v[i].length;j++){if(v[i][j][1].length<c.length+unit){return true;}}
return false;})();if(isOver){break;}
var needPass=(function(){for(var j=0;j<v[i].length;j++){if(v[i][j][1].length%(c.length+unit)!=0){return true;}}
return false;})();if(needPass){c+=u;continue;}
var needReduct=(function(){for(var j=0;j<v[i].length;j++){var s=v[i][j][1].splitEvery(c.length+unit);for(var k=0;k<s.length;k++){if(s[k].slice(unit)!=c){return false;}}}
return true;})();if(needReduct){for(var j=0;j<v[i].length;j++){var s=v[i][j][1].splitEvery(c.length+unit);for(var k=0;k<s.length;k++){s[k]=s[k].slice(0,unit);}
v[i][j][1]=s.join("");}}
else{c+=u;}}
var a=[];for(var j=0;j<v[i].length;j++){if(v[i][j][0]){a.push(v[i][j][0]);}
a.push(v[i][j][1]);}
a[a.length-1]=(a[a.length-1]==u?"":a[a.length-1]);v[i]=a.join("\r\n");v[i]+=",";}
return v;})();var writeMeta=(function(){if((indexList[list].length>1)&&p&&!isUndefined(indexList[list][0])){return;}
writeTja("","");var wave=getEffectInfo(data,"audio","name");if(hWave!=wave){hWave=wave;writeTja("WAVE",hWave);}
var bpm=getBeat(data,0)["bpm"];if(hBPM!=bpm){hBPM=bpm;writeTja("BPM",hBPM);}
var offset=data["info"]["start"]["when"]["t"].fDiv(1000);if(hOffset!=offset){hOffset=offset;writeTja("OFFSET",hOffset,0);}
var course=data["info"]["course"];hCourse=course;writeTja("COURSE",hCourse);var side=(function(){var normal=false;var ex=false;var both=false;for(var i=0;i<Semi["data"].length;i++){for(var j=0;j<Semi["data"][i].length;j++){if(Semi["data"][i][j]["info"]["course"]==course){if(Semi["data"][i][j]["info"]["side"]<data["info"]["side"]){normal=true;}
else if(Semi["data"][i][j]["info"]["side"]>data["info"]["side"]){ex=true;}}}}
if(!normal&&!ex){both=true;}
if(both){return 3;}
else if(normal){return 2;}
else{return 1;}})();if(hSide!=side){hSide=side;if(hSide!=3){writeTja("SIDE",hSide,3);}}
var level=data["info"]["level"];if(hLevel!=level){hLevel=level;writeTja("LEVEL",hLevel);}
var style=(function(){switch(true){case data["info"]["playMode"].toLowerCase().indexOf("couple")!=-1:return 2;break;case data["info"]["playMode"].toLowerCase().indexOf("double")!=-1:return 3;break;}
return 1;})();if(hStyle!=style){hStyle=style;}
if(hStyle!=1){writeTja("STYLE",hStyle);}
hBalloon=balloon||[];if(type=="taiko"){writeTja("BALLOON",hBalloon.join(","));}
data["info"]["balloon"]=balloon;var songVol=data["info"]["bgmVolumn"].fMul(100);if(hSongVol!=songVol){hSongVol=songVol;if(hSongVol!=100){writeTja("SONGVOL",hSongVol);}}
var seVol=data["info"]["seVolumn"].fMul(100);if(hSeVol!=seVol){hSeVol=seVol;if(hSeVol!=100){writeTja("SEVOL",hSeVol);}}
var demoStart=data["info"]["previewStart"];if(hDemoStart!=demoStart){hDemoStart=demoStart;writeTja("DEMOSTART",hDemoStart);}
var life=data["info"]["life"];if(hLife!=life){hLife=life;writeTja("LIFE",hLife);}
var scoreInit=data["info"]["scoreInit"];if(hScoreInit!=scoreInit){hScoreInit=scoreInit;writeTja("SCOREINIT",hScoreInit);}
var scoreDiff=data["info"]["scoreDiff"];if(hScoreDiff!=scoreDiff){hScoreDiff=scoreDiff;writeTja("SCOREDIFF",hScoreDiff);}
var scoreMode=data["info"]["scoreMode"];if(hScoreMode!=scoreMode){hScoreMode=scoreMode;if(hScoreMode!=1){writeTja("SCOREMODE",hScoreMode);}}})();writeTja("","#START"+(indexList[list].length>1?" P"+(p+1):""));writeTja("",md.join("\r\n"));writeTja("","#END");Semi["draw"][index]=Semi["draw"][index]||{};Semi["draw"][index]["tja"]=Semi["draw"][index]["tja"]||{};Semi["draw"][index]["tja"]["list"]=[{"data":data,"noteData":noteData}];Semi["draw"][index]["tja"]["valid"]=false;}}}
writeTja("","");return tja.join("\r\n");};var toOsuText=function(index,type){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var trackToX=function(track,key){return(track*2+1)/(key*2);};var mode=(function(){switch(type){case"osu":return 0;break;case"taiko":return 1;break;case"ctb":return 2;break;case"mania":return 3;break;}})();var meta=Semi["meta"];var data=(function(){var data=toData(toData(extData(mergeData(Semi["data"][index]),index),"InvalidKeyRemove"),"FakeKeyRemove");switch(mode){case 0:case 2:data=toData(data,"CatchBase");break;case 1:data=toData(data,"TaikoBase");break;case 3:data=toData(toData(data,"NoOblique"),"NoSlide");break;}
return repairData(data,index);})();var offset=(0).fSub(data["info"]["start"]["when"]["t"]);data=(offset?toData(data,"OffsetWhen",{"OffsetWhen":offset}):data);var osu=[];osu.push("osu file format v14");osu.push("");osu.push("[General]");osu.push("AudioFilename: "+getEffectInfo(data,"audio","name").toDirWin());osu.push("AudioLeadIn: "+getEffectInfo(data,"audio","offset").toAbbreviated(0));osu.push("PreviewTime: "+data["info"]["previewStart"]);osu.push("Countdown: "+data["info"]["countdown"]);var sampleSet=(function(){var v=(function(){for(var i=0;i<data["status"].length;i++){if((data["status"][i]["when"]["t"]<=0)&&(data["status"][i]["name"]=="osu_sampleSet")){return data["status"][i]["value"];}}
return"soft";})();switch(v){case"normal":return"Normal";break;case"soft":return"Soft";break;case"drum":return"Drum";case"none":return"None";break;default:return"Normal";break;}})();osu.push("SampleSet: "+sampleSet);osu.push("StackLeniency: "+data["info"]["stackLeniency"]);osu.push("Mode: "+mode);osu.push("LetterboxInBreaks: "+data["info"]["letterboxInBreaks"]);osu.push("WidescreenStoryboard: "+data["info"]["widescreenStoryboard"]);osu.push("StoryFireInFront: "+data["info"]["storyFireInFront"]);osu.push("SpecialStyle: "+data["info"]["specialStyle"]);osu.push("EpilepsyWarning: "+data["info"]["epilepsyWarning"]);osu.push("UseSkinSprites: "+data["info"]["useSkinSprites"]);osu.push("EditorBookmarks: "+data["info"]["editorBookmarks"]);osu.push("");osu.push("[Editor]");osu.push("Bookmarks: "+data["info"]["bookmarks"].join(","));osu.push("DistanceSpacing: "+data["info"]["distanceSpacing"]);osu.push("BeatDivisor: "+data["info"]["beatDivisor"]);osu.push("GridSize: "+data["info"]["gridSize"]);osu.push("TimelineZoom: "+data["info"]["timelineZoom"]);osu.push("");osu.push("[Metadata]");osu.push("Title:"+(meta["title"]||(fileInfo.nameCore+"."+fileInfo.extension[0])));osu.push("TitleUnicode:"+meta["title"]);osu.push("Artist:"+meta["artist"]);osu.push("ArtistUnicode:"+meta["artist"]);osu.push("Creator:"+meta["creator"]);var version=(function(){var v="["+type+"]";switch(type){case"mania":v+=data["info"]["key"]+"K";break;}
return v;})();osu.push("Version:"+(meta["version"]||version));osu.push("Source:"+meta["source"]);osu.push("Tags:"+meta["tag"]);osu.push("BeatmapID:"+data["info"]["beatmapID"]);osu.push("BeatmapSetID:"+data["info"]["beatmapSetID"]);osu.push("");osu.push("[Difficulty]");osu.push("HPDrainRate:"+data["info"]["hpDrainRate"]);osu.push("CircleSize:"+(mode!=3?data["info"]["circleSize"]:data["info"]["key"]));osu.push("OverallDifficulty:"+data["info"]["overallDifficulty"]);osu.push("ApproachRate:"+data["info"]["approachRate"]);osu.push("SliderMultiplier:"+data["info"]["sliderMultiplier"]);osu.push("SliderTickRate:"+data["info"]["sliderTickRate"]);osu.push("");osu.push("[Events]");osu.push("//Background and Video events");var imageData=(function(){var v=[];for(var i=0;i<data["effect"].length;i++){if((data["effect"][i]["when"]["t"]<=0)&&(data["effect"][i]["kind"]=="image")&&data["effect"][i]["path"]&&!data["effect"][i]["change"].length){var m=["back","miss","hit","fore"];var layer=m.indexOf(data["effect"][i]["what"]||"back");if(layer!=-1){var x=(data["effect"][i]["where"]["x"]<0?0:data["effect"][i]["where"]["x"]);var y=(data["effect"][i]["where"]["y"]<0?0:data["effect"][i]["where"]["y"]);v.push([layer,data["effect"][i]["path"].toDirWin(),x,y]);}}}
for(var i=0;i<v.length;i++){v[i]="0,"+v[i][0]+","+'"'+v[i][1]+'"'+","+v[i][2]+","+v[i][3];}
return v;})();osu.writes(imageData.unrepeat());var videoData=(function(){var v=[];for(var i=0;i<data["effect"].length;i++){if((data["effect"][i]["when"]["t"]==0)&&(data["effect"][i]["kind"]=="video")&&data["effect"][i]["path"]){var m=["back","miss","hit","fore"];var layer=m.indexOf(data["effect"][i]["what"]||"back");if(layer!=-1){var x=(data["effect"][i]["where"]["x"]<0?0:data["effect"][i]["where"]["x"]);var y=(data["effect"][i]["where"]["y"]<0?0:data["effect"][i]["where"]["y"]);v.push([layer,data["effect"][i]["path"].toDirWin(),x,y]);}}}
for(var i=0;i<v.length;i++){v[i]="1,"+v[i][0]+","+'"'+v[i][1]+'"'+","+v[i][2]+","+v[i][3];}
return v;})();osu.writes(videoData.unrepeat());osu.push("//Break Periods");var breakData=(function(){var v=[];for(var i=0;i<data["status"].length;i++){if(data["status"][i]["name"]=="osu_berak"){v.push("2,"+data["status"][i]["when"]["t"].toAbbreviated(6).toAccurated()+","+(data["status"][i]["when"]["t"]+data["status"][i]["value"]).toAbbreviated(6).toAccurated());}}
return v;})();osu.writes(breakData.unrepeat());var animeData=(function(){var r=[[],[],[],[]];var ad=[];var width=640;var height=480;var toX=function(t){return t.fMul(width+1).toAbbreviated(0);};var toY=function(t){return t.fMul(height+1).toAbbreviated(0);};for(var i=0;i<data["effect"].length;i++){if((data["effect"][i]["kind"]=="image")&&data["effect"][i]["path"]){var m=["back","miss","hit","fore"];var layer=m.indexOf(data["effect"][i]["what"]||"back");if((layer!=-1)&&data["effect"][i]["change"].length){var origin=(function(){var bx=(width-1)/width;var by=(height-1)/height;var v=0;var x=data["effect"][i]["origin"]["x"];var y=data["effect"][i]["origin"]["y"];switch(true){case(x==0)&&(y==by):v=0;break;case(x==0.5)&&(y==0.5):v=1;break;case(x==0)&&(y==0.5):v=2;break;case(x==bx)&&(y==by):v=3;break;case(x==0.5)&&(y==0):v=4;break;case(x==0.5)&&(y==by):v=5;break;case(x==0)&&(y==by):v=6;break;case(x==bx)&&(y==0.5):v=7;break;case(x==0)&&(y==0):v=8;break;case(x==bx)&&(y==0):v=9;break;}
return v;})();var filepath=data["effect"][i]["path"].toDirWin();var x=toX(data["effect"][i]["where"]["x"]);var y=toY(data["effect"][i]["where"]["y"]);var frameCount=data["effect"][i]["frame"];var frameDelay=data["effect"][i]["interval"];var loopType=data["effect"][i]["loop"];var item={"layer":layer,"origin":origin,"filepath":filepath,"x":x,"y":y,"frameCount":frameCount,"frameDelay":frameDelay,"loopType":loopType,"events":[[],[],[],[],[],[],[],[],[],[]]};var w=(function(){var v="";switch(data["effect"][i]["while"]){case"osu_clap":v="HitSoundClap";break;case"osu_finish":v="HitSoundFinish";break;case"osu_whistle":v="HitSoundWhistle";break;case"hit":v="Passing";break;case"miss":v="Failing";break;}
return v;})();if(w){item["triggerName"]=w;item["triggerStart"]=data["effect"][i]["when"]["t"];item["triggerEnd"]=data["effect"][i]["duration"];}
for(var j=0;j<data["effect"][i]["change"].length;j++){var easing=(function(){var v=0;switch(data["effect"][i]["change"][j]["easing"]){case"easeOut":v=1;break;case"easeIn":v=2;break;}
return v;})();var starttime=data["effect"][i]["change"][j]["when"]["t"].toAbbreviated(0);var duration=(data["effect"][i]["change"][j]["when2"]["t"]-data["effect"][i]["change"][j]["when"]["t"]).toAbbreviated(0);var value=data["effect"][i]["change"][j]["value"];var value2=data["effect"][i]["change"][j]["value2"];if(!isUndefined(value["opacity"])&&!isUndefined(value2["opacity"])){item["events"][0].push({"starttime":starttime,"duration":duration,"easing":easing,"values":[[value["opacity"]],[value2["opacity"]]]});}
if(!isUndefined(value["where"])&&!isUndefined(value2["where"])){if((value["where"]["x"]!=-1)&&(value2["where"]["x"]!=-1)&&((value["where"]["y"]==-1)||(value2["where"]["y"]==-1))){item["events"][1].push({"starttime":starttime,"duration":duration,"easing":easing,"values":[[toX(value["where"]["x"])],[toX(value2["where"]["x"])]]});}
else if((value["where"]["y"]!=-1)&&(value2["where"]["y"]!=-1)&&((value["where"]["x"]==-1)||(value2["where"]["x"]==-1))){item["events"][2].push({"starttime":starttime,"duration":duration,"easing":easing,"values":[[toY(value["where"]["y"])],[toY(value2["where"]["y"])]]});}
else if((value["where"]["x"]!=-1)&&(value2["where"]["x"]!=-1)&&(value["where"]["y"]!=-1)&&(value2["where"]["y"]!=-1)){item["events"][3].push({"starttime":starttime,"duration":duration,"easing":easing,"values":[[toX(value["where"]["x"]),toY(value["where"]["y"])],[toX(value2["where"]["x"]),toY(value2["where"]["y"])]]});}}
if(!isUndefined(value["size"])&&!isUndefined(value2["size"])){if((value["size"]["w"]!=-1)&&(value2["size"]["w"]!=-1)&&(value["size"]["h"]!=-1)&&(value2["size"]["h"]!=-1)){if((value["size"]["w"]==value["size"]["h"])&&(value2["size"]["w"]==value2["size"]["h"])){item["events"][4].push({"starttime":starttime,"duration":duration,"easing":easing,"values":[[value["size"]["w"]],[value2["size"]["w"]]]});}
else{item["events"][5].push({"starttime":starttime,"duration":duration,"easing":easing,"values":[[value["size"]["w"],value["size"]["h"]],[value2["size"]["w"],value2["size"]["h"]]]});}}}
if(!isUndefined(value["angle"])&&!isUndefined(value2["angle"])){item["events"][6].push({"starttime":starttime,"duration":duration,"easing":easing,"values":[[value["angle"]],[value2["angle"]]]});}
if(!isUndefined(value["backColor"])&&!isUndefined(value2["backColor"])){if((value["backColor"]["r"]!=-1)&&(value2["backColor"]["r"]!=-1)&&(value["backColor"]["g"]!=-1)&&(value2["backColor"]["g"]!=-1)&&(value["backColor"]["b"]!=-1)&&(value2["backColor"]["b"]!=-1)){item["events"][7].push({"starttime":starttime,"duration":duration,"easing":easing,"values":[[value["backColor"]["r"],value["backColor"]["g"],value["backColor"]["b"]],[value2["backColor"]["r"],value2["backColor"]["g"],value2["backColor"]["b"]]]});}}
if(!isUndefined(value["parameter"])&&!isUndefined(value2["parameter"])){var p=(function(){var v="";switch(true){case value2["parameter"]["horizontalFlip"]:v="H";break;case value2["parameter"]["verticalFlip"]:v="V";break;case value2["parameter"]["additiveBlend"]:v="A";break;}
return v;})();if(p){item["events"][8].push({"starttime":starttime,"duration":duration,"easing":easing,"values":[[p],[p]]});}}}
ad.push(item);}}}
var sortTime=function(a,b){return a["starttime"]-b["starttime"];};for(var index=0;index<ad.length;index++){var loop={};for(var e=0;e<ad[index]["events"].length;e++){ad[index]["events"][e]=ad[index]["events"][e].sort(sortTime);if(e<8){var s=[];var c=(function(){var v=[];var a=[];var m=[];for(var i=0;i<ad[index]["events"][e].length-1;i++){if(!m[i]){a.push(i);m[i]=true;var p=i;while(true){var l=(function(){for(var j=0;j<ad[index]["events"][e].length;j++){if(!m[j]&&(ad[index]["events"][e][j]["starttime"]==ad[index]["events"][e][p]["starttime"]+ad[index]["events"][e][p]["duration"])){return j;}}
return-1;})();if(l!=-1){a.push(l);m[l]=true;p=l;}
else{v.push(a);a=[];break;}}}}
if(a.length){v.push(a);}
return v;})();for(var i=0;i<c.length;i++){for(var j=0;j<c[i].length;j++){var d=0;var n=0;for(var dt=(c[i].length-j)/2|0;dt>0;dt--){var b=(function(){for(var k=0;k<dt;k++){if(!((ad[index]["events"][e][c[i][k+dt]]["duration"]==ad[index]["events"][e][c[i][k]]["duration"])&&(ad[index]["events"][e][c[i][k+dt]]["values"][0].equal(ad[index]["events"][e][c[i][k]]["values"][0]))&&(ad[index]["events"][e][c[i][k+dt]]["values"][1].equal(ad[index]["events"][e][c[i][k]]["values"][1])))){return false;}}
return true;})();if(b){var nt=2;while(true){var next=(function(){if(j+dt*(nt+1)>c[i].length){return false;}
for(var k=0;k<dt;k++){if(!((ad[index]["events"][e][c[i][j+k+dt*nt]]["duration"]==ad[index]["events"][e][c[i][j+k]]["duration"])&&(ad[index]["events"][e][c[i][j+dt*nt+k]]["values"][0].equal(ad[index]["events"][e][c[i][j+k]]["values"][0]))&&(ad[index]["events"][e][c[i][j+k+dt*nt]]["values"][1].equal(ad[index]["events"][e][c[i][j+k]]["values"][1])))){return false;}}
return true;})();if(next){nt+=1;}
else{break;}}
if(dt*nt>=d*n){d=dt;n=nt;}}}
if(n){var starttime=ad[index]["events"][e][c[i][j]]["starttime"];var duration=0;var loopcount=n;var list=[];for(var k=0;k<d;k++){list.push({"event":e,"easing":ad[index]["events"][e][c[i][j+k]]["easing"],"starttime":ad[index]["events"][e][c[i][j+k]]["starttime"]-starttime,"duration":ad[index]["events"][e][c[i][j+k]]["duration"],"values":ad[index]["events"][e][c[i][j+k]]["values"].slice()});duration+=ad[index]["events"][e][c[i][j+k]]["duration"];}
for(var l=0;l<n;l++){for(var k=0;k<d;k++){s.push(c[i][j+k+d*l]);}}
j+=d*loopcount;var tag=[starttime,duration,loopcount].join(",");loop[tag]=loop[tag]||[];loop[tag].writes(list);}}}
for(var i=s.length-1;i>-1;i--){ad[index]["events"][e].splice(s[i],1);}}}
for(var tag in loop){var s=tag.split(",");var starttime=parseFloat(s[0]);var duration=parseFloat(s[1]);var loopcount=parseFloat(s[2]);for(var e=0;e<ad[index]["events"].length;e++){for(var i=ad[index]["events"][e].length-1;i>-1;i--){if((ad[index]["events"][e][i]["starttime"]>=starttime)&&(ad[index]["events"][e][i]["starttime"]+ad[index]["events"][e][i]["duration"]<=starttime+duration)){var match=(function(){var a=[i];var s=i+1;for(var n=1;n<loopcount;n++){for(var j=s;j<ad[index]["events"][e].length;j++){if((ad[index]["events"][e][j]["starttime"]==ad[index]["events"][e][i]["starttime"]+duration*n)&&(ad[index]["events"][e][j]["duration"]==ad[index]["events"][e][i]["duration"])&&(ad[index]["events"][e][j]["values"][0].equal(ad[index]["events"][e][i]["values"][0]))&&(ad[index]["events"][e][j]["values"][1].equal(ad[index]["events"][e][i]["values"][1]))){a.push[j];s=j+1;break;}}}
return a;})();if(match.length==loopcount){loop[tag].push({"event":e,"easing":ad[index]["events"][e][i]["easing"],"starttime":ad[index]["events"][e][i]["starttime"]-starttime,"duration":ad[index]["events"][e][i]["duration"],"values":ad[index]["events"][e][i]["values"].slice()});for(var j=match.length-1;j>-1;j--){ad[index]["events"][e].splice(match[j],1);}}}}}}
for(var e=0;e<ad[index]["events"].length;e++){for(var i=0;i<ad[index]["events"][e].length;i++){while(true){var l=(function(){for(var j=i+1;j<ad[index]["events"][e].length;j++){if((ad[index]["events"][e][j]["duration"]==ad[index]["events"][e][i]["duration"])&&(ad[index]["events"][e][j]["starttime"]==ad[index]["events"][e][i]["starttime"]+ad[index]["events"][e][i]["duration"]*(ad[index]["events"][e][i]["values"].length-1))&&ad[index]["events"][e][j]["values"][0].equal(ad[index]["events"][e][i]["values"][ad[index]["events"][e][i]["values"].length-1])){return j;}}
return-1;})();if(l!=-1){for(var j=1;j<ad[index]["events"][e][l]["values"].length;j++){ad[index]["events"][e][i]["values"].push(ad[index]["events"][e][l]["values"][j]);}
ad[index]["events"][e].splice(l,1);}
else{break;}}}}
for(var tag in loop){var s=tag.split(",");ad[index]["events"][9]=ad[index]["events"][9]||[];ad[index]["events"][9].push({"starttime":parseFloat(s[0]),"duration":parseFloat(s[1]),"loopcount":parseFloat(s[2]),"list":loop[tag]});}}
var m=[" F"," MX"," MY"," M"," S"," V"," R"," C"," P"," L"," T"];var ed=[];var sortEvent=function(a,b){return(a["starttime"]-b["starttime"])||(a["duration"]-b["duration"])||(a["event"]-b["event"]);};for(var index=0;index<ad.length;index++){ed[index]=ed[index]||{"time":-1,"data":[],"layer":ad[index]["layer"],"origin":ad[index]["origin"],"filepath":ad[index]["filepath"],"x":ad[index]["x"],"y":ad[index]["y"],"frameCount":ad[index]["frameCount"],"frameDelay":ad[index]["frameDelay"],"loopType":ad[index]["loopType"],"triggerName":ad[index]["triggerName"],"triggerStart":ad[index]["triggerStart"],"triggerEnd":ad[index]["triggerEnd"]};for(var e=0;e<ad[index]["events"].length;e++){for(var i=0;i<ad[index]["events"][e].length;i++){ed[index]["time"]=(ed[index]["time"]==-1?ad[index]["events"][e][i]["starttime"]:(ed[index]["time"]>ad[index]["events"][e][i]["starttime"]?ad[index]["events"][e][i]["starttime"]:ed[index]["time"]));var d=[];if(e!=9){var a=[m[e],ad[index]["events"][e][i]["easing"],ad[index]["events"][e][i]["starttime"],ad[index]["events"][e][i]["starttime"]+ad[index]["events"][e][i]["duration"]];for(var j=0;j<ad[index]["events"][e][i]["values"].length;j++){a.writes(ad[index]["events"][e][i]["values"][j]);}
if(e==8){a.splice(a.length-1,1);}
d.push({"event":e,"starttime":ad[index]["events"][e][i]["starttime"],"duration":ad[index]["events"][e][i]["duration"],"scripts":[a.join(",")]});}
else{var s=[];s.push([m[e],ad[index]["events"][e][i]["starttime"],ad[index]["events"][e][i]["loopcount"]].join(","));for(var k=0;k<ad[index]["events"][e][i]["list"].length;k++){var a=[m[ad[index]["events"][e][i]["list"][k]["event"]],ad[index]["events"][e][i]["list"][k]["easing"],ad[index]["events"][e][i]["list"][k]["starttime"],ad[index]["events"][e][i]["list"][k]["starttime"]+ad[index]["events"][e][i]["list"][k]["duration"]];for(var j=0;j<ad[index]["events"][e][i]["list"][k]["values"].length;j++){a.writes(ad[index]["events"][e][i]["list"][k]["values"][j]);}
s.push(" "+a.join(","));}
d.push({"event":e,"starttime":ad[index]["events"][e][i]["starttime"],"duration":ad[index]["events"][e][i]["duration"],"scripts":s});}
ed[index]["data"].writes(d);}}
var triggerName=ad[index]["triggerName"];var triggerStart=ad[index]["triggerStart"];var triggerEnd=ad[index]["triggerEnd"];if(triggerName&&!isUndefined(triggerStart)&&!isUndefined(triggerEnd)){ed[index]["data"]=ed[index]["data"].sort(sortEvent);var s=[];for(var j=0;j<ed[index]["data"].length;j++){for(var k=0;k<ed[index]["data"][j]["scripts"].length;k++){s.push(" "+ed[index]["data"][j]["scripts"][k]);}}
s.unshift([m[10],triggerName,triggerStart,triggerEnd].join(","));ed[index]["data"]=[{"event":10,"starttime":parseFloat(w[1]),"scripts":s}];}}
var et=(function(){var v=[];for(var index=0;index<ed.length;index++){var item=ed[index];item["data"]=item["data"].sort(sortEvent);v.push(item);}
var s=function(a,b){return a["time"]-b["time"];};return v.sort(s);})();for(var i=0;i<et.length;i++){if(et[i]["data"].length){var layer=et[i]["layer"];var origin=et[i]["origin"];var filepath='"'+et[i]["filepath"]+'"';var x=et[i]["x"];var y=et[i]["y"];var frameCount=et[i]["frameCount"];var frameDelay=et[i]["frameDelay"];var loopType=(function(){var v="LoopForever";switch(et[i]["loopType"]){case-1:v="LoopForever";break;case 1:v="LoopOnce";break;}
return v;})();var d=[];if(frameCount&&frameDelay){d=[6,layer,origin,filepath,x,y,frameCount,frameDelay];if(loopType!="LoopForever"){d.push(loopType);}}
else{d=[4,layer,origin,filepath,x,y];}
r[layer].push(d.join(","));for(var j=0;j<et[i]["data"].length;j++){r[layer].writes(et[i]["data"][j]["scripts"]);}}}
return r;})();osu.push("//Storyboard Layer 0 (Background)");osu.writes(animeData[0].unrepeat());osu.push("//Storyboard Layer 1 (Fail)");osu.writes(animeData[1].unrepeat());osu.push("//Storyboard Layer 2 (Pass)");osu.writes(animeData[2].unrepeat());osu.push("//Storyboard Layer 3 (Foreground)");osu.writes(animeData[3].unrepeat());osu.push("//Storyboard Sound Samples");var sampleData=(function(){var v=[];for(var i=0;i<data["effect"].length;i++){if((data["effect"][i]["kind"]=="audio")&&data["effect"][i]["path"]){var m=["back","miss","hit","fore"];var layer=m.indexOf(data["effect"][i]["what"]||"back");if(layer!=-1){v.push([data["effect"][i]["when"]["t"].toAbbreviated(0),layer,data["effect"][i]["path"].toDirWin(),data["effect"][i]["volume"].fMul(100)]);}}}
v.shift();for(var i=0;i<v.length;i++){v[i]="5,"+v[i][0]+","+v[i][1]+","+'"'+v[i][2]+'"'+(v[i][3]==100?"":","+v[i][3]);}
return v;})();osu.writes(sampleData.unrepeat());osu.push("//Background Colour Transformations");if(data["info"]["colorBack"]){osu.push("3,"+data["info"]["colorBack"]["a"].fMul(100).limit(0,100)+","+data["info"]["colorBack"]["r"].fMul(256).limit(0,255)+","+data["info"]["colorBack"]["g"].fMul(256).limit(0,255)+","+data["info"]["colorBack"]["b"].fMul(256).limit(0,255));}
osu.push("");osu.push("[TimingPoints]");var sampleSets=[];var sampleIndexes=[];var timeData=(function(){var v=[];var addData=function(time,name,value){time=Math.round(time);var l=(function(){for(var i=0;i<v.length;i++){if(v[i]["time"]==time){return i;}}
return-1;})();if(l!=-1){v[l][name]=value;}
else{var n=0;for(var i=0;i<v.length;i++){if(v[i]["time"]<time){n=i;}
else{break;}}
var item={"time":time};item[name]=value;v.insert(item,n+1);}};for(var i=0;i<data["beat"].length;i++){var isToStop=data["beat"][i]["bpm"].fMul(data["beat"][i]["fpn"])<=0;var mspb=(60000).fDiv(data["beat"][i]["bpm"]);var fpn=data["beat"][i]["fpn"];if(!i&&(fpn!=1)){mspb=mspb.fDiv(fpn);fpn=1;}
addData(data["beat"][i]["when"]["t"],"mspb",(isToStop?600000000:mspb).toAbbreviated(12).toAccurated());addData(data["beat"][i]["when"]["t"],"meter",data["beat"][i]["bpn"].toAbbreviated(12).toAccurated());addData(data["beat"][i]["when"]["t"],"fpn",(isToStop?1:fpn).toAbbreviated(12).toAccurated());}
for(var i=0;i<data["status"].length;i++){if(data["status"][i]["name"]=="osu_sampleSet"){sampleSets.push([data["status"][i]["when"]["t"],data["status"][i]["value"]]);addData(data["status"][i]["when"]["t"],"sampleSet",data["status"][i]["value"]);}
if(data["status"][i]["name"]=="osu_sampleIndex"){sampleIndexes.push([data["status"][i]["when"]["t"],data["status"][i]["value"]]);addData(data["status"][i]["when"]["t"],"sampleIndex",data["status"][i]["value"]);}
if(data["status"][i]["name"]=="osu_kiaiMode"){addData(data["status"][i]["when"]["t"],"kiaiMode",data["status"][i]["value"]);}}
for(var i=0;i<data["effect"].length;i++){if((data["effect"][i]["kind"]=="player")&&(data["effect"][i]["what"]=="back")){addData(data["effect"][i]["when"]["t"],"volume",data["effect"][i]["volume"]);}}
for(var i=0;i<v.length;i++){v[i]["mspb"]=(!isUndefined(v[i]["mspb"])?v[i]["mspb"]:(i?v[i-1]["mspb"]:500));v[i]["meter"]=(!isUndefined(v[i]["meter"])?v[i]["meter"]:(i?v[i-1]["meter"]:4));v[i]["fpn"]=(!isUndefined(v[i]["fpn"])?v[i]["fpn"]:(i?v[i-1]["fpn"]:1));v[i]["sampleSet"]=(!isUndefined(v[i]["sampleSet"])?v[i]["sampleSet"]:(i?v[i-1]["sampleSet"]:"soft"));v[i]["sampleIndex"]=(!isUndefined(v[i]["sampleIndex"])?v[i]["sampleIndex"]:(i?v[i-1]["sampleIndex"]:0));v[i]["volume"]=(!isUndefined(v[i]["volume"])?v[i]["volume"]:(i?v[i-1]["volume"]:1));v[i]["inherited"]=!(i&&(v[i]["mspb"]==v[i-1]["mspb"]));v[i]["kiaiMode"]=(!isUndefined(v[i]["kiaiMode"])?v[i]["kiaiMode"]:(i?v[i-1]["kiaiMode"]:0));}
for(var i=1;i<v.length;i++){if((v[i]["mspb"]==v[i-1]["mspb"])&&(v[i]["meter"]==v[i-1]["meter"])&&(v[i]["fpn"]==v[i-1]["fpn"])&&(v[i]["sampleSet"]==v[i-1]["sampleSet"])&&(v[i]["sampleIndex"]==v[i-1]["sampleIndex"])&&(v[i]["volume"]==v[i-1]["volume"])&&(v[i]["inherited"]==v[i-1]["inherited"])&&(v[i]["kiaiMode"]==v[i-1]["kiaiMode"])){v.splice(i,1);i-=1;}}
for(var i=0;i<v.length;i++){v[i]["mspb"]=(v[i]["inherited"]?v[i]["mspb"]:(-100).fDiv(v[i]["fpn"])).toAbbreviated(12).toAccurated();v[i]["mspb"]=(v[i]["mspb"].toAbbreviated(9).toAccurated()==v[i]["mspb"].toFixed(6)?v[i]["mspb"].toAbbreviated(9).toAccurated():v[i]["mspb"]);v[i]["mspb"]=(v[i]["mspb"].toAbbreviated(6).toAccurated()==v[i]["mspb"].toFixed(3)?v[i]["mspb"].toAbbreviated(6).toAccurated():v[i]["mspb"]);v[i]["sampleSet"]=(function(){switch(v[i]["sampleSet"]){case"normal":return 1;break;case"soft":return 2;break;case"drum":return 3;break;default:return 0;break;}})();v[i]["volume"]=v[i]["volume"].fMul(100);}
return v;})();for(var i=0;i<timeData.length;i++){osu.push(timeData[i]["time"]+","+timeData[i]["mspb"]+","+timeData[i]["meter"]+","+timeData[i]["sampleSet"]+","+timeData[i]["sampleIndex"]+","+timeData[i]["volume"]+","+(timeData[i]["mspb"]<0?0:1)+","+(timeData[i]["kiaiMode"]?1:0));}
osu.push("");osu.push("[Colours]");for(var i=0;i<data["info"]["colorGroup"].length;i++){osu.push("Combo"+(i+1)+" : "+data["info"]["colorGroup"][i]["r"].fMul(256).limit(0,255)+","+data["info"]["colorGroup"][i]["g"].fMul(256).limit(0,255)+","+data["info"]["colorGroup"][i]["b"].fMul(256).limit(0,255))}
osu.push("");osu.push("[HitObjects]");var hitData=(function(){var r=[];var noteData=[];var key=data["info"]["key"];var toX=function(x){x=(x==-1?0:x);return Math.round((x*513).limit(0,512));};var toY=function(y){y=(y==-1?0:y);return 384-Math.round((y*385).limit(0,384));};var getLineType=function(t){switch(t){case"linear":return"L";break;case"perfect":return"P";break;case"bezier":return"B";break;case"catmull":return"C";break;default:return"P";break;}};var isVectorEqual=function(a,b){if(a.length&&b.length&&(a.length==b.length)){for(var j=0;j<a.length;j++){if((a[j]["where"]["x"]!=b[j]["where"]["x"])||(a[j]["where"]["y"]!=b[j]["where"]["y"])){return false;}}}
else{return false;}
return true;};var toHitSound=function(h,s){var m=["normal","whistle","finish","clap"];var v=[0,0,0,0];for(var i=0;i<m.length;i++){if(s){h[i]=(h[i]=="slide"?"normal":h[i]);}
if(h.indexOf(m[i])!=-1){v[i]=1;}}
return v[0]+v[1]*2+v[2]*4+v[3]*8;};var toSampleSet=function(s,t){if(s!="auto"){for(var i=0;i<sampleSets.length;i++){if((t>=sampleSets[i][0])&&((i>=sampleSets.length-1)||(t<sampleSets[i+1][0]))&&(s==sampleSets[i][1])){s="auto";break;}}}
var v=["auto","normal","soft","drum"].indexOf(s);return(v!=-1?v:0);};var toCustomIndex=function(c,t){if(c){for(var i=0;i<sampleIndexes.length;i++){if((t>=sampleIndexes[i][0])&&((i>=sampleIndexes.length-1)||(t<sampleIndexes[i+1][0]))&&(c==sampleIndexes[i][1])){return 0;}}}
return c;};var readTrigger=function(tg,t,s){var v={"hitSound":[],"sampleSet":"auto","additionSet":"auto","customIndex":0,"sampleVolume":0,"filename":""};for(var j=0;j<tg.length;j++){if((tg[j]["kind"]=="audio")&&tg[j]["path"]){v["sampleVolume"]=Math.round(((tg[j]["volume"]?tg[j]["volume"]:v["sampleVolume"])||0).fMul(100));if(!isUndefined(tg[j]["sampleSound"])){v["hitSound"].push(tg[j]["sampleSound"]);}
if(v["hitSound"][v["hitSound"].length-1]=="normal"){v["sampleSet"]=tg[j]["sampleSet"];}
else{v["additionSet"]=tg[j]["sampleSet"];}
v["customIndex"]=(tg[j]["sampleIndex"]?tg[j]["sampleIndex"]:v["customIndex"]);v["filename"]=(tg[j]["path"]!=(v["hitSound"].length?(tg[j]["sampleSet"]+"-"+(s?"slider":"hit")+v["hitSound"][v["hitSound"].length-1]+(v["customIndex"]>1?v["customIndex"]:"")+".wav"):"")?tg[j]["path"]:"");}}
v["hitSound"]=toHitSound(v["hitSound"],s);v["sampleSet"]=toSampleSet(v["sampleSet"],t);v["additionSet"]=toSampleSet(v["additionSet"],t);v["customIndex"]=toCustomIndex(v["customIndex"],t);return v;};var getNewCombo=function(c){return(c?((c-1)<<4)+4:0);};var toCurvePoints=function(v){return v.map(function(a){return[toX(a["where"]["x"]),toY(a["where"]["y"])];});};var sDK=true;var bDK=true;for(var i=0;i<data["note"].length;i++){var time=data["note"][i]["when"]["t"];var beat=data["note"][i]["when"]["b"];var note=data["note"][i]["when"]["n"];var x=data["note"][i]["where"]["x"];var xPos=toX(data["note"][i]["where"]["x"]);var yPos=toY(data["note"][i]["where"]["y"]);var a=data["note"][i]["link"]["a"];var isSlider=((data["note"][i]["line"]&&data["note"][i]["line"]["vector"]&&data["note"][i]["line"]["vector"]["length"])||((a!=-1)&&(data["note"][a]["where"]["x"]!=data["note"][i]["where"]["x"])));var newCombo=getNewCombo(data["note"][i]["flag"]["colorSkip"]);var trigger=readTrigger(data["note"][i]["trigger"],time,isSlider);var repeat=0;var edgeHitSounds=[];var edgeAdditions=[];var extras=[trigger["sampleSet"],trigger["additionSet"],trigger["customIndex"],trigger["sampleVolume"],trigger["filename"]];if(a!=-1){var endTime=data["note"][a]["when"]["t"];var endBeat=data["note"][a]["when"]["b"];var endNote=data["note"][a]["when"]["n"];var xPos2=toX(data["note"][a]["where"]["x"]);var yPos2=toY(data["note"][a]["where"]["y"]);if(isSlider){var line={"type":getLineType(data["note"][i]["line"]["type"]),"vector":(data["note"][i]["line"]["vector"]?data["note"][i]["line"]["vector"]:[{"where":{"x":xPos2,"y":yPos2}}]),"vectorR":(data["note"][a]["line"]["vector"]?data["note"][a]["line"]["vector"]:[{"where":{"x":xPos,"y":yPos}}])};var edgeTrigger=readTrigger(data["note"][i]["trigger"],time,isSlider);edgeHitSounds.push(edgeTrigger["hitSound"]);edgeAdditions.push([edgeTrigger["sampleSet"],edgeTrigger["additionSet"]]);while(a!=-1){repeat+=1;endTime=data["note"][a]["when"]["t"];endBeat=data["note"][a]["when"]["b"];endNote=data["note"][a]["when"]["n"];var edgeTrigger=readTrigger(data["note"][a]["trigger"],endTime,isSlider);edgeHitSounds.push(edgeTrigger["hitSound"]);edgeAdditions.push([edgeTrigger["sampleSet"],edgeTrigger["additionSet"]]);i=a;a=data["note"][a]["link"]["a"];if((a==-1)||(toX(data["note"][a]["where"]["x"])!=(repeat%2==0?xPos:xPos2))||(toY(data["note"][a]["where"]["y"])!=(repeat%2==0?yPos:yPos2))||(getLineType(data["note"][i]["line"]["type"])!=line["type"])||!isVectorEqual(data["note"][a-1]["line"]["vector"],(repeat%2==0?line["vector"]:line["vectorR"]))){if(mode!=3){r.push({"x":xPos,"y":yPos,"time":time,"type":2,"newCombo":newCombo,"hitSound":trigger["hitSound"],"sliderType":line["type"],"curvePoints":toCurvePoints(line["vector"].slice(1)),"repeat":repeat,"pixelLength":endBeat.fSub(beat).fMul(data["info"]["sliderMultiplier"]).fMul(100).toAbbreviated(6).toAccurated(),"edgeHitSounds":edgeHitSounds,"edgeAdditions":edgeAdditions,"extras":extras});}
else{r.push({"x":xPos,"y":yPos,"time":time,"type":128,"newCombo":newCombo,"hitSound":trigger["hitSound"],"endTime":endTime,"extras":extras});noteData.push({"action":0x02,"when":{"b":beat,"n":note,"t":time},"when2":{"b":endBeat,"n":endNote,"t":endTime},"where":{"x":trackToX(xToTrack(x,key),key)},"trigger":data["note"][i]["trigger"]});}
break;}}}
else{if(mode!=3){r.push({"x":xPos,"y":yPos,"time":time,"type":8,"newCombo":newCombo,"hitSound":trigger["hitSound"],"endTime":endTime,"extras":extras});}
else{r.push({"x":xPos,"y":yPos,"time":time,"type":128,"newCombo":newCombo,"hitSound":trigger["hitSound"],"endTime":endTime,"extras":extras});noteData.push({"action":0x02,"when":{"b":beat,"n":note,"t":time},"when2":{"b":endBeat,"n":endNote,"t":endTime},"where":{"x":trackToX(xToTrack(x,key),key)},"trigger":data["note"][i]["trigger"]});}
i=a;}}
else{if(mode!=1){r.push({"x":xPos,"y":yPos,"time":time,"type":1,"newCombo":newCombo,"hitSound":trigger["hitSound"],"extras":extras});noteData.push({"action":0x00,"when":{"b":beat,"n":note,"t":time},"where":{"x":trackToX(xToTrack(x,key),key)},"trigger":data["note"][i]["trigger"]});}
else{var h=0;var t=(function(){var m=["0","0","0","0"];for(var j=i;j<data["note"].length;j++){if(data["note"][j]["when"]["b"]==data["note"][i]["when"]["b"]){m[(data["note"][j]["where"]["x"]!=-1?data["note"][j]["where"]["x"]:0).fMul(4)|0]="1";}
else{i=j-1;break;}
if(j==data["note"].length-1){i=j;}}
return m.join("");})();switch(t){case"0010":case"0100":h=0;break;case"0001":case"1000":h=2;break;case"0110":case"0111":case"1110":h=4;break;case"1001":case"1011":case"1101":h=6;break;case"0011":case"1100":case"0101":case"1010":h=(sDK?0:2);sDK=!sDK;break;case"1111":h=(bDK?4:6);bDK=!bDK;break;}
r.push({"x":xPos,"y":yPos,"time":time,"type":1,"newCombo":newCombo,"hitSound":h,"extras":extras});}}}
if(mode==3){Semi["draw"][index]=Semi["draw"][index]||{};Semi["draw"][index]["osu"]=Semi["draw"][index]["osu"]||{};Semi["draw"][index]["osu"]["list"]=[{"data":data,"noteData":noteData}];Semi["draw"][index]["osu"]["valid"]=false;}
return r;})();for(var i=0;i<hitData.length;i++){var isConcise=true;var curvePoints=(hitData[i]["curvePoints"]?hitData[i]["curvePoints"].map(function(a){return a.join(":");}).join("|"):"");var edgeHitSounds=(hitData[i]["edgeHitSounds"]?hitData[i]["edgeHitSounds"].join("|"):"");var edgeAdditions=(hitData[i]["edgeAdditions"]?hitData[i]["edgeAdditions"].map(function(a){return a.join(":");}).join("|"):"");var extras=hitData[i]["extras"].join(":");var base=Math.round(hitData[i]["x"])+","+Math.round(hitData[i]["y"])+","+Math.round(hitData[i]["time"])+","+(hitData[i]["type"]+hitData[i]["newCombo"])+","+hitData[i]["hitSound"];if(isConcise){var dEdgeHitSounds=(hitData[i]["edgeHitSounds"]?"|0".repeat(hitData[i]["edgeHitSounds"].length).slice(1):"");var dEdgeAdditions=(hitData[i]["edgeAdditions"]?"|0:0".repeat(hitData[i]["edgeAdditions"].length).slice(1):"");var dExtras="0:0:0:0:";var extras=(extras==dExtras?"":extras);var edgeAdditions=((extras=="")&&(edgeAdditions==dEdgeAdditions)?"":edgeAdditions);var edgeHitSounds=((extras=="")&&(edgeAdditions=="")&&(edgeHitSounds==dEdgeHitSounds)?"":edgeHitSounds);}
switch(hitData[i]["type"]){case 1:osu.push(base+(extras!=""?",":"")+extras);break;case 2:osu.push(base+","+hitData[i]["sliderType"]+"|"+curvePoints+","+hitData[i]["repeat"]+","+hitData[i]["pixelLength"]+(edgeHitSounds!=""?",":"")+edgeHitSounds+(edgeAdditions!=""?",":"")+edgeAdditions+(extras!=""?",":"")+extras);break;case 8:osu.push(base+","+Math.round(hitData[i]["endTime"])+(extras!=""?",":"")+extras);break;case 128:osu.push(base+","+Math.round(hitData[i]["endTime"])+(extras!=""?":":"")+extras);break;}}
osu.push("");return osu.join("\r\n");};var toXmlText=function(index,type){var type2=(arguments.length>2?arguments[2]:"");var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};switch(type){case"yddr":var times=[];var types=[];var data=repairData(toData(toData(toData(toData(extData(mergeData(Semi["data"][index]),index),"InvalidKeyRemove"),"FakeKeyRemove"),"NoOblique"),"NoSlide"),index);var notes=(data?data["note"]:[]);var key=(data["info"]["key"]?data["info"]["key"]:newItem("info")["key"]);for(var i=0;i<notes.length;i++){if(notes[i]["link"]["b"]==-1){var l=times.indexOf(Math.round(notes[i]["when"]["t"]));if(l==-1){times.push(Math.round(notes[i]["when"]["t"]));types.push(xToTrack(notes[i]["where"]["x"],key)+1);var a=notes[i]["link"]["a"];if(a!=-1){types[types.length-1]+="_"+Math.round(notes[a]["when"]["t"].fSub(notes[i]["when"]["t"]));}}
else{types[l]+="$"+(xToTrack(notes[i]["where"]["x"],key)+1);var a=notes[i]["link"]["a"];if(a!=-1){types[l]+="_"+Math.round(notes[a]["when"]["t"].fSub(notes[i]["when"]["t"]));}}}}
var r=[];var offset=(0).fSub(data["info"]["start"]["when"]["t"]);for(var i=0;i<times.length;i++){r.push(" <beat time="+'"'+(times[i]+offset)+'"'+" type="+'"'+types[i]+'"'+"/>");}
r.unshift("<beats>");r.push("</beats>");return r.join("\r\n");break;case"ydsd":Buffer["xmlyddr"][index]=Buffer["xmlyddr"][index]||toXmlBuffer(index,"yddr");var r=Buffer["xmlyddr"][index].length%8;return Buffer["xmlyddr"][index].pad(Buffer["xmlyddr"][index].length+r,r,false).cryptDES(true,new Uint8Array().fromText(new Uint8Array().fromText((3263047).toString(16)).getBase64())).getBase64();break;case"mde":var data=repairData(toData(toData(toData(extData(mergeData(Semi["data"][index]),index),"InvalidKeyRemove"),"FakeKeyRemove"),"EquilongDrag"),index);var songName=fileInfo.nameCore;var delay=25;var offset=(0).fSub(data["info"]["start"]["when"]["t"]);var canvasSize=[3840,2560];var defaultCamSize=320;var gridFromBeat=function(b){return Math.round(b.fMul(4))*6;};var getCam=function(t){var cL=[];var cR=[];if(camList.length==0){cL=[0,[canvasSize[0]/2,canvasSize[1]/2],defaultCamSize];cR=[data["info"]["max"]["when"]["t"],[canvasSize[0]/2,canvasSize[1]/2],defaultCamSize];}
else if(t<camList[0]["mTick"]){cL=[0,[canvasSize[0]/2,canvasSize[1]/2],defaultCamSize];cR=[camList[0]["mTick"],[camList[0]["mPos"][0],camList[0]["mPos"][1]],camList[0]["mSize"]];}
else if(t>=camList[camList.length-1]["mTick"]){cL=[camList[camList.length-1]["mTick"],[camList[camList.length-1]["mPos"][0],camList[camList.length-1]["mPos"][1]],camList[camList.length-1]["mSize"]];cR=[camList[camList.length-1]["mTick"],[camList[camList.length-1]["mPos"][0],camList[camList.length-1]["mPos"][1]],camList[camList.length-1]["mSize"]];}
else{for(var i=0;i<camList.length-1;i++){if((camList[i]["mTick"]<=t)&&(camList[i+1]["mTick"]>t)){cL=[camList[i]["mTick"],[camList[i]["mPos"][0],camList[i]["mPos"][1]],camList[i]["mSize"]];cR=[camList[i+1]["mTick"],[camList[i+1]["mPos"][0],camList[i+1]["mPos"][1]],camList[i+1]["mSize"]];break;}}}
var r=(cR[0]==cL[0]?0:t.fSub(cL[0]).fDiv(cR[0].fSub(cL[0])));var x=cL[1][0].fAdd(cR[1][0].fSub(cL[1][0]).fMul(r));var y=cL[1][1].fAdd(cR[1][1].fSub(cL[1][1]).fMul(r));var s=cL[2].fAdd(cR[2].fSub(cL[2]).fMul(r));return[t,[x,y],s];}
var getPos=function(t,p){var cam=getCam(t);var x=cam[1][0];var y=cam[1][1];var s=cam[2];var limit=false;if(limit){if((p[0]<0)||(p[0]>1)||(p[1]<0)||(p[1]>1)){var rr=0;while(((p[0]<0)&&((0).fSub(p[0]).fDiv(rr)>=1))||((p[1]<0)&&((0).fSub(p[1]).fDiv(rr)>=1))||((p[0]>=1)&&(p[0].fDiv(rr)>=1))||((p[1]>=1)&&(p[1].fDiv(rr)>=1))){rr=rr.fAdd(1);}
p[0]=p[0].fDiv(rr).fAdd(1).fDiv(2);p[1]=p[1].fDiv(rr).fAdd(1).fDiv(2);}}
var scaleY=2/3;var offsetY=-2/30;p[1]=(0.5).fSub((0.5).fSub(p[1]).fMul(scaleY)).fAdd(offsetY);var px=x.fSub(s.fMul(1.5)).fAdd(p[0].fMul(s.fMul(3)));var py=y.fSub(s).fAdd(p[1].fMul(s.fMul(2)));return[px.toAbbreviated(0),py.toAbbreviated(0)];};var getRota=function(x,y){var r=0;if(x==0){r=0;if(y<0){r=-180;}}
else if(y==0){r=-90;if(x<0){r=90;}}
else{r=Math.atan2((0).fSub(x),y).fDiv(Math.PI).fMul(180).toAbbreviated(6).toAccurated();}
return r;};var note=(data?data["note"]:[]);var noteData=(function(){var v=[];for(var i=0;i<note.length;i++){note[i]["where"]["x"]=(note[i]["where"]["x"]==-1?0.5:note[i]["where"]["x"]);note[i]["where"]["y"]=(note[i]["where"]["y"]==-1?0.5:note[i]["where"]["y"]);note[i]["where"]["z"]=(note[i]["where"]["x"]==-1?0.5:note[i]["where"]["z"]);}
for(var i=0;i<note.length;i++){if(note[i]["link"]["b"]==-1){var d={};d["when"]={"b":note[i]["when"]["b"],"n":note[i]["when"]["n"],"t":note[i]["when"]["t"]};d["where"]={"x":note[i]["where"]["x"],"y":note[i]["where"]["y"],"z":note[i]["where"]["z"]};if(note[i]["link"]["a"]==-1){d["type"]="CNoteSingle";}
else{var a=note[i]["link"]["a"];if(note[a]["link"]["a"]==-1){if(note[a]["when"]["b"]==note[i]["when"]["b"]){d["type"]="CNoteSlide";d["where"]={"x":note[i]["where"]["x"].fAdd(note[a]["where"]["x"]).fDiv(2),"y":note[i]["where"]["y"].fAdd(note[a]["where"]["y"]).fDiv(2),"z":note[i]["where"]["z"].fAdd(note[a]["where"]["z"]).fDiv(2)};d["direction"]=(function(x,y){var d=["Up","UpLeft","Left","DownLeft","Down","DownRight","Right","UpRight"];var ml=[2,1,1,1,0,0,1,2,4,4,3,2,2,3,3,3];var mr=[7,7,7,6,6,7,0,0,6,5,4,4,5,5,5,6];var q=(x.fMul(4)|0)+(y.fMul(4)|0)*4;if(note[a]["where"]["x"]-note[i]["where"]["x"]<0){return d[ml[q]];}
else{return d[mr[q]];}})(d["where"]["x"],d["where"]["y"]);}
else{if((note[i]["mIsHeadFollowType"])||(note[a]["where"]["x"]==note[i]["where"]["x"])){d["type"]="CNoteLong";}
else{d["type"]="CNoteLongSlide";}
d["when2"]={"b":note[a]["when"]["b"],"n":note[a]["when"]["n"],"t":note[a]["when"]["t"]};d["where2"]={"x":note[a]["where"]["x"],"y":note[a]["where"]["y"],"z":note[a]["where"]["z"]};}}
else{d["type"]="CNoteLongSlide";var e=note[a]["link"]["a"];while(note[e]["link"]["a"]!=-1){e=note[e]["link"]["a"];}
d["when2"]={"b":note[e]["when"]["b"],"n":note[e]["when"]["n"],"t":note[e]["when"]["t"]};d["where2"]={"x":note[e]["where"]["x"],"y":note[e]["where"]["y"],"z":note[e]["where"]["z"]};}}
switch(d["type"]){case"CNoteLong":case"CNoteLongSlide":if(note[i]["line"]["vector"].length){var vector=[];for(var j=0;j<note[i]["line"]["vector"].length;j++){vector.push([note[i]["line"]["vector"][j]["when"]["t"],[note[i]["line"]["vector"][j]["where"]["x"],note[i]["line"]["vector"][j]["where"]["y"]]]);}
d["line"]={"vector":vector,"clockwise":note[i]["line"]["clockwise"],"combo":note[i]["combo"],"follow":note[i]["line"]["follow"]};break;}}
v.push(d);}}
return v;})();var camData=(function(){var cam=[];if(data&&data["transformed"]&&data["transformed"].length){var p=[canvasSize[0]/2,canvasSize[1]/2];var s=defaultCamSize;var t=0;cam.push([t,[p[0],p[1]],s]);for(var i=0;i<data["transformed"].length;i++){t=data["transformed"][i]["when"]["t"]|0;if(cam[cam.length-1][0]!=t){cam.push([t,[p[0],p[1]],s]);}
p[0]=p[0].fSub(data["transformed"][i]["translateX"].fMul(canvasSize[0]));p[1]=p[1].fSub(data["transformed"][i]["translateY"].fMul(canvasSize[1]));s=s.fDiv(data["transformed"][i]["scaleX"]);t=t.fAdd(data["transformed"][i]["duration"])|0;if(cam[cam.length-1][0]!=t){cam.push([t,[p[0],p[1]],s]);}
else{cam[cam.length-1]=[t,[p[0],p[1]],s];}}}
else if(MstOptions["TransformExtend"][index]){var trans=[];var isMoveCam=true;var isTabCam=true;var isSlideCam=true;var isInoutCam=true;var noteMove=1;var moveRate=1/12;var actionBeat=1/8;var tabRate=1/32;var slideRate=1/16;var indexOf=function(t){for(var i=0;i<trans.length-1;i++){if((trans[i][0]<=t)&&(trans[i+1][0]>t)){return i;}}
return-1;};var breakTrans=function(i,t){var r=t.fSub(trans[i][0]).fDiv(trans[i+1][0].fSub(trans[i][0]));var d=[t,[trans[i+1][1][0].fMul(r),trans[i+1][1][1].fMul(r)],trans[i+1][2].fSub(1).fMul(r).fAdd(1)];trans[i+1]=[trans[i+1][0],[trans[i+1][1][0].fSub(d[1][0]),trans[i+1][1][1].fSub(d[1][1])],trans[i+1][2].fDiv(d[2])];trans.insert(d,i+1);};trans.push([0,[0,0],1]);if(isMoveCam){trans.push([noteData[0]["when"]["t"],[0,0],1]);var s=noteData[0]["when"]["n"];var e=noteData[noteData.length-1]["when"]["n"];var i=0;var n=s;while(n<e){var x=0;var y=0;var nn=(n+noteMove<e?n+noteMove:e);while((i<noteData.length)&&(noteData[i]["when"]["n"]>=n)&&(noteData[i]["when"]["n"]<nn)){x=x.fAdd(noteData[i]["where"]["x"].fSub(0.5));y=y.fAdd(noteData[i]["where"]["y"].fSub(0.5));i+=1;}
trans.push([timeFromNote(data,n+1),[x.fMul(moveRate),y.fMul(moveRate)],1]);n=nn;}}
trans.push([data["info"]["length"]["when"]["t"],[0,0],1]);if(isTabCam){var tab=(function(){var v=[];var s=1;var add=function(){s=s.fMul((1).fSub(tabRate));};for(var i=0;i<noteData.length;i++){var b=noteData[i]["when"]["b"];s=1;add();while((i+1<noteData.length)&&(b==noteData[i+1]["when"]["b"])){add();i+=1;}
v.push([[timeFromBeat(data,Math.max(b.fSub(actionBeat),0)),timeFromBeat(data,b),timeFromBeat(data,b.fAdd(actionBeat))],s]);}
for(var i=0;i<v.length;i++){if((i+1<v.length)&&(v[i][0][2]>v[i+1][0][0])){var d=v[i+1][0][1].fSub(v[i][0][1]).fDiv(2);v[i][0][2]=v[i][0][1].fAdd(d);v[i+1][0][0]=v[i+1][0][1].fSub(d);}}
return v;})();for(var i=0;i<tab.length;i++){var s=indexOf(tab[i][0][0]);breakTrans(s,tab[i][0][0]);var m=indexOf(tab[i][0][1]);breakTrans(m,tab[i][0][1]);var e=indexOf(tab[i][0][2]);breakTrans(e,tab[i][0][2]);var tabIn=[trans[m+1][0],[0,0],1];for(var j=s+2;j<m+2;j++){tabIn[1][0]=tabIn[1][0].fAdd(trans[j][1][0]);tabIn[1][1]=tabIn[1][1].fAdd(trans[j][1][1]);tabIn[2]=tabIn[2].fMul(trans[j][2]);}
tabIn[2]*=tab[i][1];var tabOut=[trans[e+1][0],[0,0],1];for(var j=m+2;j<e+2;j++){tabOut[1][0]=tabOut[1][0].fAdd(trans[j][1][0]);tabOut[1][1]=tabOut[1][1].fAdd(trans[j][1][1]);tabOut[2]=tabOut[2].fMul(trans[j][2]);}
tabOut[2]=tabOut[2].fDiv(tab[i][1]);trans.splice(s+2,e-s);trans.inserts([tabIn,tabOut],s+2);}}
if(isSlideCam){var slide=(function(){var v=[];var x=0;var y=0;var d=slideRate;var ds=slideRate.fMul(Math.SQRT1_2);var add=function(direction){switch(direction){case"Up":y=y.fAdd(d);break;case"UpLeft":x=x.fSub(ds);y=y.fAdd(ds);break;case"Left":x=x.fSub(d);break;case"DownLeft":x=x.fSub(ds);y=y.fSub(ds);break;case"Down":y=y.fSub(d);break;case"DownRight":x=x.fAdd(ds);y=y.fSub(ds);break;case"Right":x=x.fAdd(d);break;case"UpRight":x=x.fAdd(ds);y=y.fAdd(ds);break;}};for(var i=0;i<noteData.length;i++){if(noteData[i]["type"]=="CNoteSlide"){var b=noteData[i]["when"]["b"];x=0;y=0;add(noteData[i]["direction"]);while((i+1<noteData.length)&&(b==noteData[i+1]["when"]["b"])){add(noteData[i+1]["direction"]);i+=1;}
v.push([[timeFromBeat(data,b),timeFromBeat(data,b.fAdd(actionBeat))],[x,y]]);}}
for(var i=0;i<v.length;i++){if((i+1<v.length)&&(v[i][0][1]>v[i+1][0][0])){var d=v[i+1][0][0].fSub(v[i][0][1]).fDiv(2);v[i][0][1]=v[i][0][0].fAdd(d);v[i+1][0][0]=v[i+1][0][1].fSub(d);}}
return v;})();for(var i=0;i<slide.length;i++){var s=indexOf(slide[i][0][0]);breakTrans(s,slide[i][0][0]);var e=indexOf(slide[i][0][1]);breakTrans(e,slide[i][0][1]);var slideTo=[trans[e+1][0],[0,0],1];for(var j=s+2;j<e+2;j++){slideTo[1][0]=slideTo[1][0].fAdd(trans[j][1][0]);slideTo[1][1]=slideTo[1][1].fAdd(trans[j][1][1]);slideTo[2]=slideTo[2].fMul(trans[j][2]);}
slideTo[1][0]=slideTo[1][0].fAdd(slide[i][1][0]);slideTo[1][1]=slideTo[1][1].fAdd(slide[i][1][1]);trans.splice(s+2,e-s);trans.inserts([slideTo],s+2);}}
var fix=(function(){var clear=(function(){for(var i=0;i<trans.length;i++){trans[i][0]=trans[i][0].toAbbreviated(0);}
for(var i=1;i<trans.length;i++){if(trans[i][0]==trans[i-1][0]){trans[i]=[trans[i][0],[trans[i-1][1][0].fAdd(trans[i][1][0]),trans[i-1][1][1].fAdd(trans[i][1][1])],trans[i-1][2].fMul(trans[i][2])];trans.splice(i-1,1);i-=1;}}})();var merge=(function(){var x=0;var y=0;var s=1;for(var i=0;i<trans.length;i++){x=x.fAdd(trans[i][1][0]);y=y.fAdd(trans[i][1][1]);s=s.fMul(trans[i][2]);cam.push([trans[i][0],[x,y],s]);}})();var xMax=0;var yMax=0;var sMax=1;var xMin=0;var yMin=0;var sMin=1;for(var i=0;i<cam.length;i++){xMax=Math.max(xMax,cam[i][1][0]);xMin=Math.min(xMin,cam[i][1][0]);yMax=Math.max(yMax,cam[i][1][1]);yMin=Math.min(yMin,cam[i][1][1]);sMax=Math.max(sMax,cam[i][2]);sMin=Math.min(sMin,cam[i][2]);}
var xyR=Math.max(xMax.fSub(xMin),yMax.fSub(yMin));var xyL=xyR.fAdd(sMax);for(var i=0;i<cam.length;i++){cam[i][1][0]=cam[i][1][0].fSub(xMin).fAdd(sMax.fDiv(2)).fDiv(xyL);cam[i][1][1]=cam[i][1][1].fSub(yMin).fAdd(sMax.fDiv(2)).fDiv(xyL);}
canvasSize[1]=Math.ceil(xyL).fMul(defaultCamSize).fMul(2);canvasSize[0]=canvasSize[1].fMul(1.5);})();if(isInoutCam){cam[0]=[0,[0.5,0.5],canvasSize[1].fDiv(defaultCamSize).fDiv(2)];cam[cam.length-1]=[data["info"]["length"]["when"]["t"],[0.5,0.5],canvasSize[1].fDiv(defaultCamSize).fDiv(2)];}
var compute=(function(){for(var i=0;i<cam.length;i++){cam[i][1][0]=cam[i][1][0].fMul(canvasSize[0]);cam[i][1][1]=cam[i][1][1].fMul(canvasSize[1]);cam[i][2]=cam[i][2].fMul(defaultCamSize);}})();}
return cam;})();var camList=(function(){var v=[];for(var i=0;i<camData.length;i++){v[i]={};v[i]["mIdx"]=i;v[i]["mTick"]=camData[i][0].fAdd(delay).fAdd(offset).toAbbreviated(0);v[i]["mGrid"]=gridFromBeat(beatFromTime(data,camData[i][0]));v[i]["mPos"]=[camData[i][1][0].toAbbreviated(0),camData[i][1][1].toAbbreviated(0)];v[i]["mSize"]=camData[i][2].toAbbreviated(6).toAccurated();v[i]["Pos"]=[camData[i][1][0].toAbbreviated(0),camData[i][1][1].toAbbreviated(0)];v[i]["Size"]=camData[i][2].toAbbreviated(6).toAccurated();}
return v;})();var notes=(function(){var v=[];for(var i=0;i<noteData.length;i++){var x=noteData[i]["where"]["x"];var y=noteData[i]["where"]["y"];v[i]={};v[i]["mIdx"]=i;v[i]["mTick"]=noteData[i]["when"]["t"].fAdd(delay).fAdd(offset).toAbbreviated(0);v[i]["mGrid"]=gridFromBeat(noteData[i]["when"]["b"]);v[i]["mShowNoteTick"]=timeFromBeat(data,noteData[i]["when"]["b"].fSub(2)).fAdd(delay).fAdd(offset).toAbbreviated(0);v[i]["mShowNoteGridLength"]=v[i]["mGrid"].fSub(gridFromBeat(noteData[i]["when"]["b"].fSub(2)));v[i]["mPos"]=getPos(v[i]["mTick"],[x,y]);v[i]["mStartDistance"]=(getCam(v[i]["mTick"])[2].fMul(1.25)).toAbbreviated(0);v[i]["mStartDirection"]=(function(){var d=["Up","UpLeft","Left","DownLeft","Down","DownRight","Right","UpRight"];var m=[7,0,1,6,0,2,5,4,3];var q=(x.fMul(3)|0)+(y.fMul(3)|0)*3;return d[m[q]];})();v[i]["mStartPos"]=(function(){switch(v[i]["mStartDirection"]){case"UpRight":return[v[i]["mPos"][0].fAdd(v[i]["mStartDistance"]),v[i]["mPos"][1].fAdd(v[i]["mStartDistance"])];break;case"Right":return[v[i]["mPos"][0].fAdd(v[i]["mStartDistance"]),v[i]["mPos"][1]];break;case"DownRight":return[v[i]["mPos"][0].fAdd(v[i]["mStartDistance"]),v[i]["mPos"][1].fSub(v[i]["mStartDistance"])];break;case"Down":return[v[i]["mPos"][0],v[i]["mPos"][1].fSub(v[i]["mStartDistance"])];break;case"DownLeft":return[v[i]["mPos"][0].fSub(v[i]["mStartDistance"]),v[i]["mPos"][1].fSub(v[i]["mStartDistance"])];break;case"Left":return[v[i]["mPos"][0].fSub(v[i]["mStartDistance"]),v[i]["mPos"][1]];break;case"UpLeft":return[v[i]["mPos"][0].fSub(v[i]["mStartDistance"]),v[i]["mPos"][1].fAdd(v[i]["mStartDistance"])];break;case"Up":return[v[i]["mPos"][0],v[i]["mPos"][1].fAdd(v[i]["mStartDistance"])];break;}})();v[i]["mDrawArrow"]="false";v[i]["mArrowRota"]=0;v[i]["mDrawLink"]="false";v[i]["mLinkPos"]=[0,0];v[i]["mLinkNoteIdx"]=-1;v[i]["mNoteInCurve"]="true";v[i]["mSamePosPreNoteIdx"]=-1;v[i]["type"]=noteData[i]["type"];switch(v[i]["type"]){case"CNoteSingle":break;case"CNoteSlide":v[i]["mSlideDirection"]=noteData[i]["direction"];break;case"CNoteLong":case"CNoteLongSlide":v[i]["mEndTick"]=noteData[i]["when2"]["t"].fAdd(delay).fAdd(offset).toAbbreviated(0);v[i]["mEndGrid"]=gridFromBeat(noteData[i]["when2"]["b"]);v[i]["mTailLength"]=v[i]["mTick"].fSub(v[i]["mShowNoteTick"]).fMul(0.75).toAbbreviated(0);if(noteData[i]["line"]){v[i]["mPoints"]=(function(){var p=[];for(var j=0;j<noteData[i]["line"]["vector"].length;j++){p.push(getPos(noteData[i]["line"]["vector"][j][0],noteData[i]["line"]["vector"][j][1]));}
return p;})();v[i]["mIsCircleClockwise"]=noteData[i]["line"]["clockwise"];v[i]["mIsCircleTail"]=(v[i]["mIsCircleClockwise"]?"true":"false");v[i]["mIsHeadFollowType"]=noteData[i]["line"]["follow"];v[i]["mJudgeCnt"]=noteData[i]["line"]["combo"];if(v[i]["type"]=="CNoteLong"){v[i]["mIsHeadFollowType"]=(function(){for(var j=1;j<noteData[i]["line"]["vector"].length;j++){if((noteData[i]["line"]["vector"][j][1][0]!=noteData[i]["line"]["vector"][j-1][1][0])||(noteData[i]["line"]["vector"][j][1][1]!=noteData[i]["line"]["vector"][j-1][1][1])){return"false";}}
return"true";})();}}
else{v[i]["mPoints"]=(function(){var p=[];var isSimple=false;if(isSimple){p.push(getPos(v[i]["mTick"],[x,y]));p.push(getPos(v[i]["mEndTick"],[noteData[i]["where2"]["x"],noteData[i]["where2"]["y"]]));}
else{var b=[];var s=Math.ceil(noteData[i]["when"]["b"]);var e=Math.floor(noteData[i]["when2"]["b"]);if(s.fSub(noteData[i]["when"]["b"])>0.01){b.push(noteData[i]["when"]["b"]);}
for(var j=s;j<e.fAdd(1);j++){b.push(j);}
if(noteData[i]["when2"]["b"].fSub(e)>0.01){b.push(noteData[i]["when2"]["b"]);}
for(var j=0;j<b.length;j++){p.push(getPos(timeFromBeat(data,b[j]),[x.fAdd(b[j].fSub(b[0]).fDiv(b[b.length-1].fSub(b[0])).fMul(noteData[i]["where2"]["x"].fSub(x))),axisFromNote(data,noteFromBeat(data,b[j]))]));}}
return p;})();v[i]["mIsCircleTail"]=(function(){if(v[i]["mPoints"]&&(v[i]["mPoints"].length==2)){var m=[v[i]["mPoints"][0][0].fAdd(v[i]["mPoints"][1][0]).fDiv(2),v[i]["mPoints"][0][1].fAdd(v[i]["mPoints"][1][1]).fDiv(2)];var r=Math.getPythagorean(v[i]["mPoints"][1][0].fSub(v[i]["mPoints"][0][0]),v[i]["mPoints"][1][1].fSub(v[i]["mPoints"][0][1])).fDiv(2);var c=getCam(v[i]["mEndTick"].fSub(v[i]["mTick"]));if((m[0].fAdd(r)<=c[1][0].fAdd(c[2]))&&(m[1].fAdd(r)<=c[1][1].fAdd(c[2]))&&(m[0].fSub(r)<=c[1][0].fSub(c[2]))&&(m[1].fSub(r)<=c[1][1].fSub(c[2]))){return"true";}}
return"false";})();}
v[i]["mIsCircleClockwise"]=v[i]["mIsCircleClockwise"]||(!(noteData[i]["when"]["b"]%1<0.5)^(x<0.5)?"true":"false");v[i]["mIsHeadFollowType"]=v[i]["mIsHeadFollowType"]||"false";v[i]["mJudgeCnt"]=v[i]["mJudgeCnt"]||Math.max((noteData[i]["when2"]["b"].fSub(noteData[i]["when"]["b"]).fMul(4)|0)+1,2);if(v[i]["mPoints"]){for(var j=1;j<v[i]["mPoints"].length;j++){if((Math.abs(v[i]["mPoints"][j][0].fSub(v[i]["mPoints"][j-1][0]))<15)&&(Math.abs(v[i]["mPoints"][j][1].fSub(v[i]["mPoints"][j-1][1]))<15)){v[i]["mPoints"][j][0]=v[i]["mPoints"][j-1][0].fAdd((v[i]["mPoints"][j][0]>v[i]["mPoints"][j-1][0]?15:-15));v[i]["mPoints"][j][1]=v[i]["mPoints"][j-1][1].fAdd((v[i]["mPoints"][j][1]>v[i]["mPoints"][j-1][1]?15:-15));}}}
break;}}
for(var i=0;i<v.length;i++){for(var j=i+1;j<v.length;j++){if(v[i]["mTick"]!=v[j]["mTick"]){break;}
if((v[i]["type"]==v[j]["type"])&&!((v[i]["type"]=="CNoteLong")&&((v[i]["mIsHeadFollowType"]=="true")||(v[j]["mIsHeadFollowType"]=="true")))){v[i]["mDrawLink"]="true";v[i]["mLinkPos"]=v[j]["mPos"];v[i]["mLinkNoteIdx"]=v[j]["mIdx"];v[j]["mDrawLink"]="false";v[j]["mLinkPos"]=v[i]["mPos"];v[j]["mLinkNoteIdx"]=v[i]["mIdx"];i+=1;break;}}}
for(var i=0;i<v.length;i++){var j=i+1;if(v[i]["mDrawLink"]=="true"){j+=1;}
if(j>v.length-1){break;}
v[i]["mDrawArrow"]="true";v[i]["mArrowRota"]=getRota(v[j]["mPos"][0].fSub(v[i]["mPos"][0]),v[j]["mPos"][1].fSub(v[i]["mPos"][1]));}
for(var i=1;i<v.length;i++){for(var j=i-1;j>-1;j--){if((v[j]["mPos"][0]==v[i]["mPos"][0])&&(v[j]["mPos"][1]==v[i]["mPos"][1])){v[i]["mSamePosPreNoteIdx"]=v[j]["mIdx"];break;}}}
return v;})();var bpmList=(function(){var v=[];if(data){for(var i=0;i<data["beat"].length;i++){v[i]={};v[i]["mIdx"]=i;v[i]["mTick"]=data["beat"][i]["when"]["t"].fAdd(delay).fAdd(offset).toAbbreviated(0);v[i]["mGrid"]=gridFromBeat(data["beat"][i]["when"]["b"]);v[i]["mBPM"]=data["beat"][i]["bpm"].fMul(data["beat"][i]["fpn"]>0?data["beat"][i]["fpn"]:1);v[i]["BPM"]=v[i]["mBPM"];}}
return v;})();var judgeCnt=(function(){var r=0;for(var i=0;i<notes.length;i++){switch(notes[i]["type"]){case"CNoteSingle":case"CNoteSlide":r+=1;break;case"CNoteLong":case"CNoteLongSlide":r+=notes[i]["mJudgeCnt"];break;}}
return r;})();var xml=(function(){var writeString=function(l,c){if(isUndefined(c)){return;}
r.push(" ".repeat(2*l)+c);};var writeData=function(l,f,c){if(isUndefined(c)){return;}
r.push(" ".repeat(2*l)+"<"+f+">"+c+"</"+f+">");};var writePos=function(l,f,p){if(isUndefined(p)){return;}
writeString(l,"<"+f+">");writeData(l+1,"x",p[0]);writeData(l+1,"y",p[1]);writeString(l,"</"+f+">");};var writePoints=function(l,f,p){if(isUndefined(p)){return;}
writeString(l,"<"+f+">");for(var i=0;i<p.length;i++){writePos(l+1,"Vector2",p[i]);}
writeString(l,"</"+f+">");};var writeBPMList=function(l){if(bpmList.length>1){writeString(l,"<mBPMList>");for(var i=0;i<bpmList.length;i++){writeString(l+1,"<CNoteBPMData>");writeData(l+2,"mIdx",bpmList[i]["mIdx"]);writeData(l+2,"mGrid",bpmList[i]["mGrid"]);writeData(l+2,"mTick",bpmList[i]["mTick"]);writeData(l+2,"mBPM",bpmList[i]["mBPM"]);writeData(l+2,"BPM",bpmList[i]["BPM"]);writeString(l+1,"</CNoteBPMData>");}
writeString(l,"</mBPMList>");}
else{writeString(l,"<mBPMList />");}};var writeNotes=function(l,c){if(c.length){writeString(l,"<mNotes>");for(var i=0;i<c.length;i++){writeString(l+1,"<CNoteBase xsi:type=&quot;"+c[i]["type"]+"&quot;>");writeData(l+2,"mIdx",c[i]["mIdx"]);writeData(l+2,"mGrid",c[i]["mGrid"]);writeData(l+2,"mTick",c[i]["mTick"]);writeData(l+2,"mShowNoteGridLength",c[i]["mShowNoteGridLength"]);writeData(l+2,"mShowNoteTick",c[i]["mShowNoteTick"]);writePos(l+2,"mPos",c[i]["mPos"]);writePos(l+2,"mStartPos",c[i]["mStartPos"]);writeData(l+2,"mStartDistance",c[i]["mStartDistance"]);writeData(l+2,"mStartDirection",c[i]["mStartDirection"]);writeData(l+2,"mDrawArrow",c[i]["mDrawArrow"]);writeData(l+2,"mArrowRota",c[i]["mArrowRota"]);writeData(l+2,"mDrawLink",c[i]["mDrawLink"]);writePos(l+2,"mLinkPos",c[i]["mLinkPos"]);writeData(l+2,"mLinkNoteIdx",c[i]["mLinkNoteIdx"]);writeData(l+2,"mNoteInCurve",c[i]["mNoteInCurve"]);writeData(l+2,"mSamePosPreNoteIdx",c[i]["mSamePosPreNoteIdx"]);writeData(l+2,"mSlideDirection",c[i]["mSlideDirection"]);writeData(l+2,"mIsCircleTail",c[i]["mIsCircleTail"]);writeData(l+2,"mIsCircleClockwise",c[i]["mIsCircleClockwise"]);writePoints(l+2,"mPoints",c[i]["mPoints"]);writeData(l+2,"mTailLength",c[i]["mTailLength"]);writeData(l+2,"mEndGrid",c[i]["mEndGrid"]);writeData(l+2,"mEndTick",c[i]["mEndTick"]);writeData(l+2,"mIsHeadFollowType",c[i]["mIsHeadFollowType"]);writeData(l+2,"mJudgeCnt",c[i]["mJudgeCnt"]);writeString(l+1,"</CNoteBase>");}
writeString(l,"</mNotes>");}
else{writeString(l,"<mNotes />");}};var writeCamList=function(l){if(camList.length){writeString(l,"<mCamList>");for(var i=0;i<camList.length;i++){writeString(l+1,"<CNoteCamData>");writeData(l+2,"mIdx",camList[i]["mIdx"]);writeData(l+2,"mGrid",camList[i]["mGrid"]);writeData(l+2,"mTick",camList[i]["mTick"]);writePos(l+2,"mPos",[camList[i]["mPos"][0],camList[i]["mPos"][1]]);writeData(l+2,"mSize",camList[i]["mSize"]);writePos(l+2,"Pos",[camList[i]["Pos"][0],camList[i]["Pos"][1]]);writeData(l+2,"Size",camList[i]["Size"]);writeString(l+1,"</CNoteCamData>");}
writeString(l,"</mCamList>");}
else{writeString(l,"<mCamList />");}};var r=[];writeString(0,"<?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?>");writeString(0,"<CTimeStream xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xsi:type=&quot;CNoteStream&quot;>");writeData(1,"mLength",((data?data["info"]["length"]["when"]["t"]:newItem("when")["t"])).fDiv(1000));writeString(1,"<mChildStreams />");writeData(1,"mSongName",songName);writeData(1,"mStartDelay",delay.fDiv(1000));writeData(1,"mBGImagePath","Assets/Resources/Song/"+songName+"/"+songName+"_ipad.jpg");writeData(1,"mJudgeCnt",judgeCnt);writeData(1,"mBPM",(data?getBeat(data,0)["bpm"]:newItem("beat")["bpm"]));writeBPMList(1);writeNotes(1,notes);writePos(1,"mCanvasSize",canvasSize);writeCamList(1);writeData(1,"mDefaultCamSize",defaultCamSize);writeData(1,"mFixCamSize",false);writeData(1,"mPosGridSize",40);writeData(1,"mKeepOnGrid",true);writeData(1,"mShowGrid",false);writeData(1,"mShowBG",true);writeData(1,"mVisualGridType","G6");writeData(1,"DefaultCamSize",defaultCamSize);writeString(0,"</CTimeStream>");return r;})();return xml.join("\r\n").fromHtml();break;case"dynamix":var toPosition=function(p){return p.fMul(9).fSub(2);};var fixNotes=function(t){t=t.sort(function(a,b){return(a["time"]-b["time"])||(a["position"]-b["position"])});var v=[];for(var i=0;i<t.length;i++){if(t[i]["type"]=="HOLD"){v.push({"id":v.length,"type":t[i]["type"],"time":t[i]["time"],"position":t[i]["position"],"width":t[i]["width"],"subId":v.length+1});v.push({"id":v.length,"type":"SUB","time":t[i]["endTime"],"position":t[i]["position"],"width":t[i]["width"],"subId":-1});}
else{v.push({"id":v.length,"type":t[i]["type"],"time":t[i]["time"],"position":t[i]["position"],"width":t[i]["width"],"subId":-1});}}
return v;};var data=repairData(toData(toData(toData(toData(toData(toData(toData(toData(extData(mergeData(Semi["data"][index]),index),"InvalidKeyRemove"),"FakeKeyRemove"),"NoOblique"),"NoSlide"),"NoFlowBackward"),"NoFlowStop"),"NoFlowChange"),"BpmUnified"),index);var notes=[];var notesLeft=[];var notesRight=[];for(var i=0;i<data["note"].length;i++){if(data["note"][i]["link"]["b"]==-1){var x=(data["note"][i]["where"]["x"]==-1?0:data["note"][i]["where"]["x"]);var y=(data["note"][i]["where"]["y"]==-1?0:data["note"][i]["where"]["y"]);var d={};d["time"]=data["note"][i]["when"]["b"].toAccurated().toAbbreviated(8).toAccurated();d["width"]=(data["note"][i]["flag"]&&data["note"][i]["flag"]["size"]&&(data["note"][i]["flag"]["size"]["w"]>0)?data["note"][i]["flag"]["size"]["w"]:1);d["endTime"]=((data["note"][i]["link"]["a"]!=-1)&&data["note"][data["note"][i]["link"]["a"]]?data["note"][data["note"][i]["link"]["a"]]["when"]["b"].toAccurated().toAbbreviated(8).toAccurated():undefined);d["type"]=(d["endTime"]?"HOLD":(data["note"][i]["flag"]&&data["note"][i]["flag"]["catch"]?"CHAIN":"NORMAL"));var side=((y>x)&&(y<1-x)?"left":((y<x)&&(y>1-x)?"right":""));d["position"]=toPosition(side?y:x).fSub(d["width"].fDiv(2)).toAccurated().toAbbreviated(8).toAccurated();switch(side){case"":notes.push(d);break;case"left":notesLeft.push(d);break;case"right":notesRight.push(d);break;}}}
notes=fixNotes(notes);notesLeft=fixNotes(notesLeft);notesRight=fixNotes(notesRight);var xml=(function(){var isMixer=function(t){return t.some(function(a){return a["type"]=="CHAIN";});};var writeString=function(l,c){if(isUndefined(c)){return;}
r.push(" ".repeat(2*l)+c);};var writeData=function(l,f,c){if(isUndefined(c)){return;}
r.push(" ".repeat(2*l)+"<"+f+">"+c+"</"+f+">");};var writeNotes=function(l,f,c){writeString(l,"<"+f+">");if(c.length){writeString(l+1,"<m_notes>");for(var i=0;i<c.length;i++){writeString(l+2,"<CMapNoteAsset>");writeData(l+3,"m_id",c[i]["id"]);writeData(l+3,"m_type",c[i]["type"]);writeData(l+3,"m_time",c[i]["time"]);writeData(l+3,"m_position",c[i]["position"]);writeData(l+3,"m_width",c[i]["width"]);writeData(l+3,"m_subId",c[i]["subId"]);writeString(l+2,"</CMapNoteAsset>");}
writeString(l+1,"</m_notes>");}
else{writeString(l+1,"<m_notes />");}
writeString(l,"</"+f+">");};var r=[];writeString(0,"<?xml version=&quot;1.0&quot;?>");writeString(0,"<CMap xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;>");writeData(1,"m_path",fileInfo.nameCore);writeData(1,"m_barPerMin",data["info"]["bpm"]);writeData(1,"m_timeOffset",0);writeData(1,"m_leftRegion",(isMixer(notesLeft)?"MIXER":"PAD"));writeData(1,"m_rightRegion",(isMixer(notesRight)?"MIXER":"PAD"));writeData(1,"m_mapID","_map_"+fileInfo.nameCore+Info.suffixDynamix);writeNotes(1,"m_notes",notes);writeNotes(1,"m_notesLeft",notesLeft);writeNotes(1,"m_notesRight",notesRight);writeString(0,"</CMap>");return r;})();return xml.join("\r\n").fromHtml();break;case"qqx5":var toBar=function(n){return n|0;};var toPos=function(n){return(n%1).fMul(dpn)|0;};var toLength=function(n){return Math.round(n.fMul(dpn));};var toDegree=function(x,y){var r=0;if(x==0){if(y>0){r=90;}
if(y<0){r=-90;}}
else if(y==0){if(x>0){r=180;}
if(x<0){r=0;}}
else{r=Math.atan2(y,(0).fSub(x)).fDiv(Math.PI).fMul(180);}
r=(r<90?r+360:r);return r;};var mode=["idol","crescent","pinball","classic","bubble"].indexOf(type2);var bpn=4;var dpn=64;var meta=Semi["meta"];var data=(function(){var data=toData(toData(toData(toData(toData(toData(toData(extData(mergeData(Semi["data"][index]),index),"InvalidKeyRemove"),"FakeKeyRemove"),"NoFlowBackward"),"NoFlowStop"),"NoFlowChange"),"BpmUnified"),"BpnUnified",{"BpnUnified":bpn});switch(mode){case 0:data=toData(data,"NoOblique");break;case 1:data=toData(data,"TransOblique");break;case 2:data=toData(data,"NoSlide");break;case 3:data=toData(toData(data,"NoSlide"),"NoLong");break;case 4:data=toData(data,"EquilongDrag");break;}
return repairData(data,index);})();var key=(data["info"]["key"]?data["info"]["key"]:newItem("info")["key"]);var barAmount=Math.ceil(data["info"]["max"]["when"]["n"]);var beginBarLen=4;var noteTimes=[];var showTimes=[];var sectionSeq=(function(){var v=[];for(var i=0;i<data["status"].length;i++){if(data["status"][i]["name"]=="qqx5_section"){var d=data["status"][i]["value"].split(",");v.push({"endBar":data["status"][i]["when"]["n"],"type":(d[0]||"").trim(),"mark":(d[1]||"").trim(),"param1":(d[2]||"").trim()});}}
if((v.length<1)||(v[0]["type"]!="previous")){v.insert({"endBar":0,"type":"previous","mark":"","param1":""},0);}
if((v.length<2)||(v[1]["type"]!="begin")){v.insert({"endBar":4,"type":"begin","mark":"","param1":""},1);}
beginBarLen=v[1]["endBar"]-v[0]["endBar"];v[0]["param1"]=(beginBarLen==4?"wutai_scene_pre_script_1":"wutai_scene_pre_script_2");v[1]["param1"]=(beginBarLen==4?"wutai_scene_begin_script_1":"wutai_scene_begin_script_2");if((v.length<3)||(v[2]["type"]!="note")){v.insert({"endBar":barAmount-4,"type":"note","mark":"","param1":""},2);v.insert({"endBar":barAmount,"type":"showtime","mark":"dance","param1":""},3);v=v.slice(0,4);}
for(var i=1;i<v.length;i++){v[i]["startBar"]=(isUndefined(v[i]["startBar"])?v[i-1]["endBar"]+1:v[i]["startBar"]);if(v[i]["type"]=="note"){noteTimes.push([v[i-1]["endBar"]+1,v[i]["endBar"]+1]);}
if(v[i]["type"]=="showtime"){showTimes.push([v[i-1]["endBar"]+1,v[i]["endBar"]+1]);}}
if(v[v.length-1]["type"]=="showtime"){v[v.length-1]["mark"]="pose_xuanku";}
return v;})();var indicatorResetPos=(function(){var v=[];if(type2=="bubble"){for(var i=0;i<data["status"].length;i++){if(data["status"][i]["name"]=="qqx5_indicator"){if(data["status"][i]["value"]){v.push({"bar":toBar(data["status"][i]["when"]["n"]),"beatPos":toPos(data["status"][i]["when"]["n"])});}}}
if(!v.length){for(var i=0;i<sectionSeq.length;i++){if(sectionSeq[i]["type"]=="note"){var b=sectionSeq[i]["startBar"];var e=sectionSeq[i]["endBar"];while(b<e){v.push({"bar":b,"beatPos":0});b+=4;}}}}}
return v;})();var normal=(function(){var m=(function(){var v=[];var k=key;if(k%2){v.push("Middle");k-=1;}
var n=0;while(k){n+=1;v.unshift("Left"+n);v.push("Right"+n);k-=2;}
return v;})();var c=[["长按直线2",0,1],["长按弧",0,1],["长按直线1.5",0,1.5],["长按直线",0,2],["长按2拍直角",0,2],["长按波浪2拍",0,2],["长按直角对称",0,2],["长按尖角2拍",0,2],["长按折线",0,2],["长按2拍弧线",0,2],["长按S形",0,2],["长按音符",0,2],["长按小山",0,2],["长按尖叫",0,2],["长按2拍弧线对称",0,2],["长按波形",0,2],["长按波形对称",0,2],["长按弧线",0,3],["长按波浪",0,3],["长按弧线对称",0,3],["长按U型对称",0,3],["长按L型",0,3],["长按倒L型",0,3],["长按拱门",0,3],["长按音浪",0,3],["长按问号",0,3],["长按Z型",0,3],["长按S型",0,3],["V型3拍",0,3],["长按V型对称",0,3],["长按半圆",0,4],["长按卷卷",0,4],["长按机械",0,4],["长按机械对称",0,4],["长按爱心",0,6],["长按蘑菇",0,6],["长按无限型",0,6],["长按眼睛对称",0,6],["长按眼睛1",0,6],["长按ILU",0,6],["一箭穿心",0,6],["长按心电心左",0,6],["长按心电心右",0,6],["长按女标",0,6],["长按ILU2",0,7],["长按蝴蝶左",0,7],["长按蝴蝶右",0,7],["长按三叶草",0,8],["五角星",0,12],["长按曲线",0,16],["波浪形",1,2],["滑动1拍直线",2,1],["滑动直角边",2,1],["滑动直角边对称",2,1],["滑动弧",2,1],["滑动弧对称",2,1],["滑动圆弧",2,1.5],["滑动圆弧对称",2,1.5],["滑动波浪",2,1.5],["滑动直线",2,1.5],["滑动直角1.5",2,1.5],["滑动支线1.5对称",2,1.5],["滑动2拍弧线",2,2],["滑动直角形",2,2],["滑动直角形对称",2,2],["滑动反手弧线对称",2,2],["滑动反手弧线",2,2],["滑动缠绕",2,2],["滑动缠绕对称",2,2],["滑动问号",2,2],["滑动Z型",2,2],["滑动S型",2,2],["滑动2拍曲线",2,2],["滑动2拍弧线对称",2,2],["滑动弧线",2,2.5],["滑动弧线对称",2,2.5],["滑动M型",2,3],["滑动菱形3拍",2,3],["滑动β",2,3],["滑动M对称",2,3],["滑动椭圆",2,3],["滑动无限",2,4]];var v=[];var s=[];var l=0;for(var i=0;i<data["note"].length;i++){if(data["note"][i]["link"]["b"]==-1){var drag=[];var n=i;while(true){var note=data["note"][n]["when"]["n"].toAccurated();var track=xToTrack(data["note"][n]["where"]["x"],key);var isInNoteTime=(function(){for(var j=0;j<noteTimes.length;j++){if((note>=noteTimes[j][0])&&(note<=noteTimes[j][1])){return true;}}
return false;})();if(!isInNoteTime){break;}
if(!drag.length||(note!=drag[drag.length-1]["note"])||(track!=drag[drag.length-1]["track"])){var x=data["note"][n]["where"]["x"];var y=data["note"][n]["where"]["y"];var d=(data["note"][n]["flag"]["degree"]||toDegree(x.fSub(0.5),y.fSub(0.5))).toAbbreviated(4).toAccurated();var degree=(data["note"][n]["line"]["degree"]||d).toAbbreviated(4).toAccurated();drag.push({"note":note,"x":x,"y":y,"track":track,"from":(data["note"][n]["flag"]["appear"]["x"]!=-1?xToTrack(data["note"][n]["flag"]["appear"]["x"],key):undefined),"catch":data["note"][n]["flag"]["catch"],"flick":data["note"][n]["flag"]["flick"],"d":d,"follow":data["note"][n]["line"]["follow"],"name":data["note"][n]["line"]["name"],"degree":degree});}
if(data["note"][n]["link"]["a"]!=-1){n=data["note"][n]["link"]["a"];}
else{i=n;break;}}
if(drag.length){switch(mode){case 0:if(drag.length==1){v.push([{"noteType":"short","bar":toBar(drag[0]["note"]),"pos":toPos(drag[0]["note"]),"fromTrack":(!isUndefined(drag[0]["from"])?m[drag[0]["from"]]:m[drag[0]["track"]]),"targetTrack":m[drag[0]["track"]]}]);}
else{var d=[];for(var j=0;j<drag.length-1;j++){var fromTrack=(!j&&!isUndefined(drag[j]["from"])?m[drag[j]["from"]]:m[drag[j]["track"]]);if(drag[j]["note"]!=drag[j+1]["note"]){d.push({"noteType":"long","bar":toBar(drag[j]["note"]),"pos":toPos(drag[j]["note"]),"endBar":toBar(drag[j+1]["note"]),"endPos":toPos(drag[j+1]["note"]),"fromTrack":fromTrack,"targetTrack":m[drag[j]["track"]]});}
else if(drag[j]["track"]!=drag[j+1]["track"]){d.push({"noteType":"slip","bar":toBar(drag[j]["note"]),"pos":toPos(drag[j]["note"]),"fromTrack":fromTrack,"targetTrack":m[drag[j]["track"]],"endTrack":m[drag[j+1]["track"]]});}}
v.push(d);}
break;case 1:var tracks=[];var lengthes=[];for(var j=0;j<drag.length;j++){tracks.push(Math.round(drag[j]["x"].fMul(20)).fMul(5).fSub(50));lengthes.push(toLength(drag[j]["note"]-drag[j?j-1:0]["note"]));}
if((tracks.length>1)&&(lengthes[1]==lengthes[0])){tracks=tracks.slice(1);lengthes=lengthes.slice(1);}
if(tracks.length==1){v.push([{"noteType":(drag[0]["catch"]?"light":"short"),"bar":toBar(drag[0]["note"]),"pos":toPos(drag[0]["note"]),"track":tracks[0]}]);}
else if((tracks.length==2)&&(tracks[1]==tracks[0])){v.push([{"noteType":"long","bar":toBar(drag[0]["note"]),"pos":toPos(drag[0]["note"]),"track":tracks[0],"length":lengthes.slice(1).join(",")}]);}
else{v.push([{"noteType":"slip","bar":toBar(drag[0]["note"]),"pos":toPos(drag[0]["note"]),"track":tracks[0],"targetTrack":tracks.slice(1).join(","),"length":lengthes.slice(1).join(",")}]);}
break;case 2:var endArea=(drag[0]["x"]<0.5?"1|2":"3|4");if((drag.length==2)&&(drag[1]["note"]>drag[0]["note"])){v.push([{"id":v.length+1,"noteType":(drag[0]["catch"]?"PinballSeries":(drag[0]["flick"]?"PinballSlip":"PinballSingle")),"bar":toBar(drag[0]["note"]),"pos":toPos(drag[0]["note"]),"endBar":toBar(drag[1]["note"]),"endPos":toPos(drag[1]["note"]),"son":"","endArea":endArea,"moveTime":3}]);}
else{v.push([{"noteType":(drag[0]["catch"]?"PinballSeries":(drag[0]["flick"]?"PinballSlip":"PinballSingle")),"bar":toBar(drag[0]["note"]),"pos":toPos(drag[0]["note"]),"endArea":endArea,"moveTime":3,"id":v.length+1,"son":""}]);}
for(var j=0;j<v.length;j++){if(v[j][0]["noteType"]=="PinballSeries"){v[j][0]["son"]=(function(){for(var k=j+1;k<v.length;k++){var d=(v[k][0]["bar"]*dpn+v[k][0]["pos"])-(v[j][0]["bar"]*dpn+v[j][0]["pos"]);if((v[k][0]["noteType"]=="PinballSeries")&&(d==dpn/8)){return v[k][0]["id"];}
else if(d>dpn/8){break;}}
return"";})();}}
for(var j=0;j<v.length;j++){if(v[j][0]["noteType"]=="PinballSlip"){v[j][0]["son"]=(function(){for(var k=j+1;k<v.length;k++){var d=(v[k][0]["bar"]*dpn+v[k][0]["pos"])-(v[j][0]["bar"]*dpn+v[j][0]["pos"]);if((v[k][0]["noteType"]=="PinballSlip")&&(d==dpn*1.5)){return v[k][0]["id"];}
else if(d>dpn*1.5){break;}}
return"";})();}}
break;case 3:var n=drag[0]["note"]|0;s[n]=s[n]||0;s[n]+=1;break;case 4:var track=xToTrack(drag[0]["x"],5);var x=drag[0]["x"].fMul(1600).fSub(800)|0;var y=drag[0]["y"].fMul(800).fSub(400)|0;if((drag.length==2)&&(drag[1]["note"]>drag[0]["note"])){var name=drag[0]["name"];var t=(function(){for(var j=0;j<c.length;j++){if(c[j][0]==name){return c[j][1];}}
return-1;})();if((t!=0)&&(t!=2)){t=(drag[0]["follow"]||(drag[0]["x"]!=drag[1]["x"])||(drag[0]["y"]!=drag[1]["y"])?2:0);var b=(drag[1]["note"]-drag[0]["note"]).fMul(bpn);var lenList=(function(){var v=[];for(var j=0;j<c.length;j++){if(c[j][1]==t){v.push(c[j][2]);}}
return v.unrepeat();})();b=(function(){for(var j=0;j<lenList.length;j++){if((b>=lenList[j])&&((j+1==lenList.length)||(b<lenList[j+1]))){return lenList[j];}}
return lenList[0];})();var nameList=(function(){var v=[];for(var j=0;j<c.length;j++){if((c[j][1]==t)&&(c[j][2]==b)){v.push(c[j][0]);}}
return v;})();name=nameList[nameList.length.fMul(Math.random())|0];}
v.push([{"bar":toBar(drag[0]["note"]),"beatPos":toPos(drag[0]["note"]),"endBar":toBar(drag[1]["note"]),"endPos":toPos(drag[1]["note"]),"Track":track,"type":(t==0?1:2),"x":x,"y":y,"d":drag[0]["d"],"name":name,"degree":drag[0]["degree"],"id":l+1}]);l+=1;}
else{v.push([{"bar":toBar(drag[0]["note"]),"beatPos":toPos(drag[0]["note"]),"Track":track,"type":0,"x":x,"y":y,"d":drag[0]["d"]}]);}
break;}}}}
if(s.length){for(var i=0;i<s.length;i++){if(s[i]){v.push([{"bar":i,"length":1,"level":Math.min(s[i],7)}]);}}}
return v;})();var actionSeq=(function(){var v=[];for(var i=0;i<data["status"].length;i++){if(data["status"][i]["name"]=="qqx5_action"){var d=data["status"][i]["value"].split(",");v.push({"startBar":data["status"][i]["when"]["n"],"danceLen":(d[0]||"").trim(),"seqLen":(d[1]||"").trim(),"level":(d[2]||"2").trim(),"type":(d[3]||"").trim()});}}
for(var i=0;i<showTimes.length;i++){var hasShowTimeAction=v.some(function(a){return a["startBar"]==showTimes[i][0];});if(!hasShowTimeAction){v.push({"startBar":showTimes[i][0],"danceLen":showTimes[i][1]-showTimes[i][0],"seqLen":showTimes[i][1]-showTimes[i][0],"level":2,"type":""});}}
v=v.sort(function(a,b){return a["startBar"]-b["startBar"];});for(var i=0;i<v.length;i++){var s=(i?v[i-1]["startBar"]+v[i-1]["seqLen"]:beginBarLen+1);var d=v[i]["startBar"]-s;if(d>0){var a=[];var m=[1,2,4];for(var j=m.length-1;j>-1;j--){while(d>=m[j]){a.unshift(m[j]);d-=m[j];}}
for(var j=0;j<a.length;j++){v.insert({"startBar":s,"danceLen":(a[j]/2|0)||1,"seqLen":a[j],"level":2,"type":""},i);i+=1;s+=a[j];}}}
for(var i=0;i<v.length-1;i++){if(v[i]["startBar"]+v[i]["seqLen"]>v[i+1]["startBar"]){v[i]["seqLen"]=v[i+1]["startBar"]-v[i]["startBar"];}}
return v;})();var cameraSeq=(function(){var v=[];for(var i=0;i<data["status"].length;i++){if(data["status"][i]["name"]=="qqx5_camera"){v.push({"bar":toBar(data["status"][i]["when"]["n"]),"pos":toPos(data["status"][i]["when"]["n"]),"name":data["status"][i]["value"]});}}
for(var i=0;i<v.length;i++){v[i]["endBar"]=(i+1<v.length?v[i]["bar"]:barAmount);v[i]["endPos"]=(i+1<v.length?v[i]["pos"]:0);}
if(!v.length){v.push({"bar":beginBarLen+1,"pos":0,"endBar":barAmount+1,"endPos":0,"name":"SC"});}
return v;})();var dancerSort=(function(){var v=[];for(var i=10;i<barAmount-4;i+=2){v.push(i);}
return v;})();var stageEffectSeq=(function(){var v=[];v.push({"name":"wutai_scene_global_script","bar":-1,"length":-1});for(var i=0;i<sectionSeq.length;i++){if(sectionSeq[i]["type"]=="note"){v.push({"name":"wutai_scene_note_biaozhun_01","bar":sectionSeq[i]["startBar"],"length":sectionSeq[i]["endBar"]-sectionSeq[i]["startBar"]+1});}}
v.push({"name":"wutai_scene_note_biaozhun_01","bar":barAmount,"length":-1});return v;})();var xml=(function(){var writeString=function(l,c){if(isUndefined(c)){return;}
r.push(" ".repeat(2*l)+c);};var writeData=function(l,f,c){if(isUndefined(c)){return;}
r.push(" ".repeat(2*l)+"<"+f+">"+c+"</"+f+">");};var writeNote=function(l,c){if(isUndefined(c)){return;}
var d="";if(!isUndefined(c["noteType"])){d+=" note_type=&quot;"+c["noteType"]+"&quot;";}
d+=" Bar=&quot;"+c["bar"]+"&quot;";if(!isUndefined(c["pos"])){d+=" Pos=&quot;"+c["pos"]+"&quot;";}
if(!isUndefined(c["beatPos"])){d+=" BeatPos=&quot;"+c["beatPos"]+"&quot;";}
if(!isUndefined(c["track"])){d+=" track=&quot;"+c["track"]+"&quot;";}
if(!isUndefined(c["fromTrack"])&&(c["noteType"]!="slip")){d+=" from_track=&quot;"+c["fromTrack"]+"&quot;";}
if(!isUndefined(c["targetTrack"])){d+=" target_track=&quot;"+c["targetTrack"]+"&quot;";}
if(!isUndefined(c["endTrack"])&&(c["noteType"]=="slip")){d+=" end_track=&quot;"+c["endTrack"]+"&quot;";}
if(!isUndefined(c["endBar"])&&!isUndefined(c["endPos"])&&((c["endBar"]!=c["bar"])||(c["endPos"]!=c["pos"]))){d+=" EndBar=&quot;"+c["endBar"]+"&quot;";d+=" EndPos=&quot;"+c["endPos"]+"&quot;";}
if(!isUndefined(c["length"])){d+=" length=&quot;"+c["length"]+"&quot;";}
if(!isUndefined(c["endArea"])){d+=" EndArea=&quot;"+c["endArea"]+"&quot;";}
if(!isUndefined(c["moveTime"])){d+=" MoveTime=&quot;"+c["moveTime"]+"&quot;";}
if(!isUndefined(c["level"])){d+=" level=&quot;"+c["level"]+"&quot;";}
if(!isUndefined(c["Track"])){d+=" Track=&quot;"+c["Track"]+"&quot;";}
if(!isUndefined(c["type"])){d+=" Type=&quot;"+c["type"]+"&quot;";}
if(!isUndefined(c["id"])){d+=" ID=&quot;"+c["id"]+"&quot;";}
if(!isUndefined(c["son"])){d+=" Son=&quot;"+c["son"]+"&quot;";}
if(!isUndefined(c["x"])&&!isUndefined(c["y"])&&!isUndefined(c["d"])){r.push(" ".repeat(2*l)+"<Note"+d+">");if(!isUndefined(c["name"])&&!isUndefined(c["degree"])){r.push(" ".repeat(2*(l+1))+"<MoveTrack name=&quot;"+c["name"]+"&quot; degree=&quot;"+c["degree"]+"&quot; />");r.push(" ".repeat(2*(l+1))+"<FlyTrack name=&quot;波浪形&quot; degree=&quot;"+c["d"]+"&quot; />");r.push(" ".repeat(2*(l+1))+"<ScreenPos x=&quot;"+c["x"]+"&quot; y=&quot;"+c["y"]+"&quot; />");}
else{r.push(" ".repeat(2*(l+1))+"<ScreenPos x=&quot;"+c["x"]+"&quot; y=&quot;"+c["y"]+"&quot;>");r.push(" ".repeat(2*(l+2))+"<FlyTrack name=&quot;波浪形&quot; degree=&quot;"+c["d"]+"&quot; />");r.push(" ".repeat(2*(l+1))+"</ScreenPos>");}
r.push(" ".repeat(2*l)+"</Note>");}
else{r.push(" ".repeat(2*l)+"<Note"+d+" />");}};var writeSection=function(l,c){if(isUndefined(c)){return;}
var d="";d+=" type=&quot;"+c["type"]+"&quot;";if(!isUndefined(c["startBar"])){d+=" startbar=&quot;"+c["startBar"]+"&quot;";}
d+=" endbar=&quot;"+c["endBar"]+"&quot;";d+=" mark=&quot;"+c["mark"]+"&quot;";d+=" param1=&quot;"+c["param1"]+"&quot;";r.push(" ".repeat(2*l)+"<Section"+d+" />");};var writeIndicator=function(l,c){if(isUndefined(c)){return;}
var d="";d+=" Bar=&quot;"+c["bar"]+"&quot;";d+=" BeatPos=&quot;"+c["beatPos"]+"&quot;";r.push(" ".repeat(2*l)+"<Pos"+d+" />");};var writeAction=function(l,c){if(isUndefined(c)){return;}
var d="";d+=" start_bar=&quot;"+c["startBar"]+"&quot;";d+=" dance_len=&quot;"+c["danceLen"]+"&quot;";d+=" seq_len=&quot;"+c["seqLen"]+"&quot;";d+=" level=&quot;"+c["level"]+"&quot;";d+=" type=&quot;"+c["type"]+"&quot;";r.push(" ".repeat(2*l)+"<ActionList"+d+" />");};var writeCamera=function(l,c){if(isUndefined(c)){return;}
var d="";d+=" name=&quot;"+c["name"]+"&quot;";d+=" bar=&quot;"+c["bar"]+"&quot;";d+=" pos=&quot;"+c["pos"]+"&quot;";d+=" end_bar=&quot;"+c["endBar"]+"&quot;";d+=" end_pos=&quot;"+c["endPos"]+"&quot;";r.push(" ".repeat(2*l)+"<Camera"+d+" />");};var writeBar=function(l,c){if(isUndefined(c)){return;}
r.push(" ".repeat(2*l)+"<Bar>"+c+"</Bar>");};var writeEffect=function(l,c){if(isUndefined(c)){return;}
var d="";d+=" name=&quot;"+c["name"]+"&quot;";d+=" bar=&quot;"+c["bar"]+"&quot;";d+=" length=&quot;"+c["length"]+"&quot;";r.push(" ".repeat(2*l)+"<effect"+d+" />");};var r=[];writeString(0,"<?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?>");writeString(0,"<Level>");writeString(1,"<LevelInfo>");writeData(2,"BPM",data["info"]["bpm"]);writeData(2,"BeatPerBar",bpn);writeData(2,"BeatLen",16);writeData(2,"EnterTimeAdjust",(data["info"]["globalOffset"]||Math.round(60000/data["info"]["bpm"]*4))|0);writeData(2,"NotePreShow",[1,0.75,1,1,2][mode]);writeData(2,"LevelTime",data["info"]["length"]["when"]["t"]|0);writeData(2,"BarAmount",barAmount);writeData(2,"BeginBarLen",beginBarLen);if(type2!="crescent"){var k=[data["info"]["key"],0,5,4,5][mode];writeData(2,"IsFourTrack",(k==4?"True":"False"));writeData(2,"TrackCount",k);}
writeData(2,"LevelPreTime",(data["info"]["previewStart"]>0?data["info"]["previewStart"]|0:4000));writeData(2,"Star",(data["info"]["level"]||10)|0);writeData(2,"type",["Idol","Crescent","PinBall","Classic","Bubble"][mode]);writeString(1,"</LevelInfo>");writeString(1,"<MusicInfo>");writeData(2,"Author",(meta["author"]||"制作人_XXX").toXml());writeData(2,"Title",(meta["title"]||"xxx").toXml());writeData(2,"Artist",(meta["artist"]||"xxx").toXml());writeData(2,"FilePath","audio/bgm/"+new FileInfo(getEffectInfo(data,"audio","name")).nameCore);writeString(1,"</MusicInfo>");if(sectionSeq.length){writeString(1,"<SectionSeq>");for(var i=0;i<sectionSeq.length;i++){writeSection(2,sectionSeq[i]);}
writeString(1,"</SectionSeq>");}
else{writeString(1,"<SectionSeq />");}
if(indicatorResetPos.length){writeString(1,"<IndicatorResetPos PosNum=&quot;64&quot;>");for(var i=0;i<indicatorResetPos.length;i++){writeIndicator(2,indicatorResetPos[i]);}
writeString(1,"</IndicatorResetPos>");}
else{writeString(1,"<IndicatorResetPos PosNum=&quot;64&quot; />");}
writeString(1,"<NoteInfo>");if(normal.length){writeString(2,"<Normal>");for(var i=0;i<normal.length;i++){if(normal[i].length==1){writeNote(3,normal[i][0]);}
else if(normal[i].length>1){writeString(3,"<CombineNote>");for(var j=0;j<normal[i].length;j++){writeNote(4,normal[i][j]);}
writeString(3,"</CombineNote>");}}
writeString(2,"</Normal>");}
else{writeString(2,"<Normal />");}
writeString(1,"</NoteInfo>");if(actionSeq.length){writeString(1,"<ActionSeq type=&quot;1&quot;>");for(var i=0;i<actionSeq.length;i++){writeAction(2,actionSeq[i]);}
writeString(1,"</ActionSeq>");}
else{writeString(1,"<ActionSeq type=&quot;1&quot; />");}
if(cameraSeq.length){writeString(1,"<CameraSeq>");for(var i=0;i<cameraSeq.length;i++){writeCamera(2,cameraSeq[i]);}
writeString(1,"</CameraSeq>");}
else{writeString(1,"<CameraSeq />");}
if(dancerSort.length){writeString(1,"<DancerSort>");for(var i=0;i<dancerSort.length;i++){writeBar(2,dancerSort[i]);}
writeString(1,"</DancerSort>");}
else{writeString(1,"<DancerSort />");}
if(stageEffectSeq.length){writeString(1,"<StageEffectSeq>");for(var i=0;i<stageEffectSeq.length;i++){writeEffect(2,stageEffectSeq[i]);}
writeString(1,"</StageEffectSeq>");}
else{writeString(1,"<StageEffectSeq />");}
writeString(0,"</Level>");return r;})();return xml.join("\r\n").fromHtml();}};var toVoxText=function(index){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var vox=[];return vox.join("\r\n");};var toKshText=function(index){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var ksh=[];return ksh.join("\r\n");};var toImdText=function(index){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var data=repairData(toData(toData(toData(toData(extData(mergeData(Semi["data"][index]),index),"InvalidKeyRemove"),"FakeKeyRemove"),"NoFlowBackward"),"NoFlowStop"),index);var offset=(0).fSub(data["info"]["start"]["when"]["t"]);data=(offset?toData(data,"OffsetWhen",{"OffsetWhen":offset}):data);var actionData=(function(){var r=[];if(data){var key=data["info"]["key"];var fromPoints=function(p){var v=[];if(p.length){for(var i=0;i<p.length;i++){p[i][1]=xToTrack(p[i][1],key);}
var isSplitPushOblique=true;if(isSplitPushOblique){for(var i=1;i<p.length;i++){var n=Math.abs(p[i][1].fSub(p[i-1][1])).fSub(1);if((p[i][0]!=p[i-1][0])&&(n>0)){var time=p[i-1][0];var track=p[i-1][1];var dTime=p[i][0].fSub(p[i-1][0]).fDiv(n.fAdd(1));var dTrack=p[i][1].fSub(p[i-1][1]).fDiv(n.fAdd(1));for(var j=0;j<n;j++){time=time.fAdd(dTime);track=track.fAdd(dTrack);p.insert([time,track],i);i+=1;}}}}
var t=-1;for(var i=0;i<p.length;i++){var action=0x00;var time=p[i][0];var track=p[i][1];var param=0;if(t!=-1){v.push([0x21,time,t,0]);t=-1;}
if(i+1<p.length){var time2=p[i+1][0];var track2=p[i+1][1];if(time2==time){action=0x21;param=track2.fSub(track);}
else{action=0x22;param=time2.fSub(time);if(track2!=track){t=track2;}}}
if((v.length>0)&&(action==v[v.length-1][0])){switch(action){case 0x21:v[v.length-1][3]=track2.fSub(v[v.length-1][2]);break;case 0x22:if(t!=-1){v.push([0x21,time,track,0]);v.push([action,time,track,param]);}
else{v[v.length-1][3]=v[v.length-1][3].fAdd(param);}
break;}}
else if((p.length==1)||((p.length>1)&&(i!=p.length-1))){v.push([action,time,track,param]);}}
if(t!=-1){v.push([0x21,v[v.length-1][1],t,0]);t=-1;}
if(v.length==1){v[0][0]=(v[0][0]==0x21?0x01:v[0][0]);v[0][0]=(v[0][0]==0x22?0x02:v[0][0]);}
else{v[0][0]=(v[0][0]==0x21?0x61:v[0][0]);v[0][0]=(v[0][0]==0x22?0x62:v[0][0]);v[v.length-1][0]=(v[v.length-1][0]==0x21?0xA1:v[v.length-1][0]);v[v.length-1][0]=(v[v.length-1][0]==0x22?0xA2:v[v.length-1][0]);}
for(var i=0;i<v.length;i++){v[i]=[v[i][0],v[i][1],Math.round(v[i][2]),Math.round(v[i][3])];}}
return v;};for(var i=0;i<data["note"].length;i++){if(data["note"][i]["link"]["b"]==-1){var p=[];var n=i;var t=data["note"][n]["when"]["t"];if(t>=0){p.push([t,data["note"][n]["where"]["x"]]);}
while(true){var a=data["note"][n]["link"]["a"];if(a!=-1){t=data["note"][a]["when"]["t"];if(t>=0){p.push([t,data["note"][a]["where"]["x"]]);}
n=a;}
else{if(data["note"][n]["flag"]["flick"]){p.push([t,data["note"][n]["where"]["x"]+(data["note"][n]["where"]["x"]*4%2<1?(1).fDiv(key):-(1).fDiv(key))]);}
break;}}
r.writes(fromPoints(p));}}}
return r;})();var beatData=(function(){var v=[];if(data){for(var i=0;i<data["beat"].length;i++){var time=data["beat"][i]["when"]["t"];var bpm=data["beat"][i]["bpm"].fMul(data["beat"][i]["bpn"]).fDiv(4).fMul(data["beat"][i]["fpn"]).toAbbreviated(6).toAccurated();if(!v.length||(bpm!=v[v.length-1][1])){v.push([time,bpm]);}}
if(!v.length){v.push([0,125]);}
if(v[0][0]>0){v[0][0]=0;}
if(v[v.length-1][0]<data["info"]["max"]["when"]["t"]){v.push([data["info"]["max"]["when"]["t"],v[v.length-1][1]]);}
var isFill=false;if(isFill){var v=[];for(var i=1;i<v.length;i++){v.push(v[i-1]);var s=Math.floor(beatFromTime(data,v[i-1][0]))+1;var e=Math.ceil(beatFromTime(data,v[i][0]));for(var j=s;j<e;j++){v.push([timeFromBeat(data,j),v[v.length-1][1]]);}}
v.push(v[v.length-1]);v=v;}}
return v;})();var buffer=(function(){var r=new Uint8Array(14+beatData.length*12+actionData.length*11);var noteData=[];var key=data["info"]["key"];var p=0;r.setInt32((data?data["info"]["length"]["when"]["t"]:newItem("when")["t"]),p,true);p+=4;r.setInt32(beatData.length,p,true);p+=4;for(var i=0;i<beatData.length;i++){r.setInt32(beatData[i][0],p,true);p+=4;r.setFloat64(beatData[i][1],p,true);p+=8;}
r.setUint8(3,p);p+=1;r.setUint8(3,p);p+=1;r.setInt32(actionData.length,p,true);p+=4;for(var i=0;i<actionData.length;i++){r.setInt16(actionData[i][0],p,true);p+=2;r.setInt32(actionData[i][1],p,true);p+=4;r.setUint8(actionData[i][2],p);p+=1;r.setInt32(actionData[i][3],p,true);p+=4;var t=actionData[i][1];var b=beatFromTime(data,t);var n=noteFromBeat(data,b);var x=actionData[i][2].fAdd(0.5).fDiv(key);var x2=(function(){var v=actionData[i][2];switch(actionData[i][0]){case 0x01:case 0x61:case 0x21:case 0xA1:v=actionData[i][2]+actionData[i][3];break;case 0x62:case 0x22:if(i!=actionData.length-1){switch(actionData[i+1][0]){case 0x21:case 0xA1:v=actionData[i+1][2];break;}
break;}}
return v.fAdd(0.5).fDiv(key);})();switch(actionData[i][0]){case 0x00:noteData.push({"action":actionData[i][0],"when":{"b":b,"n":n,"t":t},"where":{"x":x}});break;case 0x01:case 0x61:case 0x21:case 0xA1:noteData.push({"action":actionData[i][0],"when":{"b":b,"n":n,"t":t},"where":{"x":x},"where2":{"x":x2}});break;case 0x02:case 0x62:case 0x22:case 0xA2:var t2=actionData[i][1]+actionData[i][3];var b2=beatFromTime(data,t2);var n2=noteFromBeat(data,b2);noteData.push({"action":actionData[i][0],"when":{"b":b,"n":n,"t":t},"when2":{"b":b2,"n":n2,"t":t2},"where":{"x":x},"where2":{"x":x2}});break;}}
Semi["draw"][index]=Semi["draw"][index]||{};Semi["draw"][index]["imd"]=Semi["draw"][index]["imd"]||{};Semi["draw"][index]["imd"]["list"]=[{"data":data,"noteData":noteData}];Semi["draw"][index]["imd"]["valid"]=false;return r;})();var imd=(function(){var r=[];var writeHex=function(l){r.push(buffer.getHex(p,l," "));p+=l;};var p=0;writeHex(4);writeHex(4);for(var i=0;i<beatData.length;i++){writeHex(12);}
writeHex(2);writeHex(4);for(var i=0;i<actionData.length;i++){writeHex(11);}
return r.join("\r\n");})();return imd;};var toMdeText=function(index){Text["xmlmde"][index]=Text["xmlmde"][index]||toXmlText(index,"mde");Buffer["xmlmde"][index]=new Uint8Array().fromText(Text["xmlmde"][index]);if(!isUndefined(Buffer["xmlmde"][index])){var l=Buffer["xmlmde"][index].length;var n=0;while(true){n+=65536*4;if(l<=n){l=n;break;}}
var d=new Uint8Array(l);d.set(Buffer["xmlmde"][index],0);return d.getBase64();}};var toTxtText=function(index,type,version){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};switch(type){case"cytus":var writeCytus=function(n,v){var h=(arguments.length>2?arguments[2]:false);if(n){if(!isUndefined(v)&&(v!="")){cytus.push(n+"\t"+v);}
else if(!h){cytus.push(n+"\t");}}
else{if(!isUndefined(v)&&(v!="")){cytus.push(v);}
else if(!h){cytus.push("");}}};var timeToTick=function(t){return t.fDiv(1000);};var toX=function(x){return(x==0.999?1:x);};var data=extData(mergeData(Semi["data"][index]),index);var bpm=data["info"]["bpm"];var bpn=data["info"]["bpn"];data=repairData(toData(toData(toData(toData(toData(toData(toData(toData(data,"InvalidKeyRemove"),"FakeKeyRemove"),"TransOblique"),"NoFlowBackward"),"NoFlowStop"),"NoFlowChange"),"BpmUnified"),"BpnUnified",{"BpnUnified":bpn}),index);var cytus=[];var shift=(function(){for(var i=0;i<data["effect"].length;i++){if((data["effect"][i]["kind"]=="audio")&&(data["effect"][i]["while"]=="")&&data["effect"][i]["path"]){return data["effect"][i]["when"]["t"];}}
return 0;})();var blinkShift=data["info"]["blinkShift"]||0;var scanMode=data["info"]["scanMode"]||4;var pageShift=data["info"]["pageShift"]||0;var pageSize=60000*4/bpm;var notes=(function(){var v=[];for(var i=0;i<data["note"].length;i++){var drag=[];var n=i;while(true){drag.push({"time":data["note"][n]["when"]["t"].toAccurated(),"x":data["note"][n]["where"]["x"]});if(data["note"][n]["link"]["a"]!=-1){n=data["note"][n]["link"]["a"];}
else{i=n;break;}}
if(drag.length==1){v.push({"id":v.length,"time":drag[0]["time"],"x":drag[0]["x"],"duration":0,"type":0,"link":-1});}
else if((drag.length==2)&&(drag[0]["time"]==drag[1]["time"])){v.push({"id":v.length,"time":drag[0]["time"],"x":drag[0]["x"],"duration":0,"type":0,"link":-1});v.push({"id":v.length,"time":drag[1]["time"],"x":drag[1]["x"],"duration":0,"type":0,"link":-1});}
else if((drag.length==2)&&(drag[0]["x"]==drag[1]["x"])){v.push({"id":v.length,"time":drag[0]["time"],"x":drag[0]["x"],"duration":drag[1]["time"]-drag[0]["time"],"type":2,"link":-1});}
else{for(var j=0;j<drag.length;j++){v.push({"id":v.length,"time":drag[j]["time"],"x":drag[j]["x"],"duration":0,"type":(j?3:1),"link":(j+1<drag.length?v.length+1:-1)});}}}
v=v.sort(function(a,b){return(a["time"]-b["time"])||(a["x"]-b["x"]);});for(var i=0;i<v.length;i++){if(v[i]["link"]!=-1){v[i]["link"]=(function(){for(var j=0;j<v.length;j++){if(v[j]["id"]==v[i]["link"]){return j;}}
return-1;})();}}
return v;})();if(version){writeCytus("","VERSION 2");writeCytus("","BPM "+bpm.toFixed(6));writeCytus("",(shift?"SHIFT "+timeToTick(shift).toFixed(6):""),true);writeCytus("","PAGE_SHIFT "+timeToTick(pageShift).toFixed(6));writeCytus("","PAGE_SIZE "+timeToTick(pageSize).toFixed(6));for(var i=0;i<notes.length;i++){writeCytus("NOTE",[i,timeToTick(notes[i]["time"]).toFixed(6),notes[i]["x"].toFixed(6),timeToTick(notes[i]["duration"]).toFixed(6)].join("\t"));}
for(var i=0;i<notes.length;i++){if((notes[i]["link"]!=-1)&&!notes[i]["done"]){var links=[];var n=i;while(true){links.push(n);notes[n]["done"]=true;if((notes[n]["link"]!=-1)&&!notes[notes[n]["link"]]["done"]){n=notes[n]["link"];}
else{break;}}
writeCytus("","LINK "+links.join(" "));}}}
else{writeCytus("NAME",fileInfo.nameCore);writeCytus("BG_MUSIC","./data/songs/"+fileInfo.nameCore+".wav");writeCytus("BPM",bpm);writeCytus("SHIFT",(shift?timeToTick(shift).toFixed(6):""),true);writeCytus("BLINK_SHIFT",timeToTick(blinkShift).toFixed(6));writeCytus("SCAN_MODE",scanMode);var n=0;while(true){var s=n.fMul(pageSize);writeCytus("SECTION",[timeToTick(s).toFixed(6),timeToTick(pageSize).toFixed(6),(n%2?4:5)].join("\t"));if(s<notes[notes.length-1]["time"]){n+=1;}
else{break;}}
for(var i=0;i<notes.length;i++){writeCytus("NOTE",[i,0,timeToTick(notes[i]["time"]).toFixed(6),notes[i]["type"],toX(notes[i]["x"]).toAccurated().toFixed(6),notes[i]["link"],timeToTick(notes[i]["duration"]).toFixed(6)].join("\t"));}}
writeCytus("","");return cytus.join("\r\n");break;case"cytus2":var beatToTick=function(t){return Math.round(t*480);};var tickToPageIndex=function(t){for(var i=0;i<cytus2["page_list"].length;i++){if((i==cytus2["page_list"].length-1)||(t>=cytus2["page_list"][i]["start_tick"])&&(t<cytus2["page_list"][i+1]["start_tick"])){return i;}}};var toX=function(x){return(x==0.999?1:x);};var data=extData(mergeData(Semi["data"][index]),index);var bpn=data["info"]["bpn"];data=repairData(toData(toData(toData(toData(toData(toData(toData(data,"InvalidKeyRemove"),"FakeKeyRemove"),"TransOblique"),"NoFlowBackward"),"NoFlowStop"),"NoFlowChange"),"BpnUnified",{"BpnUnified":bpn}),index);var cytus2={};cytus2["format_version"]=0;cytus2["time_base"]=480;cytus2["start_offset_time"]=(function(){for(var i=0;i<data["effect"].length;i++){if((data["effect"][i]["kind"]=="audio")&&(data["effect"][i]["while"]=="")&&data["effect"][i]["path"]){return data["effect"][i]["when"]["t"];}}
return 0;})();cytus2["page_list"]=(function(){var scans=(function(){var v=[];for(var i=0;i<data["status"].length;i++){if(data["status"][i]["name"]=="scanDirection"){v.push({"beat":data["status"][i]["when"]["b"],"direction":data["status"][i]["value"]});}}
return v.sort(function(a,b){return a["beat"]-b["beat"];});})();if(!scans.length){scans.push({"beat":0,"direction":1});}
while(scans[scans.length-1]["beat"]<data["info"]["max"]["when"]["b"]+1){scans.push({"beat":scans[scans.length-1]["beat"].fAdd(2),"direction":-scans[scans.length-1]["direction"]});}
var v=[];for(var i=0;i<scans.length-1;i++){v.push({"start_tick":beatToTick(scans[i]["beat"]),"end_tick":beatToTick(scans[i+1]["beat"]),"scan_line_direction":scans[i]["direction"]});}
return v;})();cytus2["tempo_list"]=(function(){var beats=(function(){var v=[];for(var i=0;i<data["beat"].length;i++){if(!i||(data["beat"][i]["bpm"]!=data["beat"][i-1]["bpm"])){v.push({"beat":data["beat"][i]["when"]["b"],"bpm":data["beat"][i]["bpm"]});}}
return v;})();var v=[];for(var i=0;i<beats.length;i++){v.push({"tick":beatToTick(beats[i]["beat"]),"value":Math.round((60000000).fDiv(beats[i]["bpm"]))});}
return v;})();cytus2["event_order_list"]=(function(){var events=(function(){var v=[];var s="cytus2_";var set=function(b,e){var l=(function(){for(var i=0;i<v.length;i++){if(v[i]["beat"]==b){return i;}}
return-1;})();if(l!=-1){v[l]["value"].push(e);}
else{v.push({"beat":b,"value":[e]});}};for(var i=0;i<data["status"].length;i++){if(data["status"][i]["name"].startsWith(s)){var args=data["status"][i]["name"].slice(s.length);var type=(data["status"][i]["value"]?1:0);set(data["status"][i]["when"]["b"],{"type":type,"args":args});}}
v=v.sort(function(a,b){return a["beat"]-b["beat"];});return v;})();var v=[];for(var i=0;i<events.length;i++){v.push({"tick":beatToTick(events[i]["beat"]),"event_list":events[i]["value"]});}
return v;})();cytus2["note_list"]=(function(){var notes=(function(){var v=[];for(var i=0;i<data["note"].length;i++){var drag=[];var n=i;while(true){drag.push({"beat":data["note"][n]["when"]["b"].toAccurated(),"x":data["note"][n]["where"]["x"],"isCatch":(data["note"][n]["flag"]&&data["note"][n]["flag"]["catch"]?true:undefined),"isFlick":(data["note"][n]["flag"]&&data["note"][n]["flag"]["flick"]?true:undefined)});if(data["note"][n]["link"]["a"]!=-1){n=data["note"][n]["link"]["a"];}
else{i=n;break;}}
if(drag.length==1){v.push({"id":v.length,"beat":drag[0]["beat"],"x":drag[0]["x"],"duration":0,"type":(drag[0]["isFlick"]?5:0),"link":-1});}
else if((drag.length==2)&&(drag[0]["beat"]==drag[1]["beat"])){v.push({"id":v.length,"beat":drag[0]["beat"],"x":drag[0]["x"],"duration":0,"type":(drag[0]["isFlick"]?5:0),"link":-1});v.push({"id":v.length,"beat":drag[1]["beat"],"x":drag[1]["x"],"duration":0,"type":(drag[0]["isFlick"]?5:0),"link":-1});}
else if((drag.length==2)&&(drag[0]["x"]==drag[1]["x"])){v.push({"id":v.length,"beat":drag[0]["beat"],"x":drag[0]["x"],"duration":drag[1]["beat"].fSub(drag[0]["beat"]),"type":(tickToPageIndex(beatToTick(drag[0]["beat"]))==tickToPageIndex(beatToTick(drag[1]["beat"]))?1:2),"link":-1});}
else{for(var j=0;j<drag.length;j++){v.push({"id":v.length,"beat":drag[j]["beat"],"x":drag[j]["x"],"duration":0,"type":(j?4:3)+(drag[0]["isCatch"]?0:3),"link":(j+1<drag.length?v.length+1:-1)});}}}
v=v.sort(function(a,b){return(a["beat"]-b["beat"])||(a["x"]-b["x"]);});for(var i=0;i<v.length;i++){if(v[i]["link"]!=-1){v[i]["link"]=(function(){for(var j=0;j<v.length;j++){if(v[j]["id"]==v[i]["link"]){return j;}}
return-1;})();}}
return v;})();var v=[];for(var i=0;i<notes.length;i++){var tick=beatToTick(notes[i]["beat"]);var pageIndex=tickToPageIndex(tick);var has_sibling=(function(){for(var j=0;j<notes.length;j++){if((j!=i)&&(notes[j]["beat"]==notes[i]["beat"])){return true;}}
return false;})();var is_forward=(((notes[i]["type"]==4)||(notes[i]["type"]==7))&&(pageIndex!=v[v.length-1]["page_index"])?true:false);v.push({"page_index":pageIndex,"type":notes[i]["type"],"id":i,"tick":tick,"x":toX(notes[i]["x"]).toAccurated(),"has_sibling":has_sibling,"hold_tick":beatToTick(notes[i]["duration"]),"next_id":((notes[i]["type"]!=4)&&(notes[i]["type"]!=7)&&(notes[i]["link"]==-1)?0:notes[i]["link"]),"is_forward":is_forward});}
return v;})();return JSON.stringify(cytus2,null,"");break;case"bangdream":var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var trackToX=function(track,key){return(track*2+1)/(key*2);};var dpb=MstOptions["CorrectTime"][0]||192;var meta=Semi["meta"];var data=repairData(toData(toData(toData(toData(toData(extData(mergeData(Semi["data"][index]),index),"InvalidKeyRemove"),"FakeKeyRemove"),"BpnUnified",{"BpnUnified":4}),"NoFlowBackward"),"NoFlowChange"),index);var offsetEffect=(function(){var l=getEffectIndex(data,"");if((l!=-1)&&(data["effect"][l]["when"]["n"]<0)){var n=data["effect"][l]["when"]["n"].fSub(data["effect"][l]["when"]["n"]|0).toAbbreviated(6).toAccurated();var t=timeFromNote(data,n);var o=t.fSub(data["effect"][l]["when"]["t"]);if(o!=0){data=(data?toData(data,"TranslateWhen",{"TranslateWhen":o}):data);}}})();var hWAVs=[];var hBPMs=[];var setWAV=function(e){var l=(function(){for(var i=0;i<hWAVs.length;i++){if(hWAVs[i]&&(hWAVs[i]["path"]==e["path"])){return i;}}
return-1;})();if(l<1){l=hWAVs.length||1;hWAVs[l]={"path":e["path"]};}
return l;};var setBPM=function(v){var l=(function(){for(var i=0;i<hBPMs.length;i++){if(hBPMs[i]&&(hBPMs[i]["bpm"]==v)){return i;}}
return-1;})();if(l<1){l=hBPMs.length||1;hBPMs[l]={"bpm":v};}
return l;};var cd=[];var noteData=[];var setChannelLabel=(function(){var command=[];for(var i=0;i<data["effect"].length;i++){if((data["effect"][i]["kind"]=="audio")&&(data["effect"][i]["while"]=="")&&data["effect"][i]["path"]){command.push({"n":data["effect"][i]["when"]["n"],"index":setWAV({"path":"bgm"+(data["effect"][i]["path"].startsWith("bgm")&&data["effect"][i]["path"].endsWith("_chorus")&&!isNaN(parseInt(data["effect"][i]["path"].slice(3,6)))?data["effect"][i]["path"].slice(3,6):"000")+".wav"})});break;}}
for(var i=0;i<data["status"].length;i++){if(data["status"][i]["name"]=="bang_fever"){command.push({"n":data["status"][i]["when"]["n"],"index":setWAV({"path":"cmd_fever_"+data["status"][i]["value"]+".wav"})});}}
cd[0x01]=command;var bpm03=[];var bpm08=[];var bpmC=0;for(var i=0;i<data["beat"].length;i++){if(data["beat"][i]["fpn"]!=0){var bpm=data["beat"][i]["bpm"].toAbbreviated(6).toAccurated();if((!i||(bpm!=bpmC))&&(bpm>0)){bpmC=bpm;if((isInteger(bpm)&&(bpm>0)&&(bpm<256))){bpm03.push({"n":data["beat"][i]["when"]["n"],"script":bpm.toBase(16)});}
else{bpm08.push({"n":data["beat"][i]["when"]["n"],"index":setBPM(bpm)});}}}}
cd[0x03]=bpm03;cd[0x08]=bpm08;})();var setChannelKey=(function(){var slide=[];var trackToChannel=function(t){return[0x16,0x11,0x12,0x13,0x14,0x15,0x18][t];};var getTag=function(n,n2){var t=0;while(true){var l=(function(){slide[t]=slide[t]||[];for(var i=0;i<slide[t].length;i++){if(((n>=slide[t][i]["n"])&&(n<=slide[t][i]["n2"]))||((n2>=slide[t][i]["n"])&&(n2<=slide[t][i]["n2"]))){return i;}}
return-1;})();if(l!=-1){t+=1;}
else{slide[t].push({"n":n,"n2":n2});return(t<2?String.fromCharCode(0x61+t):undefined);}}};var getIndex=function(p,t){var v=t;if(p["flick"]){v="flick_"+v;}
if(p["slide"]||p["slide_end"]){if(p["slide"]){v="slide_"+v;}
else if(p["slide_end"]){v="slide_end_"+v;}}
if(p["fever"]){v="fever_note_"+v;}
if(p["skill"]){v="skill_"+v;}
return setWAV({"path":((v||"bd")+".wav").replace("_.",".")});};var setChannel=function(d){for(var i=0;i<d["note"].length;i++){if(d["note"][i]["link"]["b"]==-1){var drag=[];var n=i;while(true){drag.push({"when":data["note"][n]["when"],"track":xToTrack(d["note"][n]["where"]["x"],d["info"]["key"]),"flag":data["note"][n]["flag"]});if(data["note"][n]["link"]["a"]!=-1){n=data["note"][n]["link"]["a"];}
else{i=n;break;}}
if((drag.length==1)||((drag.length==2)&&(drag[0]["track"]==drag[1]["track"])&&(drag[0]["when"]["n"]>=drag[1]["when"]["n"]))){var c=trackToChannel(drag[0]["track"]);if(c){cd[c]=cd[c]||[];cd[c].push({"n":drag[0]["when"]["n"],"index":getIndex({"flick":drag[0]["flag"]["flick"],"fever":drag[0]["flag"]["fever"],"skill":drag[0]["flag"]["skill"]},"")});noteData.push({"action":(drag[0]["flag"]["flick"]?0x21:0x00),"when":{"b":drag[0]["when"]["b"],"n":drag[0]["when"]["n"],"t":drag[0]["when"]["t"]},"where":{"x":trackToX(drag[0]["track"],d["info"]["key"])},"flag":{"flick":drag[0]["flag"]["flick"],"skill":drag[0]["flag"]["skill"]}});}}
else if((drag.length==2)&&(drag[0]["track"]==drag[1]["track"])){var c=trackToChannel(drag[0]["track"]);if(c){c+=0x40;cd[c]=cd[c]||[];cd[c].push({"n":drag[0]["when"]["n"],"index":getIndex({"flick":drag[0]["flag"]["flick"],"fever":drag[0]["flag"]["fever"],"skill":drag[0]["flag"]["skill"]},"")});cd[c].push({"n":drag[1]["when"]["n"],"index":getIndex({"flick":drag[1]["flag"]["flick"],"fever":drag[1]["flag"]["fever"],"skill":drag[1]["flag"]["skill"]},"")});noteData.push({"action":0x62,"when":{"b":drag[0]["when"]["b"],"n":drag[0]["when"]["n"],"t":drag[0]["when"]["t"]},"when2":{"b":drag[1]["when"]["b"],"n":drag[1]["when"]["n"],"t":drag[1]["when"]["t"]},"where":{"x":trackToX(drag[0]["track"],d["info"]["key"])},"where2":{"x":trackToX(drag[0]["track"],d["info"]["key"])},"flag":{"skill":drag[0]["flag"]["skill"]}});noteData.push({"action":(drag[1]["flag"]["flick"]?0x21:0xA2),"when":{"b":drag[1]["when"]["b"],"n":drag[1]["when"]["n"],"t":drag[1]["when"]["t"]},"when2":{"b":drag[1]["when"]["b"],"n":drag[1]["when"]["n"],"t":drag[1]["when"]["t"]},"where":{"x":trackToX(drag[0]["track"],d["info"]["key"])},"where2":{"x":trackToX(drag[0]["track"],d["info"]["key"])},"flag":{"flick":drag[1]["flag"]["flick"],"skill":drag[1]["flag"]["skill"]}});}}
else if((drag.length==2)&&(drag[0]["track"]!=drag[1]["track"])&&(drag[0]["when"]["n"]>=drag[1]["when"]["n"])){var c=trackToChannel(drag[0]["track"]);if(c){cd[c]=cd[c]||[];cd[c].push({"n":drag[0]["when"]["n"],"index":getIndex({"flick":true,"fever":drag[0]["flag"]["fever"],"skill":drag[0]["flag"]["skill"]},"")});noteData.push({"action":0x21,"when":{"b":drag[0]["when"]["b"],"n":drag[0]["when"]["n"],"t":drag[0]["when"]["t"]},"where":{"x":trackToX(drag[0]["track"],d["info"]["key"])},"flag":{"skill":drag[0]["flag"]["skill"]}});}}
else{for(var j=0;j<drag.length;j++){if((j+1<drag.length)&&(drag[j+1]["when"]["n"]<=drag[j]["when"]["n"])){drag.splice(j,1);j-=1;}
else{var c=trackToChannel(drag[j]["track"]);if(c){drag[j]["channel"]=c;}
else{drag=drag.slice(0,j+1);}}}
if(drag.length==1){var c=drag[0]["channel"];cd[c]=cd[c]||[];cd[c].push({"n":drag[0]["when"]["n"],"index":getIndex({"flick":drag[0]["flag"]["flick"],"fever":drag[0]["flag"]["fever"],"skill":drag[0]["flag"]["skill"]},"")});noteData.push({"action":(drag[0]["flag"]["flick"]?0x21:0x00),"when":{"b":drag[0]["when"]["b"],"n":drag[0]["when"]["n"],"t":drag[0]["when"]["t"]},"where":{"x":trackToX(drag[0]["track"],d["info"]["key"])},"flag":{"flick":drag[0]["flag"]["flick"],"skill":drag[0]["flag"]["skill"]}});}
else{var t=getTag(drag[0]["when"]["n"],drag[drag.length-1]["when"]["n"]);if(t){for(var j=0;j<drag.length;j++){var c=drag[j]["channel"];cd[c]=cd[c]||[];cd[c].push({"n":drag[j]["when"]["n"],"index":getIndex({"flick":drag[j]["flag"]["flick"],"fever":drag[j]["flag"]["fever"],"skill":drag[j]["flag"]["skill"],"slide":j+1<drag.length,"slide_end":j+1==drag.length},t)});noteData.push({"action":(j==0?0x62:(j==drag.length-1?(drag[j]["flag"]["flick"]?0x21:0xA2):0x22)),"when":{"b":drag[j]["when"]["b"],"n":drag[j]["when"]["n"],"t":drag[j]["when"]["t"]},"when2":{"b":drag[(j==drag.length-1?j:j+1)]["when"]["b"],"n":drag[(j==drag.length-1?j:j+1)]["when"]["n"],"t":drag[(j==drag.length-1?j:j+1)]["when"]["t"]},"where":{"x":trackToX(drag[j]["track"],d["info"]["key"])},"where2":{"x":trackToX(drag[(j==drag.length-1?j:j+1)]["track"],d["info"]["key"])},"flag":{"flick":drag[j]["flag"]["flick"],"skill":drag[j]["flag"]["skill"]}});}}}}}}};setChannel(data);})();var setLabelIndex=(function(){var setWAVIndex=(function(){for(var i=0;i<hWAVs.length;i++){var script=i.toBase(36);if(hWAVs[i]){hWAVs[i]["script"]=script;}}})();var setBPMIndex=(function(){for(var i=0;i<hBPMs.length;i++){var script=i.toBase(36);if(hBPMs[i]){hBPMs[i]["script"]=script;}}})();})();var md=[];var transData=function(c){var s=(arguments.length>1?arguments[1]:undefined);var s2=(arguments.length>2?arguments[2]:undefined);cd[c]=cd[c]||[];for(var i=0;i<cd[c].length;i++){var m=cd[c][i]["n"]|0;var d=cd[c][i]["n"].fSub(m).fMul(dpb)|0;md[m]=md[m]||[];md[m][c]=md[m][c]||[];if(s){md[m][c][d]=(cd[c][i]["index"]==-1?s.length.toBase(getBaseType(s.length+1)):(s[cd[c][i]["index"]]||s2[cd[c][i]["index"]])["script"]);}
else{md[m][c][d]=cd[c][i]["script"]||cd[c][i]["value"];}}};var reductScript=function(t){var r="";for(var i=t.length;i>1;i--){if(t.length%i!=0){continue;}
var needReduct=(function(){for(var j=0;j<t.length;j++){if((j%i!=0)&&(t[j]!="00")){return false;}}
return true;})();if(needReduct){var v=[];for(var j=0;j<t.length;j++){if(j%i==0){v.push(t[j]);}}
t=v;i=t.length-1;}}
r=t.join("");r=(r=="00"?"":r);return r;};for(var c=0;c<cd.length;c++){if((c>0x00)&&(c<=0xFF)){switch(c){case 0x01:transData(c,hWAVs);break;case 0x02:transData(c);break;case 0x03:transData(c);break;case 0x08:transData(c,hBPMs);break;default:transData(c,hWAVs);break;}}}
for(var m=0;m<md.length;m++){md[m]=md[m]||[];for(var c=0;c<md[m].length;c++){md[m][c]=md[m][c]||[];for(var d=0;d<dpb;d++){md[m][c][d]=md[m][c][d]||"00";}
md[m][c]=reductScript(md[m][c]);}
var t=[];for(var c=0;c<md[m].length;c++){if(md[m][c]){t.push("#"+m.toString().padStart(3,"0")+c.toBase(16).padStart(2,"0")+":"+md[m][c]);}}
md[m]=t.join("\r\n");}
Semi["draw"][index]=Semi["draw"][index]||{};Semi["draw"][index]["txt"]=Semi["draw"][index]["txt"]||{};Semi["draw"][index]["txt"]["list"]=[{"data":data,"noteData":noteData}];Semi["draw"][index]["txt"]["valid"]=false;var bangdream=[];var writeBangdream=function(n,v){var d=(arguments.length>2?arguments[2]:"");var s=(arguments.length>3?arguments[3]:"#");if(n){if(!isUndefined(v)&&(v!=d)){bangdream.push(s+n+" "+v);}}
else{bangdream.push(v);}};var writeHEADER=(function(){writeBangdream("","");writeBangdream("","*---------------------- HEADER FIELD");writeBangdream("","");writeBangdream("PLAYER","1");writeBangdream("GENRE",meta["genre"]);writeBangdream("TITLE",meta["title"]);writeBangdream("ARTIST",meta["artist"]);writeBangdream("BPM",data["beat"][0]["bpm"]);writeBangdream("PLAYLEVEL",data["info"]["level"]||1);writeBangdream("RANK",data["info"]["rank"]||3);writeBangdream("STAGEFILE",data["info"]["stageFile"].toDirWin());writeBangdream("","");writeBangdream("LNTYPE","1");writeBangdream("","");for(var i=0;i<hWAVs.length;i++){if(hWAVs[i]){writeBangdream("WAV"+hWAVs[i]["script"],hWAVs[i]["path"].toDirWin());}}
writeBangdream("","");for(var i=0;i<hBPMs.length;i++){if(hBPMs[i]){writeBangdream("BPM"+hBPMs[i]["script"],hBPMs[i]["bpm"].toAbbreviated(6).toAccurated());}}
writeBangdream("","");})();var writeMAINDATA=(function(){writeBangdream("","");writeBangdream("","*---------------------- MAIN DATA FIELD");writeBangdream("","");writeBangdream("",md.join("\r\n\r\n"));writeBangdream("","");})();return bangdream.join("\r\n");break;case"musync":var timeToTick=function(t){return Math.round(t*10000);};var setWAV=function(t){if(!t){return"01";}
var l=(function(){for(var i=0;i<wavs.length;i++){if(wavs[i]==t){return i;}}
return-1;})();if(l==-1){l=wavs.length;wavs[l]=t;}
return l.toBase(36);};var writeMusync=function(n,v){var h=(arguments.length>2?arguments[2]:false);if(n){if(!isUndefined(v)&&(v!="")){musync.push(n+"\t"+v);}
else if(!h){musync.push(n+"\t");}}
else{if(!isUndefined(v)&&(v!="")){musync.push(v);}
else if(!h){musync.push("");}}};var musync=[];var data=extData(mergeData(Semi["data"][index]),index);var bpn=data["info"]["bpn"];data=repairData(toData(toData(toData(toData(toData(toData(data,"InvalidKeyRemove"),"FakeKeyRemove"),"TransOblique"),"NoFlowBackward"),"NoFlowStop"),"BpnUnified",{"BpnUnified":bpn}),index);var bpm=data["beat"][0]["bpm"]||125;var fpn=data["beat"][0]["fpn"]||1;var key=8;var wavs=["",""];var sd=(function(){var r=[];var m=["BeatLine","SpeedChange","BPMChanger","TunnelSwitch","TunnelThickness","TunnelRotate","TunnelSpiralNo","TunnelSpiralAngle","WeatherBg","WeatherUIB","CurtainUIC","ChiefClimax","ReverseColor","MoveCamera","MusicNote","Note","LongNote","LongNoteSub"];var addValue=function(s,n,t){var v=[];switch(t){case"tb":for(var i=0;i<data["status"].length;i++){if((data["status"][i]["name"]==n)&&(!v.length||(!isUndefined(data["status"][i]["value"])&&((data["status"][i]["value"]?true:false)!=v[v.length-1][1])))){v.push([data["status"][i]["when"]["t"],(data["status"][i]["value"]?true:false)]);}}
break;case"tv":for(var i=0;i<data["status"].length;i++){if((data["status"][i]["name"]==n)&&(!v.length||(!isUndefined(data["status"][i]["value"])&&(data["status"][i]["value"]!=v[v.length-1][1])))){v.push([data["status"][i]["when"]["t"],data["status"][i]["value"]]);}}
break;case"tvt":for(var i=0;i<data["status"].length;i++){if((data["status"][i]["name"]==n)&&!isUndefined(data["status"][i]["value"])){for(var j=i+1;j<data["status"].length;j++){if((data["status"][j]["name"]==n)&&isUndefined(data["status"][j]["value"])){v.push([data["status"][i]["when"]["t"],data["status"][i]["value"],data["status"][j]["when"]["t"]]);i=j;}}}}
break;}
for(var i=0;i<v.length;i++){v[i][0]=timeToTick(v[i][0]);if(v.length>2){v[i][2]=timeToTick(v[i][2]);}
r.push([v[i][0],m.indexOf(s),s,v[i]]);}};var addBeatLine=(function(){var s="BeatLine";for(var i=0;i<=data["info"]["max"]["when"]["n"];i++){var n=(i<data["info"]["max"]["when"]["n"]?i+1:i);var tick=timeToTick(timeFromNote(data,i));var endTick=timeToTick(timeFromNote(data,n));r.push([tick,m.indexOf(s),s,[tick,i,"--",endTick]]);}})();var addSpeedChange=(function(){var s="SpeedChange";var v=[];for(var i=0;i<data["beat"].length;i++){if(!v.length||(data["beat"][i]["fpn"]!=v[v.length-1][1])){v.push([data["beat"][i]["when"]["t"],data["beat"][i]["fpn"]]);}}
for(var i=0;i<v.length;i++){if(i||(v[i][1]!=fpn)){var tick=timeToTick(v[i][0]);r.push([tick,m.indexOf(s),s,[tick,v[i][1]]]);}}})();var addBPMChanger=(function(){var s="BPMChanger";var v=[];for(var i=0;i<data["beat"].length;i++){if(!v.length||(data["beat"][i]["bpm"]!=v[v.length-1][1])){v.push([data["beat"][i]["when"]["t"],data["beat"][i]["bpm"]]);}}
for(var i=0;i<v.length;i++){if(i||(v[i][1]!=bpm)){var tick=timeToTick(v[i][0]);r.push([tick,m.indexOf(s),s,[tick,v[i][1]]]);}}})();addValue("TunnelSwitch","musync_tunnelSwitch","tb");addValue("TunnelThickness","musync_tunnelThickness","tvt");addValue("TunnelRotate","musync_tunnelRotate","tv");addValue("TunnelSpiralNo","musync_tunnelSpiralNo","tv");addValue("TunnelSpiralAngle","musync_tunnelSpiralAngle","tv");addValue("WeatherBg","musync_weatherBg","tvt");addValue("WeatherUIB","musync_weatherUIB","tvt");addValue("CurtainUIC","musync_curtainUIC","tv");addValue("ChiefClimax","musync_chiefClimax","tb");addValue("ReverseColor","musync_reverseColor","tvt");addValue("MoveCamera","musync_moveCamera","tv");var addMusicNote=(function(){var s="MusicNote";for(var i=0;i<data["effect"].length;i++){if((data["effect"][i]["kind"]=="audio")&&(data["effect"][i]["while"]=="")&&data["effect"][i]["path"]){var track=0;var tick=timeToTick(data["effect"][i]["when"]["t"]);var path=data["effect"][i]["path"];r.push([tick,m.indexOf(s),s,[tick,track+1,setWAV(path)]]);}}})();var addNote=(function(){var s="Note";for(var i=0;i<data["note"].length;i++){var a=data["note"][i]["link"]["a"];if((data["note"][i]["link"]["c"]!=-1)&&(data["note"][i]["link"]["b"]==-1)&&(a==-1)){var track=xToTrack(data["note"][i]["where"]["x"],key);var tick=timeToTick(data["note"][i]["when"]["t"]);var path=(function(){for(var j=0;j<data["note"][i]["trigger"].length;j++){if((data["note"][i]["trigger"][j]["kind"]=="audio")&&data["note"][i]["trigger"][j]["path"]){return data["note"][i]["trigger"][j]["path"];}}})();r.push([tick,m.indexOf(s),s,[tick,track+1,setWAV(path)]]);data["note"][i]["link"]["c"]=-1;}
if((data["note"][i]["link"]["c"]!=-1)&&(data["note"][i]["link"]["b"]==-1)&&(a!=-1)&&(data["note"][a]["link"]["a"]==-1)&&(data["note"][i]["when"]["t"]==data["note"][a]["when"]["t"])){var track=xToTrack(data["note"][i]["where"]["x"],key);var track2=xToTrack(data["note"][a]["where"]["x"],key);var tick=timeToTick(data["note"][i]["when"]["t"]);var path=(function(){for(var j=0;j<data["note"][i]["trigger"].length;j++){if((data["note"][i]["trigger"][j]["kind"]=="audio")&&data["note"][i]["trigger"][j]["path"]){return data["note"][i]["trigger"][j]["path"];}}})();r.push([tick,m.indexOf(s),s,[tick,track+1,setWAV(path)]]);r.push([tick,m.indexOf(s),s,[tick,track2+1,setWAV(path)]]);data["note"][i]["link"]["c"]=-1;data["note"][a]["link"]["c"]=-1;}}})();var addLongNote=(function(){var s="LongNote";for(var i=0;i<data["note"].length;i++){var a=data["note"][i]["link"]["a"];if((data["note"][i]["link"]["c"]!=-1)&&(data["note"][i]["link"]["b"]==-1)&&(a!=-1)&&(data["note"][a]["link"]["a"]==-1)){var track=xToTrack(data["note"][i]["where"]["x"],key);var endTrack=xToTrack(data["note"][a]["where"]["x"],key);if(track==endTrack){var tick=timeToTick(data["note"][i]["when"]["t"]);var endTick=timeToTick(data["note"][a]["when"]["t"]);var path=(function(){for(var j=0;j<data["note"][i]["trigger"].length;j++){if((data["note"][i]["trigger"][j]["kind"]=="audio")&&data["note"][i]["trigger"][j]["path"]){return data["note"][i]["trigger"][j]["path"];}}})();r.push([tick,m.indexOf(s),s,[tick,track+1,setWAV(path),endTick]]);data["note"][i]["link"]["c"]=-1;data["note"][a]["link"]["c"]=-1;}}}})();var addLongNoteSub=(function(){var s="LongNoteSub";for(var i=0;i<data["note"].length;i++){var a=data["note"][i]["link"]["a"];if((data["note"][i]["link"]["c"]!=-1)&&(a!=-1)){var track=xToTrack(data["note"][i]["where"]["x"],key);var endTrack=xToTrack(data["note"][a]["where"]["x"],key);var tick=timeToTick(data["note"][i]["when"]["t"]);var endTick=timeToTick(data["note"][a]["when"]["t"]);var path=(function(){for(var j=0;j<data["note"][i]["trigger"].length;j++){if((data["note"][i]["trigger"][j]["kind"]=="audio")&&data["note"][i]["trigger"][j]["path"]){return data["note"][i]["trigger"][j]["path"];}}})();r.push([tick,m.indexOf(s),s,[tick,track+1,setWAV(path),endTick,endTrack+1]]);data["note"][i]["link"]["c"]=-1;}}})();r=r.sort(function(a,b){return(a[0]-b[0])||(a[1]-b[1]);});return r;})();writeMusync("BPM",bpm);writeMusync("Rank"," "+(data["info"]["level"]||1));writeMusync("NoteFactoryPrepare",data["info"]["noteFactoryPrepare"]||"10 10 200 1000");writeMusync("DefaultStartTunnel",data["info"]["defaultStartTunnel"],true);writeMusync("DefaultWeatherUIB",data["info"]["defaultWeatherUIB"],true);writeMusync("DefaultCurtainUIC",data["info"]["defaultCurtainUIC"],true);writeMusync("DefaultChiefClimax",data["info"]["defaultChiefClimax"],true);writeMusync("SubBeatNumber",(bpn==4?"":bpn),true);for(var i=0;i<wavs.length;i++){if(wavs[i]){writeMusync("WAV",[i.toBase(36),new FileInfo(wavs[i]).name].join("\t"));}}
for(var i=0;i<sd.length;i++){writeMusync(sd[i][2],sd[i][3].join("\t"));}
writeMusync("","");musync=musync.join("\n");if(version){musync=new Uint8Array().fromText(musync).cryptDES(true,new Uint8Array().fromHex("147A3F256B0DC8E9"),new Uint8Array().fromHex("1324967058ABCDEF")).getBase64();}
return musync;break;}};var toJsonText=function(index,type){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};switch(type){case"deemo":var toTime=function(t){return t.fDiv(1000);};var toX=function(x){return(x==0.999?1:x);};var xToPos=function(x){return x.fMul(4).fSub(2);};var triggerToSounds=function(t){var r=[];for(var i=0;i<t.length;i++){if((t[i]["kind"]=="audio")&&(t[i]["while"]=="")&&!t[i]["path"]){var w=toTime(t[i]["offset"]||0);var d=toTime(t[i]["duration"]||0);var p=t[i]["pitch"]||60;var v=(t[i]["volume"]||1).fMul(100)|0;if(d){r.push({"w":w,"d":d,"p":p,"v":v});}}}
return r;};var data=repairData(toData(toData(toData(extData(mergeData(Semi["data"][index]),index),"InvalidKeyRemove"),"FakeKeyRemove"),"TransOblique"),index);var deemo={};var notes=[];var links=[];var getData=(function(){var v=[];for(var i=0;i<data["note"].length;i++){var drag=[];var n=i;while(true){drag.push({"time":data["note"][n]["when"]["t"],"x":data["note"][n]["where"]["x"],"flag":data["note"][n]["flag"],"trigger":data["note"][n]["trigger"]});if(data["note"][n]["link"]["a"]!=-1){n=data["note"][n]["link"]["a"];}
else{i=n;break;}}
if(drag.length==1){v.push({"id":v.length,"time":drag[0]["time"],"x":drag[0]["x"],"link":-1,"flag":drag[0]["flag"],"trigger":drag[0]["trigger"]});}
else{for(var j=0;j<drag.length;j++){v.push({"id":v.length,"time":drag[j]["time"],"x":drag[j]["x"],"link":(j+1<drag.length?v.length+1:-1),"flag":drag[j]["flag"],"trigger":drag[j]["trigger"]});}}}
v=v.sort(function(a,b){return(a["time"]-b["time"])||(a["x"]-b["x"]);});for(var i=0;i<v.length;i++){if(v[i]["link"]!=-1){v[i]["link"]=(function(){for(var j=0;j<v.length;j++){if(v[j]["id"]==v[i]["link"]){return j;}}
return-1;})();}}
for(var i=0;i<v.length;i++){if(v[i]["link"]==-1){if(!v[i]["done"]){var time=toTime(v[i]["time"]).toAccurated();notes.push({"$id":(i+1).toString(),"type":0,"sounds":triggerToSounds(v[i]["trigger"]),"pos":xToPos(toX(v[i]["x"])).toAccurated(),"size":(v[i]["flag"]["size"]["w"]>0?v[i]["flag"]["size"]["w"]:1),"_time":time,"shift":0,"time":time});v[i]["done"]=true;}}
else{var list=[];var n=i;while(!v[n]["done"]){list.push(n);v[n]["done"]=true;if((v[n]["link"]!=-1)&&!v[v[n]["link"]]["done"]){n=v[n]["link"];}
else{break;}}
var ref=[];for(var j=0;j<list.length;j++){var n=list[j];var time=toTime(v[n]["time"]).toAccurated();notes.push({"$id":(n+1).toString(),"type":0,"sounds":triggerToSounds(v[n]["trigger"]),"pos":xToPos(toX(v[n]["x"])).toAccurated(),"size":(v[n]["flag"]["size"]["w"]>0?v[n]["flag"]["size"]["w"]:1),"_time":time,"shift":0,"time":time});ref.push({"$ref":(n+1).toString()});}
links.push({"notes":ref});}}
notes=notes.sort(function(a,b){return parseInt(a["$id"])-parseInt(b["$id"]);});})();deemo["speed"]=data["info"]["speed"]||1;deemo["notes"]=notes;deemo["links"]=links;return JSON.stringify(deemo,null,"");break;case"imd":var timeToTick=function(t){return t.fMul(48)|0;};var toImdJson=function(imd){var json=[];var q='"';json.push("{");json.push("    "+q+"signature"+q+": "+q+imd["signature"]+q+",");json.push("    "+q+"version"+q+": "+q+imd["version"]+q+",");json.push("    "+q+"tempo"+q+": "+imd["tempo"]+",");json.push("    "+q+"tracks"+q+": [");for(var i=0;i<imd["tracks"].length;i++){json.push("        {");json.push("            "+q+"track"+q+": "+imd["tracks"][i]["track"]+",");json.push("            "+q+"note"+q+": [");for(var j=0;j<imd["tracks"][i]["note"].length;j++){json.push("                  {"+q+"tick"+q+": "+imd["tracks"][i]["note"][j]["tick"]+", "+q+"key"+q+": "+imd["tracks"][i]["note"][j]["key"]+", "+q+"dur"+q+": "+imd["tracks"][i]["note"][j]["dur"]+", "+q+"isEnd"+q+": "+imd["tracks"][i]["note"][j]["isEnd"]+", "+q+"toTrack"+q+": "+imd["tracks"][i]["note"][j]["toTrack"]+", "+q+"volume"+q+": "+imd["tracks"][i]["note"][j]["volume"]+", "+q+"pan"+q+": "+imd["tracks"][i]["note"][j]["pan"]+", "+q+"attr"+q+": "+imd["tracks"][i]["note"][j]["attr"]+"}"+(j<imd["tracks"][i]["note"].length-1?",":""));imd["tracks"][i]["note"][j]}
json.push("            ]");json.push("        }"+(i<imd["tracks"].length-1?",":""));}
json.push("    ]");json.push("}");return json.join("\n\r");};var meta=Semi["meta"];var data=repairData(toData(toData(toData(toData(toData(extData(mergeData(Semi["data"][index]),index),"InvalidKeyRemove"),"FakeKeyRemove"),"NoFlowBackward"),"NoFlowStop"),"BpmUnified"),index);var offset=(0).fSub(data["info"]["start"]["when"]["t"]);data=(offset?toData(data,"OffsetWhen",{"OffsetWhen":offset}):data);var imd={};imd["signature"]=Semi["meta"]["creator"]||"";imd["version"]=Semi["meta"]["version"]||"1.2.1";imd["tempo"]=data["info"]["bpm"].toFixed(6);imd["tracks"]=(function(){var key=4;var notes=[];for(var i=0;i<data["note"].length;i++){var drag=[];var n=i;while(data["note"][n]){drag.push({"beat":data["note"][n]["when"]["b"],"x":data["note"][n]["where"]["x"]});if(data["note"][n]["link"]["a"]!=-1){n=data["note"][n]["link"]["a"];}
else{i=n;break;}}
if(drag.length==1){var tick=timeToTick(drag[0]["beat"]);var track=xToTrack(drag[0]["x"],key);notes.push({"tick":tick,"endTick":tick,"track":track,"endTrack":track,"isEnd":0,"attr":0});}
else if(drag.length==2){var tick=timeToTick(drag[0]["beat"]);var endTick=timeToTick(drag[1]["beat"]);var track=xToTrack(drag[0]["x"],key);var endTrack=xToTrack(drag[1]["x"],key);notes.push({"tick":tick,"endTick":endTick,"track":track,"endTrack":endTrack,"isEnd":1,"attr":3});}
else{for(var j=0;j<drag.length-1;j++){notes.push({"tick":timeToTick(drag[j]["beat"]),"endTick":timeToTick(drag[j+1]["beat"]),"track":xToTrack(drag[j]["x"],key),"endTrack":xToTrack(drag[j+1]["x"],key),"isEnd":(j<drag.length-2?0:1),"attr":(j?4:3)});}}}
var tracks=[];for(var i=0;i<notes.length;i++){var id=notes[i]["track"];tracks[id]=tracks[id]||[];tracks[id].push({"tick":notes[i]["tick"],"key":0,"dur":notes[i]["endTick"]-notes[i]["tick"],"isEnd":notes[i]["isEnd"],"toTrack":(notes[i]["attr"]?notes[i]["endTrack"]+3:0),"volume":0,"pan":0,"attr":notes[i]["attr"]});}
for(var i=0;i<tracks.length;i++){tracks[i]=tracks[i].sort(function(a,b){return a["tick"]-b["tick"];});tracks[i]={"track":i+3,"note":tracks[i]};}
return tracks;})();return toImdJson(imd);break;}};var toMcText=function(index,type){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var toBeatArray=function(b){var t=Math.trunc(b);var d=768;var n=Math.round(b.fSub(t).fMul(d));var m=[2,3];for(var i=0;i<m.length;i++){while(true){var nt=n/m[i];var dt=d/m[i];if(isInteger(nt)&&isInteger(dt)){n=nt;d=dt;}
else{break;}}}
return[t,n,d];};var mode=["key","step","dj","catch","pad","taiko","ring","slide"].indexOf(type);var data=(function(){var data=toData(toData(extData(mergeData(Semi["data"][index]),index),"InvalidKeyRemove"),"FakeKeyRemove");switch(mode){case 0:case 1:case 2:data=toData(toData(data,"NoOblique"),"NoSlide");break;case 3:data=toData(data,"CatchBase");break;case 4:data=toData(data,"EquilongDrag");break;case 5:data=toData(data,"TaikoBase");break;case 6:data=toData(toData(data,"NoOblique"),"NoSlide");break;case 7:data=toData(data,"TransOblique");break;}
return repairData(data,index);})();var meta=(function(){var v={"cover":data["info"]["cover"]||(fileInfo.nameCore+".png"),"creator":Semi["meta"]["creator"],"background":data["info"]["background"]||(fileInfo.nameCore+".png"),"version":Semi["meta"]["version"],"time":new Date().getTime(),"id":data["info"]["id"],"mode":mode,"song":{"title":Semi["meta"]["title"],"artist":Semi["meta"]["artist"],"id":Semi["meta"]["id"],"source":Semi["meta"]["source"],"org":{"title":Semi["meta"]["orgTitle"],"artist":Semi["meta"]["orgArtist"],"source":Semi["meta"]["orgSource"]}}};switch(mode){case 0:case 1:case 2:v["mode_ext"]={"column":data["info"]["key"]};break;case 3:v["mode_ext"]={"speed":data["info"]["speed"]};break;case 4:v["mode_ext"]={"interval":data["info"]["interval"]};break;case 5:v["mode_ext"]={"column":4};break;case 6:v["mode_ext"]={"column":8};break;}
return v;})();var effect=(function(){var v=[];var d=[];var set=function(b,n,v){var l=(function(){for(var i=0;i<d.length;i++){if(d[i]["beat"]==b){return i;}}
return-1;})();if(l!=-1){d[l][n]=v;}
else{var item={"beat":b};item[n]=v;d.push(item);}};var sort=function(a,b){return a["beat"]-b["beat"];}
var h={"fpn":1,"lpn":4,"barLine":0,"warp":0,"hs":1};var c={"fpn":1,"lpn":4,"barLine":0,"warp":0,"hs":1};for(var i=0;i<data["beat"].length;i++){if(c["fpn"]!=data["beat"][i]["fpn"]){set(data["beat"][i]["when"]["b"],"fpn",data["beat"][i]["fpn"]);c["fpn"]=data["beat"][i]["fpn"];}
if(c["lpn"]!=data["beat"][i]["lpn"]){set(data["beat"][i]["when"]["b"],"lpn",data["beat"][i]["lpn"]);c["lpn"]=data["beat"][i]["lpn"];}}
for(var i=0;i<data["status"].length;i++){switch(data["status"][i]["name"]){case"warp":if(c["warp"]!=data["status"][i]["value"]){set(data["status"][i]["when"]["b"],"warp",data["status"][i]["value"]);c["warp"]=data["status"][i]["value"];}
break;case"barLine":if(c["barLine"]!=data["status"][i]["value"]){set(data["status"][i]["when"]["b"],"barLine",data["status"][i]["value"]);c["barLine"]=data["status"][i]["value"];}
case"mc_hs":if(c["hs"]!=data["status"][i]["value"]){set(data["status"][i]["when"]["b"],"hs",data["status"][i]["value"]);c["hs"]=data["status"][i]["value"];}
break;}}
d=d.sort(sort);for(var i=0;i<d.length;i++){d[i]["fpn"]=(isUndefined(d[i]["fpn"])?(i?d[i-1]["fpn"]:h["fpn"]):d[i]["fpn"]);d[i]["lpn"]=(isUndefined(d[i]["lpn"])?(i?d[i-1]["lpn"]:h["lpn"]):d[i]["lpn"]);d[i]["warp"]=(isUndefined(d[i]["warp"])?(i?d[i-1]["warp"]:h["warp"]):d[i]["warp"]);d[i]["barLine"]=(isUndefined(d[i]["barLine"])?(i?d[i-1]["barLine"]:h["barLine"]):d[i]["barLine"]);d[i]["hs"]=(isUndefined(d[i]["hs"])?(i?d[i-1]["hs"]:h["hs"]):d[i]["hs"]);}
for(var i=0;i<d.length;i++){if(!i||(d[i]["fpn"]!=d[i-1]["fpn"])||(d[i]["lpn"]!=d[i-1]["lpn"])||(d[i]["barLine"]!=d[i-1]["barLine"])||(d[i]["warp"]!=d[i-1]["warp"])||(d[i]["hs"]!=d[i-1]["hs"])){v.push({"beat":toBeatArray(d[i]["beat"]),"scroll":((!i&&(d[i]["fpn"]!=h["fpn"]))||(i&&(d[i]["fpn"]!=d[i-1]["fpn"]))?d[i]["fpn"]:undefined),"sign":((!i&&(d[i]["lpn"]!=h["lpn"]))||(i&&(d[i]["lpn"]!=d[i-1]["lpn"]))?d[i]["lpn"]:undefined),"showbar":((!i&&(d[i]["barLine"]!=h["barLine"]))||(i&&(d[i]["barLine"]!=d[i-1]["barLine"]))?d[i]["barLine"]:undefined),"jump":((!i&&(d[i]["warp"]!=h["warp"]))||(i&&(d[i]["warp"]!=d[i-1]["warp"]))?d[i]["warp"]:undefined),"hs":((!i&&(d[i]["hs"]!=h["hs"]))||(i&&(d[i]["hs"]!=d[i-1]["hs"]))?d[i]["hs"]:undefined)});}}
return v;})();var time=(function(){var v=[];for(var i=0;i<data["beat"].length;i++){if(!i||(data["beat"][i]["bpm"]!=data["beat"][i-1]["bpm"])||(data["beat"][i]["bpn"]!=data["beat"][i-1]["bpn"])){v.push({"beat":toBeatArray(data["beat"][i]["when"]["b"]),"bpm":(!i||(data["beat"][i]["bpm"]!=data["beat"][i-1]["bpm"])?data["beat"][i]["bpm"]:undefined),"signature":((!i&&(data["beat"][i]["bpn"]!=4))||(i&&(data["beat"][i]["bpn"]!=data["beat"][i-1]["bpn"]))?data["beat"][i]["bpn"]:undefined)});}}
return v;})();var note=(function(){var v=[];var noteData=[];var key=data["info"]["key"];var trackToX=function(track,key){return(track*2+1)/(key*2);};var sDK=true;var bDK=true;for(var i=0;i<data["note"].length;i++){if(!data["note"][i]["flag"]["invalid"]&&!data["note"][i]["flag"]["fake"]){var e=(function(){for(var j=0;i<data["note"][i]["trigger"].length;i++){if((data["note"][i]["trigger"][j]["kind"]=="audio")&&(data["note"][i]["trigger"][j]["while"]=="")&&data["note"][i]["trigger"][j]["path"]){return{"sound":data["note"][i]["trigger"][j]["path"],"vol":(data["note"][i]["trigger"][j]["volume"]*255)|0-128};}}
return{};})();switch(mode){case 0:case 1:case 2:case 6:if(data["note"][i]["link"]["a"]==-1){var column=xToTrack(data["note"][i]["where"]["x"],key);v.push({"beat":toBeatArray(data["note"][i]["when"]["b"]),"column":column,"sound":e["path"],"vol":e["vol"]});noteData.push({"action":0x00,"when":{"b":data["note"][i]["when"]["b"],"n":data["note"][i]["when"]["n"],"t":data["note"][i]["when"]["t"]},"where":{"x":trackToX(column,key)},"trigger":data["note"][i]["trigger"]});}
else{var a=data["note"][i]["link"]["a"];while(data["note"][a]["link"]["a"]!=-1){a=data["note"][a]["link"]["a"];}
var column=xToTrack(data["note"][i]["where"]["x"],key);v.push({"beat":toBeatArray(data["note"][i]["when"]["b"]),"endbeat":toBeatArray(data["note"][a]["when"]["b"]),"column":column,"sound":e["path"],"vol":e["vol"]});noteData.push({"action":0x02,"when":{"b":data["note"][i]["when"]["b"],"n":data["note"][i]["when"]["n"],"t":data["note"][i]["when"]["t"]},"when2":{"b":data["note"][a]["when"]["b"],"n":data["note"][a]["when"]["n"],"t":data["note"][a]["when"]["t"]},"where":{"x":trackToX(column,key)},"trigger":data["note"][i]["trigger"]});i=a;}
break;case 3:if(data["note"][i]["link"]["a"]==-1){v.push({"beat":toBeatArray(data["note"][i]["when"]["b"]),"x":(data["note"][i]["where"]["x"]*512)|0,"sound":e["path"],"vol":e["vol"]});}
else{var a=data["note"][i]["link"]["a"];while(data["note"][a]["link"]["a"]!=-1){a=data["note"][a]["link"]["a"];}
v.push({"beat":toBeatArray(data["note"][i]["when"]["b"]),"endbeat":toBeatArray(data["note"][a]["when"]["b"]),"type":3,"sound":e["path"],"vol":e["vol"]});i=a;}
break;case 4:if(data["note"][i]["link"]["a"]==-1){var wx=(data["note"][i]["where"]["x"]!=-1?data["note"][i]["where"]["x"]:0);var x=(wx*4)|0;var wy=(data["note"][i]["where"]["y"]!=-1?data["note"][i]["where"]["y"]:0);var y=((1-wy)*4)|0;v.push({"beat":toBeatArray(data["note"][i]["when"]["b"]),"index":x+y*4,"sound":e["path"],"vol":e["vol"]});}
else{var a=data["note"][i]["link"]["a"];while(data["note"][a]["link"]["a"]!=-1){a=data["note"][a]["link"]["a"];}
var wx=(data["note"][i]["where"]["x"]!=-1?data["note"][i]["where"]["x"]:0);var x=(wx*4)|0;var wy=(data["note"][i]["where"]["y"]!=-1?data["note"][i]["where"]["y"]:0);var y=((1-wy)*4)|0;var wx2=(data["note"][i]["where"]["x"]!=-1?data["note"][i]["where"]["x"]:0);var x2=(wx2*4)|0;var wy2=(data["note"][i]["where"]["y"]!=-1?data["note"][i]["where"]["y"]:0);var y2=((1-wy2)*4)|0;if((x!=x2)&&(y!=y2)){if(Math.abs(wx-wx2)>Math.abs(wy-wy2)){y2=y;}
else{x2=x;}}
v.push({"beat":toBeatArray(data["note"][i]["when"]["b"]),"endbeat":toBeatArray(data["note"][a]["when"]["b"]),"index":x+y*4,"endindex":x2+y2*4,"sound":e["path"],"vol":e["vol"]});i=a;}
break;case 5:var style=0;var hits=0;if(data["note"][i]["link"]["a"]==-1){var t=(function(){var m=["0","0","0","0"];for(var j=i;j<data["note"].length;j++){if(data["note"][j]["when"]["b"]==data["note"][i]["when"]["b"]){var x=(data["note"][j]["where"]["x"]!=-1?data["note"][j]["where"]["x"]:0);m[x.fMul(4)|0]="1";}
else{i=j-1;break;}
if(j==data["note"].length-1){i=j;}}
return m.join("");})();switch(t){case"0010":case"0100":style=0;break;break;case"0110":case"0111":case"1110":style=1;break;case"0001":case"1000":style=2;case"1001":case"1011":case"1101":style=3;break;case"0011":case"1100":case"0101":case"1010":style=(sDK?0:2);sDK=!sDK;break;case"1111":style=(bDK?1:3);bDK=!bDK;break;}
v.push({"beat":toBeatArray(data["note"][i]["when"]["b"]),"style":style,"sound":e["path"],"vol":e["vol"]});}
else{var track=(data["note"][i]["where"]["x"]!=-1?data["note"][i]["where"]["x"]:0).fMul(4)|0;switch(track){case 0:case 3:style=6;break;case 1:style=4;break;case 2:style=5;break;}
if(style==6){hits=((data["note"][i+1]["when"]["b"]-data["note"][i]["when"]["b"])|0)*4+1;}
v.push({"beat":toBeatArray(data["note"][i]["when"]["b"]),"endbeat":toBeatArray(data["note"][i+1]["when"]["b"]),"style":style,"hits":hits,"sound":e["path"],"vol":e["vol"]});i+=1;}
break;case 7:var beat=data["note"][i]["when"]["b"];var x=data["note"][i]["where"]["x"].fMul(256).limit(0,255)|0;var w=(function(){var r=0;if(data["note"][i]["flag"]&&data["note"][i]["flag"]["size"]&&data["note"][i]["flag"]["size"]["w"]){r=(parseFloat(data["note"][i]["flag"]["size"]["w"]!=-1?data["note"][i]["flag"]["size"]["w"]:0)||0).fMul(256)|0;}
r=(r>256?256:r);return r||48;})();v.push({"beat":toBeatArray(beat),"x":x,"w":(w==48?undefined:w),"type":(data["note"][i]["flag"]["catch"]||data["note"][i]["flag"]["flick"]?4:undefined),"sound":e["path"],"vol":e["vol"]});var seg=[];var a=data["note"][i]["link"]["a"];while(a!=-1){var sbeat=data["note"][a]["when"]["b"].fSub(beat);if(sbeat>0){seg.push({"beat":toBeatArray(sbeat),"x":(data["note"][a]["where"]["x"].fMul(256).limit(0,255)|0)-x});}
i=a;a=data["note"][a]["link"]["a"];}
if(seg.length){v[v.length-1]["seg"]=seg;v[v.length-1]["type"]=undefined;}
break;}}
else{while(data["note"][i]["link"]["a"]!=-1){i=data["note"][i]["link"]["a"];}}}
var slideScale=true;if(slideScale){var b=0;for(var i=0;i<v.length;i++){var d=(v[i]["w"]||48)/2;var xl=v[i]["x"];var xr=v[i]["x"];var seg=v[i]["seg"]||[];for(var j=0;j<seg.length;j++){var x=v[i]["x"]+seg[j]["x"];xl=(x<xl?x:xl);xr=(x>xr?x:xr);}
var l=d-xl;b=(l>b?l:b);var r=xr+d-255;b=(r>b?r:b);}
if(b){var rate=1-b/128;for(var i=0;i<v.length;i++){var x=v[i]["x"];v[i]["x"]=(v[i]["x"]<128?128-(128-v[i]["x"])*rate:(v[i]["x"]-128)*rate+128)|0;if(v[i]["seg"]){for(var j=0;j<v[i]["seg"].length;j++){v[i]["seg"][j]["x"]=(x+v[i]["seg"][j]["x"]<128?128-(128-(x+v[i]["seg"][j]["x"]))*rate-v[i]["x"]:((x+v[i]["seg"][j]["x"])-128)*rate+128-v[i]["x"])|0;}}}}}
var hasAudio=false;for(var i=0;i<data["effect"].length;i++){if((data["effect"][i]["kind"]=="audio")&&(data["effect"][i]["while"]=="")&&data["effect"][i]["path"]){v.push({"beat":toBeatArray(data["effect"][i]["when"]["b"]),"sound":new FileInfo(data["effect"][i]["path"]).nameCore+".ogg","vol":(data["effect"][i]["volume"]*255)|0-128,"offset":(data["effect"][i]["offset"]!=0?data["effect"][i]["offset"]:undefined),"isBgm":(data["effect"][i]["fix"]?true:undefined),"type":1});hasAudio=true;}}
if(!hasAudio){v.push({"beat":toBeatArray(0),"sound":fileInfo.nameCore+".ogg","type":1});hasAudio=true;}
if(mode==0){Semi["draw"][index]=Semi["draw"][index]||{};Semi["draw"][index]["mc"]=Semi["draw"][index]["mc"]||{};Semi["draw"][index]["mc"]["list"]=[{"data":data,"noteData":noteData}];Semi["draw"][index]["mc"]["valid"]=false;}
return v;})();var extra={"test":{"divide":data["info"]["testDivide"],"speed":data["info"]["testSpeed"],"save":data["info"]["testSave"],"lock":data["info"]["testLock"],"edit_mode":data["info"]["testEditMode"]}};return JSON.stringify({"meta":meta,"time":time,"effect":effect,"note":note,"extra":extra},null,4).replace(/\n/g,"\r\n");};var toC2sText=function(index){return"";};var toAffText=function(index){var lr=-1;var xToTrack=function(x,key){return Math.max(x,0)*key|0;};var aff=[];var width=1600;var height=1200;var deep=5000;var mArc=[0,2,1];var mScenecontrol={"debris":"arcahvdebris","distort":"arcahvdistort","redLine":"redline"};var arg=[];var header=(function(){var v=[];v.push("AudioOffset:"+-getEffectInfo(Semi["data"][index][0],"audio","offset"));return v;})();var group=(function(){var r=[];for(var child=0;child<Semi["data"][index].length;child++){var data0=repairData(extData(Semi["data"][index][child],index),index);var beat=(data0?copyObject(data0["beat"]):[]);var note=(data0?copyObject(data0["note"]):[]);var key=(data0?data0["info"]["key"]:newItem("info")["key"]);var notes=(function(){var v=[[],[]];for(var i=0;i<note.length;i++){v[(note[i]["flag"]["fake"]?1:0)].push(note[i]);}
v[0]=sortNote(v[0]);v[1]=sortNote(v[1]);return v;})();for(var c=0;c<notes.length;c++){if(!notes[c].length){continue;}
var data=copyObject(data0);data["note"]=notes[c];var g=[];var d=[];var timing=[];var tab=[];var hold=[];var arc=[];var arctab=[];var camera=[];var scenecontrol=[];for(var i=0;i<beat.length;i++){timing.push([beat[i]["when"]["t"],0,beat[i]["bpm"].fMul(beat[i]["bpn"]).fDiv(4).fMul(beat[i]["fpn"]).toAbbreviated(6).toAccurated(),beat[i]["lpn"]]);}
for(var i=0;i<note.length;i++){if(note[i]["link"]["b"]==-1){var v=[];var parallel=(function(){var s="arcaea_";if(note[i]["flag"]["parallel"].startsWith(s)){var v=parseInt(note[i]["flag"]["parallel"].slice(s.length));if(!isNaN(v)){return v;}}
return mArc[note[i]["where"]["x"]*mArc.length|0];})();var n=i;while(true){var a=note[n]["link"]["a"];if(a!=-1){if((note[a]["when"]["t"]!=note[n]["when"]["t"])||(note[n]["where"]["x"]!=note[a]["where"]["x"])||(note[n]["where"]["y"]!=note[a]["where"]["y"])){v.push([note[n]["when"]["t"],3,xToTrack(note[n]["where"]["x"],key).fAdd(1),note[a]["when"]["t"],note[n]["where"]["x"],note[a]["where"]["x"],note[n]["line"]["curve"],note[n]["where"]["y"],note[a]["where"]["y"],parallel,"none",(note[n]["flag"]["invalid"]?true:false),[]]);}
n=a;}
else{if(note[n]["link"]["b"]==-1){if(!note[n]["flag"]["invalid"]){if(note[n]["where"]["y"]==-1){tab.push([note[n]["when"]["t"],1,xToTrack(note[n]["where"]["x"],key).fAdd(1)]);}
else{arctab.push([note[n]["when"]["t"],xToTrack(note[n]["where"]["x"],key).fAdd(1),note[n]["where"]["x"],note[n]["where"]["y"]]);}}}
else if(v.length&&(note[n]["where"]["t"]==v[v.length-1][0])&&(note[n]["where"]["x"]!=v[v.length-1][4])&&(note[n]["where"]["y"]==v[v.length-1][7])){v.push([note[n]["when"]["t"],3,xToTrack(note[n]["where"]["x"],key).fAdd(1),note[n]["when"]["t"].fAdd(1),note[n]["where"]["x"],note[n]["where"]["x"],note[n]["line"]["curve"],note[n]["where"]["y"],note[n]["where"]["y"],parallel,"none",(note[n]["flag"]["invalid"]?true:false),[]]);}
break;}}
if(v.length){if((v.length==1)&&((v[0][0]|0)==(v[0][3]|0))&&(v[0][4]==v[0][5])&&(v[0][7]==v[0][8])&&!v[0][11]){arctab.push([v[0][0],v[0][2],v[0][5],v[0][8]]);}
else{arc.push(v);}}}}
var isHold=function(n){if((arc[n].length!=1)||(arc[n][0][0]==arc[n][0][3])||(arc[n][0][4]!=arc[n][0][5])||(arc[n][0][7]!=-1)||(arc[n][0][8]!=-1)||(arc[n][0][7]!=arc[n][0][8])||arc[n][0][6]||arc[n][0][11]||arc[n][0][12].length){return false;}
return true;};for(var i=0;i<arc.length;i++){if(isHold(i)){hold.push([arc[i][0][0],2,arc[i][0][2],arc[i][0][3]]);arc.splice(i,1);i-=1;}}
for(var i=0;i<arc.length;i++){var parallel=(function(){var v=arc[i][0][9];var isExcludeSame=false;if(!isExcludeSame){return v;}
var b=false;while(true){var existSame=(function(){for(var j=0;j<i;j++){if((((arc[j][0][0]<=arc[i][0][0])&&(arc[j][arc[j].length-1][3]>arc[i][0][0]+1))||((arc[j][0][0]<arc[i][arc[i].length-1][3])&&(arc[j][arc[j].length-1][3]>=arc[i][0][3])))&&(arc[j][arc[j].length-1][9]==v)&&!arc[j][0][11]){return true;}}
return false;})();if(!existSame){return v;}
else if(b&&(v==arc[i][0][9])){return undefined;}
else{var l=mArc.indexOf(v)+1;l=(l<mArc.length?l:0);v=mArc[l];b=true;}}})();if(isUndefined(parallel)){if((arc[i].length==1)&&(arc[i][0][4]==arc[i][0][5])&&!arc[i][0][11]){hold.push([arc[i][0][0],2,arc[i][0][2],arc[i][0][3]]);}
arc.splice(i,1);i-=1;continue;}
var isTab=arc[i][0][11];for(var j=0;j<arc[i].length;j++){arc[i][j][2]=-1;arc[i][j][4]=arc[i][j][4];arc[i][j][5]=arc[i][j][5];arc[i][j][6]=(function(){var v=[];switch(arc[i][j][6]){case"arcaea_s":v="s";break;case"arcaea_so":v="so";break;case"arcaea_si":v="si";break;case"arcaea_b":v="b";break;case"arcaea_soso":v="soso";break;case"arcaea_sosi":v="sosi";break;case"arcaea_siso":v="siso";break;case"arcaea_sisi":v="sisi";break;default:v="s";break;}
return v;})();arc[i][j][7]=(arc[i][j][7]==-1?0:arc[i][j][7]);arc[i][j][8]=(arc[i][j][8]==-1?0:arc[i][j][8]);arc[i][j][9]=parallel;arc[i][j][11]=isTab;}}
var isClearKeyInUnflow=false;if(isClearKeyInUnflow){var unflowTimes=(function(){var v=[];for(var i=0;i<timing.length;i++){if((timing[i][1]==0)&&(timing[i][2]==0)){if(i+1<timing.length){v.push([timing[i][0],timing[i+1][0]]);}
else{v.push([timing[i][0],data["info"]["max"]["when"]["t"]]);}}}
return v;})();var isInUnflow=function(t){var t2=(arguments.length>1?arguments[1]:t);for(var i=0;i<unflowTimes.length;i++){if(t==unflowTimes[i][0]){return"on";}
if(t2==t){if(((t>unflowTimes[i][0])&&(t<=unflowTimes[i][1]))){return"in";}}
else{if(((t>unflowTimes[i][0])&&(t<=unflowTimes[i][1]))||((t2>=unflowTimes[i][0])&&(t2<=unflowTimes[i][1]))||((unflowTimes[i][0]>t)&&(unflowTimes[i][1]<=t))||((unflowTimes[i][0]>=t2)&&(unflowTimes[i][1]<=t2))){return"in";}}}
return"away";};for(var i=0;i<tab.length;i++){if(isInUnflow(tab[i][0])=="in"){tab.splice(i,1);i-=1;}}
for(var i=0;i<hold.length;i++){if(isInUnflow(hold[i][0],hold[i][3])!="away"){hold.splice(i,1);i-=1;}}
for(var i=0;i<arc.length;i++){for(var j=0;j<arc[i].length;j++){var s=isInUnflow(arc[i][j][0],arc[i][j][3]);if(s!="away"){if((arc[i][j].length>11)&&arc[i][j][11]){arc[i][j][13]=s;}
else{arc[i].splice(j,1);j-=1;}}
else{arc[i][j][13]=s;}}}
for(var i=0;i<arctab.length;i++){if(isInUnflow(arctab[i][0])=="in"){arctab.splice(i,1);i-=1;}}}
var addSkyTab=function(t){for(var i=0;i<arc.length;i++){for(var j=0;j<arc[i].length;j++){if(arc[i][j][11]&&(((arc[i][j][13]=="on")&&(arc[i][j][0]==t[0]))||(arc[i][j][13]=="away"))&&(arc[i][j][0]<=t[0])&&(arc[i][j][3]>t[0])&&(((arc[i][j][0]==arc[i][j][3])&&(arc[i][j][4]==t[2])&&(arc[i][j][7]==t[3]))||((arc[i][j][0]!=arc[i][j][3])&&(arc[i][j][4].fAdd(t[0].fSub(arc[i][j][0]).fDiv(arc[i][j][3].fSub(arc[i][j][0])).fMul(arc[i][j][5].fSub(arc[i][j][4]))).toAbbreviated(6).toAccurated()==t[2])&&(arc[i][j][7].fAdd(t[0].fSub(arc[i][j][0]).fDiv(arc[i][j][3].fSub(arc[i][j][0])).fMul(arc[i][j][8].fSub(arc[i][j][7]))).toAbbreviated(6).toAccurated()==t[3])))){arc[i][j][12].push(t[0]);return true;}}}
return false;};for(var i=0;i<arctab.length;i++){if(addSkyTab(arctab[i])){arctab.splice(i,1);i-=1;}}
var linkSkyTab=function(t){var isLinkSkyTab=true;if(!isLinkSkyTab){return false;}
for(var i=arc.length-1;i>-1;i--){for(var j=arc[i].length-1;j>-1;j--){if((arc[i][j][3]<t[0])&&(Math.abs(arc[i][j][5].fSub(t[2]))<=0.25)){arc.push([[arc[i][j][3],3,t[1],t[0],arc[i][j][5],t[2],"s",arc[i][j][8],t[3],(arc[i][j][4]<0.5?"0":"1"),"none","true",[t[0]]]]);return true;}}}
return false;};for(var i=0;i<arctab.length;i++){if(!linkSkyTab(arctab[i])){arc.push([[arctab[i][0],3,arctab[i][1],arctab[i][0],arctab[i][2],arctab[i][2],"s",arctab[i][3],arctab[i][3],(arctab[i][2]<0.5?"0":"1"),"none","true",[arctab[i][0]]]]);}
arctab.splice(i,1);i-=1;}
for(var i=0;i<data["transform"].length;i++){if(data["transform"][i]["reset"]){camera.push([data["transform"][i]["when"]["t"],5,0,0,0,0,0,0,"reset",0]);}
else{var easing=(function(){switch(data["transform"][i]["easing"]){case"linear":return"l";break;case"quadraticIn":return"qi";break;case"quadraticOut":return"qo";break;}
return"l";})();camera.push([data["transform"][i]["when"]["t"],5,-data["transform"][i]["translateX"]*width,-data["transform"][i]["translateY"]*height,-data["transform"][i]["translateZ"]*deep,data["transform"][i]["rotateY"],data["transform"][i]["rotateX"],data["transform"][i]["rotateZ"],easing,data["transform"][i]["duration"]]);}}
for(var i=0;i<data["status"].length;i++){switch(data["status"][i]["name"]){case"hideTrack":scenecontrol.push([data["status"][i]["when"]["t"],4,(data["status"][i]["value"]?"trackhide":"trackshow")]);break;case"debris":case"distort":case"redLine":scenecontrol.push([data["status"][i]["when"]["t"],4,mScenecontrol[data["status"][i]["name"]],data["status"][i]["value"],data["status"][i]["value2"]]);break;case"hideGroup":scenecontrol.push([data["status"][i]["when"]["t"],4,"hidegroup",0.00,(data["status"][i]["value"]?1:0)]);break;}}
d.writes(timing);d.writes(tab);d.writes(hold);d.writes(camera);d.writes(scenecontrol);for(var i=0;i<arc.length;i++){d.writes(arc[i]);}
d=d.sort(SortNumbers);var drawExtend=(ext!="aff");if(drawExtend){for(var i=0;i<d.length;i++){if((d[i].length>13)&&(d[i][13]=="away")){for(var j=0;j<d.length;j++){if((j!=i)&&(d[j].length>13)&&(d[j][13]=="away")&&(d[j][0]!=d[j][3])&&((d[j][11]&&d[i][11])||(!d[j][11]&&!d[i][11]))&&(d[j][11]||(d[j][9]==d[i][9]))&&(d[j][0]==d[i][3])&&(d[j][4]==d[i][5])&&(d[j][7]==d[i][8])){if(((d[i][5]==d[i][4])&&(d[j][5]==d[j][4]))||((d[i][3]!=d[i][0])&&(d[i][5]!=d[i][4])&&(d[j][3]!=d[j][0])&&(d[j][5]!=d[j][4])&&Math.atan(d[j][3].fSub(d[j][0]).fDiv(d[j][5].fSub(d[j][4]))).isClose(Math.atan(d[i][3].fSub(d[i][0]).fDiv(d[i][5].fSub(d[i][4]))))&&Math.atan(d[j][3].fSub(d[j][0]).fDiv(d[j][8].fSub(d[j][7]))).isClose(Math.atan(d[i][3].fSub(d[i][0]).fDiv(d[i][8].fSub(d[i][7])))))){d[i][6]=(d[i][6]=="b"?"so":d[i][6]);d[i][6]=(d[i][6]=="si"?"s":d[i][6]);d[j][6]=(d[j][6]=="b"?"si":d[j][6]);d[j][6]=(d[j][6]=="so"?"s":d[j][6]);}
else{if(d[i][4]!=d[i][5]){d[i][6]=(d[i][6]=="s"?"si":d[i][6]);d[i][6]=(d[i][6]=="sisi"?"si":d[i][6]);d[i][6]=(d[i][6]=="siso"?"si":d[i][6]);d[i][6]=(d[i][6]=="so"?"b":d[i][6]);d[i][6]=(d[i][6]=="sosi"?"b":d[i][6]);d[i][6]=(d[i][6]=="soso"?"b":d[i][6]);}
else{d[i][6]="s";}
if(d[j][4]!=d[j][5]){d[j][6]=(d[j][6]=="s"?"so":d[j][6]);d[i][6]=(d[i][6]=="sosi"?"so":d[i][6]);d[i][6]=(d[i][6]=="soso"?"so":d[i][6]);d[j][6]=(d[j][6]=="si"?"b":d[j][6]);d[j][6]=(d[j][6]=="siso"?"b":d[j][6]);d[j][6]=(d[j][6]=="sisi"?"b":d[j][6]);}
else{d[j][6]="s";}}}}}}
for(var i=0;i<d.length;i++){if((d[i].length>13)&&(d[i][13]=="away")){for(var j=0;j<d.length;j++){if((j!=i)&&(d[j].length>13)&&(d[j][13]=="away")&&(d[j][0]!=d[j][3])&&((d[j][11]&&d[i][11])||(!d[j][11]&&!d[i][11]))&&((!d[j][11]&&(d[j][9]==d[i][9]))||d[j][11])&&(d[j][0]==d[i][3])&&(d[j][4]==d[i][5])&&(d[j][7]==d[i][8])){if(d[i][7]!=d[i][8]){d[i][6]=(d[i][6]=="s"?"sosi":d[i][6]);d[i][6]=(d[i][6]=="si"?"sisi":d[i][6]);}
if(d[j][7]!=d[j][8]){d[j][6]=(d[j][6]=="s"?"siso":d[j][6]);d[j][6]=(d[j][6]=="so"?"soso":d[j][6]);}}}}}}
for(var i=0;i<d.length;i++){if(d[i].length>3){if((d[i].length>11)&&d[i][11]&&(d[i][12].length>0)){d[i][3]=(d[i][0]==d[i][3]?d[i][3].fAdd(1):d[i][3]);}}}
var toX=function(x){return x.fMul(2).fSub(1).fDiv(0.998).fMul(1.5).fAdd(0.5);};var toY=function(y){return y.fMul(2).fSub(1).fDiv(0.998).fMul(2.5).fAdd(2.5);};var noteData=[];for(var i=0;i<d.length;i++){switch(d[i][1]){case 0:g.push("timing("+Math.round(d[i][0])+","+d[i][2].toFixed(2)+","+d[i][3].toFixed(2)+");");break;case 1:g.push("("+Math.round(d[i][0])+","+d[i][2]+");");var t=d[i][0];var b=beatFromTime(data,t);var n=noteFromBeat(data,b);var x=d[i][2].fSub(0.5).fDiv(key);noteData.push({"action":0x00,"when":{"b":b,"n":n,"t":t|0},"when2":{"b":b,"n":n,"t":t|0},"where":{"x":x},"where2":{"x":x},"flag":{"fake":(c?true:undefined)}});break;case 2:g.push("hold("+Math.round(d[i][0])+","+Math.round(d[i][3])+","+d[i][2]+");");var t=d[i][0];var b=beatFromTime(data,t);var n=noteFromBeat(data,b);var t2=d[i][3];var b2=beatFromTime(data,t2);var n2=noteFromBeat(data,b2);var x=d[i][2].fSub(0.5).fDiv(key);noteData.push({"action":0x02,"when":{"b":b,"n":n,"t":t|0},"when2":{"b":b2,"n":n2,"t":t2|0},"where":{"x":x},"where2":{"x":x},"flag":{"fake":(c?true:undefined)}});break;case 3:var p=[];if(d[i][11]){for(var j=0;j<d[i][12].length;j++){p.push("arctap("+Math.round(d[i][12][j])+")");}}
g.push("arc("+Math.round(d[i][0])+","+Math.round(d[i][3])+","+toX(d[i][4]).toFormated(2)+","+toX(d[i][5]).toFormated(2)+","+d[i][6]+","+toY(d[i][7]).toFormated(2)+","+toY(d[i][8]).toFormated(2)+","+d[i][9]+","+d[i][10]+","+(d[i][11]?"true":"false")+")"+(p.length>0?"["+p.join(",")+"]":"")+";");var t=d[i][0];var b=beatFromTime(data,t);var n=noteFromBeat(data,b);var t2=d[i][3];var b2=beatFromTime(data,t2);var n2=noteFromBeat(data,b2);var x=d[i][4];var y=d[i][7];var x2=d[i][5];var y2=d[i][8];noteData.push({"action":0x22,"when":{"b":b,"n":n,"t":t|0},"when2":{"b":b2,"n":n2,"t":t2|0},"where":{"x":x,"y":y},"where2":{"x":x2,"y":y2},"line":{"curve":"arcaea_"+d[i][6]},"flag":{"invalid":(d[i][11]?true:false),"fake":(c?true:undefined),"parallel":"arcaea_"+d[i][9]}});if(d[i][11]){for(var j=0;j<d[i][12].length;j++){var t=d[i][12][j];var b=beatFromTime(data,t);var n=noteFromBeat(data,b);var x=d[i][4].fAdd((d[i][12][j]==d[i][0])||(d[i][3]==d[i][0])?0:d[i][12][j].fSub(d[i][0]).fDiv(d[i][3].fSub(d[i][0])).fMul(d[i][5].fSub(d[i][4])));var y=d[i][7].fAdd((d[i][12][j]==d[i][0])||(d[i][3]==d[i][0])?0:d[i][12][j].fSub(d[i][0]).fDiv(d[i][3].fSub(d[i][0])).fMul(d[i][8].fSub(d[i][7])));noteData.push({"action":0x21,"when":{"b":b,"n":n,"t":t|0},"when2":{"b":b,"n":n,"t":t|0},"where":{"x":x,"y":y},"where2":{"x":x,"y":y},"flag":{"fake":(c?true:undefined)}});}}
break;case 4:g.push("scenecontrol("+Math.round(d[i][0])+","+d[i][2]+(!isUndefined(d[i][3])?","+d[i][3]:"")+(!isUndefined(d[i][4])?","+d[i][4]:"")+");");break;case 5:g.push("camera("+Math.round(d[i][0])+","+d[i][2].toFixed(2)+","+d[i][3].toFixed(2)+","+d[i][4].toFixed(2)+","+d[i][5].toFixed(2)+","+d[i][6].toFixed(2)+","+d[i][7].toFixed(2)+","+d[i][8]+","+Math.round(d[i][9])+");");break;}}
r.push(g);arg.push((c?["noinput"]:[]));Semi["draw"][index]=Semi["draw"][index]||{};Semi["draw"][index]["aff"]=Semi["draw"][index]["aff"]||{};Semi["draw"][index]["aff"]["list"]=Semi["draw"][index]["aff"]["list"]||[];Semi["draw"][index]["aff"]["list"][r.length-1]={"data":data,"noteData":noteData};Semi["draw"][index]["aff"]["valid"]=false;}}
return r;})();if(arg[0].indexOf("noinput")!=-1){var l=(function(){for(var i=1;i<arg.length;i++){if(arg[0].indexOf("noinput")==-1){return l;}}
return-1;})();if(l!=-1){arg.top(l);group.top(l);}
else{arg.unshift([]);group.unshift(["timing(0,125.00,4.00);"]);}}
aff.writes(header);aff.push("-");for(var i=0;i<group.length;i++){if(i){aff.push("timinggroup("+arg[i].join(",")+"){");}
for(var j=0;j<group[i].length;j++){aff.push((i?"  ":"")+group[i][j]);}
if(i){aff.push("};");}}
aff.push("");return aff.join("\r\n");};var toDrbText=function(index){var writeDrb=function(n,v){var h=(arguments.length>2?arguments[2]:false);if(n){if(!isUndefined(v)&&(v!="")){drb.push("#"+n+"="+v+";");}
else if(!h){drb.push("#"+n+"=;");}}
else{if(!isUndefined(v)&&(v!="")){drb.push(v);}
else if(!h){drb.push("");}}};var drb=[];var data=extData(mergeData(Semi["data"][index]),index);var bpn=data["info"]["bpn"];data=repairData(toData(toData(toData(toData(toData(toData(data,"InvalidKeyRemove"),"FakeKeyRemove"),"NoFlowBackward"),"NoFlowStop"),"NoFlowChange"),"BpnUnified",{"BpnUnified":bpn}),index);var bpms=(function(){var v=[];for(var i=0;i<data["beat"].length;i++){if(!v.length||(data["beat"][i]["bpm"]!=v[v.length-1][1])){v.push([data["beat"][i]["when"]["n"],data["beat"][i]["bpm"]]);}}
return v;})();var scs=(function(){var v=[];for(var i=0;i<data["beat"].length;i++){if((data["beat"][i]["fpn"]>0)&&(!v.length||(data["beat"][i]["fpn"]!=v[v.length-1][1]))){v.push([data["beat"][i]["when"]["n"],data["beat"][i]["fpn"]]);}}
return v;})();var notes=(function(){var v=[];var getPosWidth=function(x,flag){var width=((flag["size"]["w"]==-1?1:flag["size"]["w"]).fMul(4)|0).limit(1,16);var pos=x.fMul(17).fSub(width/2)|0;pos=(pos<0?0:pos);pos=(pos+width>16?16-width:pos);return{"pos":pos,"width":width};};for(var i=0;i<data["note"].length;i++){var drag=[];var n=i;while(data["note"][n]){drag.push({"note":data["note"][n]["when"]["n"],"x":data["note"][n]["where"]["x"],"flag":data["note"][n]["flag"]});if(data["note"][n]["link"]["a"]!=-1){n=data["note"][n]["link"]["a"];}
else{i=n;break;}}
if(drag.length==1){var pw=getPosWidth(drag[0]["x"],drag[0]["flag"]);var kind=(function(){if(drag[0]["flag"]["catch"]){return 2;}
else if(drag[0]["flag"]["flick"]){if(drag[0]["flag"]["flick"]=="left"){return 8;}
else if(drag[0]["flag"]["flick"]=="right"){return 9;}
else{return(drag[0]["x"]<0.5?8:9);}}
else{return 1;}})();v.push({"id":v.length+1,"kind":kind,"note":drag[0]["note"],"pos":pw["pos"],"width":pw["width"],"ex":(drag[0]["flag"]["ex"]?1:0),"preId":v.length});}
else if(drag.length==2){var pw0=getPosWidth(drag[0]["x"],drag[0]["flag"]);var pw1=getPosWidth(drag[1]["x"],drag[1]["flag"]);if(drag[1]["note"]>drag[0]["note"]){var kind0=(function(){if(drag[0]["flag"]["flick"]){if(drag[0]["flag"]["flick"]=="left"){return 8;}
else if(drag[0]["flag"]["flick"]=="right"){return 9;}
else{return(drag[0]["x"]<0.5?8:9);}}
else{if(pw0["pos"]==pw1["pos"]){return 3;}
else{return 5;}}})();var kind1=(kind0==3?4:7);v.push({"id":v.length+1,"kind":kind0,"note":drag[0]["note"],"pos":pw0["pos"],"width":pw0["width"],"ex":(drag[0]["flag"]["ex"]?1:0),"preId":v.length});v.push({"id":v.length+1,"kind":kind1,"note":drag[1]["note"],"pos":pw1["pos"],"width":pw1["width"],"ex":(drag[1]["flag"]["ex"]?1:0),"preId":v.length});}
else if(drag[1]["note"]==drag[0]["note"]){var kind=(function(){if(drag[0]["x"]>drag[1]["x"]){return 8;}
else if(drag[0]["x"]<drag[1]["x"]){return 9;}
else{return 3;}})();v.push({"id":v.length+1,"kind":kind,"note":drag[0]["note"],"pos":pw0["pos"],"width":pw0["width"],"ex":(drag[0]["flag"]["ex"]?1:0),"preId":v.length});}}
else{var endKind=7;for(var j=0;j<drag.length;j++){var pw=getPosWidth(drag[j]["x"],drag[j]["flag"]);var note=drag[j]["note"];var ex=(drag[j]["flag"]["ex"]?1:0);var kind=(function(){if(j==0){if(drag[j]["note"]==drag[j+1]["note"]){j+=1;if(drag[j]["x"]>drag[j+1]["x"]){return 8;}
else if(drag[j]["x"]<drag[j+1]["x"]){return 9;}
else{return 5;}}
else{return 5;}}
else if(j+1==drag.length){return endKind;}
else if(j+1<drag.length){if(drag[j]["note"]==drag[j+1]["note"]){if(j+2<drag.length){j+=1;return 6;}
else{if(drag[j]["x"]>drag[j+1]["x"]){endKind=8;}
else if(drag[j]["x"]<drag[j+1]["x"]){endKind=9;}
else{j+=1;}
return 7;}}
else{return 6;}}})();v.push({"id":v.length+1,"kind":kind,"note":note,"pos":pw["pos"],"width":pw["width"],"ex":ex,"preId":v.length});}}}
return v;})();writeDrb("OFFSET","0");writeDrb("BEAT",bpn/4);writeDrb("BPM_NUMBER",bpms.length);for(var i=0;i<bpms.length;i++){writeDrb("BPM ["+i+"]",bpms[i][1].toString());writeDrb("BPMS["+i+"]",bpms[i][0].toString());}
writeDrb("SCN",scs.length);for(var i=0;i<scs.length;i++){writeDrb("SC ["+i+"]",scs[i][1].toString());writeDrb("SCI["+i+"]",scs[i][0].toString());}
for(var i=0;i<notes.length;i++){writeDrb("","<"+[notes[i]["id"],notes[i]["kind"],notes[i]["note"].toFixed(5),notes[i]["pos"],notes[i]["width"],notes[i]["ex"],notes[i]["preId"]].join("><")+">");}
writeDrb("","");return drb.join("\r\n");};var toMstText=function(indexes){var mst={"meta":copyObject(Semi["meta"]),"data":copyObject(Semi["data"]),"file":[]};mst["meta"]=copyObject(Semi["meta"]);mst["data"]=[];for(var n=0;n<indexes.length;n++){var index=indexes[n];if(index<Semi["data"].length){mst["data"].push((function(){var v=[];for(var child=0;child<Semi["data"][index].length;child++){v.push(repairData(extData({"beat":copyObject(Semi["data"][index][child]["beat"]),"note":copyObject(Semi["data"][index][child]["note"]),"effect":copyObject(Semi["data"][index][child]["effect"]),"status":copyObject(Semi["data"][index][child]["status"]),"transform":copyObject(Semi["data"][index][child]["transform"]),"transformed":copyObject(Semi["data"][index][child]["transformed"]),"info":copyObject(Semi["data"][index][child]["info"])},index),index));}
return v;})());}}
mst["file"]=[];for(var i=0;i<Semi["file"].length;i++){mst["file"][i]={"path":Semi["file"][i]["path"],"base64":Semi["file"][i]["base64"]};}
var isClear=true;if(isClear){var note=newItem("note");var beat=newItem("beat");var effect=newItem("effect");var status=newItem("status");var transform=newItem("transform");var info=newItem("info");var argb=newItem("argb");var file=newItem("file");var isEmpty=function(o){if(!isUndefined(o)){if(isObject(o)){var n=Object.getOwnPropertyNames(o);for(var i=0;i<n.length;i++){switch(n[i]){case"length":if(o[n[i]]!=0){for(var j=0;j<o[n[i]];j++){if(!isUndefined(o[j])){return false;}}}
break;default:if(!isUndefined(o[n[i]])){return false;}
break;}}}
else{return false;}}
return true;};var clearEmpty=function(o){return(isEmpty(o)?undefined:o);};var clearDefault=function(o,d){return(isUndefined(o)||(o==d)?undefined:o);};var clearArray=function(a){for(var i=0;i<a.length;i++){if(isUndefined(a[i])||isNull(a[i])){a.splice(i,1);i-=1;}
return a;}};var clearItem=function(data,mode){var current=(arguments.length>2?arguments[2]:note["link"]["c"]);var r=copyObject(data);switch(mode){case"meta":r=r||{};r["title"]=clearDefault(r["title"],"");r["titleTranslit"]=clearDefault(r["titleTranslit"],"");r["subTitle"]=clearDefault(r["subTitle"],"");r["subTitleTranslit"]=clearDefault(r["subTitleTranslit"],"");r["orgTitle"]=clearDefault(r["orgTitle"],"");r["artist"]=clearDefault(r["artist"],"");r["artistTranslit"]=clearDefault(r["artistTranslit"],"");r["subArtist"]=clearDefault(r["subArtist"],"");r["orgArtist"]=clearDefault(r["orgArtist"],"");r["genre"]=clearDefault(r["genre"],"");r["description"]=clearDefault(r["description"],"");r["id"]=clearDefault(r["id"],"");r["tag"]=clearDefault(r["tag"],"");r["author"]=clearDefault(r["author"],"");r["creator"]=clearDefault(r["creator"],"");r["editor"]=clearDefault(r["editor"],"");r["mixer"]=clearDefault(r["mixer"],"");r["effector"]=clearDefault(r["effector"],"");r["illustrator"]=clearDefault(r["illustrator"],"");r["version"]=clearDefault(r["version"],"");r["source"]=clearDefault(r["source"],"");r["orgSource"]=clearDefault(r["orgSource"],"");r["datetime"]=clearDefault(r["datetime"],"");break;case"when":r=r||{};r["b"]=clearDefault(r["b"],beat[mode]["b"]);r["n"]=clearDefault(r["n"],beat[mode]["n"]);r["t"]=clearDefault(r["t"],beat[mode]["t"]);r=clearEmpty(r);break;case"where":r=r||{};r["x"]=clearDefault(r["x"],note[mode]["x"]);r["y"]=clearDefault(r["y"],note[mode]["y"]);r["z"]=clearDefault(r["z"],note[mode]["z"]);r["xt"]=undefined;r["xp"]=undefined;r["yt"]=undefined;r["yp"]=undefined;r["zt"]=undefined;r["zp"]=undefined;r=clearEmpty(r);break;case"link":r=r||{};r["b"]=clearDefault(r["b"],note[mode]["b"]);r["c"]=clearDefault(r["c"],current);r["a"]=clearDefault(r["a"],note[mode]["a"]);r=clearEmpty(r);break;case"size":r=r||{};r["w"]=clearDefault(r["w"],note["flag"][mode]["w"]);r["h"]=clearDefault(r["h"],note["flag"][mode]["h"]);r["d"]=clearDefault(r["d"],note["flag"][mode]["d"]);r=clearEmpty(r);break;case"line":r=r||{};r["vector"]=clearItem(r["vector"],"vector");r["clockwise"]=clearDefault(r["clockwise"],note[mode]["clockwise"]);r["follow"]=clearDefault(r["follow"],note[mode]["follow"]);r["combo"]=clearDefault(r["combo"],note[mode]["combo"]);r["type"]=clearDefault(r["type"],note[mode]["type"]);r["curve"]=clearDefault(r["curve"],note[mode]["curve"]);r["name"]=clearDefault(r["name"],note[mode]["name"]);r["degree"]=clearDefault(r["degree"],note[mode]["degree"]);r=clearEmpty(r);break;case"vector":r=r||[];for(var i=0;i<r.length;i++){r[i]=r[i]||{};r[i]["when"]=clearItem(r[i]["when"],"when");r[i]["where"]=clearItem(r[i]["where"],"where");}
r=clearArray(r);break;case"flag":r=r||{};r["appear"]=clearItem(r["appear"],"where");r["degree"]=clearDefault(r["degree"],note[mode]["degree"]);r["style"]=clearDefault(r["style"],note[mode]["style"]);r["size"]=clearItem(r["size"],"size");r["catch"]=(r["catch"]?r["catch"]:undefined);r["flick"]=(r["flick"]?r["flick"]:undefined);r["chain"]=(r["chain"]?r["chain"]:undefined);r["click"]=(r["click"]?r["click"]:undefined);r["auto"]=(r["auto"]?r["auto"]:undefined);r["invisible"]=(r["invisible"]?r["invisible"]:undefined);r["invalid"]=(r["invalid"]?r["invalid"]:undefined);r["fake"]=(r["fake"]?r["fake"]:undefined);r["secret"]=(r["secret"]?r["secret"]:undefined);r["damage"]=(r["damage"]?r["damage"]:undefined);r["parallel"]=clearDefault(r["parallel"],note[mode]["parallel"]);r["colorSkip"]=clearDefault(r["colorSkip"],note[mode]["colorSkip"]);r["fever"]=(r["fever"]?r["fever"]:undefined);r["skill"]=(r["skill"]?r["skill"]:undefined);r["ex"]=clearDefault(r["ex"],note[mode]["ex"]);r=clearEmpty(r);break;case"argb":r=r||{};r["a"]=clearDefault(r["a"],argb["a"]);r["r"]=clearDefault(r["r"],argb["r"]);r["g"]=clearDefault(r["g"],argb["g"]);r["b"]=clearDefault(r["b"],argb["b"]);r=clearEmpty(r);break;case"parameter":r=r||{};r["crossFade"]=(r["crossFade"]?r["crossFade"]:undefined);r["horizontalFlip"]=(r["horizontalFlip"]?r["horizontalFlip"]:undefined);r["verticalFlip"]=(r["verticalFlip"]?r["verticalFlip"]:undefined);r["additiveBlend"]=(r["additiveBlend"]?r["additiveBlend"]:undefined);r=clearEmpty(r);break;case"addition":r=r||{};r["efffectPath"]=(r["efffectPath"]?r["efffectPath"]:undefined);r["animationPath"]=(r["animationPath"]?r["animationPath"]:undefined);r["transitionPath"]=(r["transitionPath"]?r["transitionPath"]:undefined);r["animationColor"]=(r["animationColor"]?r["animationColor"]:undefined);r=clearEmpty(r);break;case"flag":r=r||{};r["tex"]=(r["tex"]?r["tex"]:undefined);r["bgm"]=(r["bgm"]?r["bgm"]:undefined);r=clearEmpty(r);break;case"change":r=r||[];for(var i=0;i<r.length;i++){r[i]["easing"]=clearDefault(r[i]["easing"],"");r[i]["when"]=clearItem(r[i]["when"],"when");r[i]["when2"]=clearItem(r[i]["when2"],"when");r[i]["value"]=clearEmpty(r[i]["value"]);r[i]["value2"]=clearEmpty(r[i]["value2"]);r[i]=clearEmpty(r[i]);}
r=clearArray(r);break;case"beat":r=r||[];for(var i=r.length-1;i>-1;i--){r[i]=r[i]||{};r[i]["when"]=clearItem(r[i]["when"],"when");r[i]["bpm"]=clearDefault(r[i]["bpm"],(i?r[i-1]["bpm"]:beat["bpm"]));r[i]["bpn"]=clearDefault(r[i]["bpn"],(i?r[i-1]["bpn"]:beat["bpn"]));r[i]["dpb"]=clearDefault(r[i]["dpb"],(i?r[i-1]["dpb"]:beat["dpb"]));r[i]["fpn"]=clearDefault(r[i]["fpn"],(i?r[i-1]["fpn"]:beat["fpn"]));r[i]["lpn"]=clearDefault(r[i]["lpn"],(i?r[i-1]["lpn"]:beat["lpn"]));r[i]=clearEmpty(r[i]);}
r=clearArray(r);break;case"note":r=r||[];for(var i=0;i<r.length;i++){r[i]=r[i]||{};r[i]["when"]=clearItem(r[i]["when"],"when");r[i]["where"]=clearItem(r[i]["where"],"where");r[i]["link"]=clearItem(r[i]["link"],"link",i);r[i]["line"]=clearItem(r[i]["line"],"line");r[i]["flag"]=clearItem(r[i]["flag"],"flag");r[i]["trigger"]=clearItem(r[i]["trigger"],"effect");r[i]=clearEmpty(r[i]);}
r=clearArray(r);break;case"effect":r=r||[];for(var i=0;i<r.length;i++){r[i]=r[i]||{};r[i]["when"]=clearItem(r[i]["when"],"when");r[i]["kind"]=clearDefault(r[i]["kind"],effect["kind"]);r[i]["while"]=clearDefault(r[i]["while"],effect["while"]);r[i]["what"]=clearDefault(r[i]["what"],effect["what"]);r[i]["path"]=clearDefault(r[i]["path"],effect["path"]);r[i]["spriteID"]=clearDefault(r[i]["spriteID"],effect["spriteID"]);r[i]["text"]=clearDefault(r[i]["text"],effect["text"]);r[i]["where"]=clearItem(r[i]["where"],"where");r[i]["where2"]=clearItem(r[i]["where2"],"where");r[i]["clip"]=clearItem(r[i]["clip"],"where");r[i]["clip2"]=clearItem(r[i]["clip2"],"where");r[i]["backColor"]=clearItem(r[i]["argb"],"argb");r[i]["foreColor"]=clearItem(r[i]["argb"],"argb");r[i]["size"]=clearItem(r[i]["size"],"size");r[i]["angle"]=clearDefault(r[i]["angle"],effect["angle"]);r[i]["opacity"]=clearDefault(r[i]["opacity"],effect["opacity"]);r[i]["volume"]=clearDefault(r[i]["volume"],effect["volume"]);r[i]["panner"]=clearDefault(r[i]["panner"],effect["panner"]);r[i]["pitch"]=clearDefault(r[i]["pitch"],effect["pitch"]);r[i]["offset"]=clearDefault(r[i]["offset"],effect["offset"]);r[i]["duration"]=clearDefault(r[i]["duration"],effect["duration"]);r[i]["rate"]=clearDefault(r[i]["rate"],effect["rate"]);r[i]["interval"]=clearDefault(r[i]["interval"],effect["interval"]);r[i]["speed"]=clearDefault(r[i]["speed"],effect["speed"]);r[i]["frame"]=clearDefault(r[i]["frame"],effect["frame"]);r[i]["loop"]=clearDefault(r[i]["loop"],effect["loop"]);r[i]["repeat"]=clearDefault(r[i]["repeat"],effect["repeat"]);r[i]["playback"]=clearDefault(r[i]["playback"],effect["playback"]);r[i]["fix"]=clearDefault(r[i]["fix"],effect["fix"]);r[i]["sampleSet"]=clearDefault(r[i]["sampleSet"],effect["sampleSet"]);r[i]["sampleSound"]=clearDefault(r[i]["sampleSound"],effect["sampleSound"]);r[i]["sampleIndex"]=clearDefault(r[i]["sampleIndex"],effect["sampleIndex"]);r[i]["comment"]=clearDefault(r[i]["comment"],effect["comment"]);r[i]["parameter"]=clearItem(r[i]["parameter"],"parameter");r[i]["addition"]=clearItem(r[i]["addition"],"addition");r[i]["flag"]=clearItem(r[i]["flag"],"flag");r[i]["change"]=clearItem(r[i]["change"],"change");r[i]=clearEmpty(r[i]);}
r=clearArray(r);break;case"status":r=r||[];for(var i=0;i<r.length;i++){r[i]=r[i]||{};r[i]["when"]=clearItem(r[i]["when"],"when");r[i]["name"]=clearDefault(r[i]["name"],status["name"]);r[i]["value"]=clearDefault(r[i]["value"],status["value"]);r[i]["value2"]=clearDefault(r[i]["value2"],status["value2"]);r[i]=clearEmpty(r[i]);}
r=clearArray(r);break;case"transform":r=r||[];for(var i=0;i<r.length;i++){r[i]=r[i]||{};r[i]["when"]=clearItem(r[i]["when"],"when");r[i]["reset"]=clearDefault(r[i]["reset"],transform["reset"]);r[i]["translateX"]=clearDefault(r[i]["translateX"],transform["translateX"]);r[i]["translateY"]=clearDefault(r[i]["translateY"],transform["translateY"]);r[i]["translateZ"]=clearDefault(r[i]["translateZ"],transform["translateZ"]);r[i]["scaleX"]=clearDefault(r[i]["scaleX"],transform["scaleX"]);r[i]["scaleY"]=clearDefault(r[i]["scaleY"],transform["scaleY"]);r[i]["scaleZ"]=clearDefault(r[i]["scaleZ"],transform["scaleZ"]);r[i]["rotateX"]=clearDefault(r[i]["rotateX"],transform["rotateX"]);r[i]["rotateY"]=clearDefault(r[i]["rotateY"],transform["rotateY"]);r[i]["rotateZ"]=clearDefault(r[i]["rotateZ"],transform["rotateZ"]);r[i]["skewX"]=clearDefault(r[i]["skewX"],transform["skewX"]);r[i]["skewY"]=clearDefault(r[i]["skewY"],transform["skewY"]);r[i]["skewZ"]=clearDefault(r[i]["skewZ"],transform["skewZ"]);r[i]["perspective"]=clearDefault(r[i]["perspective"],transform["perspective"]);r[i]["duration"]=clearDefault(r[i]["duration"],transform["duration"]);r[i]["easing"]=clearDefault(r[i]["easing"],transform["easing"]);r[i]=clearEmpty(r[i]);}
r=clearArray(r);break;case"info":r=r||{};r["min"]["when"]=clearItem(r["min"]["when"],"when");r["min"]=clearEmpty(r["min"]);r["max"]["when"]=clearItem(r["max"]["when"],"when");r["max"]=clearEmpty(r["max"]);r["length"]["when"]=clearItem(r["length"]["when"],"when");r["length"]=clearEmpty(r["length"]);r["start"]=undefined;r["bpm"]=clearDefault(r["bpm"],info["bpm"]);r["bpn"]=clearDefault(r["bpn"],info["bpn"]);r["key"]=clearDefault(r["key"],info["key"]);r["name"]=clearDefault(r["name"],info["name"]);r["comment"]=clearDefault(r["comment"],info["comment"]);r["bpmBase"]=clearDefault(r["bpmBase"],info["bpmBase"]);r["playMode"]=clearDefault(r["playMode"],info["playMode"]);r["player"]=clearDefault(r["player"],info["player"]);r["difficulty"]=clearDefault(r["difficulty"],info["difficulty"]);r["level"]=clearDefault(r["level"],info["level"]);r["rank"]=clearDefault(r["rank"],info["rank"]);r["defExRank"]=clearDefault(r["defExRank"],info["defExRank"]);r["volWav"]=clearDefault(r["volWav"],info["volWav"]);r["cdda"]=clearDefault(r["cdda"],info["cdda"]);r["stageFile"]=clearDefault(r["stageFile"],info["stageFile"]);r["banner"]=clearDefault(r["banner"],info["banner"]);r["background"]=clearDefault(r["background"],info["background"]);r["videoFile"]=clearDefault(r["videoFile"],info["videoFile"]);r["videoFps"]=clearDefault(r["videoFps"],info["videoFps"]);r["videoColors"]=clearDefault(r["videoColors"],info["videoColors"]);r["videoDelay"]=clearDefault(r["videoDelay"],info["videoDelay"]);r["movie"]=clearDefault(r["movie"],info["movie"]);r["midFile"]=clearDefault(r["midFile"],info["midFile"]);r["charFile"]=clearDefault(r["charFile"],info["charFile"]);r["pathWav"]=clearDefault(r["pathWav"],info["pathWav"]);r["materialsWav"]=clearDefault(r["materialsWav"],info["materialsWav"]);r["materialsBmp"]=clearDefault(r["materialsBmp"],info["materialsBmp"]);r["email"]=clearDefault(r["email"],info["email"]);r["url"]=clearDefault(r["url"],info["url"]);r["magnification"]=clearDefault(r["magnification"],info["magnification"]);r["message"]=clearDefault(r["message"],info["message"]);r["previewImage"]=clearDefault(r["previewImage"],info["previewImage"]);r["resultImage"]=clearDefault(r["resultImage"],info["resultImage"]);r["levelDrum"]=clearDefault(r["levelDrum"],info["levelDrum"]);r["levelGuitar"]=clearDefault(r["levelGuitar"],info["levelGuitar"]);r["levelBass"]=clearDefault(r["levelBass"],info["levelBass"]);r["chipPalette"]=clearDefault(r["chipPalette"],info["chipPalette"]);r["chartVersion"]=clearDefault(r["chartVersion"],info["chartVersion"]);r["chartName"]=clearDefault(r["chartName"],info["chartName"]);r["chartDescription"]=clearDefault(r["chartDescription"],info["chartDescription"]);r["chartStyle"]=clearDefault(r["chartStyle"],info["chartStyle"]);r["radarValues"]=clearDefault(r["radarValues"],info["radarValues"]);r["meterType"]=clearDefault(r["meterType"],info["meterType"]);r["credit"]=clearDefault(r["credit"],info["credit"]);r["previewId"]=clearDefault(r["previewId"],info["previewId"]);r["cover"]=clearDefault(r["cover"],info["cover"]);r["discImage"]=clearDefault(r["discImage"],info["discImage"]);r["cdImage"]=clearDefault(r["cdImage"],info["cdImage"]);r["cdTitle"]=clearDefault(r["cdTitle"],info["cdTitle"]);r["lyricsPath"]=clearDefault(r["lyricsPath"],info["lyricsPath"]);r["preview"]=clearDefault(r["preview"],info["preview"]);r["instrumentTrack"]=clearDefault(r["instrumentTrack"],info["instrumentTrack"]);r["sampleStart"]=clearDefault(r["sampleStart"],info["sampleStart"]);r["sampleLength"]=clearDefault(r["sampleLength"],info["sampleLength"]);r["selectable"]=clearDefault(r["selectable"],info["selectable"]);r["attacks"]=clearDefault(r["attacks"],info["attacks"]);r["displayTitle"]=clearDefault(r["displayTitle"],info["displayTitle"]);r["displayArtist"]=clearDefault(r["displayArtist"],info["displayArtist"]);r["displayBpm"]=clearDefault(r["displayBpm"],info["displayBpm"]);r["randSeed"]=clearDefault(r["randSeed"],info["randSeed"]);r["randStart"]=clearDefault(r["randStart"],info["randStart"]);r["randFolder"]=clearDefault(r["randFolder"],info["randFolder"]);r["randList"]=clearDefault(r["randList"],info["randList"]);r["course"]=clearDefault(r["course"],info["course"]);r["side"]=clearDefault(r["side"],info["side"]);r["balloon"]=clearEmpty(r["balloon"]);r["bgmVolumn"]=clearDefault(r["bgmVolumn"],info["bgmVolumn"]);r["seVolumn"]=clearDefault(r["seVolumn"],info["seVolumn"]);r["previewStart"]=clearDefault(r["previewStart"],info["previewStart"]);r["life"]=clearDefault(r["life"],info["life"]);r["scoreInit"]=clearDefault(r["scoreInit"],info["scoreInit"]);r["scoreDiff"]=clearDefault(r["scoreDiff"],info["scoreDiff"]);r["scoreMode"]=clearDefault(r["scoreMode"],info["scoreMode"]);r["countdown"]=clearDefault(r["countdown"],info["countdown"]);r["stackLeniency"]=clearDefault(r["stackLeniency"],info["stackLeniency"]);r["letterboxInBreaks"]=clearDefault(r["letterboxInBreaks"],info["letterboxInBreaks"]);r["widescreenStoryboard"]=clearDefault(r["widescreenStoryboard"],info["widescreenStoryboard"]);r["storyFireInFront"]=clearDefault(r["storyFireInFront"],info["storyFireInFront"]);r["specialStyle"]=clearDefault(r["specialStyle"],info["specialStyle"]);r["epilepsyWarning"]=clearDefault(r["epilepsyWarning"],info["epilepsyWarning"]);r["useSkinSprites"]=clearDefault(r["useSkinSprites"],info["useSkinSprites"]);r["editorBookmarks"]=clearDefault(r["editorBookmarks"],info["editorBookmarks"]);r["bookmarks"]=r["bookmarks"]||[];for(var i=0;i<r["bookmarks"].length;i++){r["bookmarks"][i]=clearDefault(r["bookmarks"][i],"");r["bookmarks"][i]=clearEmpty(r["bookmarks"][i]);}
r["bookmarks"]=clearArray(r["bookmarks"]);r["distanceSpacing"]=clearDefault(r["distanceSpacing"],info["distanceSpacing"]);r["beatDivisor"]=clearDefault(r["beatDivisor"],info["beatDivisor"]);r["gridSize"]=clearDefault(r["gridSize"],info["gridSize"]);r["timelineZoom"]=clearDefault(r["timelineZoom"],info["timelineZoom"]);r["beatmapID"]=clearDefault(r["beatmapID"],info["beatmapID"]);r["beatmapSetID"]=clearDefault(r["beatmapSetID"],info["beatmapSetID"]);r["hpDrainRate"]=clearDefault(r["hpDrainRate"],info["hpDrainRate"]);r["circleSize"]=clearDefault(r["circleSize"],info["circleSize"]);r["overallDifficulty"]=clearDefault(r["overallDifficulty"],info["overallDifficulty"]);r["approachRate"]=clearDefault(r["approachRate"],info["approachRate"]);r["sliderMultiplier"]=clearDefault(r["sliderMultiplier"],info["sliderMultiplier"]);r["sliderTickRate"]=clearDefault(r["sliderTickRate"],info["sliderTickRate"]);r["colorBack"]=clearItem(r["colorBack"],"argb");r["colorGroup"]=r["colorGroup"]||[];for(var i=0;i<r["colorGroup"].length;i++){r["colorGroup"][i]=clearItem(r["colorGroup"][i],"argb");r["colorGroup"][i]=clearEmpty(r["colorGroup"][i]);}
r["colorGroup"]=clearArray(r["colorGroup"]);r["titleImage"]=clearDefault(r["titleImage"],info["titleImage"]);r["artistImage"]=clearDefault(r["artistImage"],info["artistImage"]);r["changeSeVolumn"]=clearDefault(r["changeSeVolumn"],info["changeSeVolumn"]);r["seGain"]=clearDefault(r["seGain"],info["seGain"]);r["seType"]=clearDefault(r["seType"],info["seType"]);r["seOffset"]=clearDefault(r["seOffset"],info["seOffset"]);r["previewDuration"]=clearDefault(r["previewDuration"],info["previewDuration"]);r["id"]=clearDefault(r["id"],info["id"]);r["speed"]=clearDefault(r["speed"],info["speed"]);r["interval"]=clearDefault(r["interval"],info["interval"]);r["testDivide"]=clearDefault(r["testDivide"],info["testDivide"]);r["testSpeed"]=clearDefault(r["testSpeed"],info["testSpeed"]);r["testSave"]=clearDefault(r["testSave"],info["testSave"]);r["testLock"]=clearDefault(r["testLock"],info["testLock"]);r["testEditMode"]=clearDefault(r["testEditMode"],info["testEditMode"]);r["backgroundType"]=clearDefault(r["backgroundType"],info["backgroundType"]);r["layerType"]=clearDefault(r["layerType"],info["layerType"]);r["icon"]=clearDefault(r["icon"],info["icon"]);r["noteFactoryPrepare"]=clearDefault(r["noteFactoryPrepare"],info["noteFactoryPrepare"]);r["defaultStartTunnel"]=clearDefault(r["defaultStartTunnel"],info["defaultStartTunnel"]);r["defaultWeatherUIB"]=clearDefault(r["defaultWeatherUIB"],info["defaultWeatherUIB"]);r["defaultCurtainUIC"]=clearDefault(r["defaultCurtainUIC"],info["defaultCurtainUIC"]);r["defaultChiefClimax"]=clearDefault(r["defaultChiefClimax"],info["defaultChiefClimax"]);break;case"data":r=r||[];for(var i=0;i<r.length;i++){r[i]=r[i]||[];for(var j=0;j<r[i].length;j++){r[i][j]=r[i][j]||{};r[i][j]["beat"]=clearItem(r[i][j]["beat"],"beat");r[i][j]["note"]=clearItem(r[i][j]["note"],"note");r[i][j]["effect"]=clearItem(r[i][j]["effect"],"effect");r[i][j]["status"]=clearItem(r[i][j]["status"],"status");r[i][j]["transform"]=clearItem(r[i][j]["transform"],"transform");r[i][j]["transformed"]=clearItem(r[i][j]["transformed"],"transform");r[i][j]["info"]=clearItem(r[i][j]["info"],"info");r[i][j]=clearEmpty(r[i][j]);}
r[i]=clearArray(r[i]);}
r=clearArray(r);break;case"file":r=r||[];for(var i=0;i<r.length;i++){r[i]=r[i]||{};r[i]["path"]=clearDefault(r[i]["path"],file["path"]);r[i]["base64"]=clearDefault(r[i]["base64"],file["base64"]);r[i]=clearEmpty(r[i]);}
r=clearArray(r);break;}
r=clearEmpty(r);return r;};mst["meta"]=clearItem(mst["meta"],"meta");mst["data"]=clearItem(mst["data"],"data");mst["file"]=clearItem(mst["file"],"file");mst["draw"]=undefined;}
return JSON.stringify(mst,null,2).replace(/\n/g,"\r\n");};var toPngText=function(indexes,type){return toPng(indexes,type,true)["src"][0];};var toHtmlText=function(indexes,type){var png=toPng(indexes,type,false);var q='"';var div=(function(){var v=[];for(var i=0;i<png["src"].length;i++){v.push("<div><img src="+q+png["src"][i]+q+"/></div>");}
return"<div>"+v.join("")+"</div>";})();var script=(function(){var audioData=(function(){var audioList=[];for(var p in png["audioList"]){audioList.push(q+p+q+":"+q+png["audioList"][p]["src"]+q);}
var playList=png["playList"].map(function(a){return"{"+q+"offset"+q+":"+a["offset"]+","+q+"path"+q+":"+q+a["path"]+q+","+q+"index"+q+":"+a["index"]+","+q+"volume"+q+":"+a["volume"]+"}";});return(audioList.length?"const audioList={"+audioList.join(",")+"};":"")+(playList.length?"const playList=["+playList.join(",")+"];":"");})();if(audioData){return q+"use strict"+q+";"+audioData+"const maxTime="+png["maxTime"]+";const paddingTop="+(128*MstOptions["DrawScaleX"])+";const paddingBottom="+(64*MstOptions["DrawScaleX"])+";const lineHeight=8;const lineStyle="+q+"#FF00003F"+q+";var body=document.body;var div=body.children[0];var dLine=(function(){let img=new Image();img.width=1;img.height=lineHeight;let cvs=document.createElement("+q+"canvas"+q+");cvs.width=img.width;cvs.height=img.height;let ctx=cvs.getContext("+q+"2d"+q+");ctx.fillStyle=lineStyle;ctx.fillRect(0,0,cvs.width,cvs.height);img.src=cvs.toDataURL("+q+"image/png"+q+");img.style.objectFit="+q+"fill"+q+";img.style.position="+q+"absolute"+q+";img.style.zIndex=div.children.length;return img;})();body.appendChild(dLine);var mLine=(function(){let img=new Image();img.width=1;img.height=lineHeight;let cvs=document.createElement("+q+"canvas"+q+");cvs.width=img.width;cvs.height=img.height;let ctx=cvs.getContext("+q+"2d"+q+");ctx.beginPath();ctx.moveTo(0,0);ctx.lineTo(cvs.width,0);ctx.moveTo(0,cvs.height);ctx.lineTo(cvs.width,cvs.height);ctx.strokeStyle=lineStyle;ctx.stroke();img.src=cvs.toDataURL("+q+"image/png"+q+");img.style.objectFit="+q+"fill"+q+";img.style.position="+q+"absolute"+q+";img.style.zIndex=div.children.length;return img;})();body.appendChild(mLine);const pageBottom=parseInt(getComputedStyle(body).marginBottom);const startPosition=div.offsetHeight-paddingBottom;const endPosition=paddingTop;const speedRate=maxTime/(div.offsetHeight-paddingTop-paddingBottom);var audioTime=0;var playTime=-1;var audios=(function(){let v={};playList.forEach(function(t){v[t["+q+"path"+q+"]]=v[t["+q+"path"+q+"]]||[];v[t["+q+"path"+q+"]][t["+q+"index"+q+"]]=v[t["+q+"path"+q+"]][t["+q+"index"+q+"]]||(function(){let a=document.createElement("+q+"audio"+q+");a.src=audioList[t["+q+"path"+q+"]];a.preload="+q+"auto"+q+";return a;})();});return v;})();var resize=function(){dLine.width=div.scrollWidth;mLine.width=div.scrollWidth;};var moveLine=function(y){y=(y<endPosition+lineHeight?endPosition+lineHeight:y);y=(y>startPosition+lineHeight?startPosition+lineHeight:y);mLine.style.top=y-lineHeight/2;};var setLine=function(){dLine.style.top=mLine.style.top;};var animation=function(){if(playTime>0){var nowTime=performance.now()-playTime+audioTime;playList.forEach(function(t){let a=audios[t["+q+"path"+q+"]][t["+q+"index"+q+"]];if(a&&(a.readyState>2)&&a.paused&&(nowTime>=t["+q+"offset"+q+"])&&(nowTime<t["+q+"offset"+q+"]+a.duration*1000)){a.currentTime=(nowTime-t["+q+"offset"+q+"])/1000;a.volume=t["+q+"volume"+q+"];a.play();}});let top=(startPosition+lineHeight/2-nowTime/speedRate)|0;if(top<endPosition+lineHeight/2){top=endPosition+lineHeight/2;pause();}dLine.style.top=top;body.scrollTop=top-lineHeight/2-body.clientHeight+pageBottom+paddingBottom;window.requestAnimationFrame(animation);}};var play=function(){mLine.style.display="+q+"none"+q+";let top=parseInt(dLine.style.top);if(top==endPosition+lineHeight/2){top=startPosition+lineHeight/2;dLine.style.top=top;}audioTime=(startPosition+lineHeight/2-top)*speedRate|0;playTime=performance.now();window.requestAnimationFrame(animation);};var pause=function(){moveLine(dLine.style.top);mLine.style.display="+q+""+q+";for(let p in audios){audios[p].forEach(function(t){t.pause();});}playTime=-1;};window.onresize=function(e){resize();};window.onmousemove=function(e){if(playTime<0){moveLine(e.pageY);}};window.onclick=function(e){if(playTime>0){pause();}else{setLine();play();}};resize();moveLine(endPosition);setLine();";}})();return"<html><head><meta http-equiv="+q+"Content-Type"+q+"content="+q+"text/html;charset=UTF-8"+q+"/><meta name="+q+"viewport"+q+"content="+q+"width="+png["width"]+",user-scalable=yes"+q+"><title>"+fileInfo.nameCore+(ext=="imd"?fileInfo.suffixImd:"")+(ext=="mde"?fileInfo.suffixMde:"")+(ext=="musync"?fileInfo.suffixMusync:"")+"."+fileInfo.extension[0]+"</title><style type="+q+"text/css"+q+">div{text-align:center;}</style></head><body>"+div+"</body>"+(script?"<script type="+q+"text/javascript"+q+">"+script+"</"+"script>":"")+"</html>";};var toText=function(indexes,ext){var type=(arguments.length>2?arguments[2]:"");var type2=(arguments.length>3?arguments[3]:"");if(indexes.length==0){return new Uint8Array();}
var index=indexes[0];var list=indexes.join(",");switch(ext){case"log":Text["log"]=Text["log"]||toLogText();return Text["log"];break;case"bms":case"bme":case"bml":case"pms":Text["bms"+ext][list]=Text["bms"+ext][list]||toBmsText(indexes,ext);return Text["bms"+ext][list];break;case"dtx":Text["dtx"+type][list]=Text["dtx"+type][list]||toDtxText(indexes,type);return Text["dtx"+type][list];break;case"msd":Text["msd"][list]=Text["msd"][list]||toMsdText(indexes);return Text["msd"][list];break;case"sm":case"sma":case"ssc":Text["sm"+ext][list]=Text["sm"+ext][list]||toSmText(indexes,ext);return Text["sm"+ext][list];break;case"dwi":Text["dwi"][list]=Text["dwi"][list]||toDwiText(indexes);return Text["dwi"][list];break;case"ksf":Text["ksf"][list]=Text["ksf"][list]||toKsfText(indexes);return Text["ksf"][list];break;case"ucs":Text["ucs"][list]=Text["ucs"][list]||toUcsText(indexes);return Text["ucs"][list];break;case"dance":Text["dance"][list]=Text["dance"][list]||toDanceText(indexes);return Text["dance"][list];break;case"tja":switch(type){case"taiko":case"jube":Text["tja"+type][list]=Text["tja"+type][list]||toTjaText(indexes,type);return Text["tja"+type][list];break;}
break;case"osu":switch(type){case"osu":case"taiko":case"ctb":case"mania":Text["osu"+type][index]=Text["osu"+type][index]||toOsuText(index,type);return Text["osu"+type][index];break;}
break;case"xml":switch(type){case"yddr":case"ydsd":case"mde":case"dynamix":case"qqx5":Text["xml"+type+type2][index]=Text["xml"+type+type2][index]||toXmlText(index,type,type2);return Text["xml"+type+type2][index];break;}
break;case"vox":Text["vox"][index]=Text["vox"][index]||toVoxText(index);return Text["vox"][index];break;case"ksh":Text["ksh"][index]=Text["ksh"][index]||toKshText(index);return Text["ksh"][index];break;case"imd":Text["imd"][index]=Text["imd"][index]||toImdText(index);return Text["imd"][index];break;case"mde":Text["mde"][index]=Text["mde"][index]||toMdeText(index);return Text["mde"][index];break;case"txt":Text["txt"+type+type2][index]=Text["txt"+type+type2][index]||toTxtText(index,type,type2);return Text["txt"+type+type2][index];break;case"json":Text["json"+type][index]=Text["json"+type][index]||toJsonText(index,type);return Text["json"+type][index];break;case"mc":switch(type){case"key":case"step":case"dj":case"catch":case"pad":case"taiko":case"ring":case"slide":Text["mc"+type][index]=Text["mc"+type][index]||toMcText(index,type);return Text["mc"+type][index];break;}
break;case"c2s":Text["c2s"][index]=Text["c2s"][index]||toC2sText(index);return Text["c2s"][index];break;case"aff":Text["aff"][index]=Text["aff"][index]||toAffText(index);return Text["aff"][index];break;case"drb":Text["drb"][index]=Text["drb"][index]||toDrbText(index);return Text["drb"][index];break;case"mst":Text["mst"][list]=Text["mst"][list]||toMstText(indexes);return Text["mst"][list];break;case"png":switch(type){case"bms":case"tja":case"osu":case"imd":case"mc":case"aff":case"txt":Text["png"+type][list]=Text["png"+type][list]||toPngText(indexes,type);return Text["png"+type][list];break;}
break;case"html":switch(type){case"bms":case"tja":case"osu":case"imd":case"mc":case"aff":case"txt":Text["html"+type][list]=Text["html"+type][list]||toHtmlText(indexes,type);return Text["html"+type][list];break;}
break;}};this.GetBuffer=function(){return File[Index]["buffer"];};this.GetInfo=function(){File[Index]["info"]=File[Index]["info"]||checkInfo();return File[Index]["info"];};this.PreData=preData;this.AddRes=addRes;this.ToBuffer=toBuffer;this.ToText=toText;this.IsExist=function(ext){switch(ext){case"":return true;break;}};this.Choose=function(index){Index=index;};this.FileLength=function(){return File.length;};this.GetValue=function(name){switch(name){case"fileLength":return Raw["file"].length;break;case"nameList":var v=[];for(var index=0;index<Raw["data"].length;index++){v.push((Semi["data"]&&Semi["data"][index]&&Semi["data"][index][0]&&Semi["data"][index][0]["info"]?Semi["data"][index][0]["info"]["name"]:"")||(Raw["data"]&&Raw["data"][index]&&Raw["data"][index][0]&&Raw["data"][index][0]["info"]?Raw["data"][index][0]["info"]["name"]:"")||index);}
return v;break;}}
this.Reset=function(m){reset(m);};Object.defineProperty(this,"IsValid",{"get":function(){return isValid&&Raw;}});(function(){if(buffer.length==0){return;}
reset();Stutas["timeRead"]=new Date();switch(ext){case"vos":fromVosBuffer(buffer);break;case"bms":case"bme":case"bml":case"pms":fromBmsBuffer(buffer,ext);break;case"dtx":fromDtxBuffer(buffer);break;case"msd":fromMsdBuffer(buffer);break;case"ssq":fromSsqBuffer(buffer);break;case"sm":case"sma":case"ssc":fromSmBuffer(buffer,ext);break;case"sdf":fromSdfBuffer(buffer);break;case"dwi":fromDwiBuffer(buffer);break;case"pt":fromPtBuffer(buffer);break;case"ksf":fromKsfBuffer(buffer);break;case"ucs":fromUcsBuffer(buffer);break;case"dance":fromDanceBuffer(buffer);break;case"tja":fromTjaBuffer(buffer);break;case"ojn":fromOjnBuffer(buffer);break;case"osu":fromOsuBuffer(buffer);break;case"xml":fromXmlBuffer(buffer);break;case"vox":fromVoxBuffer(buffer);break;case"ksh":fromKshBuffer(buffer);break;case"imd":fromImdBuffer(buffer);break;case"mde":fromMdeBuffer(buffer);break;case"txt":fromTxtBuffer(buffer);break;case"json":fromJsonBuffer(buffer);break;case"mc":fromMcBuffer(buffer);break;case"c2s":fromC2sBuffer(buffer);break;case"aff":fromAffBuffer(buffer);break;case"drb":fromDrbBuffer(buffer);break;case"mst":fromMstBuffer(buffer);break;case"mid":fromMidBuffer(buffer);break;case"wav":case"ogg":case"mp3":case"aac":case"m4a":case"m4r":fromAudioBuffer(buffer);}})();}
function Img(fileInfo){var buffer=fileInfo.buffer;var ext=fileInfo.extension[0];var isValid=false;var img=new Image();var Buffer;var Text;var reset=function(){isValid=false;Buffer=undefined;Text={};};var preData=async function(){await(function(){img.src=getImgSrc(Buffer);})();};var fromImgBuffer=function(buffer){Buffer=buffer;isValid=true;};var toImgText=function(mode,type){var a=mode.split("X");var w=parseFloat(a[0])||img.width;var h=parseFloat(a[1])||img.height;var cvs=document.createElement("canvas");cvs.width=w;cvs.height=h;var ctx=cvs.getContext("2d");if(img.width/img.height>=w/h){var r=h/img.height;ctx.drawImage(img,(img.width-w/r)/2,0,w/r,h/r,0,0,w,h);}
else{var r=w/img.width;ctx.drawImage(img,0,(img.height-h/r)/2,w/r,h/r,0,0,w,h);}
return cvs.toDataURL("image/"+type);};this.PreData=preData;this.ToText=function(mode,type){Text[mode]=Text[mode]||toImgText(mode,type);return Text[mode];};Object.defineProperty(this,"IsValid",{"get":function(){return isValid;}});(function(){if(buffer.length==0){return;}
reset();switch(ext){case"bmp":case"jpg":case"gif":case"png":fromImgBuffer(buffer);break;}})();}
function Pkg(fileInfo){var buffer=fileInfo.buffer;var ext=fileInfo.extension[0];var isValid=false;var All;var File;var Tag;var Index;var p;var Extensions;var reset=function(){isValid=false;All={};File={};Tag="|";Index=0;p=0;File[Tag]=[];All[Tag]={};Extensions=undefined;};var findByte=function(t){var s=(arguments.length>1?arguments[1]:p);for(var i=s;i<buffer.length;i++){if(buffer[i]==t){return i;}}
return buffer.length;};var readInt=function(n,e){var r=buffer.getInt(n,p,e);p+=n;return r;};var readUint=function(n,e){var r=buffer.getUint(n,p,e);p+=n;return r;};var readFloat=function(n,e){var r=buffer.getFloat(n,p,e);p+=n;return r;};var readBuffer=function(n){var r=buffer.slice(p,p+n);p+=n;return r;};var readText=function(n){var e=(arguments.length>1?arguments[1]:"UTF-8");var nullTerminated=(n<0);n=(nullTerminated?findByte(0x00)-p:n);var r=buffer.getText(p,n,e);p+=n+(nullTerminated?1:0);return r;};var readGUID=function(){return[readBuffer(4).reverse().getHex(),readBuffer(2).reverse().getHex(),readBuffer(2).reverse().getHex(),readBuffer(2).getHex(),readBuffer(6).getHex()].join("-");};var readUTF=function(info){if(isUndefined(info)){return;}
var readValue=function(type){var v;switch(type){case 0x00:v=readInt(1,false);break;case 0x01:v=readUint(1,false);break;case 0x02:v=readInt(2,false);break;case 0x03:v=readUint(2,false);break;case 0x04:v=readInt(4,false);break;case 0x05:v=readUint(4,false);break;case 0x06:v=readInt(8,false);break;case 0x07:v=readUint(8,false);break;case 0x08:v=readFloat(4,false);break;case 0x09:v=readFloat(8,false);break;case 0x0A:v=getText(readInt(4,false)+stringOffset,-1);break;case 0x0B:var info={"offset":readInt(4,false)+dataOffset,"size":readInt(4,false)};if(info["size"]){v=info;}
break;}
return v;};var o=info["offset"];p=o;var sign=readText(4);if(sign!="@UTF"){return;}
var tableSize=readInt(4,false);var tableCount=readInt(2,false);var rowOffset=readInt(2,false)+8+o;var stringOffset=readInt(4,false)+8+o;var dataOffset=readInt(4,false)+8+o;var tableName=getText(readInt(4,false)+stringOffset,-1);var columnCount=readInt(2,false);var rowLength=readInt(2,false);var rowCount=readInt(4,false);var columns=[];for(var i=0;i<columnCount;i++){var flag=readInt(1,false);var mode=flag&0xF0;var type=flag&0x0F;var name=getText(readInt(4,false)+stringOffset,-1);var constant=(mode==0x30?readValue(type):undefined);columns.push({"name":name,"mode":mode,"type":type,"constant":constant});}
var rows=[];for(var j=0;j<rowCount;j++){var t=[];p=rowOffset+rowLength*j;for(var i=0;i<columnCount;i++){var v=undefined;switch(columns[i]["mode"]){case 0x00:case 0x10:break;case 0x30:v=columns[i]["constant"];break;case 0x50:v=readValue(columns[i]["type"]);break;}
t.push(v);}
rows.push(t);}
var table=[];for(var j=0;j<rows.length;j++){var t={};for(var i=0;i<rows[j].length;i++){t[columns[i]["name"]]=rows[j][i];}
table.push(t);}
return table;};var readAFS2=function(info){var o=info["offset"];p=o;var sign=readText(4);if(sign!="AFS2"){return;}
var version=readInt(1,true);var childVersion=readInt(1,true);var idSize=readInt(2,true);var count=readInt(4,true);var alignment=readInt(2,true);var awbKey=readInt(2,true);var ids=[];var offsets=[];for(var i=0;i<count;i++){ids.push(readUint(idSize,true));}
for(var i=0;i<count+1;i++){offsets.push(readUint(4,true));}
var files=[];for(var i=0;i<count;i++){var offset=o+offsets[i];var size=offsets[i+1]-offsets[i];var n=0;while(buffer[offset+n]==0){n+=1;}
files.push({"id":ids[i],"buffer":getBuffer(offset+n,size-n),"awbKey":awbKey});}
return files;};var getInt=function(n,s,e){return buffer.getInt(n,s,e);};var getUint=function(n,s,e){return buffer.getUint(n,s,e);};var getBuffer=function(s,n){return buffer.slice(s,s+n);};var getText=function(s,n){var e=(arguments.length>2?arguments[2]:"UTF-8");var nullTerminated=(n<0);n=(nullTerminated?findByte(0x00,s)-s:n);return buffer.getText(s,n,e);};var setList=function(){var list=[];for(var index=0;index<File[Tag].length;index++){list[index]={"path":File[Tag][index]["path"],"mark":File[Tag][index]["mark"]};}
SetFileList("selectPkgList",list);if(Tag=="|"){Extensions=Extensions||(function(){var v={};for(var i=0;i<File[Tag].length;i++){var e=File[Tag][i]["path"].slice(File[Tag][i]["path"].lastIndexOf(".")+1);if(e&&!v[e]){v[e]=true;}}
return v;})();CheckFileTransMode("selectPkgTransMode",Extensions);}};var checkBuffer=function(){var m=(arguments.length>0?arguments[0]:"");var tag=(arguments.length>1?arguments[1]:Tag);var index=(arguments.length>2?arguments[2]:Index);var date=new Date();if(m){if(!All[tag]["checked"]){var zip=new Zip();for(var i=0;i<File[tag].length;i++){checkBuffer("",tag,i);zip.addFile({"path":File[tag][i]["path"],"uncompressedBuffer":File[tag][i]["buffer"]});}
All[tag]["buffer"]=zip.toZip(0);All[tag]["size"]=All[tag]["buffer"].length;All[tag]["time"]=new Date()-date;All[tag]["checked"]=true;}}
else{if(!File[tag][index]["checked"]){if(tag=="|"){switch(ext){case"zip":case"apk":case"ipa":case"osz":case"mcz":var u=(File[tag][index]["method"]==8?File[tag][index]["buffer"].inflate():File[tag][index]["buffer"]);if(u.getCRC32()==File[tag][index]["crc32"]){File[tag][index]["buffer"]=u;File[tag][index]["size"]=File[tag][index]["buffer"].length;File[tag][index]["time"]=new Date()-date;}
else{File[tag][index]["buffer"]=new Uint8Array();File[tag][index]["size"]=File[tag][index]["buffer"].length;File[tag][index]["time"]=undefined;}
File[tag][index]["checked"]=true;break;case"s3v":case"dz":case"cpk":case"acb":case"acf":case"awb":case"adx":case"hca":case"xsb":case"xwb":case"2dx":case"bin":File[tag][index]["time"]=File[tag][index]["time"]||(new Date()-date);File[tag][index]["checked"]=true;break;case"ojm":var n=0;if(File[tag][index]["maskOjm"]){for(var i=0;i<File[tag][index]["buffer"].length;i++){File[tag][index]["buffer"][i]^=File[tag][index]["maskOjm"][n];n+=1;n=(n>File[tag][index]["maskOjm"].length-1?0:n);}}
File[tag][index]["time"]=File[tag][index]["time"]||(new Date()-date);File[tag][index]["checked"]=true;break;}}}}};var checkInfo=function(){var m=(arguments.length>0?arguments[0]:"");var t=(m?All[Tag]:File[Tag][Index]);var v=[];var f=new FileInfo(t["path"]);v.push("path: "+f.directory);if(f.name){v.push("name: "+f.name);}
if(!isUndefined(t["mark"])){v.push("mark: "+t["mark"]);}
if(f.extension[0]){v.push("type: "+f.extension[0]);}
if(f.name){v.push("byte: "+t["buffer"].length+" ("+t["buffer"].length.toByteLength(2)+")");}
if(!isUndefined(t["datetime"])){v.push("date: "+t["datetime"].format());}
if(f.name){v.push("time: "+(!isUndefined(t["time"])?t["time"]+"ms":"Error"));}
if(t["awbKey"]){v.push("awbKey: "+t["awbKey"]);}
return v.join("\r\n");};var fromZipBuffer=function(buffer){var list=new Zip(buffer).getList();for(var i=0;i<list.length;i++){File[Tag].push({"path":list[i]["path"],"buffer":list[i]["compressedBuffer"],"datetime":list[i]["datetime"],"crc32":list[i]["crc32"],"size":list[i]["compressedBuffer"].length,"method":list[i]["method"]});}
setList();isValid=true;};var fromS3vBuffer=function(buffer){var readNumber=function(t){switch(t){case 0:return 0;break;case 1:return readUint(1,true);break;case 2:return readUint(2,true);break;case 3:return readUint(4,true);break;}};var guid={"HeaderObject":"75B22630-668E-11CF-A6D9-00AA0062CE6C","DataObject":"75B22636-668E-11CF-A6D9-00AA0062CE6C","SimpleIndexObject":"33000890-E5B1-11CF-89F4-00A0C90349CB","IndexObject":"D6E229D3-35DA-11D1-9034-00A0C90349BE","MediaObjectIndexObject":"FEB103F8-12AD-4C64-840F-2A1D2F7AD48C","TimecodeIndexObject":"3CB73FD0-0C4A-4803-953D-EDF7B6228F0C","FilePropertiesObject":"8CABDCA1-A947-11CF-8EE4-00C00C205365","HeaderExtensionObject":"5FBF03B5-A92E-11CF-8EE3-00C00C205365","StreamPropertiesObject":"B7DC0791-A9B7-11CF-8EE6-00C00C205365","CodecListObject":"86D15240-311D-11D0-A3A4-00A0C90348F6","ScriptCommandObject":"1EFB1A30-0B62-11D0-A39B-00A0C90348F6","MarkerObject":"F487CD01-A951-11CF-8EE6-00C00C205365","BitrateMutualExclusionObject":"D6E229DC-35DA-11D1-9034-00A0C90349BE","ErrorCorrectionObject":"75B22635-668E-11CF-A6D9-00AA0062CE6C","ContentDescriptionObject":"75B22633-668E-11CF-A6D9-00AA0062CE6C","ExtendedContentDescriptionObject":"D2D0A440-E307-11D2-97F0-00A0C95EA850","ContentBrandingObject":"2211B3FA-BD23-11D2-B4B7-00A0C955FC6E","StreamBitratePropertiesObject":"7BF875CE-468D-11D1-8D82-006097C9A2B2","ContentEncryptionObject":"2211B3FB-BD23-11D2-B4B7-00A0C955FC6E","ExtendedContentEncryptionObject":"298AE614-2622-4C17-B935-DAE07EE9289C","DigitalSignatureObject":"2211B3FC-BD23-11D2-B4B7-00A0C955FC6E","PaddingObject":"1806D474-CADF-4509-A4BA-9AABCB96AAE8","ExtendedStreamPropertiesObject":"14E6A5CB-C672-4332-8399-A96952065B5A","AdvancedMutualExclusionObject":"A08649CF-4775-4670-8A16-6E35357566CD","GroupMutualExclusionObject":"D1465A40-5A79-4338-B71B-E36B8FD6C249","StreamPrioritizationObject":"D4FED15B-88D3-454F-81F0-ED5C45999E24","BandwidthSharingObject":"A69609E6-517B-11D2-B6AF-00C04FD908E9","LanguageListObject":"7C4346A9-EFE0-4BFC-B229-393EDE415C85","MetadataObject":"C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA","MetadataLibraryObject":"44231C94-9498-49D1-A141-1D134E457054","IndexParametersObject":"D6E229DF-35DA-11D1-9034-00A0C90349BE","MediaObjectIndexParametersObject":"6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7","TimecodeIndexParametersObject":"F55E496D-9797-4B5D-8C8B-604DFE9BFB24","CompatibilityObject":"75B22630-668E-11CF-A6D9-00AA0062CE6C","AdvancedContentEncryptionObject":"43058533-6981-49E6-9B74-AD12CB86D58C","AudioMedia":"F8699E40-5B4D-11CF-A8FD-00805F5C442B","VideoMedia":"BC19EFC0-5B4D-11CF-A8FD-00805F5C442B","CommandMedia":"59DACFC0-59E6-11D0-A3AC-00A0C90348F6","JFIFMedia":"B61BE100-5B4E-11CF-A8FD-00805F5C442B","DegradableJPEGMedia":"35907DE0-E415-11CF-A917-00805F5C442B","FileTransferMedia":"91BD222C-F21C-497A-8B6D-5AA86BFC0185","BinaryMedia":"3AFB65E2-47EF-40F2-AC2C-70A90D71D343","WebStreamMediaSubtype":"776257D4-C627-41CB-8F81-7AC7FF1C40CC","WebStreamFormat":"DA1E6B13-8359-4050-B398-388E965BF00C","NoErrorCorrection":"20FB5700-5B55-11CF-A8FD-00805F5C442B","AudioSpread":"BFC3CD50-618F-11CF-8BB2-00AA00B4E220","Reserved1":"ABD3D211-A9BA-11cf-8EE6-00C00C205365","ContentEncryptionSystemWindowsMediaDRMNetworkDevices":"7A079BB6-DAA4-4e12-A5CA-91D38DC11A8D","Reserved2":"86D15241-311D-11D0-A3A4-00A0C90348F6","Reserved3":"4B1ACBE3-100B-11D0-A39B-00A0C90348F6","Reserved4":"4CFEDB20-75F6-11CF-9C0F-00A0C90349CB","MutexLanguage":"D6E22A00-35DA-11D1-9034-00A0C90349BE","MutexBitrate":"D6E22A01-35DA-11D1-9034-00A0C90349BE","MutexUnknown":"D6E22A02-35DA-11D1-9034-00A0C90349BE","BandwidthSharingExclusive":"AF6060AA-5197-11D2-B6AF-00C04FD908E9","BandwidthSharingPartial":"AF6060AB-5197-11D2-B6AF-00C04FD908E9","PayloadExtensionSystemTimecode":"399595EC-8667-4E2D-8FDB-98814CE76C1E","PayloadExtensionSystemFileName":"E165EC0E-19ED-45D7-B4A7-25CBD1E28E9B","PayloadExtensionSystemContentType":"D590DC20-07BC-436C-9CF7-F3BBFBF1A4DC","PayloadExtensionSystemPixelAspectRatio":"1B1EE554-F9EA-4BC8-821A-376B74E4C4B8","PayloadExtensionSystemSampleDuration":"C6BD9450-867F-4907-83A3-C77921B733AD","PayloadExtensionSystemEncryptionSampleID":"6698B84E-0AFA-4330-AEB2-1C0A98D7A44D"};var headID=readGUID();if(headID!=guid["HeaderObject"]){return;}
var headSize=readUint(8,true);var header={"objectCount":readUint(4,true),"reserved1":readUint(1,true),"reserved2":readUint(1,true),"fileProperties":{},"headerExtension":{},"streamProperties":[]};while(p<headSize){var o=p;var objectID=readGUID();var objectSize=readUint(8,true);var object={};switch(objectID){case guid["FilePropertiesObject"]:object["fileID"]=readGUID();object["fileSize"]=readUint(8,true);object["creationDate"]=new Date(readUint(8,true)/100000);object["dataPacketsCount"]=readUint(8,true);object["playDuration"]=readUint(8,true);object["sendDuration"]=readUint(8,true);object["preroll"]=readUint(8,true);object["flags"]=(function(){var d={};d["flags"]=readUint(4,true);d["broadcastFlag"]=d["flags"].getFlag(0,1);d["seekableFlag"]=d["flags"].getFlag(1,1);d["reserved"]=d["flags"].getFlag(2,30);return d;})();object["minimumDataPacketSize"]=readUint(4,true);object["maximumDataPacketSize"]=readUint(4,true);object["maximumBitrate"]=readUint(4,true);header["fileProperties"]=object;break;case guid["HeaderExtensionObject"]:object["reservedField1"]=readGUID();object["reservedField2"]=readUint(2,true);object["headerExtensionDataSize"]=readUint(4,true);object["headerExtensionData"]=(function(){var d={};var t=p;var id=readGUID();var size=readUint(8,true);switch(id){case guid["ExtendedStreamPropertiesObject"]:d["startTime"]=readUint(8,true);d["endTime"]=readUint(8,true);d["dataBitrate"]=readUint(4,true);d["bufferSize"]=readUint(4,true);d["initialBufferFullness"]=readUint(4,true);d["alternateDataBitrate"]=readUint(4,true);d["alternateBufferSize"]=readUint(4,true);d["alternateInitialBufferFullness"]=readUint(4,true);d["maximumObjectSize"]=readUint(4,true);d["flags"]=(function(){var v={};v["flags"]=readUint(4,true);v["reliableFlag"]=v["flags"].getFlag(0,1);v["seekableFlag"]=v["flags"].getFlag(1,1);v["noCleanpointsFlag"]=v["flags"].getFlag(2,1);v["resendLiveCleanpointsFlag"]=v["flags"].getFlag(3,1);v["reserved"]=v["flags"].getFlag(4,28);return v;})();d["streamNumber"]=readUint(2,true);d["streamLanguageIDIndex"]=readUint(2,true);d["averageTimePerFrame"]=readUint(8,true);d["streamNameCount"]=readUint(2,true);d["payloadExtensionSystemCount"]=readUint(2,true);d["streamNames"]=(function(){var v=[];for(var i=0;i<d["streamNameCount"];i++){var a={};a["languageIDIndex"]=readUint(2,true);a["streamNameLength"]=readUint(2,true);a["streamName"]=readText(a["streamNameLength"]);v.push(a);}
return v;})();d["payloadExtensionSystems"]=(function(){var v={};v["extensionSystemID"]=readGUID();v["extensionDataSize"]=readUint(2,true);v["extensionSystemInfoLength"]=readUint(4,true);v["extensionSystemInfo"]=readBuffer(v["extensionSystemInfoLength"]);return v;})();d["streamPropertiesObject"]=readBuffer(o+objectSize-p);break;case guid["AdvancedMutualExclusionObject"]:d["exclusionType"]=readGUID();d["streamNumbersCount"]=readUint(2,true);d["streamNumbers"]=readBuffer(d["streamNumbersCount"]);break;case guid["GroupMutualExclusionObject"]:d["exclusionType"]=readGUID();d["recordCount"]=readUint(2,true);d["records"]=(function(){var v=[];for(var i=0;i<d["recordCount"];i++){var a={};a["streamNumbersCount"]=readUint(2,true);a["streamNumbers"]=readBuffer(a["streamNumbersCount"]);v.push(a);}
return v;})();break;case guid["StreamPrioritizationObject"]:d["priorityRecordsCount"]=readUint(2,true);d["priorityRecords"]=(function(){var v=[];for(var i=0;i<d["priorityRecordsCount"];i++){var a={};a["streamNumber"]=readUint(2,true);a["priorityFlags"]=(function(){var b={};b["flags"]=readUint(2,true);b["mandatoryFlag"]=b["flags"].getFlag(0,1);b["reserved"]=b["flags"].getFlag(1,31);return b;})();v.push(a);}
return v;})();break;case guid["BandwidthSharingObject"]:d["sharingType"]=readGUID();d["dataBitrate"]=readUint(4,true);d["bufferSize"]=readUint(4,true);d["streamNumbersCount"]=readUint(2,true);d["streamNumbers"]=readBuffer(d["streamNumbersCount"]);break;case guid["LanguageListObject"]:d["languageIDRecordsCount"]=readUint(2,true);d["languageIDRecords"]=(function(){var v=[];for(var i=0;i<d["languageIDRecordsCount"];i++){var a={};a["languageIDLength"]=readUint(1,true);a["languageID"]=readText(a["languageIDLength"]);v.push(a);}
return v;})();break;case guid["MetadataObject"]:d["descriptionRecordsCount"]=readUint(2,true);d["descriptionRecords"]=(function(){var v=[];for(var i=0;i<d["descriptionRecordsCount"];i++){var a={};a["reserved"]=readUint(2,true);a["streamNumber"]=readUint(2,true);a["nameLength"]=readUint(2,true);a["dataType"]=readUint(2,true);a["dataLength"]=readUint(4,true);a["name"]=readText(a["nameLength"]);a["data"]=(function(){switch(a["dataType"]){case 0x0000:return readText(a["dataLength"]);break;case 0x0001:return readBuffer(a["dataLength"]);break;case 0x0002:return(readUint(4,true)?true:false);break;case 0x0003:return readUint(4,true);break;case 0x0004:return readUint(8,true);break;case 0x0005:return readUint(2,true);break;}})();v.push(a);}
return v;})();break;case guid["MetadataLibraryObject"]:d["descriptionRecordsCount"]=readUint(2,true);d["descriptionRecords"]=(function(){var v=[];for(var i=0;i<d["descriptionRecordsCount"];i++){var a={};a["languageListIndex"]=readUint(2,true);a["streamNumber"]=readUint(2,true);a["nameLength"]=readUint(2,true);a["dataType"]=readUint(2,true);a["dataLength"]=readUint(4,true);a["name"]=readText(a["nameLength"]);a["data"]=(function(){switch(a["dataType"]){case 0x0000:return readText(a["dataLength"]);break;case 0x0001:return readBuffer(a["dataLength"]);break;case 0x0002:return(readUint(4,true)?true:false);break;case 0x0003:return readUint(4,true);break;case 0x0004:return readUint(8,true);break;case 0x0005:return readUint(2,true);break;}})();v.push(a);}
return v;})();break;case guid["IndexParametersObject"]:d["indexEntryTimeInterval"]=readUint(4,true);d["indexSpecifiersCount"]=readUint(2,true);d["indexSpecifiers"]=(function(){var v=[];for(var i=0;i<d["indexSpecifiersCount"];i++){var a={};a["streamNumber"]=readUint(2,true);a["indexType"]=readUint(2,true);v.push(a);}
return v;})();break;case guid["MediaObjectIndexParametersObject"]:case guid["TimecodeIndexParametersObject"]:d["indexEntryCountInterval"]=readUint(4,true);d["indexSpecifiersCount"]=readUint(2,true);d["indexSpecifiers"]=(function(){var v=[];for(var i=0;i<d["indexSpecifiersCount"];i++){var a={};a["streamNumber"]=readUint(2,true);a["indexType"]=readUint(2,true);v.push(a);}
return v;})();break;case guid["CompatibilityObject"]:d["profile"]=readUint(1,true);d["mode"]=readUint(1,true);break;case guid["AdvancedContentEncryptionObject"]:d["contentEncryptionRecordsCount"]=readUint(2,true);d["contentEncryptionRecords"]=(function(){var v=[];for(var i=0;i<d["contentEncryptionRecordsCount"];i++){var a={};a["systemID"]=readGUID();a["systemVersion"]=readUint(2,true);a["encryptedObjectRecordCount"]=readUint(4,true);a["encryptedObjectRecord"]=(function(){var b=[];for(var j=0;j<a["encryptedObjectRecordCount"];j++){var c={};c["encryptedObjectIDType"]=readUint(2,true);c["encryptedObjectIDLength"]=readUint(2,true);c["encryptedObjectID"]=(function(){switch(c["encryptedObjectIDType"]){case 0x0001:return readUint(c["encryptedObjectIDLength"],true);break;}})();b.push(c);}
return b;})();a["dataSize"]=readUint(4,true);a["data"]=readBuffer(a["dataSize"]);v.push(a);}
return v;})();break;}
p=t+size;return d;})();header["headerExtension"]=object;break;case guid["StreamPropertiesObject"]:object["streamType"]=readGUID();object["errorCorrectionType"]=readGUID();object["timeOffset"]=readUint(8,true);object["typeSpecificDataLength"]=readUint(4,true);object["errorCorrectionDataLength"]=readUint(4,true);object["flags"]=(function(){var d={};d["flags"]=readUint(2,true);d["streamNumber"]=d["flags"].getFlag(0,7);d["reserved"]=d["flags"].getFlag(7,8);d["encryptedContentFlag"]=d["flags"].getFlag(15,1);return d;})();object["reserved"]=readUint(4,true);object["typeSpecificData"]=(function(){var d={};var t=p;switch(object["streamType"]){case guid["AudioMedia"]:d["formatTag"]=readUint(2,true);d["channelCount"]=readUint(2,true);d["samplesPerSec"]=readUint(4,true);d["avgBytesPerSec"]=readUint(4,true);d["blockAlign"]=readUint(2,true);d["bitsPerSample"]=readUint(2,true);d["codeSpecificDataSize"]=readUint(2,true);d["codeSpecificData"]=readBuffer(d["codeSpecificDataSize"]);break;case guid["VideoMedia"]:d["encodedImageWidth"]=readUint(4,true);d["encodedImageHeight"]=readUint(4,true);d["reservedFlags"]=readUint(1,true);d["formatDataSize"]=readUint(2,true);d["formatData"]=(function(){var v={};var t=p;v["formatDataSize"]=readUint(4,true);v["imageWidth"]=readInt(4,true);v["imageHeight"]=readInt(4,true);v["reserved"]=readUint(2,true);v["bitsPerPixelCount"]=readUint(2,true);v["copmressionID"]=readUint(4,true);v["imageSize"]=readUint(4,true);v["horizontalPixelsPerMeter"]=readInt(4,true);v["verticallPixelsPerMeter"]=readInt(4,true);v["colorsUsedCount"]=readUint(4,true);v["importantColorsCount"]=readUint(4,true);v["codeSpecificData"]=readBuffer(t+d["formatDataSize"]-p);p=t+d["formatDataSize"];return v;})();break;case guid["CommandMedia"]:d["reserved"]=readGUID();d["commandsCount"]=readUint(2,true);d["commandTypesCount"]=readUint(2,true);d["commandTypes"]=(function(){var v=[];for(var i=0;i<d["commandTypesCount"];i++){var a={};a["commandTypeNameLength"]=readUint(2,true);a["commandTypeName"]=readText(a["commandTypeNameLength"]);v.push(a);}
return v;})();d["commands"]=(function(){var v=[];for(var i=0;i<d["commandsCount"];i++){var a={};a["presentationTime"]=readUint(4,true);a["typeIndex"]=readUint(2,true);a["commandNameLength"]=readUint(2,true);a["commandName"]=readText(a["commandNameLength"]);v.push(a);}
return v;})();break;case guid["JFIFMedia"]:d["imageWidth"]=readUint(4,true);d["imageHeight"]=readUint(4,true);d["reserved"]=readUint(4,true);break;case guid["DegradableJPEGMedia"]:d["imageWidth"]=readUint(4,true);d["imageHeight"]=readUint(4,true);d["reserved"]=readUint(2,true);d["reserved2"]=readUint(2,true);d["reserved3"]=readUint(2,true);d["interchangeDataLength"]=readUint(2,true);d["interchangeData"]=readBuffer(d["interchangeDataLength"]);break;case guid["FileTransferMedia"]:case guid["BinaryMedia"]:d["majorMediaType"]=readGUID();d["mediaSubtype"]=readGUID();d["fixedSizeSamples"]=readUint(4,true);d["temporalCompression"]=readUint(4,true);d["sampleSize"]=readUint(4,true);d["formatType"]=readGUID();d["formatDataSize"]=readUint(4,true);d["formatData"]=(function(){var v={};var t=p;if((d["mediaSubtype"]==guid["WebStreamMediaSubtype"])&&(d["formatType"]==guid["WebStreamFormat"])){v["WebStreamFormatDataSize"]=readUint(2,true);v["fixedSampleHeaderSize"]=readUint(2,true);v["versionNumber"]=readUint(2,true);v["reserved"]=readUint(2,true);}
p=t+d["formatDataSize"];return v;})();break;}
p=t+object["typeSpecificDataLength"];return d;})();object["errorCorrectionData"]=(function(){var d={};var t=p;switch(object["errorCorrectionType"]){case guid["NoErrorCorrection"]:break;case guid["AudioSpread"]:d["span"]=readUint(1,true);d["virtualPacketLength"]=readUint(2,true);d["virtualChunkLength"]=readUint(2,true);d["silenceDataLength"]=readUint(2,true);d["silenceData"]=readBuffer(d["silenceDataLength"]);break;}
p=t+object["errorCorrectionDataLength"];return d;})();header["streamProperties"].push(object);break;case guid["CodecListObject"]:object["reserved"]=readGUID();object["codecEntriesCount"]=readUint(4,true);object["codecEntries"]=(function(){var d=[];for(var i=0;i<object["codecEntriesCount"];i++){var v={};v["type"]=readUint(2,true);v["codecNameLength"]=readUint(2,true);v["codecName"]=readText(v["codecNameLength"]*2);v["codecDescriptionLength"]=readUint(2,true);v["codecDescription"]=readText(v["codecDescriptionLength"]*2);v["codecInformationLength"]=readUint(2,true);v["codecInformation"]=readBuffer(v["codecInformationLength"]);d.push(v);}
return d;})();header["codecList"]=object;break;case guid["ScriptCommandObject"]:object["reserved"]=readGUID();object["commandsCount"]=readUint(2,true);object["commandTypesCount"]=readUint(2,true);object["commandTypes"]=(function(){var d=[];for(var i=0;i<object["commandTypesCount"];i++){var v={};v["commandTypeNameLength"]=readUint(2,true);v["commandTypeName"]=readText(v["commandTypeNameLength"]);d.push(v);}
return d;})();object["commands"]=(function(){var d=[];for(var i=0;i<object["commandsCount"];i++){var v={};v["presentationTime"]=readUint(4,true);v["typeIndex"]=readUint(2,true);v["commandNameLength"]=readUint(2,true);v["commandName"]=readText(v["commandNameLength"]);d.push(v);}
return d;})();header["scriptCommand"]=object;break;case guid["MarkerObject"]:object["reserved"]=readGUID();object["markersCount"]=readUint(4,true);object["reserved2"]=readUint(2,true);object["nameLength"]=readUint(2,true);object["name"]=readText(object["nameLength"]);object["markers"]=(function(){var d={};d["offset"]=readUint(8,true);d["presentationTime"]=readUint(8,true);d["entryLength"]=readUint(2,true);d["sendTime"]=readUint(4,true);d["flags"]=readUint(4,true);d["markerDescriptionLength"]=readUint(4,true);d["markerDescription"]=readBuffer(d["markerDescriptionLength"]);return d;})();header["marker"]=object;break;case guid["BitrateMutualExclusionObject"]:object["exclusionType"]=readGUID();object["streamNumbersCount"]=readUint(2,true);object["streamNumbers"]=readBuffer(object["streamNumbersCount"]);header["bitrateMutualExclusion"]=object;break;case guid["ErrorCorrectionObject"]:object["errorCorrectionType"]=readGUID();object["errorCorrectionDataLength"]=readUint(4,true);object["errorCorrectionData"]=(function(){var d={};var t=p;switch(object["errorCorrectionType"]){case guid["NoErrorCorrection"]:break;case guid["AudioSpread"]:d["span"]=readUint(1,true);d["virtualPacketLength"]=readUint(2,true);d["virtualChunkLength"]=readUint(2,true);d["silenceDataLength"]=readUint(2,true);d["silenceData"]=readBuffer(d["silenceDataLength"]);break;}
p=t+object["errorCorrectionDataLength"];return d;})();header["errorCorrection"]=object;break;case guid["ContentDescriptionObject"]:object["titleLength"]=readUint(2,true);object["authorLength"]=readUint(2,true);object["copyrightLength"]=readUint(2,true);object["descriptionLength"]=readUint(2,true);object["ratingLength"]=readUint(2,true);object["title"]=readText(object["titleLength"]);object["author"]=readText(object["authorLength"]);object["copyright"]=readText(object["copyrightLength"]);object["description"]=readText(object["descriptionLength"]);object["rating"]=readText(object["ratingLength"]);header["contentDescription"]=object;break;case guid["ExtendedContentDescriptionObject"]:object["contentDescriptorsCount"]=readUint(2,true);object["contentDescriptors"]=(function(){var d=[];for(var i=0;i<object["contentDescriptorsCount"];i++){var v={};v["descriptorNameLength"]=readUint(2,true);v["descriptorName"]=readText(v["descriptorNameLength"]);v["descriptorValueDataType"]=readUint(2,true);v["descriptorValueLength"]=readUint(2,true);v["descriptorValue"]=(function(){switch(v["descriptorValueDataType"]){case 0x0000:return readText(v["descriptorValueLength"]);break;case 0x0001:return readBuffer(v["descriptorValueLength"]);break;case 0x0002:return(readUint(4,true)?true:false);break;case 0x0003:return readUint(4,true);break;case 0x0004:return readUint(8,true);break;case 0x0005:return readUint(2,true);break;}})();d.push(v);}
return d;})();header["extendedContentDescription"]=object;break;case guid["StreamBitratePropertiesObject"]:object["bitrateRecordsCount"]=readUint(2,true);object["bitrateRecords"]=(function(){var d=[];for(var i=0;i<object["bitrateRecordsCount"];i++){var v={};v["flags"]=(function(){var a={};a["flags"]=readUint(2,true);a["streamNumber"]=a["flags"].getFlag(0,7);a["reserved"]=a["flags"].getFlag(7,9);return a;})();v["averageBitrate"]=readUint(4,true);d.push(v);}
return d;})();header["streamBitrateProperties"]=object;break;case guid["ContentBrandingObject"]:object["bannerImageType"]=readUint(4,true);object["bannerImageDataSize"]=readUint(4,true);object["bannerImageData"]=readBuffer(object["bannerImageDataSize"]);object["bannerImageURLLength"]=readUint(4,true);object["bannerImageURL"]=readText(object["bannerImageURLLength"]);object["copyrightURLLength"]=readUint(4,true);object["copyrightURL"]=readText(object["copyrightURLLength"]);header["contentBranding"]=object;break;case guid["ContentEncryptionObject"]:object["secretDataLength"]=readUint(4,true);object["secretData"]=readBuffer(object["secretDataLength"]);object["protectionTypeLength"]=readUint(4,true);object["protectionType"]=readText(object["protectionTypeLength"]);object["keyIDLength"]=readUint(4,true);object["keyID"]=readText(object["keyIDLength"]);object["licenseURLLength"]=readUint(4,true);object["licenseURL"]=readText(object["licenseURLLength"]);header["contentEncryption"]=object;break;case guid["ExtendedContentEncryptionObject"]:object["dataSize"]=readUint(4,true);object["data"]=readBuffer(object["dataSize"]);header["extendedContentEncryption"]=object;break;case guid["DigitalSignatureObject"]:object["signatureType"]=readUint(4,true);object["signatureDataLength"]=readUint(4,true);object["signatureData"]=readBuffer(object["signatureDataLength"]);header["digitalSignature"]=object;break;case guid["PaddingObject"]:object["paddingData"]=readBuffer(o+objectSize-p);header["padding"]=object;break;}
p=o+objectSize;}
var dataGUID=readGUID();if(dataGUID!=guid["DataObject"]){return;}
var dataSize=readUint(8,true);var data={"fileID":readGUID(),"dataPacketsCount":readUint(8,true),"alignment":readUint(1,true),"packetAligment":readUint(1,true)};data["dataPackets"]=(function(){var d=[];data["dataPacketLength"]=(dataSize-50)/data["dataPacketsCount"];for(var i=0;i<data["dataPacketsCount"];i++){var v={};var o=p;v["errorCorrectionFlags"]=(function(){var a={};a["flags"]=readUint(1,true);a["errorCorrectionDataLength"]=a["flags"].getFlag(0,4);a["opaqueDataPresent"]=a["flags"].getFlag(4,1);a["errorCorrectionLengthType"]=a["flags"].getFlag(5,2);a["errorCorrectionPresent"]=a["flags"].getFlag(7,1);return a;})();if(v["errorCorrectionFlags"]["errorCorrectionPresent"]){switch(v["errorCorrectionFlags"]["errorCorrectionLengthType"]){case 0x00:v["errorCorrectionData"]=(function(){var c=readBuffer(v["errorCorrectionFlags"]["errorCorrectionDataLength"]);var a={};a["type"]={"type":c[0].getFlag(0,4),"number":c[0].getFlag(4,4)};a["cycle"]=c[1];return a;})();break;}}
v["lengthTypeFlags"]=(function(){var a={};a["flags"]=readUint(1,true);a["multiplePayloadsPresent"]=a["flags"].getFlag(0,1);a["sequenceType"]=a["flags"].getFlag(1,2);a["paddingLengthType"]=a["flags"].getFlag(3,2);a["packetLengthType"]=a["flags"].getFlag(5,2);a["errorCorrectionPresent"]=a["flags"].getFlag(7,1);return a;})();v["propertyFlags"]=(function(){var a={};a["flags"]=readUint(1,true);a["replicatedDataLengthType"]=a["flags"].getFlag(0,2);a["offsetIntoMediaObjectLengthType"]=a["flags"].getFlag(2,2);a["mediaObjectNumberLengthType"]=a["flags"].getFlag(4,2);a["streamNumberLengthType"]=a["flags"].getFlag(6,2);return a;})();v["packetLength"]=readNumber(v["lengthTypeFlags"]["packetLengthType"]);v["sequence"]=readNumber(v["lengthTypeFlags"]["sequenceType"]);v["paddingLength"]=readNumber(v["lengthTypeFlags"]["paddingLengthType"]);v["sendTime"]=readUint(4,true);v["duration"]=readUint(2,true);if(v["lengthTypeFlags"]["multiplePayloadsPresent"]){v["payloadFlags"]=(function(){var a={};a["flags"]=readUint(1,true);a["payloadsCount"]=a["flags"].getFlag(0,6);a["payloadLengthType"]=a["flags"].getFlag(6,2);return a;})();}
v["payloads"]=(function(){var a=[];var payloadsCount=(v["payloadFlags"]?v["payloadFlags"]["payloadsCount"]:1);for(var j=0;j<payloadsCount;j++){var b={};b["streamNumber"]=readNumber(v["propertyFlags"]["streamNumberLengthType"]);b["streamNumberAndKeyFrameBit"]=(function(){var c={};c["streamNumber"]=b["streamNumber"].getFlag(0,7);c["keyFrameBit"]=b["streamNumber"].getFlag(7,1);return c;})();b["mediaObjectNumber"]=readNumber(v["propertyFlags"]["mediaObjectNumberLengthType"]);b["offsetIntoMediaObject"]=readNumber(v["propertyFlags"]["offsetIntoMediaObjectLengthType"]);b["replicatedDataLength"]=readNumber(v["propertyFlags"]["replicatedDataLengthType"]);if(b["replicatedDataLength"]==1){b["presentationTimeDelta"]=readUint(1,true);b["payloadLength"]=(v["payloadFlags"]?readNumber(v["payloadFlags"]["payloadLengthType"]):data["dataPacketLength"]-(p-o)-v["paddingLength"]);b["subPayloadData"]=(function(){var c=[];var t=p;while(p<t+b["payloadLength"]){var dataLength=readUint(1,true);var data=readBuffer(dataLength);c.push({"dataLength":dataLength,"data":data});}
p=t+b["payloadLength"];return c;})();}
else{b["replicatedData"]=(function(){var c={};var t=p;c["mediaObjectSize"]=readUint(4,true);c["presentationTime"]=readUint(4,true);if(b["replicatedDataLength"]>8){c["extensionDataSize"]=(header["headerExtension"]&&header["headerExtension"]["headerExtensionData"]["payloadExtensionSystems"]?header["headerExtension"]["headerExtensionData"]["payloadExtensionSystems"]["extensionDataSize"]:0);if(c["extensionDataSize"]){c["extensionDataSize"]=(c["extensionDataSize"]==0xFFFF?readUint(2,true):c["extensionDataSize"]);c["extensionData"]=readBuffer(c["extensionDataSize"]);}}
p=t+b["replicatedDataLength"];return c;})();b["payloadLength"]=(v["payloadFlags"]?readNumber(v["payloadFlags"]["payloadLengthType"]):data["dataPacketLength"]-(p-o)-v["paddingLength"]);b["payloadData"]=readBuffer(b["payloadLength"]);}
a.push(b);}
return a;})();v["paddingData"]=readBuffer(v["paddingLength"]);d.push(v);}
return d;})();var index={"simpleIndex":[]};while(p<buffer.length){var o=p;var objectID=readGUID();var objectSize=readUint(8,true);var object={};switch(objectID){case guid["SimpleIndexObject"]:object["fileID"]=readGUID();object["indexEntryTimeInterval"]=readUint(8,true);object["maximumPacketCount"]=readUint(4,true);object["indexEntriesCount"]=readUint(4,true);object["indexEntries"]=(function(){var d=[];for(var i=0;i<object["indexEntriesCount"];i++){var v={};v["packetNumber"]=readUint(4,true);v["packetCount"]=readUint(2,true);d.push(v);}
return d;})();index["simpleIndex"].push(object);break;case guid["IndexObject"]:object["indexEntryTimeInterval"]=readUint(4,true);object["indexSpecifiersCount"]=readUint(2,true);object["indexBlocksCount"]=readUint(4,true);object["indexSpecifiers"]=(function(){var d=[];for(var i=0;i<object["indexSpecifiersCount"];i++){var v={};v["streamNumber"]=readUint(2,true);v["indexType"]=readUint(2,true);d.push(v);}
return d;})();object["indexBlocks"]=(function(){var d=[];for(var i=0;i<object["indexBlocksCount"];i++){var v={};v["indexEntryCount"]=readUint(4,true);v["blockPositions"]=(function(){var a=[];for(var j=0;j<object["indexSpecifiersCount"];j++){a.push(readUint(1,true));}
return a;})();v["indexEntries"]=(function(){var a={"offsets":[]};for(var j=0;j<object["indexSpecifiersCount"];j++){a["offsets"].push(readUint(4,true));}
return a;})();d.push(v);}
return d;})();index["index"]=object;break;case guid["MediaObjectIndexObject"]:object["indexEntryCountInterval"]=readUint(4,true);object["indexSpecifiersCount"]=readUint(2,true);object["indexBlocksCount"]=readUint(4,true);object["indexSpecifiers"]=(function(){var d=[];for(var i=0;i<object["indexSpecifiersCount"];i++){var v={};v["streamNumber"]=readUint(2,true);v["indexType"]=readUint(2,true);d.push(v);}
return d;})();object["indexBlocks"]=(function(){var d=[];for(var i=0;i<object["indexBlocksCount"];i++){var v={};v["indexEntryCount"]=readUint(4,true);v["blockPositions"]=(function(){var a=[];for(var j=0;j<object["indexSpecifiersCount"];j++){a.push(readUint(1,true));}
return a;})();v["indexEntries"]=(function(){var a={"offsets":[]};for(var j=0;j<object["indexSpecifiersCount"];j++){a["offsets"].push(readUint(4,true));}
return a;})();d.push(v);}
return d;})();index["mediaObjectIndex"]=object;break;case guid["TimecodeIndexObject"]:object["reserved"]=readUint(4,true);object["indexSpecifiersCount"]=readUint(2,true);object["indexBlocksCount"]=readUint(4,true);object["indexSpecifiers"]=(function(){var d=[];for(var i=0;i<object["indexSpecifiersCount"];i++){var v={};v["streamNumber"]=readUint(2,true);v["indexType"]=readUint(2,true);d.push(v);}
return d;})();object["indexBlocks"]=(function(){var d=[];for(var i=0;i<object["indexBlocksCount"];i++){var v={};v["indexEntryCount"]=readUint(4,true);v["blockPositions"]=(function(){var a=[];for(var j=0;j<object["indexSpecifiersCount"];j++){a.push(readUint(1,true));}
return a;})();v["indexEntries"]=(function(){var a={"timecode":readUint(4,true),"offsets":[]};for(var j=0;j<object["indexSpecifiersCount"];j++){a["offsets"].push(readUint(4,true));}
return a;})();d.push(v);}
return d;})();index["timecodeIndex"]=object;break;}
if(objectSize<24){break;}
p=o+objectSize;}
var bf=(function(){if(header["codecList"]&&header["codecList"]&&(header["codecList"]["codecEntries"][0]["type"]==2)){var wave;var fmt=(function(){var d=header["streamProperties"][0]["typeSpecificData"];return{"formatTag":d["formatTag"],"channelCount":d["channelCount"],"samplesPerSec":d["samplesPerSec"],"bitsPerSample":d["bitsPerSample"],"blockAlign":d["blockAlign"],"avgBytesPerSec":d["avgBytesPerSec"]};})();switch(fmt["formatTag"]){case 0x0162:for(var i=0;i<data["dataPackets"];i++){}
break;}
if(wave){fmt["formatTag"]=0x01;return wave.packageWav(fmt,"PCM");}
else{return new Uint8Array();}}})();File[Tag].push({"path":fileInfo.nameCore+"."+"wav","buffer":bf});setList();isValid=true;};var fromDzBuffer=function(buffer){var signature=readText(4);if(signature!="DTRZ"){return;}
var files=[];var fileNames=[];var folderNames=[""];var fileNameCount=readInt(2,true);var folderNameCount=readInt(2,true);p+=1;for(var i=0;i<fileNameCount;i++){fileNames.push(readText(-1));}
for(var i=0;i<folderNameCount-1;i++){folderNames.push(readText(-1));}
for(var i=0;i<fileNames.length;i++){var nameId=readInt(2,true);var fileIds=(function(){var v=[];while(true){var d=readInt(2,true);if(d!=-1){v.push(d);}
else{break;}}
return v;})();for(var j=0;j<fileIds.length;j++){files[fileIds[j]]={"path":(folderNames[nameId]+"\\"+fileNames[i]).toDir()};}}
var fileStart=readInt(2,true)-1;var fileEnd=readInt(2,true);for(var i=fileStart;i<fileEnd;i++){files[i]["offset"]=readInt(4,true);files[i]["cSize"]=readInt(4,true);files[i]["uSize"]=readInt(4,true);files[i]["hSize"]=readInt(4,true);}
var exist={};for(var i=0;i<files.length;i++){if(!exist[files[i]["path"]]){File[Tag].push({"path":files[i]["path"],"buffer":files[i]["uSize"]==files[i]["cSize"]?getBuffer(files[i]["offset"],files[i]["cSize"]):getBuffer(files[i]["offset"],files[i]["cSize"]).inflate()});exist[files[i]["path"]]=true;}}
setList();isValid=true;};var fromCpkBuffer=function(buffer){var decrypt=function(info){var o=info["offset"];var s=info["size"];var m=0x655F;var t=0x4115;for(var i=0;i<s;i++){buffer[o+i]=(buffer[o+i]^(m&0xFF));m=(m*t)&0xFFFFFFFF;}};var readUTFInfo=function(){p+=4;var size=readInt(8,true);var offset=p;var info={"offset":offset,"size":size};var sign=readText(4);p-=4;if(sign!="@UTF"){decrypt(info);}
return info;};var readToc=function(tocOffset,contentOffset){var o=(function(){if(contentOffset<0){return tocOffset;}
if(tocOffset<0){return contentOffset;}
return Math.min(contentOffset,tocOffset);})();p=tocOffset;var sign=readText(4);if(sign!="TOC "){return;}
var CpkTocInfo=readUTF(readUTFInfo());for(var i=0;i<CpkTocInfo.length;i++){var t={};t["DirName"]=CpkTocInfo[i]["DirName"];t["FileName"]=CpkTocInfo[i]["FileName"];t["FileOffset"]=CpkTocInfo[i]["FileOffset"]+o;t["FileSize"]=CpkTocInfo[i]["FileSize"];t["ExtractSize"]=CpkTocInfo[i]["ExtractSize"];t["ID"]=CpkTocInfo[i]["ID"];t["UserString"]=CpkTocInfo[i]["UserString"];files.push(t);}
return true;};var readEtoc=function(etocOffset){p=etocOffset;var sign=readText(4);if(sign!="ETOC"){return;}
var CpkEtocInfo=readUTF(readUTFInfo());for(var i=0;i<CpkEtocInfo.length;i++){files[i]["LocalDir"]=CpkEtocInfo[i]["LocalDir"];}
return true;};var readItoc=function(itocOffset,contentOffset,align){var o=ContentOffset;p=itocOffset;var sign=readText(4);if(sign!="ITOC"){return;}
var CpkItocInfo=readUTF(readUTFInfo());var DataTable=[];var DataL=readUTF(CpkItocInfo[0]["DataL"]);if(DataL){for(var i=0;i<DataL.length;i++){var t={};t["ID"]=DataL[i];t["FileSize"]=DataL[i];t["ExtractSize"]=DataL[i];DataTable.push(t);}}
var DataH=readUTF(CpkItocInfo[0]["DataH"]);if(DataH){for(var i=0;i<DataH.length;i++){var t={};t["ID"]=DataH[i];t["FileSize"]=DataH[i];t["ExtractSize"]=DataH[i];DataTable.push(t);}}
for(var i=0;i<DataTable.length;i++){var t={};t["FileName"]=DataTable[i]["ID"].padStart(4,"0");t["FileOffset"]=o;t["FileSize"]=DataTable[i]["FileSize"];t["ExtractSize"]=DataTable[i]["ExtractSize"];t["ID"]=DataTable[i]["ID"];o+=t["FileSize"]+(t["FileSize"]%Align?Align-(t["FileSize"]%Align):0);files.push(t);}};var readGtoc=function(gtocOffset){p=gtocOffset;var sign=readText(4);if(sign!="GTOC"){return;}
p+=0x0C;return true;};var files=[];var signature=readText(4);if(signature!="CPK "){return;}
var CpkHeader=readUTF(readUTFInfo());var TocOffset=CpkHeader[0]["TocOffset"];var EtocOffset=CpkHeader[0]["EtocOffset"];var ItocOffset=CpkHeader[0]["ItocOffset"];var GtocOffset=CpkHeader[0]["GtocOffset"];var ContentOffset=CpkHeader[0]["ContentOffset"];var Align=CpkHeader[0]["Align"];var Files=CpkHeader[0]["Files"];if(TocOffset){if(!readToc(TocOffset,ContentOffset)){return;}}
if(EtocOffset){if(!readEtoc(EtocOffset)){return;}}
if(ItocOffset){if(!readItoc(ItocOffset,ContentOffset,Align)){return;}}
if(GtocOffset){if(!readGtoc(GtocOffset)){return;}}
for(var i=0;i<files.length;i++){File[Tag].push({"path":(files[i]["DirName"]?files[i]["DirName"]+"/":"")+files[i]["FileName"],"buffer":getBuffer(files[i]["FileOffset"],files[i]["FileSize"])});}
setList();isValid=true;};var fromAcbBuffer=function(buffer){var signature=readText(4);p-=4;if(signature!="@UTF"){return;}
var Header=readUTF({"offset":0});var Cue=readUTF(Header[0]["CueTable"]);var CueName=readUTF(Header[0]["CueNameTable"]);var Waveform=readUTF(Header[0]["WaveformTable"]);var Synth=readUTF(Header[0]["SynthTable"]);var list=[];for(var i=0;i<Cue.length;i++){var t={};var b=(function(){var ReferenceIndex=Cue[i]["ReferenceIndex"];var ReferenceItems=(Synth&&Synth[ReferenceIndex]&&Synth[ReferenceIndex]["ReferenceItems"]?Synth[ReferenceIndex]["ReferenceItems"]:undefined);if(ReferenceItems){return getInt(2,ReferenceItems["offset"]+2,false);}
else{return i;}})();t["CueId"]=Cue[b]["CueId"];t["CueName"]=(function(){if(CueName[i]["CueIndex"]==i){return CueName[i]["CueName"];}
for(var j=0;j<CueName.length;j++){if(CueName[j]["CueIndex"]==i){return CueName[j]["CueName"];}}
return"";})();t["EncodeType"]=Waveform[b]["EncodeType"];t["Streaming"]=Waveform[b]["Streaming"];t["Id"]=(!isUndefined(Waveform[b]["Id"])?Waveform[b]["Id"]:(t["Streaming"]?Waveform[b]["StreamAwbId"]:Waveform[b]["MemoryAwbId"]));list.push(t);}
var files=readAFS2(Header[0]["AwbFile"]||Header[0]["StreamAwbAfs2Header"]);var m=[".adx",".ahx",".hca",".adx",".wiiadpcm",".dsadpcm",".hcamx",".vag",".at3",".bcwav",".vag",".at9",".xma",".dsp",,,,,".at9"];for(var i=0;i<list.length;i++){var l=(function(){if(files[i]&&(files[i]["id"]==list[i]["Id"])){return i;}
for(var j=0;j<files.length;j++){if(files[j]["id"]==list[i]["Id"]){return j;}}
return-1;})();if(l!=-1){File[Tag].push({"path":list[i]["CueName"]+(m[list[i]["EncodeType"]]||""),"buffer":files[l]["buffer"],"mark":list[i]["CueId"]});}}
setList();isValid=true;};var fromAcfBuffer=function(buffer){var tabledToString=function(t){t=t||[];if(!t.length){return"";}
var v=[];for(var n in t[0]){v[0]=v[0]||[];v[0].push(n);for(var i=0;i<t.length;i++){v[i+1]=v[i+1]||[];v[i+1].push(typeof t[i][n]!="object"?t[i][n]:"");}}
for(var i=0;i<v.length;i++){v[i]=v[i].join("\t")+"\r\n";}
return v.join("");};var addFile=function(n,v){if(v){File[Tag].push({"path":n,"buffer":new Uint8Array().fromText(v)});}};var signature=readText(4);p-=4;if(signature!="@UTF"){return;}
var Header=readUTF({"offset":0});var addAisacControl=(function(){addFile("AisacControl.txt",tabledToString(readUTF(Header[0]["AisacControlIdTable"])));})();var addCategory=(function(){var Category=readUTF(Header[0]["CategoryTable"]);var CategoryName=readUTF(Header[0]["CategoryNameTable"]);if(Category&&CategoryName){for(var i=0;i<CategoryName.length;i++){Category[CategoryName[i]["Index"]]["Name"]=CategoryName[i]["Name"];}
addFile("Category.txt",tabledToString(Category));}})();var addDspSetting=(function(){addFile("DspSetting.txt",tabledToString(readUTF(Header[0]["DspSettingTable"])));})();var addGameVariable=(function(){var GameVariable=readUTF(Header[0]["GameVariableTable"]);var GameVariableName=readUTF(Header[0]["GameVariableNameTable"]);if(GameVariable&&GameVariableName){for(var i=0;i<GameVariableName.length;i++){GameVariable[GameVariableName[i]["Index"]]["Name"]=GameVariableName[i]["Name"];}
addFile("GameVariable.txt",tabledToString(GameVariable));}})();var addGlobalAisac=(function(){var GlobalAisac=readUTF(Header[0]["GlobalAisacTable"]);var GlobalAisacName=readUTF(Header[0]["GlobalAisacNameTable"]);if(GlobalAisac&&GlobalAisacName){for(var i=0;i<GlobalAisacName.length;i++){GlobalAisac[GlobalAisacName[i]["Index"]]["Name"]=GlobalAisacName[i]["Name"];}
addFile("GlobalAisac.txt",tabledToString(GlobalAisac));}})();var addReact=(function(){addFile("React.txt",tabledToString(readUTF(Header[0]["ReactTable"])));})();var addRegistrationOption=(function(){addFile("RegistrationOption.txt",tabledToString(readUTF(Header[0]["RegistrationOption"])));})();var addSelector=(function(){addFile("Selector.txt",tabledToString(readUTF(Header[0]["SelectorTable"])));})();setList();isValid=true;};var fromAwbBuffer=function(buffer){var files=readAFS2({"offset":0,"size":buffer.length});for(var i=0;i<files.length;i++){var ext=(function(){var sign=files[i]["buffer"].getText(0,4);switch(sign){case"HCA":return"hca";break;}
return"";})();File[Tag].push({"path":files[i]["id"].toString()+(ext?"."+ext:""),"buffer":files[i]["buffer"],"awbKey":files[i]["awbKey"]});}
setList();isValid=true;};var fromAdxBuffer=function(buffer){var signature=readUint(2,false);if(signature!=0x8000){return;}
var date=new Date();var data=(function(){var v={};v["copyrightOffset"]=readUint(2,false);v["encodingType"]=readUint(1,false);v["blockSize"]=readUint(1,false);v["sampleBitdepth"]=readUint(1,false);v["channelCount"]=readUint(1,false);v["sampleRate"]=readUint(4,false);v["totalSamples"]=readUint(4,false);v["highpassFrequency"]=readUint(2,false);v["version"]=readUint(1,false);v["flags"]=readUint(1,false);switch(v["version"]){case 3:v["loopAlignmentSamples"]=readUint(2,false);p+=0x01;v["loopEnabled"]=(readUint(4,false)==1);v["loopBeginSampleIndex"]=readUint(4,false);v["loopBeginByteIndex"]=readUint(4,false);v["loopEndSampleIndex"]=readUint(4,false);v["loopEndByteIndex"]=readUint(4,false);break;case 4:p+=0x10;v["loopEnabled"]=(readUint(4,false)==1);v["loopBeginSampleIndex"]=readUint(4,false);v["loopBeginByteIndex"]=readUint(4,false);v["loopEndSampleIndex"]=readUint(4,false);v["loopEndByteIndex"]=readUint(4,false);break;}
return v;})();var fmt={};fmt["formatTag"]=0x01;fmt["channelCount"]=data["channelCount"];fmt["samplesPerSec"]=data["sampleRate"];fmt["bitsPerSample"]=16;fmt["blockAlign"]=fmt["channelCount"]*fmt["bitsPerSample"]/8|0;fmt["avgBytesPerSec"]=fmt["samplesPerSec"]*fmt["blockAlign"];var wave=new Uint8Array(data["totalSamples"]*data["sampleBitdepth"]);var w=0;var coefficient=(function(){var a=Math.sqrt(2)-Math.cos(2*Math.PI*data["highpassFrequency"]/data["sampleRate"]);var b=Math.sqrt(2)-1;var c=(a-Math.sqrt((a+b)*(a-b)))/b;return[c*2,-c*c];})();var pastSamples=new Array(data["channelCount"]*2).fill(0);var samplesNeeded=data["totalSamples"];var sampleIndex=0;var samplesPerBlock=((data["blockSize"]-2)*8/data["sampleBitdepth"]);var bytesPerSample=fmt["bitsPerSample"]/8;var scale=[];while(samplesNeeded&&(sampleIndex<data["totalSamples"])){var sampleOffset=sampleIndex%samplesPerBlock;var samplesCanGet=samplesPerBlock-sampleOffset;if(samplesCanGet>samplesNeeded){samplesCanGet=samplesNeeded;}
var start=data["copyrightOffset"]+4+sampleIndex*data["blockSize"]*data["channelCount"]/samplesPerBlock;for(var i=0;i<data["channelCount"];i++){scale[i]=getUint(2,start+data["blockSize"]*i,false);}
var sampleEndOffset=sampleOffset+samplesCanGet;start+=2;while(sampleOffset<sampleEndOffset){for(var i=0;i<data["channelCount"];i++){var sampleErrorByte=getUint(1,start+sampleOffset*data["sampleBitdepth"]/8+data["blockSize"]*i,false);var sampleErrorNibbles=[sampleErrorByte>>4,sampleErrorByte&0x0F];for(var j=0;j<sampleErrorNibbles.length;j++){var samplePrediction=coefficient[0]*pastSamples[i*2+0]+coefficient[1]*pastSamples[i*2+1];var sampleError=((sampleErrorNibbles[j]<<28)>>28)*scale[i];var sample=(samplePrediction+sampleError).limit(-32768,32767);pastSamples[i*2+1]=pastSamples[i*2+0];pastSamples[i*2+0]=sample;wave.setInt(bytesPerSample,sample,w,true);w+=2;}}
sampleOffset+=2;sampleIndex+=2;samplesNeeded-=2;}}
File[Tag].push({"path":fileInfo.nameCore+".wav","buffer":wave.packageWav(fmt,"PCM"),"time":new Date()-date});setList();isValid=true;};var fromHcaBuffer=function(buffer){var hexKey=(arguments.length>1?arguments[1]:"");var awbKey=(arguments.length>2?arguments[2]:0);var signature=readText(4);if(signature!="HCA"){return;}
var date=new Date();var blockReader=function(buffer){this.checkBit=function(size){var v=0;if(this.bit+size<=this.size){var pos=this.bit>>>3;v=this.data[pos];v=(v<<8)|this.data[pos+1];v=(v<<8)|this.data[pos+2];v&=this.mask[this.bit&7];v>>>=24-(this.bit&7)-size;}
return v;};this.getBit=function(size){var v=this.checkBit(size);this.bit+=size;return v;};this.addBit=function(size){this.bit+=size;};this.data=buffer;this.size=buffer.length*8-16;this.bit=0;this.mask=[0xFFFFFF,0x7FFFFF,0x3FFFFF,0x1FFFFF,0x0FFFFF,0x07FFFF,0x03FFFF,0x01FFFF];};var readData=function(){var hexKey=(arguments.length>0?arguments[0]:"");var awbKey=(arguments.length>1?arguments[1]:0);var getAthTable=function(type,key){var v=new Uint8Array(0x80);switch(type){case 0x00:break;case 0x01:var m=[0x78,0x5F,0x56,0x51,0x4E,0x4C,0x4B,0x49,0x48,0x48,0x47,0x46,0x46,0x45,0x45,0x45,0x44,0x44,0x44,0x44,0x43,0x43,0x43,0x43,0x43,0x43,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3E,0x3E,0x3E,0x3E,0x3E,0x3E,0x3D,0x3D,0x3D,0x3D,0x3D,0x3D,0x3D,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3B,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3C,0x3D,0x3D,0x3D,0x3D,0x3D,0x3D,0x3D,0x3D,0x3E,0x3E,0x3E,0x3E,0x3E,0x3E,0x3E,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x43,0x43,0x43,0x43,0x43,0x43,0x43,0x43,0x43,0x43,0x43,0x43,0x43,0x43,0x43,0x43,0x43,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x45,0x45,0x45,0x45,0x45,0x45,0x45,0x45,0x45,0x45,0x45,0x45,0x46,0x46,0x46,0x46,0x46,0x46,0x46,0x46,0x46,0x46,0x47,0x47,0x47,0x47,0x47,0x47,0x47,0x47,0x47,0x47,0x48,0x48,0x48,0x48,0x48,0x48,0x48,0x48,0x49,0x49,0x49,0x49,0x49,0x49,0x49,0x49,0x4A,0x4A,0x4A,0x4A,0x4A,0x4A,0x4A,0x4A,0x4B,0x4B,0x4B,0x4B,0x4B,0x4B,0x4B,0x4C,0x4C,0x4C,0x4C,0x4C,0x4C,0x4D,0x4D,0x4D,0x4D,0x4D,0x4D,0x4E,0x4E,0x4E,0x4E,0x4E,0x4E,0x4F,0x4F,0x4F,0x4F,0x4F,0x4F,0x50,0x50,0x50,0x50,0x50,0x51,0x51,0x51,0x51,0x51,0x52,0x52,0x52,0x52,0x52,0x53,0x53,0x53,0x53,0x54,0x54,0x54,0x54,0x54,0x55,0x55,0x55,0x55,0x56,0x56,0x56,0x56,0x57,0x57,0x57,0x57,0x57,0x58,0x58,0x58,0x59,0x59,0x59,0x59,0x5A,0x5A,0x5A,0x5A,0x5B,0x5B,0x5B,0x5B,0x5C,0x5C,0x5C,0x5D,0x5D,0x5D,0x5D,0x5E,0x5E,0x5E,0x5F,0x5F,0x5F,0x60,0x60,0x60,0x61,0x61,0x61,0x61,0x62,0x62,0x62,0x63,0x63,0x63,0x64,0x64,0x64,0x65,0x65,0x66,0x66,0x66,0x67,0x67,0x67,0x68,0x68,0x68,0x69,0x69,0x6A,0x6A,0x6A,0x6B,0x6B,0x6B,0x6C,0x6C,0x6D,0x6D,0x6D,0x6E,0x6E,0x6F,0x6F,0x70,0x70,0x70,0x71,0x71,0x72,0x72,0x73,0x73,0x73,0x74,0x74,0x75,0x75,0x76,0x76,0x77,0x77,0x78,0x78,0x78,0x79,0x79,0x7A,0x7A,0x7B,0x7B,0x7C,0x7C,0x7D,0x7D,0x7E,0x7E,0x7F,0x7F,0x80,0x80,0x81,0x81,0x82,0x83,0x83,0x84,0x84,0x85,0x85,0x86,0x86,0x87,0x88,0x88,0x89,0x89,0x8A,0x8A,0x8B,0x8C,0x8C,0x8D,0x8D,0x8E,0x8F,0x8F,0x90,0x90,0x91,0x92,0x92,0x93,0x94,0x94,0x95,0x95,0x96,0x97,0x97,0x98,0x99,0x99,0x9A,0x9B,0x9B,0x9C,0x9D,0x9D,0x9E,0x9F,0xA0,0xA0,0xA1,0xA2,0xA2,0xA3,0xA4,0xA5,0xA5,0xA6,0xA7,0xA7,0xA8,0xA9,0xAA,0xAA,0xAB,0xAC,0xAD,0xAE,0xAE,0xAF,0xB0,0xB1,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB6,0xB7,0xB8,0xB9,0xBA,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,0xC0,0xC1,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFF,0xFF];var t=0;for(var i=0;i<v.length;i++){var index=v>>>13;if(index>=0x028E){for(var j=i;j<v.length;j++){v[j]=0xFF;}
break;}
v[i]=m[index];t+=key;}
break;}
return v;};var getCiphTable=function(type,key1,key2){var v=new Uint8Array(0x100);switch(type){case 0x00:for(var i=0;i<v.length;i++){v[i]=i;}
break;case 0x01:var t=0;for(var i=1;i<0xFF;i++){t=(t*13+11)&0xFF;if((t==0)||(t==0xFF)){t=(t*13+11)&0xFF;}
v[i]=t;}
v[0xFF]=0xFF;break;case 0x38:var setTable=function(t,key){var mul=((key&1)<<3)|5;var add=(key&0xE)|1;key>>>=4;for(var i=0;i<t.length;i++){key=(key*mul+add)&0x0F;t[i]=key;}
return t;};if(!key1){key2--;}
key1--;var t1=new Uint8Array(0x08);for(var i=0;i<7;i++){t1[i]=key1&0xFF;key1=(key1>>>8)|((key2<<24)&0xFFFFFFFF);key2>>>=8;}
var t2=new Uint8Array().from([t1[1],t1[1]^t1[6],t1[2]^t1[3],t1[2],t1[2]^t1[1],t1[3]^t1[4],t1[3],t1[3]^t1[2],t1[4]^t1[5],t1[4],t1[4]^t1[3],t1[5]^t1[6],t1[5],t1[5]^t1[4],t1[6]^t1[1],t1[6]]);var t3=new Uint8Array(0x100);var t31=new Uint8Array(0x10);var t32=new Uint8Array(0x10);t31=setTable(t31,t1[0]);var w=0;for(var i=0;i<t31.length;i++){var n=(t31[i]<<4)&0xFF;t32=setTable(t32,t2[i]);for(var j=0;j<t32.length;j++){t3[w++]=n|t32[j];}}
var w=0;var n=0;for(var i=0;i<t3.length;i++){n=(n+0x11)&0xFF;if((t3[n]!=0)&&(t3[n]!=0xFF)){v[w++]=t3[n];}}
v[0xFF]=0xFF;break;}
return v;};var hca={};hca["version"]=readUint(2,false);hca["dataOffset"]=readUint(2,false);hca["athType"]=(hca["version"]<0x0200?1:0);hca["volume"]=1;while(p<hca["dataOffset"]){var sign=readText(4);switch(sign){case"fmt":hca["channelCount"]=readUint(1,false);hca["sampleRate"]=readUint(3,false);hca["blockCount"]=readUint(4,false);hca["muteHeader"]=readUint(2,false);hca["muteFooter"]=readUint(2,false);break;case"comp":hca["blockSize"]=readUint(2,false);hca["r01"]=readUint(1,false);hca["r02"]=readUint(1,false);hca["r03"]=readUint(1,false);hca["r04"]=readUint(1,false);hca["r05"]=readUint(1,false);hca["r06"]=readUint(1,false);hca["r07"]=readUint(1,false);hca["r08"]=readUint(1,false);hca["reserve1"]=readUint(1,false);hca["reserve2"]=readUint(1,false);break;case"dec":hca["blockSize"]=readUint(2,false);hca["r01"]=readUint(1,false);hca["r02"]=readUint(1,false);hca["count1"]=readUint(1,false);hca["count2"]=readUint(1,false);var flag=readUint(1,false);hca["r03"]=flag>>4;hca["r04"]=flag&0x0F;hca["enableCount2"]=readUint(1,false);break;case"vbr":hca["vbrR1"]=readUint(2,false);hca["vbrR2"]=readUint(2,false);break;case"ath":hca["athType"]=readUint(2,false);break;case"loop":hca["loopStart"]=readUint(4,false);hca["loopEnd"]=readUint(4,false);hca["loopCount"]=readUint(2,false);hca["loopR1"]=readUint(2,false);break;case"ciph":hca["ciphType"]=readUint(2,false);break;case"rva":hca["volume"]=readFloat(4,false);break;case"comm":hca["comment"]=readText(readUint(1,false));break;case"pad":p=hca["dataOffset"];break;}}
hca["athTable"]=getAthTable(hca["athType"],hca["sampleRate"]);var key1=0;var key2=0;if(hexKey){var multiply=function(a,b){var v=[];for(var i=a.length-1;i>-1;i--){for(var j=b.length-1;j>-1;j--){var m=i+j;var n=i+j+1;var mul=parseInt(a[i],16)*parseInt(b[j],16)+(v[n]||0);v[m]=(mul/16|0)+(v[m]||0);v[n]=mul%16;}}
while((v.length>1)&&!v[0]){v=v.slice(1);}
v=v.map(function(a){return a.toString(16);}).join("");return v.padStart(Math.ceil(v.length/8)*8,"0").splitEvery(8);};var k=multiply(hexKey,(awbKey?(((awbKey&0xFFFF)<<16)|((~awbKey&0xFFFF)+2)):1).toString(16));key1=parseInt(k[k.length-1],16);key2=parseInt(k[k.length-2],16);}
hca["ciphTable"]=getCiphTable(hca["ciphType"],key1,key2);return hca;};var initData=function(){var comp=(function(){var v={};v["r01"]=data["r01"];v["r02"]=data["r02"];v["r03"]=data["r03"]||1;v["r04"]=data["r04"];v["r05"]=(!isUndefined(data["r05"])?data["r05"]:data["count1"]+1);v["r06"]=(!isUndefined(data["r06"])?data["r06"]:(data["enableCount2"]?data["count2"]+1:data["count1"]+1));v["r07"]=(!isUndefined(data["r07"])?data["r07"]:v["r05"]-v["r06"]);v["r08"]=(!isUndefined(data["r08"])?data["r08"]:0);v["r09"]=(v["r08"]?Math.ceil((v["r05"]-(v["r06"]+v["r07"]))/v["r08"]):0);return v;})();var table=(function(){var v=new Uint8Array(0x10);var c=data["channelCount"]/comp["r03"]|0;if(comp["r07"]&&(c>1)){var n=0;for(var i=0;i<comp["r03"];i++){switch(c){case 2:case 3:v[n]=1;v[n+1]=2;break;case 4:v[n]=1;v[n+1]=2;if(comp["r04"]==0){v[n+2]=1;v[n+3]=2;}
break;case 5:v[n]=1;v[n+1]=2;if(comp["r04"]<=2){v[n+3]=1;v[n+4]=2;}
break;case 6:case 7:v[n]=1;v[n+1]=2;v[n+4]=1;v[n+5]=2;break;case 8:v[n]=1;v[n+1]=2;v[n+4]=1;v[n+5]=2;v[n+6]=1;v[n+7]=2;break;}
n+=c;}}
return v;})();var channels=(function(){var v=[];for(var i=0;i<data["channelCount"];i++){var c={};c.type=table[i];c.block=new Float32Array(0x80);c.base=new Float32Array(0x80);c.scale=new Uint8Array(0x80);c.count=comp["r06"]+(table[i]!=2?comp["r07"]:0);c.value=new Uint8Array(0x80);c.value2=new Uint8Array(0x08);c.value3=c.value.slice(comp["r06"]+comp["r07"]);c.wave=(function(){var v=[];for(var j=0;j<8;j++){v.push(new Float32Array(0x80));}
return v;})();c.wav1=new Float32Array(0x80);c.wav2=new Float32Array(0x80);c.wav3=new Float32Array(0x80);v.push(c);}
return v;})();data["comp"]=comp;data["channels"]=channels;};var checkSum=function(d,s){var m=[0x0000,0x8005,0x800F,0x000A,0x801B,0x001E,0x0014,0x8011,0x8033,0x0036,0x003C,0x8039,0x0028,0x802D,0x8027,0x0022,0x8063,0x0066,0x006C,0x8069,0x0078,0x807D,0x8077,0x0072,0x0050,0x8055,0x805F,0x005A,0x804B,0x004E,0x0044,0x8041,0x80C3,0x00C6,0x00CC,0x80C9,0x00D8,0x80DD,0x80D7,0x00D2,0x00F0,0x80F5,0x80FF,0x00FA,0x80EB,0x00EE,0x00E4,0x80E1,0x00A0,0x80A5,0x80AF,0x00AA,0x80BB,0x00BE,0x00B4,0x80B1,0x8093,0x0096,0x009C,0x8099,0x0088,0x808D,0x8087,0x0082,0x8183,0x0186,0x018C,0x8189,0x0198,0x819D,0x8197,0x0192,0x01B0,0x81B5,0x81BF,0x01BA,0x81AB,0x01AE,0x01A4,0x81A1,0x01E0,0x81E5,0x81EF,0x01EA,0x81FB,0x01FE,0x01F4,0x81F1,0x81D3,0x01D6,0x01DC,0x81D9,0x01C8,0x81CD,0x81C7,0x01C2,0x0140,0x8145,0x814F,0x014A,0x815B,0x015E,0x0154,0x8151,0x8173,0x0176,0x017C,0x8179,0x0168,0x816D,0x8167,0x0162,0x8123,0x0126,0x012C,0x8129,0x0138,0x813D,0x8137,0x0132,0x0110,0x8115,0x811F,0x011A,0x810B,0x010E,0x0104,0x8101,0x8303,0x0306,0x030C,0x8309,0x0318,0x831D,0x8317,0x0312,0x0330,0x8335,0x833F,0x033A,0x832B,0x032E,0x0324,0x8321,0x0360,0x8365,0x836F,0x036A,0x837B,0x037E,0x0374,0x8371,0x8353,0x0356,0x035C,0x8359,0x0348,0x834D,0x8347,0x0342,0x03C0,0x83C5,0x83CF,0x03CA,0x83DB,0x03DE,0x03D4,0x83D1,0x83F3,0x03F6,0x03FC,0x83F9,0x03E8,0x83ED,0x83E7,0x03E2,0x83A3,0x03A6,0x03AC,0x83A9,0x03B8,0x83BD,0x83B7,0x03B2,0x0390,0x8395,0x839F,0x039A,0x838B,0x038E,0x0384,0x8381,0x0280,0x8285,0x828F,0x028A,0x829B,0x029E,0x0294,0x8291,0x82B3,0x02B6,0x02BC,0x82B9,0x02A8,0x82AD,0x82A7,0x02A2,0x82E3,0x02E6,0x02EC,0x82E9,0x02F8,0x82FD,0x82F7,0x02F2,0x02D0,0x82D5,0x82DF,0x02DA,0x82CB,0x02CE,0x02C4,0x82C1,0x8243,0x0246,0x024C,0x8249,0x0258,0x825D,0x8257,0x0252,0x0270,0x8275,0x827F,0x027A,0x826B,0x026E,0x0264,0x8261,0x0220,0x8225,0x822F,0x022A,0x823B,0x023E,0x0234,0x8231,0x8213,0x0216,0x021C,0x8219,0x0208,0x820D,0x8207,0x0202,];var sum=0;for(var i=0;i<s;i++){sum=((sum<<8)&0xFFFF)^m[(sum>>>8)^d[i]];}
return sum;};var decrypt=function(d,t){for(var i=0;i<d.length;i++){d[i]=t[d[i]];}
return d;};var arrayUint32ToFloat32=function(a){var v=[];var t=new Uint8Array(4);for(var i=0;i<a.length;i++){t.setUint32(a[i],0,true);v.push(t.getFloat32(0,true));}
return v;};var DECODE1={"scalelist":[0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0D,0x0D,0x0D,0x0D,0x0D,0x0D,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0B,0x0B,0x0B,0x0B,0x0B,0x0B,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x09,0x09,0x09,0x09,0x09,0x09,0x08,0x08,0x08,0x08,0x08,0x08,0x07,0x06,0x06,0x05,0x04,0x04,0x04,0x03,0x03,0x03,0x02,0x02,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,],"valueFloat":arrayUint32ToFloat32([0x342A8D26,0x34633F89,0x3497657D,0x34C9B9BE,0x35066491,0x353311C4,0x356E9910,0x359EF532,0x35D3CCF1,0x360D1ADF,0x363C034A,0x367A83B3,0x36A6E595,0x36DE60F5,0x371426FF,0x3745672A,0x37838359,0x37AF3B79,0x37E97C38,0x381B8D3A,0x384F4319,0x388A14D5,0x38B7FBF0,0x38F5257D,0x3923520F,0x39599D16,0x3990FA4D,0x39C12C4D,0x3A00B1ED,0x3A2B7A3A,0x3A647B6D,0x3A9837F0,0x3ACAD226,0x3B071F62,0x3B340AAF,0x3B6FE4BA,0x3B9FD228,0x3BD4F35B,0x3C0DDF04,0x3C3D08A4,0x3C7BDFED,0x3CA7CD94,0x3CDF9613,0x3D14F4F0,0x3D467991,0x3D843A29,0x3DB02F0E,0x3DEAC0C7,0x3E1C6573,0x3E506334,0x3E8AD4C6,0x3EB8FBAF,0x3EF67A41,0x3F243516,0x3F5ACB94,0x3F91C3D3,0x3FC238D2,0x400164D2,0x402C6897,0x4065B907,0x40990B88,0x40CBEC15,0x4107DB35,0x413504F3,]),"scaleFloat":arrayUint32ToFloat32([0x00000000,0x3F2AAAAB,0x3ECCCCCD,0x3E924925,0x3E638E39,0x3E3A2E8C,0x3E1D89D9,0x3E088889,0x3D842108,0x3D020821,0x3C810204,0x3C008081,0x3B804020,0x3B002008,0x3A801002,0x3A000801,])};var DECODE2={"list1":[0,2,3,3,4,4,4,4,5,6,7,8,9,10,11,12,],"list2":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,3,3,0,0,0,0,0,0,0,0,2,2,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,],"list3":[+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+1,-1,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+1,+1,-1,-1,+2,-2,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+1,-1,+2,-2,+3,-3,+0,+0,+0,+0,+0,+0,+0,+0,+0,+0,+1,+1,-1,-1,+2,+2,-2,-2,+3,+3,-3,-3,+4,-4,+0,+0,+1,+1,-1,-1,+2,+2,-2,-2,+3,-3,+4,-4,+5,-5,+0,+0,+1,+1,-1,-1,+2,-2,+3,-3,+4,-4,+5,-5,+6,-6,+0,+0,+1,-1,+2,-2,+3,-3,+4,-4,+5,-5,+6,-6,+7,-7,]};var DECODE3={"listFloat":arrayUint32ToFloat32([0x00000000,0x00000000,0x32A0B051,0x32D61B5E,0x330EA43A,0x333E0F68,0x337D3E0C,0x33A8B6D5,0x33E0CCDF,0x3415C3FF,0x34478D75,0x3484F1F6,0x34B123F6,0x34EC0719,0x351D3EDA,0x355184DF,0x358B95C2,0x35B9FCD2,0x35F7D0DF,0x36251958,0x365BFBB8,0x36928E72,0x36C346CD,0x370218AF,0x372D583F,0x3766F85B,0x3799E046,0x37CD078C,0x3808980F,0x38360094,0x38728177,0x38A18FAF,0x38D744FD,0x390F6A81,0x393F179A,0x397E9E11,0x39A9A15B,0x39E2055B,0x3A16942D,0x3A48A2D8,0x3A85AAC3,0x3AB21A32,0x3AED4F30,0x3B1E196E,0x3B52A81E,0x3B8C57CA,0x3BBAFF5B,0x3BF9295A,0x3C25FED7,0x3C5D2D82,0x3C935A2B,0x3CC4563F,0x3D02CD87,0x3D2E4934,0x3D68396A,0x3D9AB62B,0x3DCE248C,0x3E0955EE,0x3E36FD92,0x3E73D290,0x3EA27043,0x3ED87039,0x3F1031DC,0x3F40213B,0x3F800000,0x3FAA8D26,0x3FE33F89,0x4017657D,0x4049B9BE,0x40866491,0x40B311C4,0x40EE9910,0x411EF532,0x4153CCF1,0x418D1ADF,0x41BC034A,0x41FA83B3,0x4226E595,0x425E60F5,0x429426FF,0x42C5672A,0x43038359,0x432F3B79,0x43697C38,0x439B8D3A,0x43CF4319,0x440A14D5,0x4437FBF0,0x4475257D,0x44A3520F,0x44D99D16,0x4510FA4D,0x45412C4D,0x4580B1ED,0x45AB7A3A,0x45E47B6D,0x461837F0,0x464AD226,0x46871F62,0x46B40AAF,0x46EFE4BA,0x471FD228,0x4754F35B,0x478DDF04,0x47BD08A4,0x47FBDFED,0x4827CD94,0x485F9613,0x4894F4F0,0x48C67991,0x49043A29,0x49302F0E,0x496AC0C7,0x499C6573,0x49D06334,0x4A0AD4C6,0x4A38FBAF,0x4A767A41,0x4AA43516,0x4ADACB94,0x4B11C3D3,0x4B4238D2,0x4B8164D2,0x4BAC6897,0x4BE5B907,0x4C190B88,0x4C4BEC15,0x00000000,])};var DECODE4={"listFloat":arrayUint32ToFloat32([0x40000000,0x3FEDB6DB,0x3FDB6DB7,0x3FC92492,0x3FB6DB6E,0x3FA49249,0x3F924925,0x3F800000,0x3F5B6DB7,0x3F36DB6E,0x3F124925,0x3EDB6DB7,0x3E924925,0x3E124925,0x00000000,0x00000000,])};var DECODE5={"list1Float":[arrayUint32ToFloat32([0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,0x3DA73D75,]),arrayUint32ToFloat32([0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,0x3F7B14BE,0x3F54DB31,]),arrayUint32ToFloat32([0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,0x3F7EC46D,0x3F74FA0B,0x3F61C598,0x3F45E403,]),arrayUint32ToFloat32([0x3F7FB10F,0x3F7D3AAC,0x3F7853F8,0x3F710908,0x3F676BD8,0x3F5B941A,0x3F4D9F02,0x3F3DAEF9,0x3F7FB10F,0x3F7D3AAC,0x3F7853F8,0x3F710908,0x3F676BD8,0x3F5B941A,0x3F4D9F02,0x3F3DAEF9,0x3F7FB10F,0x3F7D3AAC,0x3F7853F8,0x3F710908,0x3F676BD8,0x3F5B941A,0x3F4D9F02,0x3F3DAEF9,0x3F7FB10F,0x3F7D3AAC,0x3F7853F8,0x3F710908,0x3F676BD8,0x3F5B941A,0x3F4D9F02,0x3F3DAEF9,0x3F7FB10F,0x3F7D3AAC,0x3F7853F8,0x3F710908,0x3F676BD8,0x3F5B941A,0x3F4D9F02,0x3F3DAEF9,0x3F7FB10F,0x3F7D3AAC,0x3F7853F8,0x3F710908,0x3F676BD8,0x3F5B941A,0x3F4D9F02,0x3F3DAEF9,0x3F7FB10F,0x3F7D3AAC,0x3F7853F8,0x3F710908,0x3F676BD8,0x3F5B941A,0x3F4D9F02,0x3F3DAEF9,0x3F7FB10F,0x3F7D3AAC,0x3F7853F8,0x3F710908,0x3F676BD8,0x3F5B941A,0x3F4D9F02,0x3F3DAEF9,]),arrayUint32ToFloat32([0x3F7FEC43,0x3F7F4E6D,0x3F7E1324,0x3F7C3B28,0x3F79C79D,0x3F76BA07,0x3F731447,0x3F6ED89E,0x3F6A09A7,0x3F64AA59,0x3F5EBE05,0x3F584853,0x3F514D3D,0x3F49D112,0x3F41D870,0x3F396842,0x3F7FEC43,0x3F7F4E6D,0x3F7E1324,0x3F7C3B28,0x3F79C79D,0x3F76BA07,0x3F731447,0x3F6ED89E,0x3F6A09A7,0x3F64AA59,0x3F5EBE05,0x3F584853,0x3F514D3D,0x3F49D112,0x3F41D870,0x3F396842,0x3F7FEC43,0x3F7F4E6D,0x3F7E1324,0x3F7C3B28,0x3F79C79D,0x3F76BA07,0x3F731447,0x3F6ED89E,0x3F6A09A7,0x3F64AA59,0x3F5EBE05,0x3F584853,0x3F514D3D,0x3F49D112,0x3F41D870,0x3F396842,0x3F7FEC43,0x3F7F4E6D,0x3F7E1324,0x3F7C3B28,0x3F79C79D,0x3F76BA07,0x3F731447,0x3F6ED89E,0x3F6A09A7,0x3F64AA59,0x3F5EBE05,0x3F584853,0x3F514D3D,0x3F49D112,0x3F41D870,0x3F396842,]),arrayUint32ToFloat32([0x3F7FFB11,0x3F7FD397,0x3F7F84AB,0x3F7F0E58,0x3F7E70B0,0x3F7DABCC,0x3F7CBFC9,0x3F7BACCD,0x3F7A7302,0x3F791298,0x3F778BC5,0x3F75DEC6,0x3F740BDD,0x3F721352,0x3F6FF573,0x3F6DB293,0x3F6B4B0C,0x3F68BF3C,0x3F660F88,0x3F633C5A,0x3F604621,0x3F5D2D53,0x3F59F26A,0x3F5695E5,0x3F531849,0x3F4F7A1F,0x3F4BBBF8,0x3F47DE65,0x3F43E200,0x3F3FC767,0x3F3B8F3B,0x3F373A23,0x3F7FFB11,0x3F7FD397,0x3F7F84AB,0x3F7F0E58,0x3F7E70B0,0x3F7DABCC,0x3F7CBFC9,0x3F7BACCD,0x3F7A7302,0x3F791298,0x3F778BC5,0x3F75DEC6,0x3F740BDD,0x3F721352,0x3F6FF573,0x3F6DB293,0x3F6B4B0C,0x3F68BF3C,0x3F660F88,0x3F633C5A,0x3F604621,0x3F5D2D53,0x3F59F26A,0x3F5695E5,0x3F531849,0x3F4F7A1F,0x3F4BBBF8,0x3F47DE65,0x3F43E200,0x3F3FC767,0x3F3B8F3B,0x3F373A23,]),arrayUint32ToFloat32([0x3F7FFEC4,0x3F7FF4E6,0x3F7FE129,0x3F7FC38F,0x3F7F9C18,0x3F7F6AC7,0x3F7F2F9D,0x3F7EEA9D,0x3F7E9BC9,0x3F7E4323,0x3F7DE0B1,0x3F7D7474,0x3F7CFE73,0x3F7C7EB0,0x3F7BF531,0x3F7B61FC,0x3F7AC516,0x3F7A1E84,0x3F796E4E,0x3F78B47B,0x3F77F110,0x3F772417,0x3F764D97,0x3F756D97,0x3F748422,0x3F73913F,0x3F7294F8,0x3F718F57,0x3F708066,0x3F6F6830,0x3F6E46BE,0x3F6D1C1D,0x3F6BE858,0x3F6AAB7B,0x3F696591,0x3F6816A8,0x3F66BECC,0x3F655E0B,0x3F63F473,0x3F628210,0x3F6106F2,0x3F5F8327,0x3F5DF6BE,0x3F5C61C7,0x3F5AC450,0x3F591E6A,0x3F577026,0x3F55B993,0x3F53FAC3,0x3F5233C6,0x3F5064AF,0x3F4E8D90,0x3F4CAE79,0x3F4AC77F,0x3F48D8B3,0x3F46E22A,0x3F44E3F5,0x3F42DE29,0x3F40D0DA,0x3F3EBC1B,0x3F3CA003,0x3F3A7CA4,0x3F385216,0x3F36206C,])],"list2Float":[arrayUint32ToFloat32([0xBD0A8BD4,0x3D0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0xBD0A8BD4,0x3D0A8BD4,0x3D0A8BD4,0xBD0A8BD4,]),arrayUint32ToFloat32([0xBE47C5C2,0xBF0E39DA,0x3E47C5C2,0x3F0E39DA,0x3E47C5C2,0x3F0E39DA,0xBE47C5C2,0xBF0E39DA,0x3E47C5C2,0x3F0E39DA,0xBE47C5C2,0xBF0E39DA,0xBE47C5C2,0xBF0E39DA,0x3E47C5C2,0x3F0E39DA,0x3E47C5C2,0x3F0E39DA,0xBE47C5C2,0xBF0E39DA,0xBE47C5C2,0xBF0E39DA,0x3E47C5C2,0x3F0E39DA,0xBE47C5C2,0xBF0E39DA,0x3E47C5C2,0x3F0E39DA,0x3E47C5C2,0x3F0E39DA,0xBE47C5C2,0xBF0E39DA,0x3E47C5C2,0x3F0E39DA,0xBE47C5C2,0xBF0E39DA,0xBE47C5C2,0xBF0E39DA,0x3E47C5C2,0x3F0E39DA,0xBE47C5C2,0xBF0E39DA,0x3E47C5C2,0x3F0E39DA,0x3E47C5C2,0x3F0E39DA,0xBE47C5C2,0xBF0E39DA,0xBE47C5C2,0xBF0E39DA,0x3E47C5C2,0x3F0E39DA,0x3E47C5C2,0x3F0E39DA,0xBE47C5C2,0xBF0E39DA,0x3E47C5C2,0x3F0E39DA,0xBE47C5C2,0xBF0E39DA,0xBE47C5C2,0xBF0E39DA,0x3E47C5C2,0x3F0E39DA,]),arrayUint32ToFloat32([0xBDC8BD36,0xBE94A031,0xBEF15AEA,0xBF226799,0x3DC8BD36,0x3E94A031,0x3EF15AEA,0x3F226799,0x3DC8BD36,0x3E94A031,0x3EF15AEA,0x3F226799,0xBDC8BD36,0xBE94A031,0xBEF15AEA,0xBF226799,0x3DC8BD36,0x3E94A031,0x3EF15AEA,0x3F226799,0xBDC8BD36,0xBE94A031,0xBEF15AEA,0xBF226799,0xBDC8BD36,0xBE94A031,0xBEF15AEA,0xBF226799,0x3DC8BD36,0x3E94A031,0x3EF15AEA,0x3F226799,0x3DC8BD36,0x3E94A031,0x3EF15AEA,0x3F226799,0xBDC8BD36,0xBE94A031,0xBEF15AEA,0xBF226799,0xBDC8BD36,0xBE94A031,0xBEF15AEA,0xBF226799,0x3DC8BD36,0x3E94A031,0x3EF15AEA,0x3F226799,0xBDC8BD36,0xBE94A031,0xBEF15AEA,0xBF226799,0x3DC8BD36,0x3E94A031,0x3EF15AEA,0x3F226799,0x3DC8BD36,0x3E94A031,0x3EF15AEA,0x3F226799,0xBDC8BD36,0xBE94A031,0xBEF15AEA,0xBF226799,]),arrayUint32ToFloat32([0xBD48FB30,0xBE164083,0xBE78CFCC,0xBEAC7CD4,0xBEDAE880,0xBF039C3D,0xBF187FC0,0xBF2BEB4A,0x3D48FB30,0x3E164083,0x3E78CFCC,0x3EAC7CD4,0x3EDAE880,0x3F039C3D,0x3F187FC0,0x3F2BEB4A,0x3D48FB30,0x3E164083,0x3E78CFCC,0x3EAC7CD4,0x3EDAE880,0x3F039C3D,0x3F187FC0,0x3F2BEB4A,0xBD48FB30,0xBE164083,0xBE78CFCC,0xBEAC7CD4,0xBEDAE880,0xBF039C3D,0xBF187FC0,0xBF2BEB4A,0x3D48FB30,0x3E164083,0x3E78CFCC,0x3EAC7CD4,0x3EDAE880,0x3F039C3D,0x3F187FC0,0x3F2BEB4A,0xBD48FB30,0xBE164083,0xBE78CFCC,0xBEAC7CD4,0xBEDAE880,0xBF039C3D,0xBF187FC0,0xBF2BEB4A,0xBD48FB30,0xBE164083,0xBE78CFCC,0xBEAC7CD4,0xBEDAE880,0xBF039C3D,0xBF187FC0,0xBF2BEB4A,0x3D48FB30,0x3E164083,0x3E78CFCC,0x3EAC7CD4,0x3EDAE880,0x3F039C3D,0x3F187FC0,0x3F2BEB4A,]),arrayUint32ToFloat32([0xBCC90AB0,0xBD96A905,0xBDFAB273,0xBE2F10A2,0xBE605C13,0xBE888E93,0xBEA09AE5,0xBEB8442A,0xBECF7BCA,0xBEE63375,0xBEFC5D27,0xBF08F59B,0xBF13682A,0xBF1D7FD1,0xBF273656,0xBF3085BB,0x3CC90AB0,0x3D96A905,0x3DFAB273,0x3E2F10A2,0x3E605C13,0x3E888E93,0x3EA09AE5,0x3EB8442A,0x3ECF7BCA,0x3EE63375,0x3EFC5D27,0x3F08F59B,0x3F13682A,0x3F1D7FD1,0x3F273656,0x3F3085BB,0x3CC90AB0,0x3D96A905,0x3DFAB273,0x3E2F10A2,0x3E605C13,0x3E888E93,0x3EA09AE5,0x3EB8442A,0x3ECF7BCA,0x3EE63375,0x3EFC5D27,0x3F08F59B,0x3F13682A,0x3F1D7FD1,0x3F273656,0x3F3085BB,0xBCC90AB0,0xBD96A905,0xBDFAB273,0xBE2F10A2,0xBE605C13,0xBE888E93,0xBEA09AE5,0xBEB8442A,0xBECF7BCA,0xBEE63375,0xBEFC5D27,0xBF08F59B,0xBF13682A,0xBF1D7FD1,0xBF273656,0xBF3085BB,]),arrayUint32ToFloat32([0xBC490E90,0xBD16C32C,0xBD7B2B74,0xBDAFB680,0xBDE1BC2E,0xBE09CF86,0xBE22ABB6,0xBE3B6ECF,0xBE541501,0xBE6C9A7F,0xBE827DC0,0xBE8E9A22,0xBE9AA086,0xBEA68F12,0xBEB263EF,0xBEBE1D4A,0xBEC9B953,0xBED53641,0xBEE0924F,0xBEEBCBBB,0xBEF6E0CB,0xBF00E7E4,0xBF064B82,0xBF0B9A6B,0xBF10D3CD,0xBF15F6D9,0xBF1B02C6,0xBF1FF6CB,0xBF24D225,0xBF299415,0xBF2E3BDE,0xBF32C8C9,0x3C490E90,0x3D16C32C,0x3D7B2B74,0x3DAFB680,0x3DE1BC2E,0x3E09CF86,0x3E22ABB6,0x3E3B6ECF,0x3E541501,0x3E6C9A7F,0x3E827DC0,0x3E8E9A22,0x3E9AA086,0x3EA68F12,0x3EB263EF,0x3EBE1D4A,0x3EC9B953,0x3ED53641,0x3EE0924F,0x3EEBCBBB,0x3EF6E0CB,0x3F00E7E4,0x3F064B82,0x3F0B9A6B,0x3F10D3CD,0x3F15F6D9,0x3F1B02C6,0x3F1FF6CB,0x3F24D225,0x3F299415,0x3F2E3BDE,0x3F32C8C9,]),arrayUint32ToFloat32([0xBBC90F88,0xBC96C9B6,0xBCFB49BA,0xBD2FE007,0xBD621469,0xBD8A200A,0xBDA3308C,0xBDBC3AC3,0xBDD53DB9,0xBDEE3876,0xBE039502,0xBE1008B7,0xBE1C76DE,0xBE28DEFC,0xBE354098,0xBE419B37,0xBE4DEE60,0xBE5A3997,0xBE667C66,0xBE72B651,0xBE7EE6E1,0xBE8586CE,0xBE8B9507,0xBE919DDD,0xBE97A117,0xBE9D9E78,0xBEA395C5,0xBEA986C4,0xBEAF713A,0xBEB554EC,0xBEBB31A0,0xBEC1071E,0xBEC6D529,0xBECC9B8B,0xBED25A09,0xBED8106B,0xBEDDBE79,0xBEE363FA,0xBEE900B7,0xBEEE9479,0xBEF41F07,0xBEF9A02D,0xBEFF17B2,0xBF0242B1,0xBF04F484,0xBF07A136,0xBF0A48AD,0xBF0CEAD0,0xBF0F8784,0xBF121EB0,0xBF14B039,0xBF173C07,0xBF19C200,0xBF1C420C,0xBF1EBC12,0xBF212FF9,0xBF239DA9,0xBF26050A,0xBF286605,0xBF2AC082,0xBF2D1469,0xBF2F61A5,0xBF31A81D,0xBF33E7BC,])],"list3Float":arrayUint32ToFloat32([0x3A3504F0,0x3B0183B8,0x3B70C538,0x3BBB9268,0x3C04A809,0x3C308200,0x3C61284C,0x3C8B3F17,0x3CA83992,0x3CC77FBD,0x3CE91110,0x3D0677CD,0x3D198FC4,0x3D2DD35C,0x3D434643,0x3D59ECC1,0x3D71CBA8,0x3D85741E,0x3D92A413,0x3DA078B4,0x3DAEF522,0x3DBE1C9E,0x3DCDF27B,0x3DDE7A1D,0x3DEFB6ED,0x3E00D62B,0x3E0A2EDA,0x3E13E72A,0x3E1E00B1,0x3E287CF2,0x3E335D55,0x3E3EA321,0x3E4A4F75,0x3E56633F,0x3E62DF37,0x3E6FC3D1,0x3E7D1138,0x3E8563A2,0x3E8C72B7,0x3E93B561,0x3E9B2AEF,0x3EA2D26F,0x3EAAAAAB,0x3EB2B222,0x3EBAE706,0x3EC34737,0x3ECBD03D,0x3ED47F46,0x3EDD5128,0x3EE6425C,0x3EEF4EFF,0x3EF872D7,0x3F00D4A9,0x3F0576CA,0x3F0A1D3B,0x3F0EC548,0x3F136C25,0x3F180EF2,0x3F1CAAC2,0x3F213CA2,0x3F25C1A5,0x3F2A36E7,0x3F2E9998,0x3F32E705,0xBF371C9E,0xBF3B37FE,0xBF3F36F2,0xBF431780,0xBF46D7E6,0xBF4A76A4,0xBF4DF27C,0xBF514A6F,0xBF547DC5,0xBF578C03,0xBF5A74EE,0xBF5D3887,0xBF5FD707,0xBF6250DA,0xBF64A699,0xBF66D908,0xBF68E90E,0xBF6AD7B1,0xBF6CA611,0xBF6E5562,0xBF6FE6E7,0xBF715BEF,0xBF72B5D1,0xBF73F5E6,0xBF751D89,0xBF762E13,0xBF7728D7,0xBF780F20,0xBF78E234,0xBF79A34C,0xBF7A5397,0xBF7AF439,0xBF7B8648,0xBF7C0ACE,0xBF7C82C8,0xBF7CEF26,0xBF7D50CB,0xBF7DA88E,0xBF7DF737,0xBF7E3D86,0xBF7E7C2A,0xBF7EB3CC,0xBF7EE507,0xBF7F106C,0xBF7F3683,0xBF7F57CA,0xBF7F74B6,0xBF7F8DB6,0xBF7FA32E,0xBF7FB57B,0xBF7FC4F6,0xBF7FD1ED,0xBF7FDCAD,0xBF7FE579,0xBF7FEC90,0xBF7FF22E,0xBF7FF688,0xBF7FF9D0,0xBF7FFC32,0xBF7FFDDA,0xBF7FFEED,0xBF7FFF8F,0xBF7FFFDF,0xBF7FFFFC,])};var decode1=function(n,reader,a,b,t){var v=reader.getBit(3);if(v>=6){for(var i=0;i<data["channels"][n]["count"];i++){data["channels"][n]["value"][i]=reader.getBit(6);}}
else if(v){var v1=reader.getBit(6);var v2=(1<<v)-1;var v3=v2>>>1;var v4;data["channels"][n]["value"][0]=v1;for(var i=1;i<data["channels"][n]["count"];i++){v4=reader.getBit(v);if(v4!=v2){v1+=v4-v3;}
else{v1=reader.getBit(6);}
data["channels"][n]["value"][i]=v1;}}
else{data["channels"][n]["value"].fill(0);}
if(data["channels"][n]["type"]==2){v=reader.checkBit(4);data["channels"][n]["value2"][0]=v;if(v<15){for(var i=0;i<data["channels"][n]["value2"].length;i++){data["channels"][n]["value2"][i]=reader.getBit(4);}}}
else{for(var i=0;i<a;i++){data["channels"][n]["value3"][i]=reader.getBit(6);}}
for(var i=0;i<data["channels"][n]["count"];i++){v=data["channels"][n]["value"][i];if(v){v=t[i]+((b+i)>>>8)-(v*5/2|0)+1;if(v<0){v=15;}
else if(v>=0x39){v=1;}
else{v=DECODE1["scalelist"][v];}}
data["channels"][n]["scale"][i]=v;}
data["channels"][n]["scale"].fill(0,data["channels"][n]["count"],0x80);for(var i=0;i<data["channels"][n]["count"];i++){data["channels"][n]["base"][i]=DECODE1["valueFloat"][data["channels"][n]["value"][i]]*DECODE1["scaleFloat"][data["channels"][n]["scale"][i]];}};var decode2=function(n,reader){for(var i=0;i<data["channels"][n]["count"];i++){var f;var s=data["channels"][n]["scale"][i];var size=DECODE2["list1"][s];var v=reader.getBit(size);if(s<8){v+=s<<4;reader.addBit(DECODE2["list2"][v]-size);f=DECODE2["list3"][v];}
else{v=(1-((v&1)<<1))*(v/2|0);if(!v){reader.addBit(-1);}
f=v;}
data["channels"][n]["block"][i]=data["channels"][n]["base"][i]*f;}
data["channels"][n]["block"].fill(0,data["channels"][n]["count"],0x80);};var decode3=function(n,a,b,c,d){if((data["channels"][n]["type"]!=2)&&(b>0)){for(var i=0;i<a;i++){var k=c;var l=c-1;for(var j=0;(j<b)&&(k<d);j++){data["channels"][n]["block"][k++]=DECODE3["listFloat"][0x40+data["channels"][n]["value3"][i]-data["channels"][n]["value"][l]]*data["channels"][n]["block"][l];l--;}}
data["channels"][n]["block"][0x80-1]=0;}};var decode4=function(n,idx,a,b,c){if((data["channels"][n]["type"]==1)&&c){var f1=DECODE4["listFloat"][data["channels"][n+1]["value2"][idx]];var f2=f1-2;for(var i=0;i<a;i++){data["channels"][n+1]["block"][b+i]=data["channels"][n]["block"][b+i]*f2;data["channels"][n]["block"][b+i]*=f1;}}};var decode5=function(n,idx){var s=data["channels"][n]["block"];var d=data["channels"][n]["wav1"];var count1=1;var count2=0x40;for(var i=0;i<7;i++){var x=0;var d1=0;var d2=count2;for(var j=0;j<count1;j++){for(var k=0;k<count2;k++){var a=s[x++];var b=s[x++];d[d1++]=a+b;d[d2++]=a-b;}
d1+=count2;d2+=count2;}
var w=s;s=d;d=w;count1<<=1;count2>>>=1;}
var s=data["channels"][n]["wav1"];var d=data["channels"][n]["block"];var count1=0x40;var count2=1;for(var i=0;i<7;i++){var x=0;var y=0;var s1=0;var s2=count2;var d1=0;var d2=count2*2-1;for(var j=0;j<count1;j++){for(var k=0;k<count2;k++){var a=s[s1++];var b=s[s2++];var c=DECODE5["list1Float"][i][x++];var e=DECODE5["list2Float"][i][y++];d[d1++]=a*c-b*e;d[d2--]=a*e+b*c;}
s1+=count2;s2+=count2;d1+=count2;d2+=count2*3;}
var w=s;s=d;d=w;count1>>>=1;count2<<=1;}
var d=data["channels"][n]["wav2"];for(var i=0;i<d.length;i++){d[i]=s[i];}
var s=DECODE5["list3Float"];var d=data["channels"][n]["wave"][idx];var s1=data["channels"][n]["wav2"];var s2=data["channels"][n]["wav3"];for(var i=0;i<0x40;i++){d[i]=s1[0x40+i]*s[i]+s2[i];}
for(var i=0;i<0x40;i++){d[0x40+i]=s[0x40+i]*s1[0x7f-i]-s2[0x40+i];}
for(var i=0;i<0x40;i++){s2[i]=s1[0x3F-i]*s[0x7F-i];}
for(var i=0;i<0x40;i++){s2[0x40+i]=s[0x3F-i]*s1[i];}};var decode=function(o,s){var block=buffer.slice(o,o+s);if(checkSum(block,s)){return;}
if(data["ciphType"]){block=decrypt(block,data["ciphTable"]);}
var reader=new blockReader(block);if(reader.getBit(16)==0xFFFF){var b=(reader.getBit(9)<<8)-reader.getBit(7);for(var i=0;i<data["channelCount"];i++){decode1(i,reader,data["comp"]["r09"],b,data["athTable"]);}
for(var i=0;i<8;i++){for(var j=0;j<data["channelCount"];j++){decode2(j,reader);}
for(var j=0;j<data["channelCount"];j++){decode3(j,data["comp"]["r09"],data["comp"]["r08"],data["comp"]["r07"]+data["comp"]["r06"],data["comp"]["r05"]);}
for(var j=0;j<data["channelCount"]-1;j++){decode4(j,i,data["comp"]["r05"]-data["comp"]["r06"],data["comp"]["r06"],data["comp"]["r07"]);}
for(var j=0;j<data["channelCount"];j++){decode5(j,i);}}}
return true;};var data=readData(hexKey,awbKey);initData();var pcm=new Float32Array(data["blockCount"]*0x08*0x80*data["channelCount"]);var w=0;var o=data["dataOffset"];for(var b=0;b<data["blockCount"];b++){if(!decode(o,data["blockSize"])){return;}
for(var i=0;i<0x08;i++){for(var j=0;j<0x80;j++){for(var k=0;k<data["channelCount"];k++){pcm[w++]=(data["channels"][k]["wave"][i][j]*data["volume"]).limit(-1,1);}}}
o+=data["blockSize"];}
var fmt={};fmt["formatTag"]=0x01;fmt["channelCount"]=data["channelCount"];fmt["samplesPerSec"]=data["sampleRate"];fmt["bitsPerSample"]=16;fmt["blockAlign"]=fmt["channelCount"]*fmt["bitsPerSample"]/8|0;fmt["avgBytesPerSec"]=fmt["samplesPerSec"]*fmt["blockAlign"];var wave=(function(){var bytesPerSample=fmt["bitsPerSample"]/8;var v=new Uint8Array(pcm.length*bytesPerSample);for(var i=0;i<pcm.length;i++){v.setInt(bytesPerSample,pcm[i]*0x7FFF|0,i*bytesPerSample,true);}
return v;})();File[Tag].push({"path":fileInfo.nameCore+".wav","buffer":wave.packageWav(fmt,"PCM"),"time":new Date()-date});setList();isValid=true;};var fromXsbBuffer=function(buffer){var signature=readText(4);if(signature!="SDBK"){return;}
var soundCount=getInt(2,0x1C,true);var bankNameOffset=getInt(4,0x3A,true);var bankName=getText(bankNameOffset,4);var soundNameOffset=getInt(4,0x42,true);var names=(function(){p=soundNameOffset;var offsets=[];for(var i=0;i<soundCount;i++){offsets.push(readInt(4,true));p+=2;}
var v=[];for(var i=0;i<offsets.length;i++){p=offsets[i];v.push(readText(-1));}
return v;})();for(var i=0;i<names.length;i++){File[Tag].push({"path":names[i],"buffer":new Uint8Array()});}
setList();isValid=true;};var fromXwbBuffer=function(buffer){var signature=readText(4);if(signature!="WBND"){return;}
var entryOffset=0;var regionCount=5;var flagCompact=0x00020000;var readEntry=function(b){var v={};p=entryOffset;if(data["flags"]&flagCompact){v["length"]=readInt(4,true);v["format"]=data["compactFormat"];v["playRegion"]={"offset":(v["length"]&((1<<21)-1))*data["alignment"],"length":(v["length"]>>21)&((1<<11)-1)};p+=data["entryMetaDataElementSize"];v["length"]=(b?header["regions"][header["regions"].length-1]["length"]:((readInt(4,true)&((1<<21)-1))*data["alignment"]));v["playRegion"]["length"]=v["length"]-v["playRegion"]["offset"];}
else{if(header["version"]==1){v["format"]=readInt(4,true);v["playRegion"]={"offset":readInt(4,true),"length":readInt(4,true)};v["loopRegion"]={"offset":readInt(4,true),"length":readInt(4,true)};}
else{if(data["entryMetaDataElementSize"]>=4){v["flagsAndDuration"]=readInt(4,true);}
if(data["entryMetaDataElementSize"]>=8){v["format"]=readInt(4,true);}
if(data["entryMetaDataElementSize"]>=12){v["playRegion"]={"offset":readInt(4,true)};}
if(data["entryMetaDataElementSize"]>=16){v["playRegion"]["length"]=readInt(4,true);}
if(data["entryMetaDataElementSize"]>=20){v["loopRegion"]={"offset":readInt(4,true)};}
if(data["entryMetaDataElementSize"]>=24){v["loopRegion"]["length"]=readInt(4,true);}}
if(data["entryMetaDataElementSize"]<24){if(!(v["playRegion"]&&v["playRegion"]["length"])){v["playRegion"]=v["playRegion"]||{};v["playRegion"]["length"]=header["regions"][header["regions"].length-1]["length"];}}
else{p+=data["entryMetaDataElementSize"];}}
entryOffset+=data["entryMetaDataElementSize"];v["playRegion"]["offset"]+=playRegionOffset;if(header["version"]==1){v["formatTag"]=(v["format"]>>(0))&((1<<1)-1);v["channelCount"]=(v["format"]>>(1))&((1<<3)-1);v["samplesPerSec"]=(v["format"]>>(1+3+1))&((1<<18)-1);v["blockAlign"]=(v["format"]>>(1+3+1+18))&((1<<8)-1);v["bitsPerSample"]=(v["format"]>>(1+3+1+18+8))&((1<<1)-1);}
else{v["formatTag"]=(v["format"]>>(0))&((1<<2)-1);v["channelCount"]=(v["format"]>>(2))&((1<<3)-1);v["samplesPerSec"]=(v["format"]>>(2+3))&((1<<18)-1);v["blockAlign"]=(v["format"]>>(2+3+18))&((1<<8)-1);v["bitsPerSample"]=(v["format"]>>(2+3+18+8))&((1<<1)-1);}
v["channelCount"]=v["channelCount"]||1;return v;};var header=(function(){var v={};v["version"]=readInt(4,true);if(v["version"]==1){return v;}
else if(v["version"]<=3){regionCount=4;}
else if(v["version"]>=42){v["version2"]=readInt(4,true);}
v["regions"]=(function(){var r=[];for(var i=0;i<regionCount;i++){r.push({"offset":readInt(4,true),"length":readInt(4,true)});}
return r;})();return v;})();var data=(function(){var v={};v["flags"]=readInt(4,true);v["entryCount"]=readInt(4,true);if((header["version"]==2)||(header["version"]==3)){v["bankName"]=readText(16);}
else{v["bankName"]=readText(64);}
if(header["version"]==1){v["entryMetaDataElementSize"]=20;entryOffset=p;}
else{v["entryMetaDataElementSize"]=readInt(4,true);v["entryNameElementSize"]=readInt(4,true);v["alignment"]=readInt(4,true);entryOffset=header["regions"][1]["offset"];}
if(v["flags"]&flagCompact){v["compactFormat"]=readInt(4,true);}
return v;})();var names=(function(){var v=[];p=header["regions"][header["regions"].length-2]["offset"];for(var i=0;i<data["entryCount"];i++){if((header["version"]==2)||(header["version"]==3)){v.push(readText(16));}
else{v.push(readText(64));}}
return v;})();var playRegionOffset=(header["regions"]&&header["regions"].length?header["regions"][header["regions"].length-1]["offset"]:entryOffset+data["entryCount"]*data["entryMetaDataElementSize"]);for(var i=0;i<data["entryCount"];i++){var entry=readEntry(i==data["entryCount"]-1);var name=names[i]||data["bankName"]+"_"+i.toString().padStart(data["entryCount"].toString().length,"0");var ext="wav";var type="";var bf;switch(entry["formatTag"]){case 0x00:type="PCM";break;case 0x01:type="XMA";break;case 0x02:type="ADP";break;case 0x03:type="WMA";break;}
if(entry["formatTag"]==0x03){var isXMA=function(){var h=[0x30,0x26,0xB2,0x75,0x8E,0x66,0xCF,0x11,0xA6,0xD9,0x00,0xAA,0x00,0x62,0xCE,0x6C];for(var j=0;j<h.length;j++){if(buffer[p+j]!=h[j]){return false;}}
return true;};if(isXMA){entry["formatTag"]==0x01;type="XMA";}}
switch(entry["formatTag"]){case 0x00:var fmt={};fmt["formatTag"]=0x01;fmt["channelCount"]=entry["channelCount"];fmt["samplesPerSec"]=entry["samplesPerSec"];fmt["bitsPerSample"]=8<<entry["bitsPerSample"];fmt["blockAlign"]=entry["blockAlign"];fmt["avgBytesPerSec"]=fmt["blockAlign"]*fmt["samplesPerSec"];bf=getBuffer(entry["playRegion"]["offset"],entry["playRegion"]["length"]).packageWav(fmt,"PCM");break;case 0x01:var fmt={};fmt["formatTag"]=0x0165;fmt["channelCount"]=entry["channelCount"];fmt["samplesPerSec"]=entry["samplesPerSec"];fmt["bitsPerSample"]=16;fmt["blockAlign"]=fmt["channelCount"]*2;fmt["avgBytesPerSec"]=fmt["blockAlign"]*fmt["samplesPerSec"];fmt["duration"]=(entry["length"]>>4)&0xFFFFFFF;bf=getBuffer(entry["playRegion"]["offset"],entry["playRegion"]["length"]).packageWav(fmt,"XMA");break;case 0x02:var fmt={};fmt["formatTag"]=0x02;fmt["channelCount"]=entry["channelCount"];fmt["samplesPerSec"]=entry["samplesPerSec"];fmt["bitsPerSample"]=4;fmt["blockAlign"]=fmt["channelCount"]*(entry["blockAlign"]+22);fmt["avgBytesPerSec"]=fmt["blockAlign"]*fmt["samplesPerSec"]/(fmt["blockAlign"]*2/fmt["channelCount"]-12);bf=getBuffer(entry["playRegion"]["offset"],entry["playRegion"]["length"]).packageWav(fmt,"ADPCM");break;case 0x03:var fmt={};fmt["formatTag"]=0x0161;fmt["channelCount"]=entry["channelCount"];fmt["samplesPerSec"]=entry["samplesPerSec"];fmt["bitsPerSample"]=16;fmt["blockAlign"]=[929,1487,1280,2230,8917,8192,4459,5945,2304,1536,1485,1008,2731,4096,6827,5462,1280][entry["blockAlign"]&0x1F]||0;fmt["avgBytesPerSec"]=[12000,24000,4000,6000,8000,20000,2500][entry["blockAlign"]>>5]||0;bf=getBuffer(entry["playRegion"]["offset"],entry["playRegion"]["length"]).packageWav(fmt,"XMA");break;}
if(bf){File[Tag].push({"path":name+"."+ext,"buffer":bf});}}
setList();isValid=true;};var from2dxBuffer=function(buffer){var pointer=[];p+=72;pointer[0]=readInt(4,true);while(p<pointer[0]){var v=readInt(4,true);if(v<buffer.length){pointer.push(v);}}
var l=pointer.length.toString().length;for(var i=0;i<pointer.length;i++){File[Tag].push({"path":i.toString().padStart(l,"0")+".wav","buffer":buffer.slice(pointer[i]+24,(i!=pointer.length-1?pointer[i+1]:buffer.length))});}
setList();isValid=true;};var fromOjmBuffer=function(buffer){var signature=readText(4);switch(signature){case"OJM":case"OMC":var decodeWave=function(wave){var r=new Uint8Array(wave);var table=[16,14,2,9,4,0,7,1,6,8,15,10,5,12,3,13,11,7,2,10,11,3,5,13,8,4,0,12,6,15,14,16,1,9,12,13,3,0,6,9,10,1,7,8,16,2,11,14,4,15,5,8,3,4,13,6,5,11,16,2,12,7,9,10,15,14,0,1,15,2,12,13,0,4,1,5,7,3,9,16,6,11,10,8,14,0,4,11,16,15,13,12,6,5,7,1,2,3,8,9,10,14,3,16,8,7,6,9,14,13,0,10,11,4,5,12,2,1,15,4,14,16,15,5,8,7,11,0,1,6,2,12,9,3,10,13,6,13,14,7,16,10,11,0,1,12,15,2,3,8,9,4,5,10,12,0,8,9,13,3,4,5,16,14,15,1,2,11,6,7,5,6,12,4,13,15,7,14,8,1,9,2,16,10,11,0,3,11,15,4,14,3,1,0,2,13,12,6,7,5,16,9,8,10,3,2,1,0,4,12,13,11,16,5,6,15,14,7,9,10,8,9,10,0,7,8,6,16,3,4,1,2,5,11,14,15,13,12,10,6,9,12,11,16,7,8,0,15,3,1,2,5,13,14,4,13,0,1,14,2,3,8,11,7,12,9,5,10,15,4,6,16,1,14,2,3,13,11,7,0,8,12,9,6,15,16,5,10,4,0];var key=(r.length%17<<4)+r.length%17;var size=r.length/17;for(var i=0;i<17;i++){r.set(wave.slice(size*i,size*i+size),size*table[key+i]);}
var k=0xFF;var n=0;for(var i=0;i<r.length;i++){var t=r[i];if(((k<<n)&0x80)!=0){r[i]=~r[i];}
n++;if(n>7){n=0;k=t;}}
return r;};var countWav=readInt(2,true);var countOgg=readInt(2,true);var offsetWav=readInt(4,true);var offsetOgg=readInt(4,true);var size=readInt(4,true);p=offsetWav;var id=0;while(p<offsetOgg){var name=readText(32,"UCS2");var formatTag=readInt(2,true);var channelCount=readInt(2,true);var sampleRate=readInt(4,true);var avgBytesPerSec=readInt(4,true);var blockAlign=readInt(2,true);var bitsPerSample=readInt(2,true);p+=4;var chunkSize=readInt(4,true);var wave=readBuffer(chunkSize);wave=(signature=="OJM"?wave:decodeWave(wave));var fmt={"formatTag":formatTag,"channelCount":channelCount,"samplesPerSec":sampleRate,"bitsPerSample":bitsPerSample,"blockAlign":blockAlign,"avgBytesPerSec":avgBytesPerSec};if(wave){File[Tag].push({"path":name+".wav","mark":id,"buffer":wave.packageWav(fmt,"PCM")});}
id+=1;}
id=1000;while(p<buffer.length){var name=readText(32,"UCS2");var size=readInt(4,true);var audio=readBuffer(size);if(audio.length){File[Tag].push({"path":name+".ogg","mark":id,"buffer":audio});}
id+=1;}
break;case"M30":var version=readInt(4,true);var encryption=readInt(4,true);var samples=readInt(4,true);var start=readInt(4,true);var offset=readInt(4,true);var padding=readInt(4,true);p=start;while(p<buffer.length){var name=readText(32,"UCS2");var size=readInt(4,true);var type=readInt(2,true);p+=6;var id=readInt(2,true);p+=6;if(type==0){id+=1000;}
var mask=(function(){switch(encryption){case 16:return[0x6E,0x61,0x6D,0x69];break;case 32:return[0x30,0x34,0x31,0x32];break;default:return[0x00,0x00,0x00,0x00];break;}})();if(size){File[Tag].push({"path":name+".ogg","mark":id,"buffer":readBuffer(size),"maskOjm":mask});}}
break;}
setList();isValid=true;};var fromBinBuffer=function(buffer){while(p<buffer.length){File[Tag].push({"path":readText(readInt(4,true)),"buffer":readBuffer(readInt(4,true))});}
setList();isValid=true;};this.GetBuffer=function(){var m=(arguments.length>0?arguments[0]:"");checkBuffer(m);return(m?All[Tag]["buffer"]:File[Tag][Index]["buffer"]);};this.GetInfo=function(){var m=(arguments.length>0?arguments[0]:"");checkBuffer(m);if(m){All[Tag]["info"]=All[Tag]["info"]||checkInfo(m);return All[Tag]["info"];}
else{File[Tag][Index]["info"]=File[Tag][Index]["info"]||checkInfo(m);return File[Tag][Index]["info"];}};this.Select=function(tag){if(tag!=Tag){Tag=tag;File[Tag]=File[Tag]||(function(){var v=[];var s=Tag.split("|");for(var i=0;i<File["|"].length;i++){if(File["|"][i]["path"].endsWith("."+s[0])){if(File["|"][i]["buffer"].length){v.push({"path":File["|"][i]["path"].slice(0,File["|"][i]["path"].length-("."+s[0]).length)+"."+s[1],"index":i});}}}
return v;})();All[Tag]=All[Tag]||{};setList();}};this.Choose=function(index){Index=index;};Object.defineProperty(this,"IsValid",{"get":function(){return isValid;}});(function(){if(buffer.length==0){return;}
reset();switch(ext){case"zip":case"apk":case"ipa":case"osz":case"mcz":fromZipBuffer(buffer);break;case"s3v":fromS3vBuffer(buffer);break;case"dz":fromDzBuffer(buffer);break;case"cpk":fromCpkBuffer(buffer);break;case"acb":fromAcbBuffer(buffer);break;case"acf":fromAcfBuffer(buffer);break;case"awb":fromAwbBuffer(buffer);break;case"adx":fromAdxBuffer(buffer);break;case"hca":fromHcaBuffer(buffer);break;case"xsb":fromXsbBuffer(buffer);break;case"xwb":fromXwbBuffer(buffer);break;case"2dx":from2dxBuffer(buffer);break;case"ojm":fromOjmBuffer(buffer);break;case"bin":fromBinBuffer(buffer);break;}})();}
function Ecd(fileInfo){var buffer=fileInfo.buffer;var ext=fileInfo.extension[0];var isValid=false;var Buffer;var Text;var reset=function(){isValid=false;Buffer=undefined;Text=undefined;};var fromHexBuffer=function(buffer){Buffer=new Uint8Array().fromHex(buffer.getText());isValid=true;};var fromBase64Buffer=function(buffer){Buffer=new Uint8Array().fromBase64(buffer.getText());isValid=true;};this.ToBuffer=function(){return Buffer;};this.ToText=function(){Text=Text||Buffer.getHex(0,Buffer.length," ");return Text;};Object.defineProperty(this,"IsValid",{"get":function(){return isValid;}});(function(){if(buffer.length==0){return;}
reset();switch(ext){case"hex":fromHexBuffer(buffer);break;case"base64":fromBase64Buffer(buffer);break;}})();}
function Bin(fileInfo){var buffer=fileInfo.buffer;var ext=fileInfo.extension[0];var type=fileInfo.type;var isValid=false;var Buffer;var Text;var reset=function(){isValid=false;Buffer={};Buffer["bin"]=undefined;Buffer["xml"]=undefined;Buffer["list"]=undefined;Buffer["bat"]=undefined;Buffer["json"]=undefined;Text={};Text["bin"]=undefined;Text["xml"]=undefined;Text["html"]=undefined;Text["list"]=undefined;Text["bat"]=undefined;Text["json"]=undefined;};var getBinName=function(u){var r=[];var BinUnit=[["errno_main_client",564],["mrock.active_client",35],["mrock.character_client",644],["mrock.characterproperty_client",327],["mrock.floornode_client",16],["mrock.floorreward_client",186],["mrock.innerpublicnotify_client",928],["mrock.innerrace_client",616],["mrock.luckyturntablereward_client",18],["mrock.luckyturntabletypeshow_client",137],["mrock.marketact_client",152],["mrock.mission_client",414],["mrock.scorebuy_client",22],["mrock.scoreexchange_client",21],["mrock.surviveact_client",263],["mrock.thingbuy_client",31],["mrock.timelimitcharacter_client",284],["mrock_buynew_client",295],["mrock_dailyactive_client",105],["mrock_guild_song_client",28],["mrock_guildactivity_client",332],["mrock_Map_client",57],["mrock_match_client",4156],["mrock_match_division_client",260],["mrock_medal_client",92],["mrock_noble_client",3993],["mrock_noble_gift_client",304],["mrock_papasong_client",361],["mrock_questconfig_client",640],["errno_main_client",564],["mrock_recharge_ios_client",406],["mrock_recharge_android_client",406],["mrock_room_client",24],["mrock_scoreexchange_client",21],["mrock_share_client",268],["mrock_song_client",830],["mrock_song_client_android",830],["mrock_songlevel_client",830],["mrock_SongPkg_client",808],["mrock_starmall_exchange_client",93],["mrock_SysParam_client",8],["mrock_txt_client",260]];for(var i=0;i<BinUnit.length;i++){if(BinUnit[i][1]==u){r.push(BinUnit[i][0]);}}
return r;};var getBinStructure=function(){var r=[];switch(fileInfo.nameCore){case"errno_main_client":r.push([0,"m_szName",48]);r.push([0,"m_uiValue",4]);r.push([0,"m_szDescriptionZH",256]);r.push([0,"m_szDescriptionEN",256]);r=["ErrnoConfig_Client_Tab","ErrnoConfig_Client",r];break;case"mrock.active_client":r.push([0,"m_ushActiveID",2]);r.push([0,"m_ucActiveType",1]);r.push([0,"m_iNumber",4]);r.push([0,"m_ucRewardNumber",1]);r.push([1,"m_astReward,ActiveReward",3]);r=["ActiveConfig_Client_Tab","ActiveConfig_Client",r];break;case"mrock.character_client":r.push([0,"m_usID",2]);r.push([0,"m_usIconID",2]);r.push([0,"m_szDesc",256]);r.push([0,"m_szNoteDesc",256]);r.push([0,"m_szNoteStyle1",32]);r.push([0,"m_szNoteStyle2",32]);r.push([0,"m_szNoteStyle3",32]);r.push([0,"m_szGameSpeaking",32]);r=["CharacterConfig_Client_Tab","CharacterConfig_Client",r];break;case"mrock.characterproperty_client":r.push([0,"m_usID",2]);r.push([0,"m_ucPropertyID",1]);r.push([0,"m_ucType",1]);r.push([0,"m_usIconID",2]);r.push([0,"m_ucEffectType",1]);r.push([0,"m_szName",32]);r.push([0,"m_szEffect",32]);r.push([0,"m_szDesc",256]);r=["CharacterPropertyConfig_Client_Tab","CharacterPropertyConfig_Client",r];break;case"mrock.floornode_client":r.push([0,"m_iNodeID",4]);r.push([0,"m_iNodeType",4]);r.push([0,"m_iNodeValue",4]);r.push([0,"m_iPlayStyle",4]);r=["FloorNodeConfig_Client_Tab","FloorNodeConfig_Client",r];break;case"mrock.floorreward_client":r.push([0,"m_iRewardID",4]);r.push([0,"m_ucRewardType",1]);r.push([0,"m_iRewardValue",4]);r=["FloorRewardConfig_Client_Tab","FloorRewardConfig_Client",r];break;case"mrock.innerpublicnotify_client":r.push([0,"m_iID",4]);r.push([0,"m_iLevel",4]);r.push([0,"m_iLinkType",4]);r.push([0,"m_iContentType",4]);r.push([0,"m_szTitle",300]);r.push([0,"m_szContent",300]);r.push([0,"m_szUrl",300]);r.push([0,"m_iForce",4]);r.push([0,"m_iPhonetype",4]);r.push([0,"m_iLoginType",4]);r=["InnerPublicNotifyConfig_Client_Tab","InnerPublicNotifyConfig_Client",r];break;case"mrock.innerrace_client":r.push([0,"m_iMatchID",4]);r.push([0,"m_iLevel",4]);r.push([0,"m_iContentType",4]);r.push([0,"m_szTitle",300]);r.push([0,"m_szContent",300]);r.push([0,"m_iPhonetype",4]);r=["InnerRaceConfig_Client_Tab","InnerRaceConfig_Client",r];break;case"mrock.luckyturntablereward_client":break;case"mrock.luckyturntabletypeshow_client":break;case"mrock.marketact_client":r.push([0,"m_ushMarketActID",2]);r.push([0,"m_szDescription",128]);r.push([0,"m_ucRewardNumber",1]);r.push([1,"m_astReward,MarketActReward",3]);r=["MarketActConfig_Client_Tab","MarketActConfig_Client",r];break;case"mrock.mission_client":r.push([0,"m_iMissionID",4]);r.push([0,"m_szTitle",128]);r.push([0,"m_iIconID",4]);r.push([0,"m_szDiffDesc",64]);r.push([0,"m_szDiffColor",64]);r.push([0,"m_szBeginTime",64]);r.push([0,"m_szEndTime",64]);r.push([0,"m_iStartFloor",4]);r.push([0,"m_iEndFloor",4]);r.push([0,"m_ucResetable",4]);r.push([0,"m_iResetCost",4]);r.push([0,"m_ucRewardType",1]);r.push([0,"m_ucIsNew",1]);r.push([0,"m_iSeqID",4]);r=["MissionConfig_Client_Tab","MissionConfig_Client",r];break;case"mrock.scorebuy_client":r.push([0,"m_iBuyID",4]);r.push([0,"m_ucItemType",1]);r.push([0,"m_iItemID",4]);r.push([0,"m_iItemValue",4]);r.push([0,"m_iScorePresent",4]);r.push([0,"m_ucBuyType",1]);r.push([0,"m_iCostNum",4]);r=["ScoreBuyConfig_Client_Tab","ScoreBuyConfig_Client",r];break;case"mrock.scoreexchange_client":case"mrock_scoreexchange_client":r.push([0,"m_iExchangeID",4]);r.push([0,"m_ucItemType",1]);r.push([0,"m_iItemID",4]);r.push([0,"m_iItemValue",4]);r.push([0,"m_iScoreCost",4]);r.push([0,"m_iVersion",4]);r=["ScoreExchangeConfig_Client_Tab","ScoreExchangeConfig_Client",r];break;case"mrock.surviveact_client":r.push([0,"m_iID",4]);r.push([0,"m_ushSongID",2]);r.push([0,"m_ucNoteType",1]);r.push([0,"m_szOpenTimeDesc",256]);r=["SurviveActConfig_Client_Tab","SurviveActConfig_Client",r];break;case"mrock.thingbuy_client":break;case"mrock.timelimitcharacter_client":r.push([0,"m_ushID",2]);r.push([0,"m_ushCharacterID",2]);r.push([0,"m_ushInitLevel",2]);r.push([0,"m_szName",22]);r.push([0,"m_szDesc",256]);r=["TimeLimitCharacterConfig_Client_Tab","TimeLimitCharacterConfig_Client",r];break;case"mrock_buynew_client":r.push([0,"m_ushID",2]);r.push([0,"m_ucType",1]);r.push([0,"m_iThingID",4]);r.push([0,"m_szItemName",128]);r.push([0,"m_iThingNumber",4]);r.push([0,"m_iIOSMoney",4]);r.push([0,"m_iAndroidMoney",4]);r.push([0,"m_iDiamonds",4]);r.push([0,"m_szDescriptionName",128]);r.push([0,"m_iIconID",4]);r.push([0,"m_iIsopen",4]);r.push([0,"m_iSequence",4]);r.push([0,"m_iIsone",4]);r=["BuyConfig_Client_Tab","BuyConfig_Client",r];break;case"mrock_dailyactive_client":break;case"mrock_guild_song_client":break;case"mrock_guildactivity_client":break;case"mrock_Map_client":break;case"mrock_match_client":r.push([0,"m_iMatchIndex",4]);r.push([0,"m_iRegion",4]);r.push([0,"m_iType",4]);r.push([0,"m_szBeginTime",64]);r.push([0,"m_szEndTime",64]);r.push([0,"m_iElectNumber",4]);r.push([0,"m_iGroupNumber",4]);r.push([0,"m_szApplySuccess",64]);r.push([0,"m_szTitle",64]);r.push([0,"m_szTitle1",64]);r.push([0,"m_szContent1",200]);r.push([0,"m_szTitle2",64]);r.push([0,"m_szContent2",200]);r.push([0,"m_szTitle3",64]);r.push([0,"m_szContent3",1024]);r.push([0,"m_szContentPage201",200]);r.push([0,"m_szContentPage202",200]);r.push([0,"m_szContentPage203",200]);r.push([0,"m_szContentPage204",200]);r.push([0,"m_szContentPage205",200]);r.push([0,"m_szTimeDesc",200]);r.push([0,"m_szPostTitle",64]);r.push([0,"m_szPostDesc1",200]);r.push([0,"m_szPostDesc2",200]);r.push([0,"m_szPostDesc3",200]);r.push([0,"m_szPostDesc4",200]);r.push([0,"m_szStageName",200]);r=["MatchConfig_Client_Tab","MatchConfig_Client",r];break;case"mrock_match_division_client":r.push([0,"m_iMatchID",4]);r.push([0,"m_szFilterSort1",64]);r.push([0,"m_szFilterSort2",64]);r.push([0,"m_szFilter1",64]);r.push([0,"m_szFilter2",64]);r=["MatchDivisionConfig_Client_Tab","MatchDivisionConfig_Client",r];break;case"mrock_medal_client":break;case"mrock_noble_client":break;case"mrock_noble_gift_client":break;case"mrock_papasong_client":r.push([0,"m_ushSongID",2]);r.push([0,"m_iVersion",4]);r.push([0,"m_szSongName",64]);r.push([0,"m_cDifficulty",1]);r.push([0,"m_cLevel",1]);r.push([0,"m_szPath",64]);r.push([0,"m_szArtist",64]);r.push([0,"m_szSongTime",64]);r.push([0,"m_iGameTime",4]);r.push([0,"m_szRegion",20]);r.push([0,"m_szStyle",20]);r.push([0,"m_szBPM",20]);r.push([0,"m_szNoteNumber",20]);r.push([0,"m_iOrderIndex",4]);r.push([0,"m_ucIsOpen",1]);r.push([0,"m_ucIsFree",1]);r.push([0,"m_ucIsHide",1]);r.push([0,"m_ucIsReward",1]);r.push([0,"m_ucIsLevelReward",1]);r.push([0,"m_iSongType",4]);r=["PapaSongConfig_Client_Tab","PapaSongConfig_Client",r];break;case"mrock_questconfig_client":r.push([0,"m_iQuestId",4]);r.push([0,"m_szQuestName",300]);r.push([0,"m_szDescription",300]);r.push([0,"m_iMethod",4]);r.push([0,"m_iNodeType",4]);r.push([0,"m_iNodeValue",4]);r.push([0,"m_iNodeLimit",4]);r.push([0,"m_iSongNodeID",4]);r.push([0,"m_iSongNodeNoteType",4]);r.push([0,"m_iRewardType",4]);r.push([0,"m_iRewardID",4]);r.push([0,"m_iRewardValue",4]);r=["QuestConfig_Client_Tab","QuestConfig_Client",r];break;case"mrock_recharge_ios_client":case"mrock_recharge_android_client":break;case"mrock_room_client":r.push([0,"m_ushRoomID",2]);r.push([0,"m_ucSongType",1]);r.push([0,"m_ucTicketType",1]);r.push([0,"m_iTicketNum",4]);r.push([0,"m_ucRewardType",1]);r.push([0,"m_iRewardNum",4]);r.push([0,"m_iRewardIntergral",4]);r.push([0,"m_ucIsOpen",1]);r.push([0,"m_ucIsNewOpen",1]);r.push([0,"m_ucIsProp",1]);r.push([0,"m_iMinClientVersion",4]);r=["RoomConfig_Client_Tab","RoomConfig_Client",r];break;case"mrock_share_client":break;case"mrock_song_client":case"mrock_song_client_android":case"mrock_songlevel_client":r.push([0,"m_ushSongID",2]);r.push([0,"m_iVersion",4]);r.push([0,"m_szSongName",64]);r.push([0,"m_szPath",64]);r.push([0,"m_szArtist",64]);r.push([0,"m_szComposer",64]);r.push([0,"m_szSongTime",64]);r.push([0,"m_iGameTime",4]);r.push([0,"m_iRegion",4]);r.push([0,"m_iStyle",4]);r.push([0,"m_ucIsNew",2]);r.push([0,"m_ucIsHot",2]);r.push([0,"m_ucIsRecommend",2]);r.push([0,"m_szBPM",64]);r.push([0,"m_ucIsOpen",2]);r.push([0,"m_ucCanBuy",1]);r.push([0,"m_iOrderIndex",4]);r.push([0,"m_bIsFree",1]);r.push([0,"m_bSongPkg",1]);r.push([0,"m_szFreeBeginTime",64]);r.push([0,"m_szFreeEndTime",64]);r.push([0,"m_ush4KeyEasy",2]);r.push([0,"m_ush4KeyNormal",2]);r.push([0,"m_ush4KeyHard",2]);r.push([0,"m_ush5KeyEasy",2]);r.push([0,"m_ush5KeyNormal",2]);r.push([0,"m_ush5KeyHard",2]);r.push([0,"m_ush6KeyEasy",2]);r.push([0,"m_ush6KeyNormal",2]);r.push([0,"m_ush6KeyHard",2]);r.push([0,"m_iPrice",4]);r.push([0,"m_szNoteNumber",128]);r.push([0,"m_szProductID",128]);r.push([0,"m_iVipFlag",4]);r.push([0,"m_bIsHide",1]);r.push([0,"m_bIsReward",1]);r.push([0,"m_bIsLevelReward",1]);r=["SongConfig_Client_Tab","SongConfig_Client",r];break;case"mrock_SongPkg_client":r.push([0,"m_ushIndex",2]);r.push([0,"m_szProductID",128]);r.push([0,"m_szDesc",512]);r.push([0,"m_szPath",128]);r.push([0,"m_iAndroidPrice",4]);r.push([0,"m_iPrice",4]);r.push([0,"m_iEnable",4]);r.push([0,"m_bIsNew",1]);r.push([0,"m_bIsHot",1]);r.push([0,"m_iNum",4]);r.push([1,"m_astSongs,PkgSong",10]);r=["SongPkgConfig_Client_Tab","SongPkgConfig_Client",r];break;case"mrock_starmall_exchange_client":break;case"mrock_SysParam_client":r.push([0,"m_iParamID",4]);r.push([0,"m_iParamValue",4]);r=["SysParamConfig_Client_Tab","SysParamConfig_Client",r];break;case"mrock_txt_client":r.push([0,"m_uiID",4]);r.push([0,"m_szDescriptionZH",256]);r=["TxtConfig_Client_Tab","TxtConfig_Client",r];break;}
return r;};var generateListBat=function(){if(!isUndefined(Buffer["bin"])||!isUndefined(Buffer["xml"])){var name=fileInfo.nameCore;switch(true){case name.startsWith("mrock_song_client"):case name.startsWith("mrock_song_client_android"):case name.startsWith("mrock_papasong_client"):case name.startsWith("songlistrm_info_c"):Text["list"]=toListText();Text["bat"]=toBatText();break;}}};var fromBinBuffer=function(buffer){Buffer["bin"]=buffer;generateListBat();isValid=true;};var fromXmlBuffer=function(buffer){Buffer["xml"]=buffer;generateListBat();isValid=true;};var toBinBuffer=function(){Text["xml"]=Text["xml"]||toXmlText();var x=Text["xml"].replace(/\r\n/g,"");var readData=function(f1,f2){var l1=x.indexOf(f1,px);if(l1==-1){px=x.length;return"";}
else{l1+=f1.length;}
var l2=x.indexOf(f2,l1);if(l2==-1){px=x.length;return"";}
px=l2+f2.length;return x.slice(l1,l2);};var writeInt8=function(c){if(c==""){c="0x0 "}
if((c.indexOf("0x")==0)&&(c.lastIndexOf(" ")==(c.length-1))){bin.setInt8(parseInt(c,16),pb);pb+=1;}};var writeInt16=function(c){if(c==""){c="0 "}
if(c.lastIndexOf(" ")==(c.length-1)){bin.setInt16(parseInt(c,10),pb,true);pb+=2;}};var writeInt32=function(c){if(c==""){c="0 "}
if(c.lastIndexOf(" ")==(c.length-1)){bin.setInt32(parseInt(c,10),pb,true);pb+=4;}};var writeDateTime=function(c){if(c==""){c="  0-00-00 00:00:00"}
var a=c.split("-");var y=a[0];writeInt32(y.toString()+" ");var M=a[1];writeInt16(M.toString()+" ");a=a[2].split(" ");var d=a[0];writeInt16(d.toString()+" ");a=a[1].split(":");var H=a[0];writeInt16(H.toString()+" ");var m=a[1];writeInt16(m.toString()+" ");var s=a[2];writeInt16(s.toString()+" ");};var writeText=function(c,n){bin.setText(c,pb);var t=new Uint8Array().fromText(c);pb+=t.length;bin.set(new Uint8Array(n-t.length),pb)
pb+=n-t.length;};var writeData=function(c,n){switch(n){case 1:writeInt8(c);break;case 2:writeInt16(c);break;case 4:writeInt32(c);break;case 14:writeDateTime(c);break;case 20:case 22:case 32:case 48:case 64:case 128:case 200:case 256:case 300:case 512:case 1024:writeText(c,n);break;}};var writeDataE=function(f,t,n){var l=[];for(var i=0;i<n;i++){if(f=="TResHeadAll"){l.push(x);}
else{l.push(readData("<"+f+" type="+'"'+t+'"'+">","</"+f+">"));}}
for(var i=0;i<l.length;i++){x=l[i];px=0;switch(f){case"TResHeadAll":writeData(readData("<Version>","</Version>"),4);writeData(readData("<Unit>","</Unit>"),4);writeData(readData("<Count>","</Count>"),4);writeData(readData("<MetalibHash>","</MetalibHash>"),32);writeData(readData("<ResVersion>","</ResVersion>"),2);writeData(readData("<CreateTime>","</CreateTime>"),14);writeData(readData("<ResEncording>","</ResEncording>"),32);writeData(readData("<ContentHash>","</ContentHash>"),32);writeData("",4);writeData(readData("<DataOffset>","</DataOffset>"),4);break;case"m_astReward":switch(t){case"ActiveReward":if(x!=""){writeData(readData("<m_ucRewardType>","</m_ucRewardType>"),1);writeData(readData("<m_iRewardID>","</m_iRewardID>"),4);writeData(readData("<m_iRewardValue>","</m_iRewardValue>"),4);}
else{writeData("",1);writeData("",4);writeData("",4);}
break;case"MarketActReward":if(x!=""){writeData(readData("<m_ucRewardType>","</m_ucRewardType>"),1);writeData(readData("<m_ushRewardID>","</m_ushRewardID>"),2);writeData(readData("<m_iRewardValue>","</m_iRewardValue>"),4);}
else{writeData("",1);writeData("",2);writeData("",4);}
break;}
break;case"m_astSongs":if(x!=""){writeData(readData("<ID>","</ID>"),2);}
else{writeData("",2);}
break;}}};var writeDataT=function(s){if(s.length==0){return;}
x=readData("<"+s[0]+">","</"+s[0]+">");px=0;writeText("MSES",4);writeDataE("TResHeadAll","",1);var l=[];while(px<x.length){l.push(readData("<"+s[1]+" version="+'"'+"1"+'"'+">","</"+s[1]+">"))}
for(var i=0;i<l.length;i++){x=l[i];px=0;for(var j=0;j<s[2].length;j++){switch(s[2][j][0]){case 0:writeData(readData("<"+s[2][j][1]+">","</"+s[2][j][1]+">"),s[2][j][2]);break;case 1:var a=s[2][j][1].split(",");writeDataE(a[0],a[1],s[2][j][2]);break;}}}
bin.setInt32(l.length,12,true);bin.setText(bin.getMD5(136,pb-136).toLowerCase(),96);};var bin=new Uint8Array(x.length*3);var px=0;var pb=0;writeDataT(getBinStructure());return bin.slice(0,pb);};var toXmlBuffer=function(){Text["xml"]=Text["xml"]||toXmlText();return new Uint8Array().fromText(Text["xml"]);};var toJsonBuffer=function(){Text["json"]=Text["json"]||toJsonText();return new Uint8Array().fromText(Text["json"]);};var toListBuffer=function(){Text["list"]=Text["list"]||toListText();return new Uint8Array().fromText(Text["list"]);};var toBatBuffer=function(){Text["bat"]=Text["bat"]||toBatText();return new Uint8Array().fromText(Text["bat"],"ANSI");};var toBinText=function(){Buffer["bin"]=Buffer["bin"]||toBinBuffer();var writeHex=function(l){hex.push(Buffer["bin"].getHex(p,l," "));p+=l;};var writeHexE=function(f,t,n){for(var i=0;i<n;i++){switch(f){case"TResHeadAll":writeHex(4);writeHex(4);writeHex(4);writeHex(32);writeHex(2);writeHex(14);writeHex(32);writeHex(32);writeHex(4);writeHex(4);break;case"m_astReward":switch(t){case"ActiveReward":writeHex(1);writeHex(4);writeHex(4);break;case"MarketActReward":writeHex(1);writeHex(2);writeHex(4);break;}
break;case"m_astSongs":writeHex(2);break;}}};var writeHexT=function(s){if(s.length==0){return;}
writeHex(4);writeHexE("TResHeadAll","",1);while(p<Buffer["bin"].length){for(var i=0;i<s[2].length;i++){switch(s[2][i][0]){case 0:writeHex(s[2][i][2]);break;case 1:var a=s[2][i][1].split(",");writeHexE(a[0],a[1],s[2][i][2]);break;}}}};var hex=[];var p=0;writeHexT(getBinStructure());return hex.join("\r\n");};var toXmlText=function(){if(!isUndefined(Buffer["xml"])){return Buffer["xml"].getText();}
if(!isUndefined(Buffer["bin"])){var b=Buffer["bin"];var readByte=function(){var r=b.getHex(p,1).toLowerCase().trimLeft("0");if(r==""){r="0";}
p+=1;return"0x"+r+" ";};var readInt16=function(){var r=b.getInt16(p,true);p+=2;return r.toString()+" ";};var readInt32=function(){var r=b.getInt32(p,true);p+=4;return r.toString()+" ";};var readDateTime=function(){var y=b.getInt32(p,true);p+=4;var M=b.getInt16(p,true);p+=2;var d=b.getInt16(p,true);p+=2;var H=b.getInt16(p,true);p+=2;var m=b.getInt16(p,true);p+=2;var s=b.getInt16(p,true);p+=2;return y.toString().padStart(4," ").replace(/ /g," ")+"-"+M.toString().padStart(2,"0")+"-"+d.toString().padStart(2,"0")+" "+H.toString().padStart(2,"0")+":"+m.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0");};var readText=function(n){var r=b.getText(p,n);p+=n;return r;};var readData=function(n){switch(n){case 1:return readByte();break;case 2:return readInt16();break;case 4:return readInt32();break;case 14:return readDateTime();break;case 20:case 22:case 32:case 48:case 64:case 128:case 200:case 256:case 300:case 512:case 1024:return readText(n);break;default:p+=n;return"";}};var writeData=function(l,f,c){xml.push(" ".repeat(4*l)+"<"+f+">"+c+"</"+f+">");};var writeDataA=function(l,f,n){writeData(l,f,readData(n));};var writeDataE=function(l,f,t,n){for(var i=0;i<n;i++){switch(f){case"TResHeadAll":xml.push(" ".repeat(4*l)+"<"+f+" version=&quot;5&quot;>");xml.push(" ".repeat(4*(l+1))+"<resHead type=&quot;TResHead&quot;>");xml.push(" ".repeat(4*(l+2))+"<Magic>1397052237 </Magic>");writeDataA(l+2,"Version",4);writeDataA(l+2,"Unit",4);writeDataA(l+2,"Count",4);writeDataA(l+2,"MetalibHash",32);writeDataA(l+2,"ResVersion",2);writeDataA(l+2,"CreateTime",14);writeDataA(l+2,"ResEncording",32);writeDataA(l+2,"ContentHash",32);p+=4;xml.push(" ".repeat(4*(l+1))+"</resHead>");xml.push(" ".repeat(4*(l+1))+"<resHeadExt type=&quot;TResHeadExt&quot;>");writeDataA(l+2,"DataOffset",4);xml.push(" ".repeat(4*(l+1))+"</resHeadExt>");xml.push(" ".repeat(4*l)+"</"+f+">");break;case"m_astReward":switch(t){case"ActiveReward":var c1=readData(1);var c2=readData(4);var c3=readData(4);if(!((c1=="0x0 ")&&(c2=="0 ")&&(c3=="0 "))){xml.push(" ".repeat(4*l)+"<"+f+" type=&quot;"+t+"&quot;>");writeData(l+1,"m_ucRewardType",c1);writeData(l+1,"m_iRewardID",c2);writeData(l+1,"m_iRewardValue",c3);xml.push(" ".repeat(4*l)+"</"+f+">");}
break;case"MarketActReward":var c1=readData(1);var c2=readData(2);var c3=readData(4);if(!((c1=="0x0 ")&&(c2=="0 ")&&(c3=="0 "))){xml.push(" ".repeat(4*l)+"<"+f+" type=&quot;"+t+"&quot;>");writeData(l+1,"m_ucRewardType",c1);writeData(l+1,"m_ushRewardID",c2);writeData(l+1,"m_iRewardValue",c3);xml.push(" ".repeat(4*l)+"</"+f+">");}
break;}
break;case"m_astSongs":var c=readData(2);if(!(c=="0 ")){xml.push(" ".repeat(4*l)+"<"+f+" type=&quot;"+t+"&quot;>");writeData(l+1,"ID",c);xml.push(" ".repeat(4*l)+"</"+f+">");}
break;}}};var writeDataT=function(s){if(s.length==0){return;}
p=4;xml.push("<?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot; ?>");xml.push("<"+s[0]+">");writeDataE(0,"TResHeadAll","",1);while(p<b.length){xml.push("<"+s[1]+" version=&quot;1&quot;>");for(var i=0;i<s[2].length;i++){switch(s[2][i][0]){case 0:writeDataA(1,s[2][i][1],s[2][i][2]);break;case 1:var a=s[2][i][1].split(",");writeDataE(1,a[0],a[1],s[2][i][2]);break;}}
xml.push("</"+s[1]+">");}
xml.push("</"+s[0]+">");};var xml=[];var p=0;writeDataT(getBinStructure());return xml.join("\r\n").fromHtml();}};var toHtmlText=function(){Text["xml"]=Text["xml"]||toXmlText();var b=Text["xml"].replace(/\r\n/g,"");var readData=function(f1,f2){var r;var s1=b.indexOf(f1,p);if(s1==-1){p=b.length;return"";}
else{s1+=f1.length;}
var s2=b.indexOf(f2,s1);if(s2==-1){p=b.length;return"";}
p=s2+f2.length;return b.slice(s1,s2);};var writeDataT=function(s){if(s.length==0){return;}
html.push("<html><meta charset ="+'"UTF-8"'+"/><head><title>"+fileInfo.nameCore+"</title></head><body><table border="+'"1"'+"><caption>"+fileInfo.nameCore+"</caption>");var e=false;for(var i=0;i<s[2].length;i++){if(s[2][i][0]==1){e=true;break;}}
html.push("<tr>");for(var i=0;i<s[2].length;i++){switch(s[2][i][0]){case 0:html.push((e?"<th rowspan="+'"2"'+">":"<th>")+s[2][i][1]+"</th>");break;case 1:var a=s[2][i][1].split(",");switch(a[0]){case"m_astReward":switch(a[1]){case"ActiveReward":html.push(((e?"<th colspan="+'"3"'+">":"<th>")+a[0]+"</th>").repeat(s[2][i][2]));break;case"MarketActReward":html.push(((e?"<th colspan="+'"3"'+">":"<th>")+a[0]+"</th>").repeat(s[2][i][2]));break;}
break;case"m_astSongs":html.push(((e?"<th colspan="+'"1"'+">":"<th>")+a[0]+"</th>").repeat(s[2][i][2]));break;}
break;}}
html.push("</tr>");html.push("<tr>");for(var i=0;i<s[2].length;i++){switch(s[2][i][0]){case 1:var a=s[2][i][1].split(",");switch(a[0]){case"m_astReward":switch(a[1]){case"ActiveReward":html.push("<th>m_ucRewardType</th><th>m_iRewardID</th><th>m_iRewardValue</th>".repeat(s[2][i][2]));break;case"MarketActReward":html.push("<th>m_ucRewardType</th><th>m_ushRewardID</th><th>m_iRewardValue</th>".repeat(s[2][i][2]));break;}
break;case"m_astSongs":html.push("<th>ID</th>".repeat(s[2][i][2]));break;}
break;}}
html.push("</tr>");b=readData("<"+s[0]+">","</"+s[0]+">");p=0;var l=[];while(p<b.length){l.push(readData("<"+s[1]+" version="+'"'+"1"+'"'+">","</"+s[1]+">"))}
for(var i=0;i<l.length;i++){b=l[i];p=0;html.push("<tr>");for(var j=0;j<s[2].length;j++){switch(s[2][j][0]){case 0:html.push("<td>"+readData("<"+s[2][j][1]+">","</"+s[2][j][1]+">")+"</td>");break;case 1:var e=[];for(var k=0;k<s[2][j][2];k++){e.push(readData("<"+a[0]+" type="+'"'+a[1]+'"'+">","</"+a[0]+">"));}
for(var k=0;k<s[2][j][2];k++){b=e[k];p=0;var a=s[2][j][1].split(",");switch(a[0]){case"m_astReward":switch(a[1]){case"ActiveReward":html.push("<td>"+readData("<m_ucRewardType>","</m_ucRewardType>")+"</td>");html.push("<td>"+readData("<m_iRewardID>","</m_iRewardID>")+"</td>");html.push("<td>"+readData("<m_iRewardValue>","</m_iRewardValue>")+"</td>");break;case"MarketActReward":html.push("<td>"+readData("<m_ucRewardType>","</m_ucRewardType>")+"</td>");html.push("<td>"+readData("<m_ushRewardID>","</m_ushRewardID>")+"</td>");html.push("<td>"+readData("<m_iRewardValue>","</m_iRewardValue>")+"</td>");break;}
break;case"m_astSongs":html.push("<td>"+readData("<ID>","</ID>")+"</td>");break;}}
break;}}
html.push("</tr>");}
html.push("</table></body></html>");};var html=[];var p=0;writeDataT(getBinStructure());return html.join("");};var toListText=function(){var getXml=function(){Text["xml"]=Text["xml"]||toXmlText();return Text["xml"];};var readXml=function(t,t1,t2){var f1="<"+t;var f2="</"+t+">";var l1=x.indexOf(f1,p);if(l1==-1){p=x.length;return"";}
else{l1+=f1.length;}
var l2=x.indexOf(f2,l1);if(l2==-1){p=x.length;return"";}
p=l2+f2.length;var d=x.slice(l1,l2);var r=[];r.push(d.extract("<"+t1+">","</"+t1+">"));for(var i=0;i<t2.length;i++){r.push(d.extract("<"+t2[i]+">","</"+t2[i]+">"));}
return r;};var getJson=function(){Text["json"]=Text["json"]||toJsonText();return Text["json"];};var r=[];var type=(function(){var name=fileInfo.nameCore;switch(true){case name.startsWith("mrock_song_client"):case name.startsWith("mrock_song_client_android"):return 0;break;case name.startsWith("mrock_papasong_client"):return 1;break;case name.startsWith("songlistrm_info_c"):return 2;break;}
return-1;})();if(type==-1){return;}
var p=0;switch(type){case 0:var T=["m_ush4KeyEasy","m_ush4KeyNormal","m_ush4KeyHard","m_ush5KeyEasy","m_ush5KeyNormal","m_ush5KeyHard","m_ush6KeyEasy","m_ush6KeyNormal","m_ush6KeyHard"];var S=["_4k_ez","_4k_nm","_4k_hd","_5k_ez","_5k_nm","_5k_hd","_6k_ez","_6k_nm","_6k_hd"];var E=".imd";var x=getXml();while(true){var a=readXml("SongConfig_Client","m_szPath",T)||[];if(a.length==0){break;}
for(var i=0;i<T.length;i++){var v=parseInt(a[i+1]);if((!isNaN(v))&&(v>0)&&(v<=10)){r.push(a[0]+"/"+a[0]+S[i]+E);}}
r.push(a[0]+"/"+a[0]+".mp3");r.push(a[0]+"/"+a[0]+"_title_ipad.jpg");r.push(a[0]+"/"+a[0]+".jpg");}
break;case 1:var T=["m_cDifficulty"];var S=["_Papa_Easy","_Papa_Normal","_Papa_Hard"];var E=".mde";var x=getXml();while(true){var a=readXml("PapaSongConfig_Client","m_szPath",T)||[];if(a.length==0){break;}
for(var i=0;i<T.length;i++){var v=parseInt(a[i+1]);if((!isNaN(v))&&(v>0)&&(v-1<S.length)){r.push(a[0]+"/"+a[0]+S[v-1]+E);}}
r.push(a[0]+"/"+a[0]+".mp3");r.push(a[0]+"/"+a[0]+"_title_ipad.jpg");r.push(a[0]+"/"+a[0]+".jpg");r.push(a[0]+"/"+a[0]+"_title_140_90.jpg");r.push(a[0]+"/"+a[0]+"_ipad.jpg");}
break;case 2:var j=JSON.parse(getJson());for(var i=0;i<j.length;i++){if((j[i]["level1"])&&(j[i]["keyNum1"])&&(j[i]["fever1"])){r.push(j[i]["fname"]+"/"+j[i]["fname"]+"_4k_ez.imd.json");}
if((j[i]["level2"])&&(j[i]["keyNum2"])&&(j[i]["fever2"])){r.push(j[i]["fname"]+"/"+j[i]["fname"]+"_4k_nm.imd.json");}
if((j[i]["level3"])&&(j[i]["keyNum3"])&&(j[i]["fever3"])){r.push(j[i]["fname"]+"/"+j[i]["fname"]+"_4k_hd.imd.json");}
r.push(j[i]["fname"]+"/"+j[i]["fname"]+".mp3");r.push(j[i]["fname"]+"/"+j[i]["cover_id"]+".png");}
break;}
return r.unrepeat().join("\r\n");};var toBatText=function(){var r=[];var typeStrings=["【「节奏大师」　经典模式】","【「节奏大师」　星动模式】","【「节奏大师微信小程序」】"];var nameStrings=["★res_imd","★res_mde","★res_imd_json"];var chartExtStrings=["imd","mde","json"];var audioExtStrings=["mp3","mp3","mp3"];var imageExtStrings=["jpg","jpg","png"];var chartUrlPrefix=["http://game.ds.qq.com/Com_SongRes/song/","http://game.ds.qq.com/Com_SongRes/song/","https://rm-cdn.rmwxgame.com/v2.0/song/"];var audioUrlPrefix=["http://game.ds.qq.com/Com_SongRes/song/","http://game.ds.qq.com/Com_SongRes/song/","https://rm-cdn.rmwxgame.com/v2.0/song/"];var imageUrlPrefix=["http://game.ds.qq.com/Com_SongRes/song/","http://game.ds.qq.com/Com_SongRes/song/","https://rm-cdn.rmwxgame.com/v2.0/songimg/"];var type=(function(){var name=fileInfo.nameCore;switch(true){case name.startsWith("mrock_song_client"):case name.startsWith("mrock_song_client_android"):return 0;break;case name.startsWith("mrock_papasong_client"):return 1;break;case name.startsWith("songlistrm_info_c"):return 2;break;}
return-1;})();if(type==-1){return;}
r.push("@echo off & setlocal enabledelayedexpansion");r.push("@echo;");r.push("@echo ☆☆☆☆☆　"+typeStrings[type]+"增量资源批量下载 by rmstZ.html　☆☆☆☆☆");r.push("@echo;");r.push("@echo 　——————————————————————————————————————");r.push("@echo;");r.push("@echo 　　【步骤说明】");r.push("@echo 　　①链接分析，通过增量分析"+nameStrings[type]+".list生成"+nameStrings[type]+"_new.txt；");r.push("@echo 　　②批量下载，将"+nameStrings[type]+"_new.txt内全部链接复制到IDM等下载工具并下载到当前文件夹；");r.push("@echo 　　③文件移动，批量下载到当前文件夹后执行文件移动，移动结束后步骤完成。");r.push("@echo;");r.push("@echo 　——————————————————————————————————————");r.push("@echo;");r.push(":choose");r.push("set /p t=　　【？】请选择资源类型（0、谱面；1、音频；2、图像）：");r.push("if %t% lss 0 goto choose");r.push("if %t% gtr 2 goto choose");r.push("@echo;");r.push("if %t%==0 @echo 　　【！】已选择资源类型：谱面，开始执行……");r.push("if %t%==1 @echo 　　【！】已选择资源类型：音频，开始执行……");r.push("if %t%==2 @echo 　　【！】已选择资源类型：图像，开始执行……");r.push("@echo;");r.push("@echo 　——————————————————————————————————————");r.push("@echo;");r.push("@echo 　　【①链接分析】");r.push("@echo;");r.push("@echo 　　┏正在分析（根据设备性能可能需要较长时间，请耐心等待）");r.push("@echo 　　┃　　"+nameStrings[type]+".list");r.push("if exist "+nameStrings[type]+"_new.txt del /f "+nameStrings[type]+"_new.txt");r.push("set c=0 & set e=0 & set n=0");r.push("if %t%==0 if exist "+nameStrings[type]+".list ((for /f "+'"'+"delims=. tokens=1,2"+(type!=2?"":",3")+'"'+" %%i in ("+nameStrings[type]+".list) do (if "+'"'+"%%"+(type!=2?"j":"k")+'"'+"=="+'"'+chartExtStrings[type]+'"'+" (if not defined %%i.%%j"+(type!=2?"":".%%k")+" (set %%i.%%j"+(type!=2?"":".%%k")+"=A & set /a c+=1 & for /f "+'"'+"delims=/ tokens=1,*"+'"'+" %%m in ("+'"'+"%%i.%%j"+(type!=2?"":".%%k")+'"'+") do (if exist song\\%%m\\%%n (set /a e+=1) else (set /a n+=1 & set "+'"'+"f!n!=%%n"+'"'+" & set "+'"'+"d!n!=song\\%%m\\"+'"'+" & echo "+chartUrlPrefix[type]+"%%m/%%n))))))>>"+nameStrings[type]+"_new.txt)");r.push("if %t%==1 if exist "+nameStrings[type]+".list ((for /f "+'"'+"delims=. tokens=1,2"+'"'+" %%i in ("+nameStrings[type]+".list) do (if "+'"'+"%%j"+'"'+"=="+'"'+audioExtStrings[type]+'"'+" (if not defined %%i.%%j (set %%i.%%j=A & set /a c+=1 & for /f "+'"'+"delims=/ tokens=1,*"+'"'+" %%m in ("+'"'+"%%i.%%j"+'"'+") do (if exist song\\%%m\\%%n (set /a e+=1) else (set /a n+=1 & set "+'"'+"f!n!=%%n"+'"'+" & set "+'"'+"d!n!=song\\%%m\\"+'"'+" & echo "+audioUrlPrefix[type]+"%%m/%%n))))))>>"+nameStrings[type]+"_new.txt)");r.push("if %t%==2 if exist "+nameStrings[type]+".list ((for /f "+'"'+"delims=. tokens=1,2"+'"'+" %%i in ("+nameStrings[type]+".list) do (if "+'"'+"%%j"+'"'+"=="+'"'+imageExtStrings[type]+'"'+" (if not defined %%i.%%j (set %%i.%%j=A & set /a c+=1 & for /f "+'"'+"delims=/ tokens=1,*"+'"'+" %%m in ("+'"'+"%%i.%%j"+'"'+") do (if exist song\\%%m\\%%n (set /a e+=1) else (set /a n+=1 & set "+'"'+"f!n!=%%n"+'"'+" & set "+'"'+"d!n!=song\\%%m\\"+'"'+" & echo "+imageUrlPrefix[type]+(type!=2?"%%m/":"")+"%%n))))))>>"+nameStrings[type]+"_new.txt)");r.push("@echo 　　┣分析结果");r.push("@echo 　　┃　　资源总数：%c%");r.push("@echo 　　┃　　已存在：%e%");r.push("@echo 　　┃　　需下载：%n%");r.push("@echo 　　┗分析结束，"+nameStrings[type]+"_new.txt生成完毕，进入下一步骤……");r.push("@echo;");r.push("@echo 　——————————————————————————————————————");r.push("@echo;");r.push("@echo 　　【②批量下载】");r.push("@echo;");r.push("@echo 　☆┏用户操作");r.push("@echo 　☆┣将"+nameStrings[type]+"_new.txt内全部链接通过IDM等下载工具下载到当前文件夹");r.push("@echo 　☆┃");r.push("@echo 　☆┗步骤完成后按任意键执行文件校对……");r.push("pause>nul");r.push("@echo;");r.push("@echo 　　┏正在校对（可能需要几秒的时间，请耐心等待）");r.push("if exist "+nameStrings[type]+"_new.txt del /f "+nameStrings[type]+"_new.txt");r.push("set r=0");r.push("if %t%==0 (");r.push("@echo 　　┃　　.txt -^> ."+chartExtStrings[type]);r.push("if exist "+nameStrings[type]+".list for /f "+'"'+"delims=. tokens=1,2"+'"'+" %%i in ("+nameStrings[type]+".list) do (if not "+'"'+"%%j"+'"'+"=="+'"'+"mp3"+'"'+" (if not exist %%i."+chartExtStrings[type]+" (if exist %%i.txt (ren %%i.txt %%i."+chartExtStrings[type]+" & set /a r+=1))))");r.push(")");r.push("@echo 　　┣校对结果");r.push("if %t%==0 (");r.push("@echo 　　┃　　需更正：%r%");r.push("@echo 　　┃　　已更正：%r%");r.push("@echo 　　┗校对结束，自动进入下一步骤……");r.push(")");r.push("if not %t%==0 (");r.push("@echo 　　┗无需校对，自动进入下一步骤……");r.push(")");r.push("@echo;");r.push("@echo 　——————————————————————————————————————");r.push("@echo;");r.push("@echo 　　【③文件移动】");r.push("@echo;");r.push("@echo 　☆┏用户操作");r.push("@echo 　☆┣准备就绪，即将把文件移动到各自的文件夹");r.push("@echo 　☆┃");r.push("@echo 　☆┗按任意键开始执行文件移动……");r.push("pause>nul");r.push("@echo;");r.push("@echo 　　┏正在移动（根据设备性能可能需要较长时间，请耐心等待）");r.push("if %t%==0 (");r.push("@echo 　　┃　　*."+chartExtStrings[type]);r.push(")");r.push("if %t%==1 (");r.push("@echo 　　┃　　*."+audioExtStrings[type]);r.push(")");r.push("if %t%==2 (");r.push("@echo 　　┃　　*."+imageExtStrings[type]);r.push(")");r.push("set u=0 & set m=0");r.push("for /l %%i in (1,1,%n%) do (if not exist !f%%i! (set /a u+=1) else ((if not exist !d%%i! md !d%%i!) & move /y !f%%i! !d%%i! & set /a m+=1))");r.push("@echo 　　┣移动结果");r.push("@echo 　　┃　　执行总数：%n%");r.push("@echo 　　┃　　不存在：%u%");r.push("@echo 　　┃　　已移动：%m%");r.push("@echo 　　┗移动结束，文件位于song文件夹内……");r.push("@echo;");r.push("@echo 　☆┏用户操作");r.push("@echo 　☆┣全部步骤完成，谢谢使用！");r.push("@echo 　☆┃");r.push("@echo 　☆┗按任意键退出本程序。");r.push("@echo;");r.push("@echo 　——————————————————————————————————————");r.push("@echo;");r.push("@echo ☆☆☆☆☆　"+typeStrings[type]+"增量资源批量下载 by rmstZ.html　☆☆☆☆☆");r.push("@echo;");r.push("pause>nul");return r.join("\r\n");};var toJsonText=function(){var json=[];var readInt=function(n){var r=buffer.getInt(n,p,true);p+=n;return r;};var readFloat=function(n){var r=buffer.getFloat(n,p,true);p+=n;return r;};var readString=function(){var n=readInt(2);var r=buffer.getText(p,n);p+=n;return r;};var readContentAwards=function(){var v=[];var count=readInt(4);for(var i=0;i<count;i++){v.push({"itemID":readInt(4),"quantity":readInt(4),"param":readInt(4)});}
return v;};var readInstrumentListContents=function(){var v=[];var count=readInt(4);for(var i=0;i<count;i++){v.push({"name":readString(),"icon_id":readInt(4),"unlock_level":readInt(4),"description":readString(),"skillicon":readString(),"default":readInt(4),"skillType":readFloat(4),"skillParam1":readFloat(4),"skillParam2":readInt(4),"skillParam3":readInt(4)});}
return v;};var readStoryContents=function(){var v=[];var count=readInt(4);for(var i=0;i<count;i++){v.push({"fragID":readInt(4),"effectname":readString(),"standpos":readInt(4),"express":readString(),"expressloop":readInt(4),"roleName":readString(),"roleID":readInt(4),"showname":readString(),"otherexpID":readInt(4),"content":readString()});}
return v;};var readStrings=function(){var v=[];var count=readInt(4);for(var i=0;i<count;i++){v.push(readString());}
return v;};var readItem;var p=0;var name=fileInfo.nameCore;switch(true){case name.startsWith("activityconvertitem_info_c"):readItem=function(){return{"id":readInt(4),"activityID":readInt(4),"needItemID":readInt(4),"needCount":readInt(4),"limit":readInt(4),"focus":readInt(4),"contentAwards":readContentAwards()};};break;case name.startsWith("ad_info_c"):readItem=function(){return{"typeID":readInt(4),"dayCount":readInt(4)};};break;case name.startsWith("assistantitem_info_c"):readItem=function(){return{"id":readInt(4),"desc":readString(),"currencyType":readInt(4),"price":readInt(4)};};break;case name.startsWith("dailychallengeaward_info_c"):readItem=function(){return{"index":readInt(4),"randBegin":readInt(4),"randEnd":readInt(4),"is_percent":readInt(1)!=0,"awardItemID1":readInt(4),"awardItemQuantity1":readInt(4),"awardItemID2":readInt(4),"awardItemQuantity2":readInt(4),"awardItemID3":readInt(4),"awardItemQuantity3":readInt(4)};};break;case name.startsWith("framepic_info_c"):readItem=function(){return{"id":readInt(4),"condition":readString(),"namex":readString(),"isOpen":readInt(4)};};break;case name.startsWith("freediamond_info_c"):readItem=function(){return{"id":readInt(4),"coolDown":readInt(4),"maxCountWX":readInt(4),"maxCountQQ":readInt(4),"contentAwards":readContentAwards()};};break;case name.startsWith("gameskin_info_c"):readItem=function(){return{"id":readInt(4),"namex":readString(),"isOpen":readInt(4),"gear":readString(),"combo":readString(),"judgement":readString(),"note":readString(),"notefx":readString(),"custom":readString()};};break;case name.startsWith("instrumentlist_info_c"):readItem=function(){return{"id":readInt(4),"name":readString(),"max_level":readInt(4),"default_skin_id":readInt(4),"attrs_desc1":readString(),"attrs_value1":readFloat(4),"attrs_desc2":readString(),"attrs_value2":readFloat(4),"attrs_desc3":readString(),"attrs_value3":readFloat(4),"source":readString(),"description":readString(),"say_hello":readString(),"currency_type":readInt(4),"currency_item_id":readInt(4),"price":readInt(4),"isOpen":readInt(4),"maxLevelUnLockSongID":readInt(4),"contents":readInstrumentListContents()};};break;case name.startsWith("instrumentmission_info_c"):readItem=function(){return{"id":readInt(4),"missionID":readInt(4),"missionIndex":readInt(4),"missionLv":readInt(4),"missionSongId":readInt(4),"songDiff":readInt(4),"missionType":readInt(4),"beforeDesc":readInt(4),"afterDesc":readInt(4),"passType":readInt(4),"reward":readInt(4),"contentAwards":readContentAwards()};};break;case name.startsWith("instrumentskinlist_info_c"):readItem=function(){return{"id":readInt(4),"instrument_id":readInt(4),"namex":readString(),"unlockLevel":readInt(4),"position1":readInt(4),"position2":readInt(4),"defaultSkin":readInt(4),"source":readString(),"currency_type":readInt(4),"price":readInt(4)};};break;case name.startsWith("instrumentstar_info_c"):readItem=function(){return{"rank":readInt(4),"star":readInt(4)};};break;case name.startsWith("itemlist_info_c"):readItem=function(){return{"id":readInt(4),"namex":readString(),"typex":readInt(4),"is_assistant":readInt(1)!=0};};break;case name.startsWith("localization_info_c"):readItem=function(){return{"chinese":readString(),"english":readString(),"zh_tw":readString(),"vi":readString(),"thai":readString()};};break;case name.startsWith("playerexplist_info_c"):readItem=function(){return{"id":readInt(4),"exp":readInt(4)};};break;case name.startsWith("questlist_info_c"):readItem=function(){return{"id":readInt(4),"description":readString(),"is_redirect":readInt(4),"scene":readInt(4),"vitality":readInt(4),"scene_param":readInt(4),"contentAwards":readContentAwards()};};break;case name.startsWith("rankingrm_info_c"):readItem=function(){return{"id":readInt(4),"name":readString()};};break;case name.startsWith("settingtype_info_c"):readItem=function(){return{"tyeName":readString(),"wxtype":readInt(4),"qqtype":readInt(4)};};break;case name.startsWith("share_info_c"):readItem=function(){return{"typeID":readInt(4),"dayCount":readInt(4)};};break;case name.startsWith("shopandroid_info_c"):readItem=function(){return{"id":readInt(4),"name":readString(),"price":readInt(4),"discount":readInt(4),"currency_type":readInt(4)};};break;case name.startsWith("songfilterrm_info_c"):readItem=function(){return{"id":readInt(4),"name":readString(),"filter":readString()};};break;case name.startsWith("songlistrm_info_c"):readItem=function(){return{"id":readInt(4),"name":readString(),"fname":readString(),"artist":readString(),"time":readInt(4),"region":readInt(4),"genre":readInt(4),"tempo":readFloat(4),"isguide":readInt(4),"singleprice":readInt(4),"level1":readInt(4),"level2":readInt(4),"level3":readInt(4),"keyNum1":readInt(4),"keyNum2":readInt(4),"keyNum3":readInt(4),"fever1":readInt(4),"fever2":readInt(4),"fever3":readInt(4),"source":readInt(4),"song_pack_id":readInt(4),"unlock_stage":readInt(4),"hide_in_free":readInt(4),"trycurrency":readInt(4),"tryspcurrency":readInt(4),"trycurrencyNum":readInt(4),"buytype":readInt(4),"buyspcur":readInt(4),"buyprice":readInt(4),"is_top":readInt(4),"cover_id":readString(),"max_ticks":readInt(4),"period":readString(),"canBuy":readString()};};break;case name.startsWith("soundeffect_info_c"):readItem=function(){return{"strSoundID":readString(),"xh":readStrings(),"ad":readStrings(),"bd":readStrings(),"cy":readStrings(),"sh":readStrings(),"xy":readStrings()};};break;case name.startsWith("stagepassdesc_info_c"):readItem=function(){return{"id":readInt(4),"typeId":readInt(4),"desc":readString()};};break;case name.startsWith("stagerm_info_c"):readItem=function(){return{"id":readInt(4),"song_id":readInt(4),"difficult":readInt(4),"passID":readInt(4),"conDesc":readString(),"award":readInt(4),"contentAwards":readContentAwards()};};break;case name.startsWith("stageskip_info_c"):readItem=function(){return{"start":readInt(4),"end":readInt(4),"type":readInt(4),"count":readInt(4)};};break;case name.startsWith("story_info_c"):readItem=function(){return{"id":readInt(4),"skinID":readInt(4),"musicname":readString(),"contents":readStoryContents()};};break;case name.startsWith("strings_info_c"):readItem=function(){return{"key":readString(),"Value":readString()};};break;case name.startsWith("systemtiprm_info_c"):readItem=function(){return{"key":readString(),"title":readString(),"value":readString()};};break;}
if(readItem){var count=readInt(4);for(var i=0;i<count;i++){json.push(readItem());}}
return JSON.stringify(json,null,2).replace(/\n/g,"\r\n");};this.ToBuffer=function(ext){switch(ext){case"bin":Buffer[ext]=Buffer[ext]||toBinBuffer();return Buffer[ext];break;case"xml":Buffer[ext]=Buffer[ext]||toXmlBuffer();return Buffer[ext];break;case"list":Buffer[ext]=Buffer[ext]||toListBuffer();return Buffer[ext];break;case"bat":Buffer[ext]=Buffer[ext]||toBatBuffer();return Buffer[ext];break;case"json":Buffer[ext]=Buffer[ext]||toJsonBuffer();return Buffer[ext];break;}};this.ToText=function(ext){switch(ext){case"bin":Text[ext]=Text[ext]||toBinText();return Text[ext];break;case"xml":Text[ext]=Text[ext]||toXmlText();return Text[ext];break;case"html":Text[ext]=Text[ext]||toHtmlText();return Text[ext];break;case"list":Text[ext]=Text[ext]||toListText();return Text[ext];break;case"bat":Text[ext]=Text[ext]||toBatText();return Text[ext];break;case"json":Text[ext]=Text[ext]||toJsonText();return Text[ext];break;}};Object.defineProperty(this,"IsValid",{"get":function(){return isValid;}});this.IsExist=function(ext){switch(ext){case"list":case"bat":return(!isUndefined(Text[ext])||!isUndefined(Buffer[ext]));break;}};(function(){if(buffer.length==0){return;}
reset();switch(ext){case"bin":fromBinBuffer(buffer);break;case"xml":fromXmlBuffer(buffer);break;}})();}</script><script type="text/javascript">"use strict";var Info;var Data={};var Config={"ShowResult":true};var Color={"fontColor":"black","titleSwitch":"gray","listIndex":"blue","trackNormal":"green","trackEmpty":"red"};var ChangeMode={};var ChangeApply={};var Indexes=[0];var MstOptions={"AutoApply":CheckValue(getChecked("inputAutoApply"),true),"LockKey":CheckValue(getChecked("inputLockKey"),false),"TransKey":[],"TrackCheck":[],"DrawBackground":CheckValue(getChecked("inputDrawBackground"),true),"DrawTrack":CheckValue(getChecked("inputDrawTrack"),true),"DrawFrame":CheckValue(getChecked("inputDrawFrame"),true),"DrawStartEndLine":CheckValue(getChecked("inputDrawStartEndLine"),true),"DrawBeatline":CheckValue(getChecked("inputDrawBeatline"),true),"DrawNoteline":CheckValue(getChecked("inputDrawNoteline"),true),"DrawBeatData":CheckValue(getChecked("inputDrawBeatData"),true),"DrawNoteDataCombo":CheckValue(getChecked("inputDrawNoteDataCombo"),true),"DrawEffectDataBGM":CheckValue(getChecked("inputDrawEffectDataBGM"),true),"DrawEffectDataSE":CheckValue(getChecked("inputDrawEffectDataSE"),true),"DrawStatusData":CheckValue(getChecked("inputDrawStatusData"),true),"DrawTransformData":CheckValue(getChecked("inputDrawTransformData"),true),"DrawTime":CheckValue(getChecked("inputDrawTime"),true),"DrawBeat":CheckValue(getChecked("inputDrawBeat"),false),"DrawNote":CheckValue(getChecked("inputDrawNote"),false),"DrawTimeDomain":CheckValue(getChecked("inputDrawTimeDomain"),true),"DrawFrequencyDomain":CheckValue(getChecked("inputDrawFrequencyDomain"),false),"DrawScaleX":CheckValue(parseInt(getSelected("selectDrawScaleX")),1),"DrawScaleY":CheckValue(parseInt(getSelected("selectDrawScaleY")),0)};var SelectCount=0;function HideOperate(){document.getElementById("divOperateMst").style.display="none";document.getElementById("divOperateImg").style.display="none";document.getElementById("divOperatePkg").style.display="none";document.getElementById("divOperateBin").style.display="none";document.getElementById("divSave").style.display="none";document.getElementById("divResult").innerHTML="";}
function HideGroup(c,g){switch(c){case"mst":document.getElementById("divGroupMst").style.display=(Data.GetValue("fileLength")?"block":"none");document.getElementById("divGroupMstData").style.display=(g=="data"?"block":"none");document.getElementById("divGroupMstFile").style.display=(g=="file"?"block":"none");break;}}
function HideSelect(m,t){switch(m){case"bin":var id="selectBinMode";var d={"rm":"xml","rmwx":"json"};var e={"rm":["bin","xml","html"],"rmwx":["json"]};var f=["list","bat"];var n=-1;var c=0;var s=document.getElementById(id);if(s&&s.options){for(var i=0;i<s.options.length;i++){s.options[i].style.display=(e[t].indexOf(s.options[i].value)!=-1?"block":"none");if((s.options[i].value==d[t])&&(s.options[i].style.display!="none")){n=i;}
for(var j=0;j<f.length;j++){if(s.options[i].value==f[j]){s.options[i].style.display=(Data.IsExist(f[j])?"block":"none");}}
if(s.options[i].style.display!="none"){c+=1;}}
if(s.options[s.selectedIndex].style.display=="none"){if(n!=-1){s.selectedIndex=n;}
else if(c>0){s.selectedIndex=0;}
else{s.selectedIndex=-1;}}}
break;}}
function HideOption(c,m){switch(c){case"mst":document.getElementById("divSelectMstdtx").style.display=(m=="dtx"?"block":"none");document.getElementById("divSelectMsttja").style.display=(m=="tja"?"block":"none");document.getElementById("divSelectMstosu").style.display=(m=="osu"?"block":"none");document.getElementById("divSelectMstxml").style.display=(m=="xml"?"block":"none");document.getElementById("divSelectMstxmlqqx5").style.display=(getSelected("selectMstxmlMode")=="qqx5"?"block":"none");document.getElementById("divSelectMstmc").style.display=(m=="mc"?"block":"none");document.getElementById("divSelectMsttxt").style.display=(m=="txt"?"block":"none");document.getElementById("divSelectMsttxtcytus").style.display=(getSelected("selectMsttxtMode")=="cytus"?"block":"none");document.getElementById("divSelectMsttxtmusync").style.display=(getSelected("selectMsttxtMode")=="musync"?"block":"none");document.getElementById("divSelectMstjson").style.display=(m=="json"?"block":"none");document.getElementById("divSelectMstdraw").style.display=((m=="png")||(m=="html")?"block":"none");document.getElementById("detailsOptionMstDraw").style.display=((m=="png")||(m=="html")?"block":"none");document.getElementById("divOptionMstDrawAudio").style.display=((m=="png")||(m=="html")?"block":"none");document.getElementById("divOptionMstDrawScale").style.display=(m=="html"?"block":"none");break;case"pkg":document.getElementById("divListPkg").style.display=(m?"none":"block");break;}}
function SetIndexList(list){var newDetails=function(c){var n=(arguments.length>1?arguments[1]:"");var d=document.createElement("details");if(n){d.title=n;}
d.style.textAlign="center";for(var i=0;i<c.length;i++){d.appendChild(c[i]);}
return d;};var newSummary=function(c){var s=document.createElement("summary");for(var i=0;i<c.length;i++){s.appendChild(c[i]);}
return s;};var newDiv=function(c){var n=(arguments.length>1?arguments[1]:"");var i=(arguments.length>2?arguments[2]:-1);var d=document.createElement("div");if(n){d.id="div"+n;}
if(d.id&&(i>=0)){d.id+="_"+i;}
for(var i=0;i<c.length;i++){d.appendChild(c[i]);}
return d;};var newSelect=function(n,i,m){var e=(arguments.length>3?arguments[3]:null);var v=(arguments.length>4?arguments[4]:0);var s=document.createElement("select");s.title=n;s.name=n;s.index=i;MstOptions[n]=MstOptions[n]||[];for(var j=0;j<m.length;j++){var o=document.createElement("option");o.value=m[j][0];o.innerHTML=m[j][1];if(!isUndefined(MstOptions[n][i])){if(m[j][0]==MstOptions[n][i]){o.selected=true;}}
else{if(m[j][0]==v){o.selected=true;MstOptions[n][i]=v;}}
s.appendChild(o);}
if(e){s.onchange=e;}
return s;};var newA=function(n,i,t){var e=(arguments.length>3?arguments[3]:null);var a=document.createElement("a");a.title=n;a.name=n;a.index=i;a.innerText=t;a.href="javascript:void(0)";a.style.marginLeft="6px";a.style.marginRight="6px";if(e){a.onclick=e;}
return a;};var newCheckBox=function(n,i,t){var e=(arguments.length>3?arguments[3]:null);var b=(arguments.length>4?arguments[4]:false);var c=document.createElement("input");c.type="checkbox";c.name=n;c.index=i;MstOptions[n]=MstOptions[n]||[];if(MstOptions[n][i]){c.checked=MstOptions[n][i];}
else{c.checked=b;MstOptions[n][i]=b;}
if(e){c.onchange=e;}
var l=document.createElement("label");l.title=n;l.appendChild(c);l.appendChild(document.createTextNode(t));return l;};document.getElementById("divSelectMstIndex").innerHTML="";var indexes=[];var t=document.createElement("table");t.style.margin="auto";t.style.borderSpacing="0px";t.title="IndexList";var tb=t.createTBody();for(var i=0;i<list.length;i++){var r=tb.insertRow();var cl=r.insertCell();cl.align="right";cl.vAlign="top";cl.style.color=Color["listIndex"];cl.innerHTML=i;var details=(function(){var checkbox=(function(){var c=document.createElement("input");c.type="checkbox";c.checked="checked";c.index=i;c.onchange=IndexChanged;return c;})();var d=document.createElement("details");d.appendChild(newSummary([checkbox,document.createTextNode(list[i])]));d.appendChild(newDiv([newDetails([newSummary([document.createTextNode("转换")]),newDiv([newSelect("TransKey",i,[[1,"1K"],[2,"2K"],[3,"3K"],[4,"4K"],[5,"5K"],[6,"6K"],[7,"7K"],[8,"8K"],[9,"9K"],[10,"10K"],[11,"11K"],[12,"12K"],[13,"13K"],[14,"14K"],[15,"15K"],[16,"16K"],[17,"17K"],[18,"18K"]],OptionChanged,4)]),newDiv([newA("TrackInsert",i,"+",SetTrackInsert),newSelect("TrackIndex",i,[]),newA("TrackRemove",i,"-",SetTrackRemove)],"TrackInsert",i),newDiv([],"TrackCheck",i),newDiv([newSelect("CorrectTime",i,[[0,"0d"],[1,"1d"],[2,"2d"],[3,"3d"],[4,"4d"],[6,"6d"],[8,"8d"],[12,"12d"],[16,"16d"],[24,"24d"],[32,"32d"],[48,"48d"],[64,"64d"],[72,"72d"],[128,"128d"],[192,"192d"]],OptionChanged,0),newSelect("ChangeFlow",i,[[0.2,"1/5x"],[0.333,"1/3x"],[0.5,"1/2x"],[1,"1x"],[2,"2x"],[3,"3x"],[5,"5x"]],OptionChanged,1),newSelect("ChangeSpeed",i,[[0.2,"1/5x"],[0.333,"1/3x"],[0.5,"1/2x"],[1,"1x"],[2,"2x"],[3,"3x"],[5,"5x"]],OptionChanged,1)]),newDiv([newCheckBox("MirrorTrack",i,"镜面",OptionChanged),newCheckBox("RandomTrack",i,"乱轨",OptionChanged),newCheckBox("RandomNote",i,"乱音",OptionChanged)])],"Trans"),newDetails([newSummary([document.createTextNode("扩展")]),newDiv([newCheckBox("XAxisRemove",i,"横轴销除",OptionChanged),newCheckBox("YAxisRemove",i,"纵轴销除",OptionChanged),newCheckBox("ZAxisRemove",i,"竖轴销除",OptionChanged)]),newDiv([newCheckBox("XAxisExtend",i,"横轴扩展",OptionChanged),newCheckBox("YAxisExtend",i,"纵轴扩展",OptionChanged),newCheckBox("ZAxisExtend",i,"竖轴扩展",OptionChanged)]),newDiv([newCheckBox("InvisibleKeyRemove",i,"隐键销除",OptionChanged),newCheckBox("InvalidKeyRemove",i,"虚键销除",OptionChanged),newCheckBox("FakeKeyRemove",i,"伪键销除",OptionChanged)]),newDiv([newCheckBox("DamageKeyRemove",i,"雷键销除",OptionChanged),newCheckBox("FlowRemove",i,"流速销除",OptionChanged),newCheckBox("TransformRemove",i,"变换销除",OptionChanged)])],"Extend"),newDetails([newSummary([document.createTextNode("进阶")]),newDiv([newCheckBox("NoFlowBackward",i,"无时退",OptionChanged),newCheckBox("NoFlowStop",i,"无时停",OptionChanged)]),newDiv([newCheckBox("LinkSingle",i,"连单键",OptionChanged),newCheckBox("LinkLong",i,"连长键",OptionChanged),newCheckBox("LinkSlide",i,"连滑键",OptionChanged),newCheckBox("TransOblique",i,"转斜键",OptionChanged)]),newDiv([newCheckBox("NoOblique",i,"无斜键",OptionChanged),newCheckBox("NoSlide",i,"无滑键",OptionChanged),newCheckBox("NoLong",i,"无长键",OptionChanged),newCheckBox("NoSingle",i,"无单键",OptionChanged)])],"Advance"),newDetails([newSummary([document.createTextNode("修复")]),newDiv([newCheckBox("XTrackNoIntersect",i,"横轨无冲",OptionChanged),newCheckBox("YTrackNoIntersect",i,"纵轨无冲",OptionChanged),newCheckBox("ZTrackNoIntersect",i,"竖轨无冲",OptionChanged)]),newDiv([newCheckBox("XAxisNoCross",i,"横轴无叉",OptionChanged),newCheckBox("YAxisNoCross",i,"纵轴无叉",OptionChanged),newCheckBox("ZAxisNoCross",i,"竖轴无叉",OptionChanged)])],"Repair")]));return d;})();var cc=r.insertCell();cc.align="left";cc.appendChild(details);var cr=r.insertCell();cr.align="right";cr.vAlign="top";cr.style.color=Color["listIndex"];cr.innerHTML=i;indexes.push(i);}
document.getElementById("divSelectMstIndex").appendChild(t);SetTransKey();if(indexes.length){Indexes=indexes;}}
function SetTransKey(){var p=(arguments.length>0?arguments[0]:-1);document.getElementsByName("TransKey").forEach(function(a){var index=a.index;if((p==-1)||(index==p)){a.onchange=null;setSelected(a,MstOptions["TransKey"][index]);var i=0;var n=0;MstOptions["TrackCheck"][index]=MstOptions["TrackCheck"][index]||[];while(n<MstOptions["TransKey"][index]){MstOptions["TrackCheck"][index][i]=MstOptions["TrackCheck"][index][i]||{"track":n,"checked":true};if(!isUndefined(MstOptions["TrackCheck"][index][i]["track"])){n+=1;}
i+=1;}
a.onchange=OptionChanged;}});document.getElementsByName("TrackIndex").forEach(function(a){var i=a.index;if((p==-1)||(i==p)){var t=a.selectedIndex;a.innerHTML="";for(var j=0;j<MstOptions["TransKey"][i]+1;j++){var o=document.createElement("option");o.value=j.toString().padStart((MstOptions["TransKey"][i]+1).toString().length,"0");o.innerHTML="T"+j.toString().padStart((MstOptions["TransKey"][i]+1).toString().length,"0");a.appendChild(o);}
a.selectedIndex=t.limit(0,a.options.length-1);}});SetTrackCheck(p);}
function SetTrackCheck(){var p=(arguments.length>0?arguments[0]:-1);var length=document.getElementsByName("TransKey").length;for(var index=0;index<length;index++){if((p==-1)||(index==p)){MstOptions["TransKey"][index]=MstOptions["TransKey"][index]||0;var a=document.getElementById("divTrackCheck_"+index);if(a){a.innerHTML="";var t=(function(){for(var i=0;i<MstOptions["TrackCheck"][index].length;i++){if(!isUndefined(MstOptions["TrackCheck"][index][i]["track"])&&(MstOptions["TrackCheck"][index][i]["track"]+1==MstOptions["TransKey"][index]+1)){return i;}}
return MstOptions["TrackCheck"][index].length;})();var l=[];var c=[];var e=0;for(var i=0;i<t;i++){c[i]=document.createElement("input");c[i].type="checkbox";c[i].name="TrackCheck";c[i].index=index;c[i].index2=i;c[i].checked=MstOptions["TrackCheck"][index][i]["checked"];c[i].onchange=OptionChanged;var text=(!isUndefined(MstOptions["TrackCheck"][index][i]["track"])?MstOptions["TrackCheck"][index][i]["track"]:e++).toString().padStart(t.toString().length,"0");l[i]=document.createElement("label");l[i].title=(!isUndefined(MstOptions["TrackCheck"][index][i]["track"])?"Original Track ":"Additional Track ")+text;l[i].style.color=(!isUndefined(MstOptions["TrackCheck"][index][i]["track"])?Color["trackNormal"]:Color["trackEmpty"]);l[i].appendChild(c[i]);l[i].appendChild(document.createTextNode(text));}
if(t<=9){var d=document.createElement("div");for(var i=0;i<t;i++){d.appendChild(l[i]);}
a.appendChild(d);}
else if(t<=14){var d1=document.createElement("div");for(var i=0;i<9;i++){d1.appendChild(l[i]);}
a.appendChild(d1);var d2=document.createElement("div");for(var i=9;i<t;i++){d2.appendChild(l[i]);}
a.appendChild(d2);}
else{var d=[];var u=Math.ceil(t/9);for(var i=0;i<u;i++){d[i]=document.createElement("div");var m=(i+1)*9;if(m>t){m=t;}
for(var j=i*9;j<m;j++){d[i].appendChild(l[j]);}
a.appendChild(d[i]);}}}}}}
function SetTrackInsert(e){var index=e.target.index;var n=getSelected(document.getElementsByName("TrackIndex")[index]);var l=(function(){for(var j=0;j<MstOptions["TrackCheck"][index].length;j++){if(MstOptions["TrackCheck"][index][j]["track"]==n){return j;}}
return MstOptions["TrackCheck"][index].length+1;})();MstOptions["TrackCheck"][index].insert({"checked":true},l);SetTrackCheck(index);OptionChanged();}
function SetTrackRemove(e){var index=e.target.index;var n=getSelected(document.getElementsByName("TrackIndex")[index]);var l1=(function(){for(var j=0;j<MstOptions["TrackCheck"][index].length;j++){if(MstOptions["TrackCheck"][index][j]["track"]==n-1){return j+1;}}
return 0;})();var l2=(function(){for(var j=0;j<MstOptions["TrackCheck"][index].length;j++){if(MstOptions["TrackCheck"][index][j]["track"]==n){return j;}}
return MstOptions["TrackCheck"][index].length;})();var l=(function(){for(var j=l1;j<l2;j++){if(MstOptions["TrackCheck"][index][j]["checked"]){return j;}}
return(l1<l2?l1:-1);})();if(l!=-1){MstOptions["TrackCheck"][index].splice(l,1);SetTrackCheck(index);OptionChanged();}}
function SetFileList(id,list){document.getElementById(id).onchange=null;document.getElementById(id).innerHTML="";var o=[];for(var i=0;i<list.length;i++){o[i]=document.createElement("option");o[i].value=list[i]["path"];o[i].innerHTML=list[i]["path"];if(!isUndefined(list[i]["mark"])){o[i].title=list[i]["mark"];}
document.getElementById(id).appendChild(o[i]);}
document.getElementById(id).onchange=ModeChanged;}
function CheckFileTransMode(id,o){var s=document.getElementById(id);var a=false;for(var i=0;i<s.options.length;i++){var e=(s.options[i].value||"").split("|")[0];if(!e){s.options[i].style.display="";}
else if(o[e]){s.options[i].style.display="";a=true;}
else{s.options[i].style.display="none";}}
s.style.display=(a?"":"none");}
function SetSave(d,n,e,t){if(d.length==0){return;}
var a=document.getElementById("aSave");a.blob=new Blob([d],{"type":t});URL.revokeObjectURL(a.href);a.href=URL.createObjectURL(a.blob);a.download=n+(e!=""?".":"")+e;a.title=a.download+"\r\n"+d.length.toByteLength(2);document.getElementById("divSave").style.display="block";}
function SetResult(m,s,d,n,e,t){var w=(arguments.length>6?arguments[6]:false);document.getElementById("divResult").innerHTML="";switch(m){case"text":if(!d.length){if(Info.type=="bin"){document.getElementById("divOperateBin").style.display="none";alert("格式 "+Info.path+" 无需转换。");}
return;}
if(Config["ShowResult"]){var p=document.createElement("p");p.style.textAlign="left";p.style.fontSize="14px";if(w){p.style.wordWrap="break-word";}
p.innerHTML=s.toHtml().replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>");document.getElementById("divResult").appendChild(p);}
break;case"html":if(!s.length){if(Info.extension[0]=="bin"){document.getElementById("divOperateBin").style.display="none";alert("目前不支持 "+n+" 。");}
return;}
d=new Uint8Array().fromText(s);if(Config["ShowResult"]){var iframe=document.createElement("iframe");iframe.onload=function(){var c=this.contentDocument;if((this!=null)&&(c!=null)){this.style.border="none";this.style.display="block";this.width="100%";this.height=c.body.scrollHeight||480+33;var iframeWin=this.contentWindow||this.contentDocument.parentWindow;if(iframeWin.document.body){this.height=iframeWin.document.documentElement.scrollHeight||iframeWin.document.body.scrollHeight;}}};iframe.style.display="none";iframe.srcdoc=s;document.getElementById("divResult").appendChild(iframe);}
break;case"image":if(!s.length){return;}
d=new Uint8Array().fromBase64(s.split(",")[1]);if(Config["ShowResult"]){var img=document.createElement("img");img.src=s;document.getElementById("divResult").appendChild(img);}
break;}
SetSave(d,n,e,t);}
function ReadMst(){if(!Data.IsValid){return;}
document.getElementById("divOperateMst").style.display="block";Data.Choose(getSelectedIndex("selectMstList"));var g=getSelected("selectGroupMst");HideGroup("mst",g);switch(g){case"data":var m=getSelected("selectMstMode");HideOption("mst",m);if(getChecked("inputAutoApply")){if(ChangeApply["index"]){var names=(function(){var v=[];var d=document.getElementById("divSelectMstIndex");if(d&&d.childNodes&&d.childNodes[0]&&d.childNodes[0].rows){for(var i=0;i<d.childNodes[0].rows.length;i++){if(d.childNodes[0].rows[i].childNodes[1].childNodes[0].childNodes[0].childNodes[0].checked){var index=parseInt(d.childNodes[0].rows[i].childNodes[0].innerHTML);var name=d.childNodes[0].rows[i].childNodes[1].childNodes[0].childNodes[0].childNodes[1].textContent;v[index]=name;}}}
return v;})();var list=Data.GetValue("nameList");var indexes=[];for(var i=0;i<names.length;i++){var l=list.indexOf(names[i]);if(l!=-1){indexes.push(l);}}
if(indexes.length){Indexes=indexes;}
Data.Reset("all");}
if(ChangeApply["all"]){Data.Reset("all");}
else if(ChangeApply["preview"]){Data.Reset("preview");}
switch(m){case"log":var t=m;SetResult("text",Data.ToText(Indexes,m,t),Data.ToBuffer(Indexes,m,t),Info.nameCore,m,"text/plain");break;case"vos":case"bms":case"bme":case"bml":case"pms":case"msd":case"ssq":case"sm":case"sma":case"ssc":case"sdf":case"dwi":case"pt":case"ksf":case"ucs":case"dance":SetResult("text",Data.ToText(Indexes,m),Data.ToBuffer(Indexes,m),Info.nameCore,m,"text/plain");break;case"dtx":var t=(getChecked("inputMstdtxdrum")?"drum":"")+(getChecked("inputMstdtxguitar")?"guitar":"")+(getChecked("inputMstdtxbass")?"bass":"");SetResult("text",Data.ToText(Indexes,m,t),Data.ToBuffer(Indexes,m,t),Info.nameCore,m,"text/plain");break;case"tja":var t=getSelected("selectMsttjaMode");SetResult("text",Data.ToText(Indexes,m,t),Data.ToBuffer(Indexes,m,t),Info.nameCore+"["+t+"]",m,"text/plain");break;case"osu":var t=getSelected("selectMstosuMode");SetResult("text",Data.ToText(Indexes,m,t),Data.ToBuffer(Indexes,m,t),Info.nameCore+"["+t+"]",m,"text/plain");break;case"xml":var t=getSelected("selectMstxmlMode");switch(t){case"yddr":case"ydsd":SetResult("text",Data.ToText(Indexes,m,t),Data.ToBuffer(Indexes,m,t),Info.nameCore,m,"text/xml",t=="ydsd");break;case"mde":SetResult("text",Data.ToText(Indexes,m,t),Data.ToBuffer(Indexes,m,t),Info.nameCore+Info.suffixMde,m,"text/xml");break;case"dynamix":SetResult("text",Data.ToText(Indexes,m,t),Data.ToBuffer(Indexes,m,t),"_map_"+Info.nameCore+Info.suffixDynamix,m,"text/xml");break;case"qqx5":var t2=getSelected("selectMstxmlqqx5Mode");SetResult("text",Data.ToText(Indexes,m,t,t2),Data.ToBuffer(Indexes,m,t,t2),t2+"_"+Info.nameCore,m,"text/xml");break;}
break;case"vox":SetResult("text",Data.ToText(Indexes,m),Data.ToBuffer(Indexes,m),Info.nameCore,m,"text/plain");break;case"ksh":SetResult("text",Data.ToText(Indexes,m),Data.ToBuffer(Indexes,m),Info.nameCore,m,"text/plain");break;case"imd":SetResult("text",Data.ToText(Indexes,m),Data.ToBuffer(Indexes,m),Info.nameCore+Info.setParam().suffixImd,m,"application/octet-binary");break;case"mde":SetResult("text",Data.ToText(Indexes,m),Data.ToBuffer(Indexes,m),Info.nameCore+Info.suffixMde,m,"text/html",true);break;case"txt":var t=getSelected("selectMsttxtMode");switch(t){case"cytus":var v=(getChecked("inputMsttxtcytusVersion2")?"version2":"");SetResult("text",Data.ToText(Indexes,m,t,v),Data.ToBuffer(Indexes,m,t,v),Info.nameCore,m,"text/plain");break;case"cytus2":SetResult("text",Data.ToText(Indexes,m,t),Data.ToBuffer(Indexes,m,t),Info.nameCore,m,"text/json",true);break;case"musync":var v=(getChecked("inputMsttxtmusyncEncrypt")?"encrypt":"");SetResult("text",Data.ToText(Indexes,m,t,v),Data.ToBuffer(Indexes,m,t,v),Info.nameCore+Info.suffixMusync+(t?"_"+t:""),m,"text/plain",t);break;case"bangdream":SetResult("text",Data.ToText(Indexes,m,t),Data.ToBuffer(Indexes,m,t),Info.nameCore+Info.suffixBangdream,m,"text/plain",true);break;}
break;case"json":var t=getSelected("selectMstjsonMode");switch(t){case"deemo":SetResult("text",Data.ToText(Indexes,m,t),Data.ToBuffer(Indexes,m,t),Info.nameCore,m,"text/json",true);break;case"imd":SetResult("text",Data.ToText(Indexes,m,t),Data.ToBuffer(Indexes,m,t),Info.nameCore+Info.setParam().suffixImd+".imd",m,"text/json",true);break;}
break;case"mc":var t=getSelected("selectMstmcMode");SetResult("text",Data.ToText(Indexes,m,t),Data.ToBuffer(Indexes,m,t),Info.nameCore+"["+t+"]",m,"text/plain");break;case"c2s":case"aff":case"drb":case"mst":SetResult("text",Data.ToText(Indexes,m),Data.ToBuffer(Indexes,m),Info.nameCore,m,"text/plain");break;case"png":case"html":if(!SupportAPI("Canvas")){alert("当前浏览器内核不支持Canvas API。");return;}
var t=getSelected("selectMstdrawMode");switch(m){case"png":SetResult("image",Data.ToText(Indexes,m,t),new Uint8Array(),Info.nameCore+(Info.type=="imd"?Info.setParam().suffixImd:"")+(Info.type=="mde"?Info.suffixMde:""),"png","image/png");break;case"html":SetResult("html",Data.ToText(Indexes,m,t),new Uint8Array(),Info.nameCore+(Info.type=="imd"?Info.setParam().suffixImd:"")+(Info.type=="mde"?Info.suffixMde:""),"html","text/html");break;}
break;}}
break;case"file":Data.Choose(getSelectedIndex("selectMstList"));var f=new FileInfo(getSelected("selectMstList"));var n=f.name;var m=f.extension[0];SetResult("text",Data.GetInfo(),Data.GetBuffer(),n,m,"application/octet-binary");break;}}
function ReadImg(){if(!Data.IsValid){return;}
if(!SupportAPI("Canvas")){alert("当前浏览器内核不支持Canvas API。");return;}
document.getElementById("divOperateImg").style.display="block";if(SelectCount==0){var v=getImgSize(Info.buffer);var s=document.getElementById("selectImgMode");for(var i=0;i<s.children.length;i++){if(s.children[i].value==v){s.selectedIndex=i;break;}}}
var m=getSelected("selectImgMode");var t=(function(){switch(m){case"0X0":case"480X320":case"140X60":case"140X90":case"210X98":case"1024X768":return"png";break;case"500X500":case"256X256":return"jpeg";break;}})();var s=document.getElementById("selectImgMode");var n=s.options[s.selectedIndex].text;SetResult("image",Data.ToText(m,t),new Uint8Array(),Info.nameCore+new FileInfo(n).name,(t=="jpeg"?"jpg":t),"image/"+t);}
function ReadPkg(){if(!Data.IsValid){return;}
document.getElementById("divOperatePkg").style.display="block";var m=(getChecked("inputPkgAllfile")?"all":"");HideOption("pkg",m);Data.Select(getSelected("selectPkgTransMode"));if(m){SetResult("text",Data.GetInfo(m),Data.GetBuffer(m),Info.nameCore,"zip","application/octet-binary");}
else{Data.Choose(getSelectedIndex("selectPkgList"));var f=new FileInfo(getSelected("selectPkgList"));var n=f.name;var m=f.extension[0];SetResult("text",Data.GetInfo(),Data.GetBuffer(),n,m,"application/octet-binary");}}
function ReadEcd(){if(!Data.IsValid){return;}
SetResult("text",Data.ToText(),Data.ToBuffer(),Info.nameCore,(Info.extension[1]||""),"application/octet-binary",true);}
function ReadBin(){if(!Data.IsValid){return;}
document.getElementById("divOperateBin").style.display="block";HideSelect("bin",Info.type);var m=getSelected("selectBinMode");switch(m){case"bin":SetResult("text",Data.ToText(m),Data.ToBuffer(m),Info.nameCore,m,"application/octet-binary");break;case"xml":SetResult("text",Data.ToText(m),Data.ToBuffer(m),Info.nameCore,m,"text/html");break;case"html":SetResult("html",Data.ToText(m),new Uint8Array(),Info.nameCore,m,"text/html");break;case"list":var n="";var name=Info.nameCore;switch(true){case name.startsWith("mrock_song_client"):case name.startsWith("mrock_song_client_android"):n="★res_imd";break;case name.startsWith("mrock_papasong_client"):n="★res_mde";break;case name.startsWith("songlistrm_info_c"):n="★res_imd_json";break;}
SetResult("text",Data.ToText(m),Data.ToBuffer(m),n,m,"text/html");break;case"bat":var n="";var name=Info.nameCore;switch(true){case name.startsWith("mrock_song_client"):case name.startsWith("mrock_song_client_android"):n="★bat_imd";break;case name.startsWith("mrock_papasong_client"):n="★bat_mde";break;case name.startsWith("songlistrm_info_c"):n="★bat_imd_json";break;}
SetResult("text",Data.ToText(m),Data.ToBuffer(m),n,m,"text/html");break;case"json":SetResult("text",Data.ToText(m),Data.ToBuffer(m),Info.nameCore,m,"text/json");break;}}
async function ReadBuffer(){switch(Info.extension[0]){case"vos":case"bms":case"bme":case"bml":case"pms":case"dtx":case"msd":case"ssq":case"sm":case"sma":case"ssc":case"sdf":case"dwi":case"pt":case"ksf":case"ucs":case"dance":case"tja":case"ojn":case"osu":case"vox":case"ksh":case"imd":case"mde":case"txt":case"json":case"mc":case"c2s":case"aff":case"drb":case"mst":case"mid":case"wav":case"ogg":case"mp3":case"aac":case"m4a":case"m4r":Data=new Mst(Info);if(Data.IsValid){SetIndexList(Data.GetValue("nameList"));await Data.PreData();}
break;case"xml":switch(Info.type){case"yddr":case"ydsd":case"mde":case"dynamix":case"qqx5":Data=new Mst(Info);if(Data.IsValid){SetIndexList(Data.GetValue("nameList"));await Data.PreData();}
break;case"bin":Data=new Bin(Info);break;}
break;case"bmp":case"jpg":case"gif":case"png":Data=new Img(Info);if(Data.IsValid){await Data.PreData();}
break;case"zip":case"apk":case"ipa":case"osz":case"mcz":case"s3v":case"dz":case"cpk":case"acb":case"acf":case"awb":case"adx":case"hca":case"xsb":case"xwb":case"2dx":case"ojm":Data=new Pkg(Info);break;case"hex":case"base64":Data=new Ecd(Info);break;case"bin":if((Info.type=="rmwx")&&(Info.version=="set")){Data=new Pkg(Info);}
else{Data=new Bin(Info);}
break;case"js":var script=document.createElement("script");script.src="data:text/javascript;base64,"+Info.buffer.getBase64();script.type="text/javascript";script.async=true;document.getElementsByTagName("head")[0].appendChild(script);break;}}
function ReadData(){HideOperate();switch(Info.extension[0]){case"vos":case"bms":case"bme":case"bml":case"pms":case"dtx":case"msd":case"ssq":case"sm":case"sma":case"ssc":case"sdf":case"dwi":case"pt":case"ksf":case"ucs":case"dance":case"tja":case"ojn":case"osu":case"vox":case"ksh":case"imd":case"mde":case"txt":case"json":case"mc":case"c2s":case"aff":case"drb":case"mst":case"mid":case"wav":case"ogg":case"mp3":case"aac":case"m4a":case"m4r":ReadMst();break;case"xml":switch(Info.type){case"yddr":case"ydsd":case"mde":case"dynamix":case"qqx5":ReadMst();break;case"bin":ReadBin();break;}
break;case"bmp":case"jpg":case"gif":case"png":ReadImg();break;case"zip":case"apk":case"ipa":case"osz":case"mcz":case"s3v":case"dz":case"cpk":case"acb":case"acf":case"awb":case"adx":case"hca":case"xsb":case"xwb":case"2dx":case"ojm":ReadPkg();break;case"hex":case"base64":ReadEcd();break;case"bin":if((Info.type=="rmwx")&&(Info.version=="set")){ReadPkg();}
else{ReadBin();}
break;}}
function ReadInput(n,b){Info=new FileInfo(n,b);SelectCount=0;(async function(){await ReadBuffer();ReadData();})();}
function ReadBlob(n,b){if(!SupportAPI("File")){alert("当前浏览器内核不支持File API。");return;}
var r=new FileReader();r.onload=function(){ReadInput(n,new Uint8Array(this.result));};r.readAsArrayBuffer(b);}
function ReadFile(e){if(e.target.files.length){ReadBlob(e.target.files[0].name,e.target.files[0]);}}
function DragFile(e){var n=e.dataTransfer.getData("name");if(n!=""){var r=new XMLHttpRequest();r.open("GET",e.dataTransfer.getData("blob"));r.responseType="blob";r.onload=function(){document.getElementById("inputFile").value="";ReadBlob(n,r.response);};r.send();}}
function DragBlob(e){e.preventDefault();}
function DragInput(e){e.dataTransfer.setData("name",e.target.download);e.dataTransfer.setData("blob",e.target.href);}
function PasteFile(e){if(e.clipboardData.types){switch(e.clipboardData.types[0]){case"text/plain":if(e.clipboardData.items){e.clipboardData.items[0].getAsString(function(s){document.getElementById("inputFile").value="";ReadBlob("paste.txt",new Blob([new Uint8Array().fromText(s)]));});}
break;case"Files":if(e.clipboardData.items){var b=e.clipboardData.items[0].getAsFile();if(b&&(b.type.indexOf("image/")==0)){document.getElementById("inputFile").value="";ReadBlob("paste.png",b);}}
break;}}}
function OpenFile(){document.getElementById("inputFile").value="";var a=document.getElementById("aSave");ReadBlob(a.download,a.blob);}
function ReadRes(e){var input=document.createElement("input");input.type="file";input.multiple=true;input.accept=e.target.accept;input.onchange=function(e){if(e.target.files.length){var files=e.target.files;var addRes=function(b){var ext=new FileInfo(files[i].name).extension[0];if((SupportAudio.indexOf(ext)!=-1)||(SupportImage.indexOf(ext)!=-1)){res.push({"path":files[i].name,"base64":b.getBase64()});}
else if(SupportZip.indexOf(ext)!=-1){var list=new Zip(b).getList();for(var j=0;j<list.length;j++){list[j]["uncompressedBuffer"]=(list[j]["uncompressedBuffer"].length?list[j]["uncompressedBuffer"]:(list[j]["method"]==8?list[j]["compressedBuffer"].inflate():new Uint8Array()));if(list[j]["path"]&&list[j]["uncompressedBuffer"].length){var e=new FileInfo(list[j]["path"]).extension[0];if((SupportAudio.indexOf(e)!=-1)||(SupportImage.indexOf(e)!=-1)){res.push({"path":list[j]["path"],"base64":list[j]["uncompressedBuffer"].getBase64()});}}}}
i+=1;if(i<files.length){r.readAsArrayBuffer(files[i]);}
else{if(Data.IsValid){Data.AddRes(res);(async function(){await Data.PreData();ResChanged(e);})();}}};var res=[];var i=0;var r=new FileReader();r.onload=function(){addRes(new Uint8Array(this.result));};r.readAsArrayBuffer(files[i]);}};input.click();}
function ApplyChanged(e){ReadData();if(getChecked("inputAutoApply")){ChangeApply={};}}
function LockChanged(e){MstOptions["LockKey"]=CheckValue(getChecked("inputLockKey"),false);}
function ModeChanged(e){if(e.target.id=="selectMstMode"){if(!ChangeMode["png"]){var f=(function(){switch(Info.type){case"bms":case"bme":case"bml":case"pms":case"dtx":return"bms";case"tja":return"tja";case"osu":return"osu";case"imd":return"imd";case"mc":return"mc";case"aff":return"aff";case"txt":return"txt";}})();if(f){setSelected("selectMstdrawMode",f);}}}
if(e.target.id=="selectMstdrawMode"){ChangeMode["png"]=true;}
ApplyChanged(e);}
function IndexChanged(e){var sortIndex=(function(){var index=e.target.index;var t=document.getElementById("divSelectMstIndex").childNodes[0];if(e.target.checked){var c=0;var a=[];for(var i=0;i<t.rows.length;i++){if(t.rows[i].childNodes[1].childNodes[0].childNodes[0].childNodes[0].checked){c+=1;}
else{a.push([i,t.rows[i].childNodes[1].childNodes[0].childNodes[0].childNodes[0].index]);}}
for(var i=0;i<t.rows.length;i++){if(t.rows[i].childNodes[1].childNodes[0].childNodes[0].childNodes[0].index==index){t.rows[i].childNodes[1].childNodes[0].childNodes[0].childNodes[0].index=c-1;t.rows[i].childNodes[0].innerHTML=t.rows[i].childNodes[1].childNodes[0].childNodes[0].childNodes[0].index;t.rows[i].childNodes[2].innerHTML=t.rows[i].childNodes[0].innerHTML;break;}}
var s=function(a,b){return a[1]-b[1];};a=a.sort(s);for(var i=0;i<a.length;i++){t.rows[a[i][0]].childNodes[1].childNodes[0].childNodes[0].childNodes[0].index=c+i;t.rows[a[i][0]].childNodes[0].innerHTML=t.rows[a[i][0]].childNodes[1].childNodes[0].childNodes[0].childNodes[0].index;t.rows[a[i][0]].childNodes[2].innerHTML=t.rows[a[i][0]].childNodes[0].innerHTML;}}
else{for(var i=0;i<t.rows.length;i++){if(t.rows[i].childNodes[1].childNodes[0].childNodes[0].childNodes[0].index>index){t.rows[i].childNodes[1].childNodes[0].childNodes[0].childNodes[0].index-=1;t.rows[i].childNodes[0].innerHTML=t.rows[i].childNodes[1].childNodes[0].childNodes[0].childNodes[0].index;t.rows[i].childNodes[2].innerHTML=t.rows[i].childNodes[0].innerHTML;}
else if(t.rows[i].childNodes[1].childNodes[0].childNodes[0].childNodes[0].index==index){t.rows[i].childNodes[1].childNodes[0].childNodes[0].childNodes[0].index=t.rows.length-1;t.rows[i].childNodes[0].innerHTML=t.rows[i].childNodes[1].childNodes[0].childNodes[0].childNodes[0].index;t.rows[i].childNodes[2].innerHTML=t.rows[i].childNodes[0].innerHTML;}}}})();ChangeApply["index"]=true;ApplyChanged(e);}
function OptionChanged(e){if(e){if(e.currentTarget.name&&!isUndefined(e.currentTarget.index)){MstOptions[e.currentTarget.name]=MstOptions[e.currentTarget.name]||[];switch(e.currentTarget.tagName.toLowerCase()){case"input":MstOptions[e.currentTarget.name]=MstOptions[e.currentTarget.name]||[];if(e.currentTarget.name=="TrackCheck"){MstOptions[e.currentTarget.name][e.currentTarget.index]=MstOptions[e.currentTarget.name][e.currentTarget.index]||[];MstOptions[e.currentTarget.name][e.currentTarget.index][e.currentTarget.index2]["checked"]=e.currentTarget.checked;}
else{MstOptions[e.currentTarget.name][e.currentTarget.index]=e.currentTarget.checked;}
break;case"select":MstOptions[e.currentTarget.name][e.currentTarget.index]=Number(e.currentTarget.options[e.currentTarget.selectedIndex].value);break;}}
switch(e.currentTarget.name){case"TransKey":SetTransKey(e.currentTarget.index);break;}}
ChangeApply["all"]=true;ApplyChanged(e);}
function DrawChanged(e){if(e.currentTarget.id){switch(e.currentTarget.tagName.toLowerCase()){case"input":MstOptions[e.currentTarget.id.slice(5)]=e.currentTarget.checked;break;case"select":MstOptions[e.currentTarget.id.slice(6)]=e.currentTarget.options[e.currentTarget.selectedIndex].value;break;}}
ChangeApply["preview"]=true;ApplyChanged(e);}
function ResChanged(e){ChangeApply["all"]=true;ApplyChanged(e);}
function SelectChanged(e){SelectCount+=1;ReadData();}
function KeyChange(e){if(e.type=="keyup"){switch(e.key){case"Shift":Config["ShowResult"]=!Config["ShowResult"];UpdateConfig();break;}}}
function UpdateLink(){var loadLink=function(id,url){var a=document.createElement("a");a.href=url;a.target="_blank";a.innerHTML=document.getElementById(id).innerHTML;a.style.textDecoration="none";a.style.color=Color["fontColor"];document.getElementById(id).innerHTML="";document.getElementById(id).appendChild(a);};loadLink("divTitle","http://shang.qq.com/wpa/qunwpa?idkey=73a1de166e06a6c8a9a3856ef18bec30bfe9036ca3b7cee2fa537edd5ebf2d20");loadLink("divCopyright","http://wpa.qq.com/msgrd?v=3&uin=308973930&site=rmstZ_"+Version+".html&menu=yes");}
function UpdateAccept(){var loadAccept=function(id,d,m){var v=[];for(var i=0;i<m.length;i++){v.push("★"+m[i].map(function(a){return"."+a}).join(","));}
v=v.join("\r\n");document.getElementById(id).title=d+"\r\n"+v;document.getElementById(id).accept=(IncludeAgent("QQ")?"":v.replace(/★/g,"").replace(/\r\n/g,","));};loadAccept("inputFile","Load File",[["vos","bms","bme","bml","pms","dtx","msd","ssq","sm","sma","ssc","sdf","dwi","pt","ksf","ucs","dance","tja","ojn","osu","xml","vox","ksh","imd","mde","txt","json","mc","c2s","aff","drb","mst"],["mid"],SupportAudio,SupportImage,SupportZip,["s3v","dz","cpk","acb","acf","awb","adx","hca","xsb","xwb","2dx","ojm"],["hex","base64"],["bin"],["js"]]);loadAccept("inputResMst","Add Res",[SupportAudio,SupportImage,SupportZip]);}
function UpdateConfig(){var t=[];for(var n in Config){t.push(n+": "+Config[n]);}
document.getElementById("divTitle").title=t.join("");document.getElementById("divTitle").childNodes[0].style.color=(Config["ShowResult"]?Color["fontColor"]:Color["titleSwitch"]);}
function StartPress(e){switch(e.target.id){case"inputFile":e.target.pressEvent=setTimeout(function(){var m={"inputFile":["inputResMst","aOpen"]};if(m[e.target.id]){for(var i=0;i<m[e.target.id].length;i++){var switchId=m[e.target.id][i];switch(switchId){case"inputResMst":case"aOpen":document.getElementById(switchId).style.display=(document.getElementById(switchId).style.display=="block"?"none":"block");break;}}
e.target.pressEvent=-1;}},1000);break;}}
function StopPress(e){if(e.target.pressEvent>0){switch(e.target.id){case"inputFile":clearTimeout(e.target.pressEvent);e.target.pressEvent=0;break;}}
else if(e.target.pressEvent<0){e.preventDefault();}}
function Initialize(){var LoadLabel=(function(){var loadText=function(id,text){document.getElementById(id).innerHTML=text;}
loadText("divTitle","rmstZ");loadText("divCopyright","Copyright © 心のsky Group");})();var LoadConfig=(function(){UpdateLink();UpdateAccept();UpdateConfig();})();var LoadUrlParameter=(function(){var s=location.search.slice(1).split("&");for(var i=0;i<s.length;i++){var a=s[i].split("=");if(a.length==2){switch(a[0].toLowerCase()){case"help":var m=(function(){var r="";var helphelp="\r\n<help>\r\n　[bgcolor]　Help of bgcolor\r\n　[show]　Help of show\r\n　[check]　Help of check\r\n　[default]　Help of default\r\n　[input]　Help of input\r\n　[all]　Help above all\r\n";var helpbgcolor="\r\n<bgcolor>\r\n　[#rrggbbaa]　RGBA Hex\r\n";var helpshow="\r\n<show>\r\n　[version]　Version\r\n　[bgcolor]　BackgroundColor\r\n";var helpcheck="\r\n<check>\r\n　[le]　LittleEndian\r\n　[api]　SupportAPI\r\n　[agent]　UserAgent\r\n";var helpdefault="\r\n<default>\r\n　Trans Option\r\n　{autoapply}　[true] or [false]\r\n　{lockkey}　[true] or [false]\r\n\r\n　Trans Mode Select\r\n　{modemst}　[bms] or [bme] or [bml] or [pms] or [dtx] or [msd] or [sm] or [sma] or [ssc] or [dwi] or [ksf] or [ucs] or [dance] or [tja] or [osu] or [xml] or [vox] or [ksh] or [imd] or [mde] or [txt] or [json] or [mc] or [c2s] or [aff] or [drb] or [mst] or [png] or [html]\r\n　{modemstdtxdrum}　[true] or [false]\r\n　{modemstdtxguitar}　[true] or [false]\r\n　{modemstdtxbass}　[true] or [false]\r\n　{modemsttja}　[taiko] or [jube]\r\n　{modemstosu}　[osu] or [taiko] or [ctb] or [mania]\r\n　{modemstxml}　[yddr] or [ydsd] or [mde] or [dynamix] or [qqx5]\r\n　{modemstxmlqqx5}　[idol] or [crescent] or [pinball] or [classic] or [bubble]\r\n　{modemsttxt}　[cytus] or [cytus2] or [musync] or [bangdream]\r\n　{modemsttxtcytusversion2}　[true] or [false]\r\n　{modemsttxtmusyncencrypt}　[true] or [false]\r\n　{modemstjson}　[deemo] or [imd]\r\n　{modemstmc}　[key] or [step] or [dj] or [catch] or [pad] or [taiko] or [ring] or [slide]\r\n　{modemstdraw}　[bms] or [osu] or [imd] or [mc] or [aff]\r\n　{modeimg}　[480X320] or [140X60] or [140X90] or [210X98] or [1024X768]\r\n　{modebin}　[bin] or [xml] or [html] or [json] or [list] or [bat]\r\n\r\n　Change Option\r\n　{xaxisremove}　[true] or [false]\r\n　{yaxisremove}　[true] or [false]\r\n　{zaxisremove}　[true] or [false]\r\n　{xaxisextend}　[true] or [false]\r\n　{yaxisextend}　[true] or [false]\r\n　{zaxisextend}　[true] or [false]\r\n　{invisiblekeyremove}　[true] or [false]\r\n　{invalidkeyremove}　[true] or [false]\r\n　{fakekeyremove}　[true] or [false]\r\n　{damagekeyremove}　[true] or [false]\r\n　{flowremove}　[true] or [false]\r\n　{transformremove}　[true] or [false]\r\n　{transkey}　[1] to [18]\r\n　{trackcheck}　[add] or [false]\r\n　{correcttime}　[0] or [1] or [2] or [3] or [4] or [6] or [8] or [12] or [16] or [24] or [32] or [48] or [64] or [72] or [128] or [192]\r\n　{changeflow}　[0.2] or [0.33] or [0.5] or [1] or [2] or [3] or [5]\r\n　{changespeed}　[0.2] or [0.33] or [0.5] or [1] or [2] or [3] or [5]\r\n　{mirrortrack}　[true] or [false]\r\n　{randomtrack}　[true] or [false]\r\n　{randomnote}　[true] or [false]\r\n　{noflowbackward}　[true] or [false]\r\n　{noflowstop}　[true] or [false]\r\n　{linksingle}　[true] or [false]\r\n　{linklong}　[true] or [false]\r\n　{linkslide}　[true] or [false]\r\n　{transoblique}　[true] or [false]\r\n　{nooblique}　[true] or [false]\r\n　{noslide}　[true] or [false]\r\n　{nolong}　[true] or [false]\r\n　{nosingle}　[true] or [false]\r\n　{xtracknointersect}　[true] or [false]\r\n　{ytracknointersect}　[true] or [false]\r\n　{ztracknointersect}　[true] or [false]\r\n　{xaxisnocross}　[true] or [false]\r\n　{yaxisnocross}　[true] or [false]\r\n　{zaxisnocross}　[true] or [false]\r\n\r\n　To Preview Parameter\r\n　{drawbackground}　[true] or [false]\r\n　{drawtrack}　[true] or [false]\r\n　{drawframe}　[true] or [false]\r\n　{drawstartendLine}　[true] or [false]\r\n　{drawbeatline}　[true] or [false]\r\n　{drawnoteline}　[true] or [false]\r\n　{drawbeatdata}　[true] or [false]\r\n　{drawnotedatacombo}　[true] or [false]\r\n　{draweffectdatabgm}　[true] or [false]\r\n　{draweffectdatase}　[true] or [false]\r\n　{drawstatusdata}　[true] or [false]\r\n　{drawtransformdata}　[true] or [false]\r\n　{drawtime}　[true] or [false]\r\n　{drawbeat}　[true] or [false]\r\n　{drawnote}　[true] or [false]\r\n　{drawtimedomain}　[true] or [false]\r\n　{drawfrequencydomain}　[true] or [false]\r\n\r\n　To Preview Html Parameter\r\n　{drawscalex}　[1] or [2.5] or [5] or [7.5]\r\n　{drawscaley}　[1] to [4]\r\n";var helpinput="\r\n<input>\r\n　[filename.ext|filebufferbase64string]　Input File Info\r\n";var helpkey="\r\n<key>\r\n　[module|key]　Module Key Info\r\n";var v=a[1].split(",");for(var j=0;j<v.length;j++){switch(v[j].toLowerCase()){case"help":r+=helphelp;break;case"bgcolor":r+=helpbgcolor;break;case"show":r+=helpshow;break;case"check":r+=helpcheck;break;case"default":r+=helpdefault;break;case"input":r+=helpinput;break;case"key":r+=helpkey;break;case"all":return helphelp+helpbgcolor+helpshow+helpcheck+helpdefault+helpinput+helpkey;break;}}
return r;})();document.write(("【"+a[0]+"】\r\n\r\nexpurl/rmstZ.html?key1=value1&key2=value2,value3|value4&key3=name1:value5,value6;name2:value7|value8\r\n\r\n<key>　{name}　[value]　explain\r\n"+m).toHtml().replace(/\r\n/g,"</br>"))
break;case"bgcolor":var v=a[1].split(",");var c=v[v.length-1].slice(0,8).padEnd(8,"0");if(c.isHex()){var a=parseInt(c.slice(0,2),16)/256;var r=parseInt(c.slice(2,4),16);var g=parseInt(c.slice(4,6),16);var b=parseInt(c.slice(6,8),16);document.body.style.backgroundColor="rgba("+r+", "+g+", "+b+", "+a+")";}
break;case"show":var m=(function(){var r="";var showversion="\r\nVersion："+Version+"\r\n";var showbgcolor="\r\nBgColor："+(document.body.style.backgroundColor==""?"rgb(255, 255, 255)":document.body.style.backgroundColor)+"\r\n";var v=a[1].split(",");for(var j=0;j<v.length;j++){switch(v[j].toLowerCase()){case"version":r+=showversion;break;case"bgcolor":r+=showbgcolor;break;case"all":return showversion+showbgcolor;break;}}
return r;})();alert("【"+a[0]+"】\r\n"+m);break;case"check":var m=(function(){var r="";var checkle="\r\nLittleEndian："+LittleEndian+"\r\n";var checkapi=(function(){var n=["File","TypedArrays","Canvas","Audio","MIDI","UserMedia","Gamepads"];var m=[];for(var k=0;k<n.length;k++){m.push("\r\nSupport"+n[k]+"API："+SupportAPI(n[k]));}
return m.join("")+"\r\n";})();var checkagent=(function(){var n=["MSIE","Mozilla","Chrome","AppleWebKit","Safari","Mobile Safari","UCBrowser","QQ","MicroMessenger"];var m=[];for(var k=0;k<n.length;k++){m.push("\r\nInclude"+n[k].replace(/\ /g,"")+"Agent："+IncludeAgent(n[k]));}
return m.join("")+"\r\n";})();var v=a[1].split(",");for(var j=0;j<v.length;j++){switch(v[j].toLowerCase()){case"le":r+=checkle;break;case"api":r+=checkapi;break;case"agent":r+=checkagent;break;case"all":return checkle+checkapi+checkagent;break;}}
return r;})();alert("【"+a[0]+"】\r\n"+m);break;case"default":var v=a[1].split(";");for(var j=0;j<v.length;j++){var c=v[j].split(":");if(c.length==2){switch(c[0].toLowerCase()){case"modemst":case"modemstxml":case"modemstxmlqqx5":case"modemsttja":case"modemstosu":case"modemstmc":case"modemstdraw":case"transkey":case"correcttime":case"changespeed":case"changeflow":case"drawscalex":case"drawscaley":case"modeimg":case"modebin":var m={"modemst":"selectMstMode","modemstxml":"selectMstxmlMode","modemstxmlqqx5":"selectMstxmlqqx5Mode","modemsttja":"selectMsttjaMode","modemstosu":"selectMstosuMode","modemstmc":"selectMstmcMode","modemstdraw":"selectMstdrawMode","transkey":"selectTransKey","correcttime":"selectCorrectTime","changeflow":"selectChangeFlow","changespeed":"selectChangeSpeed","drawscalex":"selectDrawScaleX","drawscaley":"selectDrawScaleY","modeimg":"selectImgMode","modebin":"selectBinMode"};if(typeof m[c[0]]!=="undefined"){var l=c[1].split("|");for(var k=0;k<l.length;k++){setSelected(m[c[0]],l[k]);}}
break;case"autoapply":case"lockkey":case"modemstdtxdrum":case"modemstdtxguitar":case"modemstdtxbass":case"modemsttxtcytusversion2":case"modemsttxtmusyncencrypt":case"xaxisremove":case"yaxisremove":case"zaxisremove":case"xaxisextend":case"yaxisextend":case"zaxisextend":case"invisiblekeyremove":case"invalidkeyremove":case"fakekeyremove":case"damagekeyremove":case"flowremove":case"transformremove":case"mirrortrack":case"randomtrack":case"randomnote":case"noflowbackward":case"noflowstop":case"linksingle":case"linklong":case"linkslide":case"transoblique":case"nooblique":case"noslide":case"nolong":case"nosingle":case"xtracknointersect":case"ytracknointersect":case"ztracknointersect":case"xaxisnocross":case"yaxisnocross":case"zaxisnocross":case"drawbackground":case"drawtrack":case"drawframe":case"drawstartendLine":case"drawbeatline":case"drawnoteLine":case"drawbeatdata":case"drawnotedatacombo":case"draweffectdatabgm":case"draweffectdatase":case"drawstatusdata":case"drawtransformdata":case"drawtime":case"drawbeat":case"drawnote":case"drawtimedomain":case"drawfrequencydomain":var m={"autoapply":"inputAutoApply","lockkey":"inputLockKey","modemstdtxdrum":"inputMstdtxdrum","modemstdtxguitar":"inputMstdtxguitar","modemstdtxbass":"inputMstdtxbass","modemsttxtcytusversion2":"inputMsttxtcytusVersion2","modemsttxtmusyncencrypt":"inputMsttxtmusyncEncrypt","xaxisremove":"inputXAxisRemove","yaxisremove":"inputYAxisRemove","zaxisremove":"inputZAxisRemove","xaxisextend":"inputXAxisExtend","yaxisextend":"inputYAxisExtend","zaxisextend":"inputZAxisExtend","invisiblekeyremove":"inputInvisibleKeyRemove","invalidkeyremove":"inputInvalidKeyRemove","fakekeyremove":"inputFakeKeyRemove","damagekeyremove":"inputDamageKeyRemove","flowremove":"inputFlowRemove","transformremove":"inputTransformRemove","mirrortrack":"inputMirrorTrack","randomtrack":"inputRandomTrack","randomnote":"inputRandomNote","noflowbackward":"inputNoFlowBackward","noflowstop":"inputNoFlowStop","linksingle":"inputLinkSingle","linklong":"inputLinkLong","linkslide":"inputLinkSlide","transoblique":"inputTransOblique","nooblique":"inputNoOblique","noslide":"inputNoSlide","nolong":"inputNoLong","nosingle":"inputNoSingle","xtracknointersect":"inputXTrackNoIntersect","ytracknointersect":"inputYTrackNoIntersect","ztracknointersect":"inputZTrackNoIntersect","xaxisnocross":"inputXAxisNoCross","yaxisnocross":"inputYAxisNoCross","zaxisnocross":"inputZAxisNoCross","drawbackground":"inputDrawBackground","drawtrack":"inputDrawTrack","drawframe":"inputDrawFrame","drawstartendLine":"inputDrawStartEndLine","drawbeatline":"inputDrawBeatline","drawnoteline":"inputDrawNoteline","drawbeatdata":"inputDrawBeatData","drawnotedatacombo":"inputDrawNoteDataCombo","draweffectdatabgm":"inputDrawEffectDataBGM","draweffectdatase":"inputDrawEffectDataSE","drawstatusdata":"inputDrawStatusData","drawtransformdata":"inputDrawTransformData","drawtime":"inputDrawTime","drawbeat":"inputDrawBeat","drawnote":"inputDrawNote","drawtimedomain":"inputDrawTimeDomain","drawfrequencydomain":"inputDrawFrequencyDomain"};if(typeof m[c[0]]!=="undefined"){var l=c[1].split("|");for(var k=0;k<l.length;k++){l[k]=l[k].toLowerCase();if(l[k]=="true"){setChecked(m[c[0]],true);break;}
else if(l[k]=="false"){setChecked(m[c[0]],false);break;}}}
break;case"trackcheck":c[1].split("|").forEach(function(a,index){var l=a.split(",");var tc=[];var n=0;for(var k=0;k<l.length;k++){l[k]=l[k].toLowerCase();switch(l[k]){case"add":tc.push({"checked":true});break;case"false":tc.push({"track":n++,"checked":false});break;default:tc.push({"track":n++,"checked":true});break;}}
MstOptions["TrackCheck"][index]=tc;});break;}}}
break;case"input":var v=a[1].split(",");for(var j=0;j<v.length;j++){var f=v[j].split("|");if((f.length==2)&&(j==0)){ReadInput(f[0],new Uint8Array().fromBase64(f[1]));}}
break;case"key":var v=a[1].split(",");for(var j=0;j<v.length;j++){var c=v[j].split(":");if(c.length==2){var module=c[0].toLowerCase();switch(module){case"wave":Module.set(module,c[1]);break;}}}
break;}}}})();var addEvent=(function(){window.onpaste=PasteFile;window.onkeydown=KeyChange;window.onkeyup=KeyChange;document.getElementById("inputFile").onchange=ReadFile;document.getElementById("inputFile").ondragover=DragBlob;document.getElementById("inputFile").ondrop=DragFile;document.getElementById("inputFile").onmousedown=StartPress;document.getElementById("inputFile").ontouchstart=StartPress;document.getElementById("inputFile").onmouseout=StopPress;document.getElementById("inputFile").ontouchmove=StopPress;document.getElementById("inputFile").ontouchend=StopPress;document.getElementById("inputFile").ontouchcancel=StopPress;document.getElementById("inputFile").onclick=StopPress;document.getElementById("inputResMst").onclick=ReadRes;document.getElementById("selectGroupMst").onchange=SelectChanged;document.getElementById("inputAutoApply").onchange=ApplyChanged;document.getElementById("inputLockKey").onchange=LockChanged;document.getElementById("selectMstMode").onchange=ModeChanged;document.getElementById("selectMsttjaMode").onchange=ModeChanged;document.getElementById("selectMstosuMode").onchange=ModeChanged;document.getElementById("selectMstxmlMode").onchange=ModeChanged;document.getElementById("selectMstxmlqqx5Mode").onchange=ModeChanged;document.getElementById("selectMsttxtMode").onchange=ModeChanged;document.getElementById("inputMstdtxdrum").onchange=ModeChanged;document.getElementById("inputMstdtxguitar").onchange=ModeChanged;document.getElementById("inputMstdtxbass").onchange=ModeChanged;document.getElementById("inputMsttxtcytusVersion2").onchange=ModeChanged;document.getElementById("inputMsttxtmusyncEncrypt").onchange=ModeChanged;document.getElementById("selectMstjsonMode").onchange=ModeChanged;document.getElementById("selectMstmcMode").onchange=ModeChanged;document.getElementById("selectMstdrawMode").onchange=ModeChanged;document.getElementById("inputDrawBackground").onchange=DrawChanged;document.getElementById("inputDrawTrack").onchange=DrawChanged;document.getElementById("inputDrawFrame").onchange=DrawChanged;document.getElementById("inputDrawStartEndLine").onchange=DrawChanged;document.getElementById("inputDrawBeatline").onchange=DrawChanged;document.getElementById("inputDrawNoteline").onchange=DrawChanged;document.getElementById("inputDrawBeatData").onchange=DrawChanged;document.getElementById("inputDrawNoteDataCombo").onchange=DrawChanged;document.getElementById("inputDrawEffectDataBGM").onchange=DrawChanged;document.getElementById("inputDrawEffectDataSE").onchange=DrawChanged;document.getElementById("inputDrawStatusData").onchange=DrawChanged;document.getElementById("inputDrawTransformData").onchange=DrawChanged;document.getElementById("inputDrawTime").onchange=DrawChanged;document.getElementById("inputDrawBeat").onchange=DrawChanged;document.getElementById("inputDrawNote").onchange=DrawChanged;document.getElementById("inputDrawTimeDomain").onchange=DrawChanged;document.getElementById("inputDrawFrequencyDomain").onchange=DrawChanged;document.getElementById("selectDrawScaleX").onchange=DrawChanged;document.getElementById("selectDrawScaleY").onchange=DrawChanged;document.getElementById("selectMstList").onchange=SelectChanged;document.getElementById("selectImgMode").onchange=SelectChanged;document.getElementById("selectBinMode").onchange=SelectChanged;document.getElementById("inputPkgAllfile").onchange=SelectChanged;document.getElementById("selectPkgTransMode").onchange=SelectChanged;document.getElementById("selectPkgList").onchange=SelectChanged;document.getElementById("aOpen").onclick=OpenFile;document.getElementById("aSave").ondragstart=DragInput;})();var loadAddin=(function(){var script=document.createElement("script");script.src="addin.js";script.type="text/javascript";script.async=true;document.getElementsByTagName("head")[0].appendChild(script);})();}
window.onload=Initialize;</script></body></html>